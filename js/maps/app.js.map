{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","default","opponents","map","_constants","gridSubDiv","forEach","enemy","startingZ","this","player","minions","minion","spawnIndex","spawnValue","values","val","index","../modules/constants","2","Math","floor","random","3","friendlies","spawnPos","startingPos","friendlyMap","m","row","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","idx","unique","fullIdxArr","slice","gaps","filter","indexOf","arrayToUse","gridWidth","Array","prototype","self","4","_interopRequireDefault","obj","__esModule","render","timestamp","requestAnimationFrame","gameView","renderLoop","globals","renderer","scene","camera","performance","rendererStats","update","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","gameEngine","_setupScreenView","setupScreenView","setupPerformance","./modules/game-engine","./modules/game-view","./modules/view","5","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_smartAi","_smartAi2","_defensiveAi","_defensiveAi2","_randomAi","_randomAi2","AI","args","smartAI","defensiveAI","randomAI","determineAIFunction","personality","spawnInterval","lastUpgrade","upgradeInterval","lastSpawn","poppulationLimit","canUpgrade","applyUpgrades","checkUpgrades","canSpawn","AIFunction","spawnMinion","upgrades","canUpgradeBaseHealth","name","cost","getBaseHealthUpgradeCost","canUpgradeMinionHealth","getMinionHealthUpgradeCost","canUpgradeMinionAttack","getMinionAttackUpgradeCost","canUpgradeMinionAttackSpeed","getMinionAttackSpeedUpgradeCost","canUpgradeWizardAttack","getWizardAttackUpgradeCost","canUpgradeWizardAttackSpeed","getWizardAttackSpeedUpgradeCost","_this","upgrade","money","apply","../ai/defensive-ai","../ai/random-ai","../ai/smart-ai","./constants","6","_constants2","Archer","playerId","id","colliderList","direction","startingY","startingX","targetList","arrows","startingRotation","_90deg","PI","_135deg","animationProperties","arm","startingAngle","endingAngle","angleDifference","speedDown","speedUp","lastAnimate","arrowSpeed","attackProperties","lastAttack","textureLoader","THREE","TextureLoader","attackSpeed","archer","baseAttackSpeed","baseArrowSpeed","attackStrength","baseAttack","arrowId","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","Group","bodyG","BoxGeometry","bodyMat","MeshBasicMaterial","color","body","Mesh","hitBoxG","material","transparent","opacity","depthWrite","hitBox","userData","object","ranged","add","position","set","geometry","computeBoundingBox","box3","boundingBox","clone","collider","THREEx","ColliderBox3","addEventListener","otherCollider","object3d","immuneToRange","findColliderIndex","splice","determineTarget","removeTarget","initiateAttack","recharging","_this2","canAttack","nextTarget","callback","health","getAttackValue","processReward","killReward","attack","destroy","_this3","texture","load","SphericalRefractionMapping","arrowG","SphereGeometry","arrowMat","MeshPhongMaterial","emissive","faceVertexUvs","uvs","face","faces","j","vertexNormals","y","arrow","max","endingY","y_1","y_2","y_3","b","c","yFunction","delta","initialDistanceX","distanceTargetWillTravelX","speed","m_x","console","log","c_x","xFunction","m_z","z","c_z","zFunction","startingTime","setTimeout","remove","_this4","rotation","rightArm","timeRatio","degreeChange","spawnArrow","resetAttackAnimation","_delta","_timeRatio","_degreeChange","angleTowardsTarget","calculateAngleToTarget","bodyModel","xDiff","zDiff","diffRatio","atan","attackProcedure","animateArrows","animateAttack","7","Base","baseWidth","baseHeight","baseDepth","maxHealth","hitBoxBuffer","score","shapeGeometry","normalMap","longTexture","skinnyTexture","sideTexture","wrapS","wrapT","RepeatWrapping","repeat","skinnyMat","specular","shininess","normalScale","Vector2","longMat","sideMat","shapeMaterials","shapeMesh","MultiMaterial","hitGeometry","hitMaterial","hitMesh","healthBar","initializeHealthBar","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","updateHealthBar","8","xPositive","xNegative","baseHealth","amount","base","9","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","gameOver","state","colliderSystem","ColliderSystem","initializePlayers","myPlayer","type","computer","playerAI","players","_ref","winner","p","setGameOver","activateMenu","pop","reset","runLoop","lost","find","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","10","scoreText","moneyText","poppulationText","baseHealthText","minionBaseHealthText","minionBaseAttackText","minionBaseAttackSpeedText","archerBaseAttackText","archerBaseAttackSpeedText","baseHealthUpgrade","minionBaseHealthUpgrade","minionBaseAttackUpgrade","minionBaseAttackSpeedUpgrade","archerBaseAttackUpgrade","archerBaseAttackSpeedUpgrade","planeTexture","GameView","setupGrid","setupGrassField","setupLight","mouse","positionScale","lookAt","hud","document","getElementById","hudUpgrade","lastTimeStamp","started","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","plane","anisotropy","getMaxAnisotropy","rotateX","setFromCamera","planes","intersects","intersectObjects","panel","setHex","window","evt","event","clientX","innerWidth","clientY","innerHeight","restart","classList","initializeUpgradeButtons","initializeHudTexts","getCurrentPanelIndex","round","textContent","poppulationCap","toFixed","minionBaseHealth","minionBaseAttack","minionBaseAttackSpeed","archerBaseAttack","archerBaseAttackSpeed","checkGridIntersections","gameLoop","updateUI","upgradeBaseHealth","upgradeMinionHealth","upgradeMinionAttack","upgradeMinionAttackSpeed","upgradeWizardAttack","upgradeWizardAttackSpeed","11","activateStartScreen","startSection","restartSection","activateRestartScreen","text","restartModalMessage","modal","closeMenu","startButton","startFirstGame","restartButton","12","Minion","healthUpgrade","attackUpgrade","attackSpeedUpgrade","defaultSpeed","attackTime","attackAnimationProperties","walkingAnimationProperties","time","rotObjectMatrix","dispose","currentTarget","resetWalkAnimation","walkProcedure","attackLoop","children","currentAttackTime","animationSpeed","min","walkLoop","animateWalk","legs","leftLeg","rightLeg","animateLegForward","animateLegBack","toDegrees","leg","maxRotation","toRadians","angleRadians","angleDegrees","13","_minion","_minion2","_archer","_archer2","_base","_base2","Player","minionId","setUpgradeValues","loader","ObjectLoader","setupGameState","spawnBase","spawnArchers","archers","minionCost","reward","keys","destroyBase","destroyMinion","removeEventListener","_this5","./archer","./base","./minion","14","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","shadowMapEnabled","shadowMapType","PCFSoftShadowMap","appendChild","domElement","RendererStats","style","left","bottom"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents) {\n  var map = {};\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    map[i] = 0;\n  }\n\n  opponents.forEach(function (enemy) {\n    map[enemy.startingZ]--;\n  });\n\n  this.player.minions.forEach(function (minion) {\n    map[minion.startingZ]++;\n  });\n\n  var spawnIndex = -1;\n  var spawnValue = 100000;\n  Object.values(map).forEach(function (val, index) {\n    if (val < spawnValue) {\n      spawnValue = val;\n      spawnIndex = index;\n    }\n  });\n\n  return spawnIndex;\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (opponents) {\n    return Math.floor(Math.random() * _constants.gridSubDiv);\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents, friendlies, spawnPos) {\n  var startingPos = spawnPos;\n\n  var friendlyMap = friendlies.map(function (m) {\n    return {\n      row: m.startingZ,\n      distance: m.getPosition().x - startingPos\n    };\n  });\n\n  var opponentMap = opponents.map(function (m) {\n\n    var distance = startingPos - m.getPosition().x;\n    return {\n      row: m.startingZ,\n      distance: distance\n    };\n  });\n\n  var rowArray = [];\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    rowArray.push(i);\n  }\n\n  var decision = {\n    hasFriendlies: [],\n    closestIndex: -1,\n    closestVal: 99999,\n    distanceTies: []\n\n  };\n\n  friendlyMap.forEach(function (val, idx) {\n    decision.hasFriendlies.push(val.row);\n  });\n\n  opponentMap.forEach(function (val, idx) {\n    if (val.distance < decision.closestVal) {\n      decision.closestIndex = val.row;\n      decision.closestVal = val.distance;\n\n      if (decision.distanceTies.length > 0) {\n        decision.distanceTies.length = 0;\n      }\n    } else if (val.distance === decision.closestVal) {\n      decision.distanceTies.push(val.row);\n    }\n  });\n\n  decision.distanceTies.push(decision.closestIndex);\n  decision.hasFriendlies = decision.hasFriendlies.unique();\n\n  var fullIdxArr = rowArray.slice(0);\n\n  decision.gaps = fullIdxArr.filter(function (x) {\n    return decision.hasFriendlies.indexOf(x) < 0;\n  });\n\n  //if(friendlies.length > 3) {\n  //friendlies[2].viewObj.position.z += 1;\n  //}\n\n\n  var arrayToUse = void 0;\n  if (decision.closestVal < _constants.gridWidth / 2) {\n    arrayToUse = decision.distanceTies;\n  } else {\n    arrayToUse = decision.gaps;\n  }\n\n  var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n  return arrayToUse[arrIdx];\n};\n\nvar _constants = require('../modules/constants');\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\n},{\"../modules/constants\":8}],4:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\nvar rendererStats = void 0;\nvar performance = true;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  if (performance) {\n    rendererStats = (0, _view.setupPerformance)();\n  }\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  if (performance) {\n    rendererStats.update(globals.renderer);\n  }\n}\n\ninit();\n\n},{\"./modules/game-engine\":9,\"./modules/game-view\":10,\"./modules/view\":14}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _smartAi = require('../ai/smart-ai');\n\nvar _smartAi2 = _interopRequireDefault(_smartAi);\n\nvar _defensiveAi = require('../ai/defensive-ai');\n\nvar _defensiveAi2 = _interopRequireDefault(_defensiveAi);\n\nvar _randomAi = require('../ai/random-ai');\n\nvar _randomAi2 = _interopRequireDefault(_randomAi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.smartAI = _smartAi2.default;\n    this.defensiveAI = _defensiveAi2.default;\n    this.randomAI = _randomAi2.default;\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 325;\n    this.lastUpgrade = 0;\n    this.upgradeInterval = 1500;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 30;\n  }\n\n  _createClass(AI, [{\n    key: 'canSpawn',\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval && this.player.minions.length < this.poppulationLimit;\n    }\n  }, {\n    key: 'canUpgrade',\n    value: function canUpgrade(timestamp) {\n      return timestamp - this.lastUpgrade > this.upgradeInterval;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp, opponents) {\n      if (this.canUpgrade(timestamp)) {\n        this.applyUpgrades(this.checkUpgrades());\n        this.lastUpgrade = timestamp;\n      }\n\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions, this.player.spawnPos);\n\n      if (spawnIndex >= 0) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: 'determineAIFunction',\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n\n    //check all upgradeCosts to see if any can be upgrades returns a list of what can be upgraded and their cost\n\n  }, {\n    key: 'checkUpgrades',\n    value: function checkUpgrades() {\n      var upgrades = [];\n\n      if (this.player.canUpgradeBaseHealth()) {\n        upgrades.push({ name: \"upgradeBaseHealth\", cost: this.player.getBaseHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionHealth()) {\n        upgrades.push({ name: \"upgradeMinionHealth\", cost: this.player.getMinionHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttack()) {\n        upgrades.push({ name: \"upgradeMinionAttack\", cost: this.player.getMinionAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttackSpeed()) {\n        upgrades.push({ name: \"upgradeMinionAttackSpeed\", cost: this.player.getMinionAttackSpeedUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttack()) {\n        upgrades.push({ name: \"upgradeWizardAttack\", cost: this.player.getWizardAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttackSpeed()) {\n        upgrades.push({ name: \"upgradeWizardAttackSpeed\", cost: this.player.getWizardAttackSpeedUpgradeCost() });\n      }\n\n      return upgrades;\n    }\n  }, {\n    key: 'applyUpgrades',\n    value: function applyUpgrades(upgrades) {\n      var _this = this;\n\n      upgrades.forEach(function (upgrade) {\n        if (_this.player.money / 1.5 > upgrade.cost && _this.player.money > 750) {\n          var fn = _this.player[upgrade.name];\n          fn.apply(_this.player);\n        }\n      });\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"../ai/defensive-ai\":1,\"../ai/random-ai\":2,\"../ai/smart-ai\":3,\"./constants\":8}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Archer = function () {\n  function Archer(args) {\n    _classCallCheck(this, Archer);\n\n    this.scene = args.scene;\n    this.player = args.player;\n    this.playerId = this.player.id;\n    this.colliderList = args.colliderList;\n\n    this.direction = args.direction;\n    this.startingZ = args.startingZ;\n    this.startingY = args.startingY + 4;\n    this.startingX = args.startingX - 4 * this.direction;\n\n    this.targetList = [];\n    this.arrows = [];\n\n    this.startingRotation = 0;\n    var _90deg = 90 / 180 * Math.PI;\n    var _135deg = 135 / 180 * Math.PI;\n\n    this.animationProperties = {\n      arm: {\n        startingAngle: _135deg,\n        endingAngle: _90deg,\n        angleDifference: _135deg - _90deg,\n        speedDown: 200,\n        speedUp: 150,\n        lastAnimate: null\n      },\n      arrowSpeed: 500\n    };\n\n    this.attackProperties = {\n      lastAttack: 0\n    };\n    this.textureLoader = new THREE.TextureLoader();\n\n    this.attackSpeed = _constants2.default.archer.baseAttackSpeed;\n    this.arrowSpeed = _constants2.default.archer.baseArrowSpeed;\n    this.attackStrength = _constants2.default.archer.baseAttack;\n    this.arrowId = 0;\n    this.initializeView();\n    this.registerCollision();\n  }\n\n  _createClass(Archer, [{\n    key: 'initializeView',\n    value: function initializeView() {\n      var hitBoxOpacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var bodyG = new THREE.BoxGeometry(0.01, 0.013, 0.013);\n      var bodyMat = new THREE.MeshBasicMaterial({ color: 0x00FF00 });\n      this.body = new THREE.Mesh(bodyG, bodyMat);\n\n      var hitBoxG = new THREE.BoxGeometry(60, 60, 60);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffff00, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      this.hitBox = new THREE.Mesh(hitBoxG, material);\n\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.ranged = true;\n\n      this.viewObj.add(this.body);\n      this.viewObj.add(this.hitBox);\n\n      this.viewObj.position.set(this.startingX, this.startingY, this.startingZ);\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        _this.targetList.push(userData.object);\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        if (_this.findColliderIndex(otherCollider.id) === -1) {\n          _this.targetList.push(userData.object);\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.targetList.splice(_this.findColliderIndex(otherCollider), 1);\n        _this.determineTarget();\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.removeTarget(otherCollider);\n        _this.determineTarget();\n      });\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.targetList.length; i++) {\n        if (this.targetList[i].collider.id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'removeTarget',\n    value: function removeTarget(id) {\n      this.targetList.splice(this.findColliderIndex(id), 1);\n    }\n  }, {\n    key: 'canAttack',\n    value: function canAttack(timestamp) {\n      if (this.targetList.length === 0) {\n        return false;\n      }\n      if (this.initiateAttack || this.recharging) {\n        return false;\n      }\n\n      var delta = timestamp - this.attackProperties.lastAttack;\n      return delta >= this.attackSpeed;\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      return this.attackStrength;\n    }\n  }, {\n    key: 'determineTarget',\n    value: function determineTarget() {\n      if (this.targetList.length > 0) {\n        return this.targetList[0];\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      var _this2 = this;\n\n      if (!this.canAttack(timestamp)) {\n        return;\n      }\n\n      var target = this.determineTarget();\n      if (target !== null && target.viewObj) {\n        this.nextTarget = {\n          target: target,\n          callback: function callback(target) {\n            target.health -= _this2.getAttackValue();\n            if (target.health <= 0) {\n              _this2.player.processReward(target.killReward);\n\n              target.attack = false;\n              target.destroy = true;\n              _this2.removeTarget(target.collider.id);\n            }\n          }\n        };\n        this.initiateAttack = true;\n      }\n\n      this.attackProperties.lastAttack = timestamp;\n    }\n  }, {\n    key: 'spawnArrow',\n    value: function spawnArrow(target, timestamp, callback) {\n      var _this3 = this;\n\n      var texture = this.textureLoader.load('textures/fireball.jpg', THREE.SphericalRefractionMapping);\n      var arrowG = new THREE.SphereGeometry(1, 32, 16);\n      var arrowMat = new THREE.MeshPhongMaterial({ color: 0xFFFFFF, map: texture, emissive: 0x440000 });\n\n      var faceVertexUvs = arrowG.faceVertexUvs[0];\n      for (var i = 0; i < faceVertexUvs.length; i++) {\n\n        var uvs = faceVertexUvs[i];\n        var face = arrowG.faces[i];\n\n        for (var j = 0; j < 3; j++) {\n\n          uvs[j].x = face.vertexNormals[j].x * 0.5 + 0.5;\n          uvs[j].y = face.vertexNormals[j].y * 0.5 + 0.5;\n        }\n      }\n\n      var arrow = new THREE.Mesh(arrowG, arrowMat);\n      arrow.name = \"Arrow\";\n      this.scene.add(arrow);\n\n      arrow.position.set(this.startingX, this.startingY + 2, this.startingZ);\n\n      var id = this.arrowId++;\n\n      var startingY = arrow.position.y;\n      var max = startingY + 5;\n      var endingY = target.viewObj.position.y;\n\n      var x_1 = 0;\n      var y_1 = startingY;\n\n      var x_2 = 0.5;\n      var y_2 = max;\n\n      var x_3 = 1;\n      var y_3 = endingY;\n\n      var a = y_1 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var b = -y_1 * (x_2 + x_3) / ((x_1 - x_2) * (x_1 - x_3)) - y_2 * (x_1 + x_3) / ((x_2 - x_1) * (x_2 - x_3)) - y_3 * (x_1 + x_2) / ((x_3 - x_1) * (x_3 - x_2));\n\n      var c = y_1 * x_2 * x_3 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 * x_1 * x_3 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 * x_1 * x_2 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var yFunction = function yFunction(delta) {\n        return a * (delta * delta) + b * delta + c;\n      };\n\n      var initialDistanceX = target.viewObj.position.x - arrow.position.x;\n      var distanceTargetWillTravelX = target.speed / 16 * this.arrowSpeed * -this.direction;\n      var m_x = initialDistanceX + distanceTargetWillTravelX;\n\n      console.log(m_x, arrow.position.x);\n      if (m_x * -this.direction > 0) {\n        m_x = this.direction * 5;\n      }\n      var c_x = arrow.position.x;\n\n      var xFunction = function xFunction(delta) {\n        return m_x * delta + c_x;\n      };\n\n      var m_z = target.viewObj.position.z - arrow.position.z;\n      var c_z = arrow.position.z;\n\n      var zFunction = function zFunction(delta) {\n        return m_z * delta + c_z;\n      };\n\n      this.arrows.push({\n        id: id,\n        obj: arrow,\n        target: target,\n        startingTime: timestamp,\n        yFunction: yFunction,\n        xFunction: xFunction,\n        zFunction: zFunction\n      });\n\n      setTimeout(function () {\n        callback(target);\n        _this3.arrows = _this3.arrows.filter(function (a) {\n          return a !== id;\n        });\n        _this3.scene.remove(arrow);\n      }, this.arrowSpeed);\n    }\n  }, {\n    key: 'animateArrows',\n    value: function animateArrows(timestamp) {\n      var _this4 = this;\n\n      this.arrows.forEach(function (arrow) {\n        var delta = (timestamp - arrow.startingTime) / _this4.arrowSpeed;\n        arrow.obj.position.y = arrow.yFunction(delta);\n        arrow.obj.position.x = arrow.xFunction(delta);\n        arrow.obj.position.z = arrow.zFunction(delta);\n        arrow.obj.rotation.y += 0.1;\n        arrow.obj.rotation.x += 0.1;\n      });\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(timestamp) {\n      if (this.rightArm && this.initiateAttack) {\n        if (this.rightArm.rotation.z > this.animationProperties.arm.endingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var timeRatio = delta / this.animationProperties.arm.speedDown;\n          var degreeChange = this.animationProperties.arm.angleDifference * timeRatio;\n\n          this.rightArm.rotation.z -= degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.spawnArrow(this.nextTarget.target, timestamp, this.nextTarget.callback);\n\n          this.resetAttackAnimation();\n        }\n      }\n\n      if (this.rightArm && this.recharging) {\n        if (this.rightArm.rotation.z < this.animationProperties.arm.startingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var _delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var _timeRatio = _delta / this.animationProperties.arm.speedUp;\n          var _degreeChange = this.animationProperties.arm.angleDifference * _timeRatio;\n\n          this.rightArm.rotation.z += _degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.recharging = false;\n          this.animationProperties.arm.lastAnimate = null;\n        }\n      }\n\n      if (this.nextTarget && this.nextTarget.target) {\n        var angleTowardsTarget = this.calculateAngleToTarget(this.nextTarget.target);\n        this.bodyModel.rotation.y = angleTowardsTarget + this.startingRotation;\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      this.initiateAttack = false;\n      this.recharging = true;\n      this.animationProperties.arm.lastAnimate = null;\n    }\n  }, {\n    key: 'calculateAngleToTarget',\n    value: function calculateAngleToTarget(target) {\n      var xDiff = target.viewObj.position.x - this.viewObj.position.x;\n      var zDiff = target.viewObj.position.z - this.viewObj.position.z;\n      var diffRatio = zDiff / xDiff;\n      return Math.PI * -this.direction - Math.atan(diffRatio) + Math.PI;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.animateArrows(timestamp);\n      this.animateAttack(timestamp);\n      this.collider.update();\n    }\n  }]);\n\n  return Archer;\n}();\n\nexports.default = Archer;\n\n},{\"./constants\":8}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n  function Base(args) {\n    _classCallCheck(this, Base);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.player = args.player;\n    this.playerId = this.player.id;\n\n    this.baseWidth = _constants.gridWidth;\n    this.baseHeight = 20;\n    this.baseDepth = 10;\n\n    this.maxHealth = 250;\n    this.health = this.maxHealth;\n\n    this.hitBoxBuffer = 2;\n\n    this.killReward = {\n      money: 550,\n      score: 1000\n    };\n\n    this.initializeView(this.direction);\n    this.registerCollision();\n  }\n\n  _createClass(Base, [{\n    key: 'initializeView',\n    value: function initializeView(direction) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n      var textureLoader = new THREE.TextureLoader();\n      var normalMap = textureLoader.load('textures/rock-normal-map.jpg');\n      var longTexture = textureLoader.load('textures/brick-wall.jpg');\n      var skinnyTexture = textureLoader.load('textures/brick-wall.jpg');\n      var sideTexture = textureLoader.load('textures/brick-wall.jpg');\n      var baseColor = 0x555555;\n\n      longTexture.wrapS = longTexture.wrapT = THREE.RepeatWrapping;\n      longTexture.repeat.set(3, 1);\n\n      skinnyTexture.wrapS = skinnyTexture.wrapT = THREE.RepeatWrapping;\n      skinnyTexture.repeat.set(1, 3);\n\n      sideTexture.wrapS = sideTexture.wrapT = THREE.RepeatWrapping;\n      sideTexture.repeat.set(1, 1);\n\n      var skinnyMat = new THREE.MeshPhongMaterial({ color: 0x333333, specular: 0x333333, shininess: 15, normalMap: textureLoader.load('textures/rock-normal-map.jpg'), normalScale: new THREE.Vector2(0.05, 1), map: skinnyTexture });\n\n      var longMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: longTexture });\n\n      var sideMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: sideTexture });\n\n      var shapeMaterials = [longMat, // Right\n      longMat, // Left\n      skinnyMat, // Top\n      sideMat, // Back\n      sideMat, // Front\n      skinnyMat];\n\n      var shapeMesh = new THREE.Mesh(shapeGeometry, new THREE.MultiMaterial(shapeMaterials));\n\n      var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n      this.viewObj.position.y = this.baseHeight / 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.immuneToRange = true;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarLength = _constants.gridWidth / 10;\n      this._healthBarWidth = _constants.gridWidth / 150;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = this.baseHeight + 5;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop() {\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }]);\n\n  return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":8}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 64;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\nvar minion = {\n\tbaseHealth: 10,\n\tbaseAttack: 3,\n\tbaseAttackSpeed: 1000,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 50,\n\t\t\tamount: 5\n\t\t},\n\t\tattack: {\n\t\t\tcost: 75,\n\t\t\tamount: 2\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 25\n\t\t}\n\t}\n};\n\nvar base = {\n\tbaseHealth: 250,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 150,\n\t\t\tamount: 250\n\t\t}\n\t}\n};\n\nvar archer = {\n\tbaseAttack: 5,\n\tbaseAttackSpeed: 1000,\n\tbaseArrowSpeed: 1000,\n\tupgrades: {\n\t\tattack: {\n\t\t\tcost: 50,\n\t\t\tamount: 4\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 50\n\t\t}\n\t}\n};\n\nvar player = {};\n\nexports.default = { minion: minion, base: base, archer: archer, player: player };\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.gameOver = true;\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"randomAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"randomAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver(_ref) {\n      var winner = _ref.winner,\n          score = _ref.score;\n\n      this.state.players.forEach(function (p) {\n        return p.setGameOver();\n      });\n      (0, _menuScreen.activateMenu)({\n        winner: winner,\n        score: score\n      });\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          var winner = _this.state.players.find(function (p) {\n            return p.id !== player.id;\n          });\n          var score = winner.score;\n          _this.initializeGameOver({ winner: winner, score: score });\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":5,\"./constants\":8,\"./menu-screen\":11,\"./player\":13}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    poppulationText = void 0,\n    baseHealthText = void 0,\n    minionBaseHealthText = void 0,\n    minionBaseAttackText = void 0,\n    minionBaseAttackSpeedText = void 0,\n    archerBaseAttackText = void 0,\n    archerBaseAttackSpeedText = void 0;\nvar baseHealthUpgrade = void 0,\n    minionBaseHealthUpgrade = void 0,\n    minionBaseAttackUpgrade = void 0,\n    minionBaseAttackSpeedUpgrade = void 0,\n    archerBaseAttackUpgrade = void 0,\n    archerBaseAttackSpeedUpgrade = void 0;\n\n// Texture\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupGrassField();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.hud = document.getElementById('hud');\n    this.hudUpgrade = document.getElementById('hud-upgrade');\n    this.lastTimeStamp = 0;\n    this.started = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this, this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888, 1);\n\n      lightSource.position.set(0, 30, 0);\n      lightAmbient.position.set(0, 30, 0);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      //let texturedSurfaceGeometry = new THREE.PlaneGeometry(gridWidth, gridWidth);\n      //let texturedSurfaceMaterial = new THREE.MeshBasicMaterial({map: planeTexture});\n      //let texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      //texturedSurface.rotation.x = -0.5 * Math.PI;\n      //texturedSurface.position.y = -0.3;\n      //this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      grid.position.y = -.4;\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = 0;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'setupGrassField',\n    value: function setupGrassField() {\n      var textureUrl = 'textures/grasslight-small.jpg';\n      var texture = new THREE.TextureLoader().load(textureUrl);\n      texture.wrapS = THREE.RepeatWrapping;\n      texture.wrapT = THREE.RepeatWrapping;\n      texture.repeat.y = _constants.gridSubDiv;\n      texture.repeat.x = _constants.gridSubDiv;\n      texture.anisotropy = this.renderer.getMaxAnisotropy();\n      // build object3d\n      var geometry = new THREE.PlaneGeometry(_constants.gridWidth * 10, _constants.gridWidth * 10);\n      var material = new THREE.MeshPhongMaterial({\n        map: texture,\n        shininess: 10\n      });\n      var plane = new THREE.Mesh(geometry, material);\n      plane.rotateX(-Math.PI / 2);\n      plane.position.y = -0.2;\n      this.scene.add(plane);\n\n      // let nTufts  = 2000;\n      // let positions = new Array(nTufts);\n      // for(let i = 0; i < nTufts; i++){\n      //   let position  = new THREE.Vector3();\n      //   position.x  = (Math.random()-0.5)*gridWidth;\n      //   position.z  = (Math.random()-0.5)*gridWidth;\n      //   positions[i]  = position;\n      // }\n      // let mesh  = THREEx.createGrassTufts(positions);\n      // this.scene.add(mesh);\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'startFirstGame',\n    value: function startFirstGame() {\n      var _this = this;\n\n      this.gameEngine.restart();\n      this.gameEngine.playerAI = null;\n\n      this.hud.classList.remove('hud--hidden');\n      this.hudUpgrade.classList.remove('hud--hidden');\n\n      this.initializeUpgradeButtons();\n      this.initializeHudTexts();\n\n      this.started = true;\n\n      window.addEventListener('click', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.myPlayer.spawnMinion(index);\n        }\n      });\n\n      window.addEventListener('keypress', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.computer.spawnMinion(index);\n        }\n      });\n    }\n  }, {\n    key: 'calculateFPS',\n    value: function calculateFPS(timestamp) {\n      var delta = timestamp - this.lastTimeStamp;\n      delta = delta / 1000;\n      this.lastTimeStamp = timestamp;\n      return Math.round(1 / delta);\n    }\n  }, {\n    key: 'updateUI',\n    value: function updateUI(timestamp) {\n      scoreText.textContent = this.gameEngine.myPlayer.score;\n      moneyText.textContent = this.gameEngine.myPlayer.money;\n      poppulationText.textContent = this.gameEngine.myPlayer.minions.length + \"/\" + this.gameEngine.myPlayer.poppulationCap;\n\n      if (this.gameEngine.myPlayer.base !== null) {\n        baseHealthText.textContent = Math.max(this.gameEngine.myPlayer.base.health, 0).toFixed(2) + \" / \" + this.gameEngine.myPlayer.base.maxHealth;\n      } else {\n        baseHealthText.textContent = \"0\";\n      }\n\n      minionBaseHealthText.textContent = _constants2.default.minion.baseHealth + _constants2.default.minion.upgrades.health.amount * this.gameEngine.myPlayer.upgrades.minionBaseHealth;\n      minionBaseAttackText.textContent = _constants2.default.minion.baseAttack + _constants2.default.minion.upgrades.attack.amount * this.gameEngine.myPlayer.upgrades.minionBaseAttack;\n      minionBaseAttackSpeedText.textContent = ((_constants2.default.minion.baseAttackSpeed + this.gameEngine.myPlayer.upgrades.minionBaseAttackSpeed * -_constants2.default.minion.upgrades.attackSpeed.amount) / 1000).toFixed(2) + 's';\n\n      archerBaseAttackText.textContent = _constants2.default.archer.baseAttack + this.gameEngine.myPlayer.upgrades.archerBaseAttack * _constants2.default.archer.upgrades.attack.amount;\n      archerBaseAttackSpeedText.textContent = ((_constants2.default.archer.baseAttackSpeed - this.gameEngine.myPlayer.upgrades.archerBaseAttackSpeed * _constants2.default.archer.upgrades.attackSpeed.amount) / 1000).toFixed(2) + \"s\";\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n\n      if (this.started) {\n        this.updateUI(timestamp);\n      }\n    }\n  }, {\n    key: 'initializeHudTexts',\n    value: function initializeHudTexts() {\n      scoreText = document.getElementById('score');\n      moneyText = document.getElementById('money');\n      poppulationText = document.getElementById('poppulation');\n      baseHealthText = document.getElementById('baseHealth');\n      minionBaseHealthText = document.getElementById('minionBaseHealth');\n      minionBaseAttackText = document.getElementById('minionBaseAttack');\n      minionBaseAttackSpeedText = document.getElementById('minionBaseAttackSpeed');\n      archerBaseAttackText = document.getElementById('archerBaseAttack');\n      archerBaseAttackSpeedText = document.getElementById('archerBaseAttackSpeed');\n    }\n  }, {\n    key: 'initializeUpgradeButtons',\n    value: function initializeUpgradeButtons() {\n      var gameView = this;\n\n      baseHealthUpgrade = document.getElementById('baseHealthUpgrade');\n      baseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeBaseHealth();\n      });\n\n      minionBaseHealthUpgrade = document.getElementById('minionBaseHealthUpgrade');\n      minionBaseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionHealth();\n      });\n\n      minionBaseAttackUpgrade = document.getElementById('minionBaseAttackUpgrade');\n      minionBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttack();\n      });\n\n      minionBaseAttackSpeedUpgrade = document.getElementById('minionBaseAttackSpeedUpgrade');\n      minionBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttackSpeed();\n      });\n\n      archerBaseAttackUpgrade = document.getElementById('archerBaseAttackUpgrade');\n      archerBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttack();\n      });\n\n      archerBaseAttackSpeedUpgrade = document.getElementById('archerBaseAttackSpeedUpgrade');\n      archerBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttackSpeed();\n      });\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":8,\"./menu-screen\":11}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar startButton = document.getElementById('startButton');\nvar restartSection = document.getElementById('restartModal');\nvar restartButton = document.getElementById('restartButton');\nvar restartModalMessage = document.getElementById('restartModalMessage');\n\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner, score) {\n\n  var text = 'Player ' + (winner.id + 1) + ' wins with a score of ' + score + '!';\n  restartModalMessage.textContent = text;\n\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner, args.score);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameView, gameEngine) {\n  startButton.addEventListener('click', function () {\n    gameView.startFirstGame();\n    closeMenu();\n  });\n\n  restartButton.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = _constants2.default.minion.baseHealth + args.healthUpgrade * _constants2.default.minion.upgrades.health.amount;\n    this.attackStrength = _constants2.default.minion.baseAttack + args.attackUpgrade * _constants2.default.minion.upgrades.attack.amount;\n    this.attackSpeed = _constants2.default.minion.baseAttackSpeed + args.attackSpeedUpgrade * -_constants2.default.minion.upgrades.attackSpeed.amount;\n    this.defaultSpeed = .3;\n\n    this.health = this.maxHealth;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.attackAnimationProperties = {\n      direction: 1,\n      speed: this.attackSpeed / 2\n    };\n\n    this.walkingAnimationProperties = {\n      direction: this.direction,\n      speed: 50 / this.defaultSpeed, // This should not change only change the speed of the minion and the animation will update accordingly\n      lastTimeStamp: null,\n      time: 0\n    };\n\n    this.killReward = {\n      money: 75,\n      score: 25\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.rotObjectMatrix = null;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: 'initializeView',\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      hitGeometry.dispose();\n      hitMaterial.dispose();\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'isObjectLoaded',\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = userData.object;\n        _this.resetWalkAnimation();\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = userData.object;\n          _this.resetWalkAnimation();\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      var critProc = Math.random();\n      return critProc >= .9 ? this.attackStrength * (Math.random() + 1) : this.attackStrength;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n      this.walkProcedure(timestamp);\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime = this.attackProperties.attackTime + delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(delta);\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(0);\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'attackLoop',\n    value: function attackLoop(delta) {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      this.animateAttack(delta);\n      if (this.attackProperties.attackTime <= this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(delta) {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        var currentAttackTime = this.attackProperties.attackTime;\n        var direction = this.attackAnimationProperties.direction;\n        var animationSpeed = this.attackAnimationProperties.speed;\n        var maxRotation = 135;\n\n        var rotation = direction * (maxRotation * (Math.PI / 180) * (delta / animationSpeed));\n        rotation = Math.min(rightArm.rotation.z + rotation, maxRotation);\n        rotation = Math.max(rotation, 0);\n\n        rightArm.rotation.z = rotation;\n        if (currentAttackTime > animationSpeed) {\n          this.attackAnimationProperties.direction = -1;\n        } else {\n          this.attackAnimationProperties.direction = 1;\n        }\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        rightArm.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'walkProcedure',\n    value: function walkProcedure(timestamp) {\n      if (!this.attack && this.walkingAnimationProperties.lastTimeStamp !== null) {\n        var delta = timestamp - this.walkingAnimationProperties.lastTimeStamp;\n        this.walkingAnimationProperties.time = this.walkingAnimationProperties.time + delta;\n        this.walkLoop(delta);\n      } else {\n        this.walkLoop(0);\n      }\n\n      this.walkingAnimationProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'walkLoop',\n    value: function walkLoop(delta) {\n      this.animateWalk(delta);\n      if (this.walkingAnimationProperties.time <= this.walkingAnimationProperties.speed) {\n        return;\n      }\n      this.walkingAnimationProperties.time = 0;\n    }\n  }, {\n    key: 'animateWalk',\n    value: function animateWalk(delta) {\n      if (this.viewObj.children.length > 1 && !this.attack) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n        var animationTime = this.walkingAnimationProperties.time;\n        var animationSpeed = this.walkingAnimationProperties.speed;\n        var direction = this.walkingAnimationProperties.direction;\n        var maxRotation = 45;\n\n        var rotation = maxRotation * (delta / animationSpeed);\n\n        if (direction) {\n          this.animateLegForward(leftLeg, rotation, maxRotation, delta);\n          this.animateLegBack(rightLeg, rotation, maxRotation, delta);\n        } else {\n          this.animateLegForward(rightLeg, rotation, maxRotation, delta);\n          this.animateLegBack(leftLeg, rotation, maxRotation, delta);\n        }\n\n        if (this.toDegrees(leftLeg.rotation.z) >= maxRotation || this.toDegrees(leftLeg.rotation.z) <= -maxRotation) {\n          this.walkingAnimationProperties.direction = !this.walkingAnimationProperties.direction;\n        }\n      }\n    }\n  }, {\n    key: 'animateLegBack',\n    value: function animateLegBack(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(-maxRotation);\n\n      if (leg.rotation.z + this.toRadians(-rotation) < max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(-rotation);\n      }\n    }\n  }, {\n    key: 'animateLegForward',\n    value: function animateLegForward(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(maxRotation);\n      if (leg.rotation.z + this.toRadians(rotation) > max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(rotation);\n      }\n    }\n  }, {\n    key: 'resetWalkAnimation',\n    value: function resetWalkAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n\n        leftLeg.rotation.z = 0;\n        rightLeg.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'toDegrees',\n    value: function toDegrees(angleRadians) {\n      return angleRadians * 180 / Math.PI;\n    }\n  }, {\n    key: 'toRadians',\n    value: function toRadians(angleDegrees) {\n      return angleDegrees / 180 * Math.PI;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":8}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _archer = require('./archer');\n\nvar _archer2 = _interopRequireDefault(_archer);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.colliderSystem = args.colliderSystem;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n    this.poppulationCap = 30;\n\n    this.setUpgradeValues();\n    this.loader = new THREE.ObjectLoader();\n\n    this.setupGameState();\n    this.spawnBase();\n    this.spawnArchers();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnArchers',\n    value: function spawnArchers() {\n      var _this = this;\n\n      var archer = new _archer2.default({\n        scene: this.scene,\n        colliderList: this.colliderList,\n        startingZ: 2,\n        startingY: 20,\n        startingX: this.spawnPos,\n        direction: this.direction,\n        player: this\n      });\n\n      this.archers.push(archer);\n\n      this.loader.load('./geometry/wizard.json', function (obj) {\n        obj.position.y = -4;\n        archer.viewObj.add(obj);\n\n        archer.bodyModel = archer.viewObj.children[2];\n        archer.rightArm = archer.bodyModel.children[1];\n        archer.rightArm.rotation.z = 135 / 180 * Math.PI;\n        if (archer.direction === -1) {\n          archer.viewObj.children[2].rotation.y = Math.PI;\n          archer.startingRotation = Math.PI;\n        }\n\n        _this.scene.add(archer.viewObj);\n      });\n    }\n  }, {\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this2 = this;\n\n      if (this.minions.length < this.poppulationCap) {\n        if (this.money >= this.minionCost) {\n          if (!this.gameOver) {\n            this.money -= this.minionCost;\n          }\n\n          var minion = new _minion2.default({\n            id: this.minionId++,\n            healthUpgrade: this.upgrades.minionBaseHealth,\n            attackUpgrade: this.upgrades.minionBaseAttack,\n            attackSpeedUpgrade: this.upgrades.minionBaseAttackSpeed,\n            playerId: this.id,\n            direction: this.direction,\n            startingZ: index,\n            colliderList: this.colliderList,\n            player: this\n          });\n\n          this.minions.push(minion);\n          this.loader.load('./geometry/model.json', function (obj) {\n            obj.position.y = -4;\n            minion.viewObj.add(obj);\n\n            if (minion.direction === -1) {\n              minion.viewObj.children[1].rotation.y = Math.PI;\n            }\n\n            _this2.scene.add(minion.viewObj);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      if (this.gameOver) {\n        return;\n      }\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this3 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.archers.forEach(function (archer) {\n        archer.runLoop(timestamp);\n      });\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (!minion.attack) {\n          minion.resetAttackAnimation();\n        }\n        if (minion.destroy) {\n          _this3.destroyMinion(minion, index);\n        }\n      });\n\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n      minion.collider.removeEventListener('contactEnter');\n      minion.collider.removeEventListener('contactStay');\n      minion.collider.removeEventListener('contactExit');\n      minion.collider.removeEventListener('contactRemoved');\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      var _this4 = this;\n\n      this.archers.forEach(function (archer) {\n        _this4.scene.remove(archer.viewObj);\n        _this4.colliderList.splice(_this4.findColliderIndex(archer.collider.id), 1);\n      });\n      this.archers.length = 0;\n\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setGameOver',\n    value: function setGameOver() {\n      this.gameOver = true;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this5 = this;\n\n      this.minions.forEach(function (minion) {\n        _this5.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.archers.forEach(function (archers) {\n        _this5.scene.remove(archers.viewObj);\n      });\n\n      this.gameOver = false;\n      this.setUpgradeValues();\n      this.setupGameState();\n      this.spawnBase();\n      this.spawnArchers();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.archers = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 50;\n      this.lost = false;\n    }\n  }, {\n    key: 'setUpgradeValues',\n    value: function setUpgradeValues() {\n      this.upgrades = {\n        baseHealth: 0,\n        minionBaseHealth: 0,\n        minionBaseAttack: 0,\n        minionBaseAttackSpeed: 0,\n        archerBaseAttack: 0,\n        archerBaseAttackSpeed: 0\n      };\n    }\n  }, {\n    key: 'getBaseHealthUpgradeCost',\n    value: function getBaseHealthUpgradeCost() {\n      return _constants2.default.base.upgrades.health.cost * (this.upgrades.baseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeBaseHealth',\n    value: function canUpgradeBaseHealth() {\n      return this.money > this.getBaseHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeBaseHealth',\n    value: function upgradeBaseHealth() {\n      if (this.canUpgradeBaseHealth()) {\n        this.upgrades.baseHealth++;\n        this.base.maxHealth += _constants2.default.base.upgrades.health.amount;\n        this.base.health += _constants2.default.base.upgrades.health.amount;\n        this.money -= _constants2.default.base.upgrades.health.cost * this.upgrades.baseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionHealthUpgradeCost',\n    value: function getMinionHealthUpgradeCost() {\n      return _constants2.default.minion.upgrades.health.cost * (this.upgrades.minionBaseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionHealth',\n    value: function canUpgradeMinionHealth() {\n      return this.money > this.getMinionHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionHealth',\n    value: function upgradeMinionHealth() {\n      if (this.canUpgradeMinionHealth()) {\n        this.upgrades.minionBaseHealth++;\n        this.money -= _constants2.default.minion.upgrades.health.cost * this.upgrades.minionBaseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionAttackUpgradeCost',\n    value: function getMinionAttackUpgradeCost() {\n      return _constants2.default.minion.upgrades.attack.cost * (this.upgrades.minionBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttack',\n    value: function canUpgradeMinionAttack() {\n      return this.money > this.getMinionAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttack',\n    value: function upgradeMinionAttack() {\n      if (this.canUpgradeMinionAttack()) {\n        this.upgrades.minionBaseAttack++;\n        this.money -= _constants2.default.minion.upgrades.attack.cost * this.upgrades.minionBaseAttack;\n      }\n    }\n  }, {\n    key: 'getMinionAttackSpeedUpgradeCost',\n    value: function getMinionAttackSpeedUpgradeCost() {\n      return _constants2.default.minion.upgrades.attackSpeed.cost * (this.upgrades.minionBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttackSpeed',\n    value: function canUpgradeMinionAttackSpeed() {\n      return this.money > this.getMinionAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttackSpeed',\n    value: function upgradeMinionAttackSpeed() {\n      if (this.canUpgradeMinionAttackSpeed()) {\n        this.upgrades.minionBaseAttackSpeed++;\n        this.money -= _constants2.default.minion.upgrades.attackSpeed.cost * this.upgrades.minionBaseAttackSpeed++;\n      }\n    }\n  }, {\n    key: 'getWizardAttackUpgradeCost',\n    value: function getWizardAttackUpgradeCost() {\n      return _constants2.default.archer.upgrades.attack.cost * (this.upgrades.archerBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttack',\n    value: function canUpgradeWizardAttack() {\n      return this.money > this.getWizardAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttack',\n    value: function upgradeWizardAttack() {\n      if (this.canUpgradeWizardAttack()) {\n        this.archers.forEach(function (archer) {\n          archer.attackStrength += _constants2.default.archer.upgrades.attack.amount;\n        });\n\n        this.upgrades.archerBaseAttack++;\n        this.money -= _constants2.default.archer.upgrades.attack.cost * this.upgrades.archerBaseAttack;\n      }\n    }\n  }, {\n    key: 'getWizardAttackSpeedUpgradeCost',\n    value: function getWizardAttackSpeedUpgradeCost() {\n      return _constants2.default.archer.upgrades.attackSpeed.cost * (this.upgrades.archerBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttackSpeed',\n    value: function canUpgradeWizardAttackSpeed() {\n      return this.money > this.getWizardAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttackSpeed',\n    value: function upgradeWizardAttackSpeed() {\n      if (this.canUpgradeWizardAttackSpeed()) {\n        this.archers.forEach(function (archer) {\n          archer.attackSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n          archer.arrowSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n        });\n\n        this.upgrades.archerBaseAttackSpeed++;\n        this.money -= _constants2.default.archer.upgrades.attackSpeed.cost * this.upgrades.archerBaseAttackSpeed;\n      }\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./archer\":6,\"./base\":7,\"./constants\":8,\"./minion\":12}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nexports.setupPerformance = setupPerformance;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n  renderer.shadowMapEnabled = true;\n  renderer.shadowMapType = THREE.PCFSoftShadowMap;\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\nfunction setupPerformance() {\n  var rendererStats = new THREEx.RendererStats();\n  rendererStats.domElement.style.position = 'absolute';\n  rendererStats.domElement.style.left = '0px';\n  rendererStats.domElement.style.bottom = '0px';\n  document.body.appendChild(rendererStats.domElement);\n  return rendererStats;\n}\n\n},{}]},{},[4])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYWkvZGVmZW5zaXZlLWFpLmpzIiwic3JjL2pzL2FpL3JhbmRvbS1haS5qcyIsInNyYy9qcy9haS9zbWFydC1haS5qcyIsInNyYy9qcy9hcHAuanMiLCJzcmMvanMvbW9kdWxlcy9haS1wbGF5ZXIuanMiLCJzcmMvanMvbW9kdWxlcy9hcmNoZXIuanMiLCJzcmMvanMvbW9kdWxlcy9iYXNlLmpzIiwic3JjL2pzL21vZHVsZXMvY29uc3RhbnRzLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS1lbmdpbmUuanMiLCJzcmMvanMvbW9kdWxlcy9nYW1lLXZpZXcuanMiLCJzcmMvanMvbW9kdWxlcy9tZW51LXNjcmVlbi5qcyIsInNyYy9qcy9tb2R1bGVzL21pbmlvbi5qcyIsInNyYy9qcy9tb2R1bGVzL3BsYXllci5qcyIsInNyYy9qcy9tb2R1bGVzL3ZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7a0JDRWUsVUFBUyxTQUFULEVBQW9CO0FBQ2pDLE1BQUksTUFBTSxFQUFWO0FBQ0EsT0FBSSxJQUFJLElBQUksQ0FBWixFQUFlLHlCQUFmLEVBQStCLEdBQS9CLEVBQW9DO0FBQ2xDLFFBQUksQ0FBSixJQUFTLENBQVQ7QUFDRDs7QUFFRCxZQUFVLE9BQVYsQ0FBa0IsVUFBQyxLQUFELEVBQVc7QUFDM0IsUUFBSSxNQUFNLFNBQVY7QUFDRCxHQUZEOztBQUlBLE9BQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBcEIsQ0FBNEIsVUFBQyxNQUFELEVBQVk7QUFDdEMsUUFBSSxPQUFPLFNBQVg7QUFDRCxHQUZEOztBQUlBLE1BQUksYUFBYSxDQUFDLENBQWxCO0FBQ0EsTUFBSSxhQUFhLE1BQWpCO0FBQ0EsU0FBTyxNQUFQLENBQWMsR0FBZCxFQUFtQixPQUFuQixDQUEyQixVQUFDLEdBQUQsRUFBTSxLQUFOLEVBQWdCO0FBQ3pDLFFBQUcsTUFBTSxVQUFU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Z0JBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixRQUEvQixHQUEwQyxVQUExQztBQUNBLGdCQUFjLFVBQWQsQ0FBeUIsS0FBekIsQ0FBK0IsSUFBL0IsR0FBc0MsS0FBdEM7QUFDQSxnQkFBYyxVQUFkLENBQXlCLEtBQXpCLENBQStCLE1BQS9CLEdBQXdDLEtBQXhDO0FBQ0EsV0FBUyxJQUFULENBQWMsV0FBZCxDQUEyQixjQUFjLFVBQXpDO0FBQ0EsU0FBTyxhQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcbiAgbGV0IG1hcCA9IHt9O1xuICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7XG4gICAgbWFwW2ldID0gMDtcbiAgfVxuXG4gIG9wcG9uZW50cy5mb3JFYWNoKChlbmVteSkgPT4ge1xuICAgIG1hcFtlbmVteS5zdGFydGluZ1pdLS07XG4gIH0pO1xuXG4gIHRoaXMucGxheWVyLm1pbmlvbnMuZm9yRWFjaCgobWluaW9uKSA9PiB7XG4gICAgbWFwW21pbmlvbi5zdGFydGluZ1pdKytcbiAgfSk7XG5cbiAgbGV0IHNwYXduSW5kZXggPSAtMTtcbiAgbGV0IHNwYXduVmFsdWUgPSAxMDAwMDA7XG4gIE9iamVjdC52YWx1ZXMobWFwKS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7XG4gICAgaWYodmFsIDwgc3Bhd25WYWx1ZSkge1xuICAgICAgc3Bhd25WYWx1ZSA9IHZhbDtcbiAgICAgIHNwYXduSW5kZXggPSBpbmRleFxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHNwYXduSW5kZXg7XG59IiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XG4gfSIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4uL21vZHVsZXMvY29uc3RhbnRzJztcblxuQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgc2VsZikgeyBcbiAgICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMsIGZyaWVuZGxpZXMsIHNwYXduUG9zKSB7XG4gIGxldCBzdGFydGluZ1BvcyA9IHNwYXduUG9zO1xuXG4gIGxldCBmcmllbmRseU1hcCA9IGZyaWVuZGxpZXMubWFwKG0gPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByb3c6IG0uc3RhcnRpbmdaLFxuICAgICAgZGlzdGFuY2U6IG0uZ2V0UG9zaXRpb24oKS54IC0gc3RhcnRpbmdQb3NcbiAgICB9XG4gIH0pO1xuXG4gIGxldCBvcHBvbmVudE1hcCA9IG9wcG9uZW50cy5tYXAobSA9PiB7XG5cbiAgICBsZXQgZGlzdGFuY2UgPSBzdGFydGluZ1BvcyAtIG0uZ2V0UG9zaXRpb24oKS54O1xuICAgIHJldHVybiB7XG4gICAgICByb3c6IG0uc3RhcnRpbmdaLFxuICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgfTtcbiAgfSk7XG5cbiAgbGV0IHJvd0FycmF5ID0gW107XG4gIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHsgcm93QXJyYXkucHVzaChpKTsgfVxuXG4gIGxldCBkZWNpc2lvbiA9IHtcbiAgICBoYXNGcmllbmRsaWVzOiBbXSxcbiAgICBjbG9zZXN0SW5kZXg6IC0xLFxuICAgIGNsb3Nlc3RWYWw6IDk5OTk5LFxuICAgIGRpc3RhbmNlVGllczogW11cblxuICB9O1xuXG4gIGZyaWVuZGx5TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XG4gICAgZGVjaXNpb24uaGFzRnJpZW5kbGllcy5wdXNoKHZhbC5yb3cpO1xuICB9KTtcblxuXG4gIG9wcG9uZW50TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XG4gICAgaWYodmFsLmRpc3RhbmNlIDwgZGVjaXNpb24uY2xvc2VzdFZhbCkge1xuICAgICAgZGVjaXNpb24uY2xvc2VzdEluZGV4ID0gdmFsLnJvdztcbiAgICAgIGRlY2lzaW9uLmNsb3Nlc3RWYWwgPSB2YWwuZGlzdGFuY2U7XG5cbiAgICAgIGlmKGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih2YWwuZGlzdGFuY2UgPT09IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcbiAgICAgIGRlY2lzaW9uLmRpc3RhbmNlVGllcy5wdXNoKHZhbC5yb3cpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcbiAgZGVjaXNpb24uaGFzRnJpZW5kbGllcyA9IGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMudW5pcXVlKCk7XG5cbiAgbGV0IGZ1bGxJZHhBcnIgPSByb3dBcnJheS5zbGljZSgwKTtcblxuICBkZWNpc2lvbi5nYXBzID0gZnVsbElkeEFyci5maWx0ZXIoeCA9PiB7XG4gICAgcmV0dXJuIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMuaW5kZXhPZih4KSA8IDA7XG4gIH0pO1xuXG5cbiAgLy9pZihmcmllbmRsaWVzLmxlbmd0aCA+IDMpIHtcbiAgICAvL2ZyaWVuZGxpZXNbMl0udmlld09iai5wb3NpdGlvbi56ICs9IDE7XG4gIC8vfVxuXG5cbiAgbGV0IGFycmF5VG9Vc2U7XG4gIGlmKGRlY2lzaW9uLmNsb3Nlc3RWYWwgPCBncmlkV2lkdGgvMikge1xuICAgIGFycmF5VG9Vc2UgPSBkZWNpc2lvbi5kaXN0YW5jZVRpZXM7XG4gIH0gZWxzZSB7XG4gICAgYXJyYXlUb1VzZSA9IGRlY2lzaW9uLmdhcHM7XG4gIH1cblxuICBsZXQgYXJySWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXlUb1VzZS5sZW5ndGgpO1xuICByZXR1cm4gYXJyYXlUb1VzZVthcnJJZHhdO1xufSIsImltcG9ydCB7XG4gIHNldHVwU2NyZWVuVmlldywgc2V0dXBQZXJmb3JtYW5jZVxufSBmcm9tICcuL21vZHVsZXMvdmlldyc7XG5cbmltcG9ydCBHYW1lRW5naW5lIGZyb20gJy4vbW9kdWxlcy9nYW1lLWVuZ2luZSc7XG5pbXBvcnQgR2FtZVZpZXcgZnJvbSAnLi9tb2R1bGVzL2dhbWUtdmlldyc7XG5cbi8vIEdsb2JhbHNcbmxldCBnbG9iYWxzO1xuXG5sZXQgZ2FtZUVuZ2luZSwgZ2FtZVZpZXc7XG5sZXQgcmVuZGVyZXJTdGF0cztcbmxldCBwZXJmb3JtYW5jZSA9IHRydWU7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGxldCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSBzZXR1cFNjcmVlblZpZXcoKTtcbiAgZ2xvYmFscyA9IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcblxuICBpZihwZXJmb3JtYW5jZSkge1xuICAgIHJlbmRlcmVyU3RhdHMgPSBzZXR1cFBlcmZvcm1hbmNlKCk7XG4gIH1cblxuICBnYW1lRW5naW5lID0gbmV3IEdhbWVFbmdpbmUoZ2xvYmFscyk7XG4gIGdhbWVWaWV3ID0gbmV3IEdhbWVWaWV3KGdsb2JhbHMsIGdhbWVFbmdpbmUpO1xuXG4gIHJlbmRlcigpO1xufVxuXG5mdW5jdGlvbiByZW5kZXIodGltZXN0YW1wKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICBnYW1lVmlldy5yZW5kZXJMb29wKHRpbWVzdGFtcCk7XG5cbiAgZ2xvYmFscy5yZW5kZXJlci5yZW5kZXIoZ2xvYmFscy5zY2VuZSwgZ2xvYmFscy5jYW1lcmEpO1xuICBpZihwZXJmb3JtYW5jZSkge1xuICAgIHJlbmRlcmVyU3RhdHMudXBkYXRlKGdsb2JhbHMucmVuZGVyZXIpO1xuICB9XG59XG5cbmluaXQoKTtcbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBzbWFydEFJIGZyb20gJy4uL2FpL3NtYXJ0LWFpJztcbmltcG9ydCBkZWZlbnNpdmVBSSBmcm9tICcuLi9haS9kZWZlbnNpdmUtYWknO1xuaW1wb3J0IHJhbmRvbUFJIGZyb20gJy4uL2FpL3JhbmRvbS1haSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFJIHtcblxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zbWFydEFJID0gc21hcnRBSTtcbiAgICB0aGlzLmRlZmVuc2l2ZUFJID0gZGVmZW5zaXZlQUk7XG4gICAgdGhpcy5yYW5kb21BSSA9IHJhbmRvbUFJO1xuICAgIHRoaXMuZGV0ZXJtaW5lQUlGdW5jdGlvbihhcmdzLnBlcnNvbmFsaXR5KTtcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xuICAgIHRoaXMuc3Bhd25JbnRlcnZhbCA9IDMyNTtcbiAgICB0aGlzLmxhc3RVcGdyYWRlID0gMDtcbiAgICB0aGlzLnVwZ3JhZGVJbnRlcnZhbCA9IDE1MDA7XG4gICAgdGhpcy5sYXN0U3Bhd24gPSAwO1xuICAgIHRoaXMucG9wcHVsYXRpb25MaW1pdCA9IDMwO1xuICB9XG5cbiAgY2FuU3Bhd24odGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRpbWVzdGFtcCAtIHRoaXMubGFzdFNwYXduID4gdGhpcy5zcGF3bkludGVydmFsICYmIHRoaXMucGxheWVyLm1pbmlvbnMubGVuZ3RoIDwgdGhpcy5wb3BwdWxhdGlvbkxpbWl0O1xuICB9XG5cbiAgY2FuVXBncmFkZSh0aW1lc3RhbXApIHtcbiAgICByZXR1cm4gdGltZXN0YW1wIC0gdGhpcy5sYXN0VXBncmFkZSA+IHRoaXMudXBncmFkZUludGVydmFsO1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXAsIG9wcG9uZW50cykge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZSh0aW1lc3RhbXApKSB7XG4gICAgICB0aGlzLmFwcGx5VXBncmFkZXModGhpcy5jaGVja1VwZ3JhZGVzKCkpO1xuICAgICAgdGhpcy5sYXN0VXBncmFkZSA9IHRpbWVzdGFtcDtcbiAgICB9XG5cbiAgICBpZighdGhpcy5jYW5TcGF3bih0aW1lc3RhbXApKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IHNwYXduSW5kZXggPSB0aGlzLkFJRnVuY3Rpb24ob3Bwb25lbnRzLCB0aGlzLnBsYXllci5taW5pb25zLCB0aGlzLnBsYXllci5zcGF3blBvcyk7XG5cbiAgICBpZihzcGF3bkluZGV4ID49IDApIHtcbiAgICAgIHRoaXMucGxheWVyLnNwYXduTWluaW9uKHNwYXduSW5kZXgpO1xuICAgICAgdGhpcy5sYXN0U3Bhd24gPSB0aW1lc3RhbXA7XG4gICAgfVxuICB9XG5cbiAgZGV0ZXJtaW5lQUlGdW5jdGlvbihwZXJzb25hbGl0eSkge1xuICAgIGlmKHBlcnNvbmFsaXR5KSB7XG4gICAgICB0aGlzLkFJRnVuY3Rpb24gPSB0aGlzW3BlcnNvbmFsaXR5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5BSUZ1bmN0aW9uID0gdGhpc1tcInJhbmRvbUFJXCJdO1xuICAgIH1cbiAgfVxuXG4gIC8vY2hlY2sgYWxsIHVwZ3JhZGVDb3N0cyB0byBzZWUgaWYgYW55IGNhbiBiZSB1cGdyYWRlcyByZXR1cm5zIGEgbGlzdCBvZiB3aGF0IGNhbiBiZSB1cGdyYWRlZCBhbmQgdGhlaXIgY29zdFxuICBjaGVja1VwZ3JhZGVzKCkge1xuICAgIGxldCB1cGdyYWRlcyA9IFtdO1xuXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZUJhc2VIZWFsdGgoKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlQmFzZUhlYWx0aFwiLCBjb3N0OnRoaXMucGxheWVyLmdldEJhc2VIZWFsdGhVcGdyYWRlQ29zdCgpfSk7XG4gICAgfVxuXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZU1pbmlvbkhlYWx0aCgpKSB7XG4gICAgICB1cGdyYWRlcy5wdXNoKHtuYW1lOiBcInVwZ3JhZGVNaW5pb25IZWFsdGhcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0TWluaW9uSGVhbHRoVXBncmFkZUNvc3QoKX0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVNaW5pb25BdHRhY2soKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlTWluaW9uQXR0YWNrXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldE1pbmlvbkF0dGFja1VwZ3JhZGVDb3N0KCl9KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllci5jYW5VcGdyYWRlTWluaW9uQXR0YWNrU3BlZWQoKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlTWluaW9uQXR0YWNrU3BlZWRcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0TWluaW9uQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpfSk7XG4gICAgfVxuXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZVdpemFyZEF0dGFjaygpKSB7XG4gICAgICB1cGdyYWRlcy5wdXNoKHtuYW1lOiBcInVwZ3JhZGVXaXphcmRBdHRhY2tcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0V2l6YXJkQXR0YWNrVXBncmFkZUNvc3QoKX0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVXaXphcmRBdHRhY2tTcGVlZCgpKSB7XG4gICAgICB1cGdyYWRlcy5wdXNoKHtuYW1lOiBcInVwZ3JhZGVXaXphcmRBdHRhY2tTcGVlZFwiLCBjb3N0OiB0aGlzLnBsYXllci5nZXRXaXphcmRBdHRhY2tTcGVlZFVwZ3JhZGVDb3N0KCl9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVwZ3JhZGVzO1xuICB9XG5cbiAgYXBwbHlVcGdyYWRlcyh1cGdyYWRlcykge1xuICAgIHVwZ3JhZGVzLmZvckVhY2goKHVwZ3JhZGUpID0+IHtcbiAgICAgIGlmKCh0aGlzLnBsYXllci5tb25leSAvIDEuNSkgPiB1cGdyYWRlLmNvc3QgJiYgdGhpcy5wbGF5ZXIubW9uZXkgPiA3NTApIHtcbiAgICAgICAgbGV0IGZuID0gdGhpcy5wbGF5ZXJbdXBncmFkZS5uYW1lXTtcbiAgICAgICAgZm4uYXBwbHkodGhpcy5wbGF5ZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJjaGVyIHtcblxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcbiAgICB0aGlzLnBsYXllcklkID0gdGhpcy5wbGF5ZXIuaWQ7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcblxuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XG4gICAgdGhpcy5zdGFydGluZ1ogPSBhcmdzLnN0YXJ0aW5nWjtcbiAgICB0aGlzLnN0YXJ0aW5nWSA9IGFyZ3Muc3RhcnRpbmdZICsgNDtcbiAgICB0aGlzLnN0YXJ0aW5nWCA9IGFyZ3Muc3RhcnRpbmdYIC0gKDQgKiB0aGlzLmRpcmVjdGlvbik7XG5cbiAgICB0aGlzLnRhcmdldExpc3QgPSBbXTtcbiAgICB0aGlzLmFycm93cyA9IFtdO1xuXG4gICAgdGhpcy5zdGFydGluZ1JvdGF0aW9uID0gMDtcbiAgICBsZXQgXzkwZGVnID0gKDkwLzE4MCkgKiBNYXRoLlBJO1xuICAgIGxldCBfMTM1ZGVnID0gKDEzNS8xODApICogTWF0aC5QSTtcblxuICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcyA9IHtcbiAgICAgIGFybToge1xuICAgICAgICBzdGFydGluZ0FuZ2xlOiBfMTM1ZGVnLFxuICAgICAgICBlbmRpbmdBbmdsZTogXzkwZGVnLFxuICAgICAgICBhbmdsZURpZmZlcmVuY2U6IF8xMzVkZWcgLSBfOTBkZWcsXG4gICAgICAgIHNwZWVkRG93bjogMjAwLFxuICAgICAgICBzcGVlZFVwOiAxNTAsXG4gICAgICAgIGxhc3RBbmltYXRlOiBudWxsXG4gICAgICB9LFxuICAgICAgYXJyb3dTcGVlZDogNTAwXG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzID0ge1xuICAgICAgbGFzdEF0dGFjazogMFxuICAgIH07XG4gICAgdGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcblxuICAgIHRoaXMuYXR0YWNrU3BlZWQgPSBDb25zdGFudHMuYXJjaGVyLmJhc2VBdHRhY2tTcGVlZDtcbiAgICB0aGlzLmFycm93U3BlZWQgPSBDb25zdGFudHMuYXJjaGVyLmJhc2VBcnJvd1NwZWVkO1xuICAgIHRoaXMuYXR0YWNrU3RyZW5ndGggPSBDb25zdGFudHMuYXJjaGVyLmJhc2VBdHRhY2s7XG4gICAgdGhpcy5hcnJvd0lkID0gMDtcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KCk7XG4gICAgdGhpcy5yZWdpc3RlckNvbGxpc2lvbigpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVZpZXcoaGl0Qm94T3BhY2l0eT0wKSB7XG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICBsZXQgYm9keUcgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4wMSwgMC4wMTMsIDAuMDEzKTtcbiAgICBsZXQgYm9keU1hdCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IGNvbG9yOiAweDAwRkYwMCB9KTtcbiAgICB0aGlzLmJvZHkgPSBuZXcgVEhSRUUuTWVzaChib2R5RywgYm9keU1hdCk7XG5cbiAgICBsZXQgaGl0Qm94RyA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSggNjAsIDYwLCA2MCApO1xuICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgge2NvbG9yOiAweGZmZmYwMCwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHksIGRlcHRoV3JpdGU6IGZhbHNlfSApO1xuICAgIHRoaXMuaGl0Qm94ID0gbmV3IFRIUkVFLk1lc2goIGhpdEJveEcsIG1hdGVyaWFsICk7XG5cbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLnJhbmdlZCA9IHRydWU7XG5cbiAgICB0aGlzLnZpZXdPYmouYWRkKHRoaXMuYm9keSk7XG4gICAgdGhpcy52aWV3T2JqLmFkZCh0aGlzLmhpdEJveCk7XG5cbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24uc2V0KHRoaXMuc3RhcnRpbmdYLCB0aGlzLnN0YXJ0aW5nWSwgdGhpcy5zdGFydGluZ1opO1xuICB9XG5cbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk7XG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEVudGVyJywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIGxldCB1c2VyRGF0YSA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGE7XG5cbiAgICAgIGlmKHVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cbiAgICAgIGlmKHVzZXJEYXRhLnJhbmdlZCB8fCB1c2VyRGF0YS5pbW11bmVUb1JhbmdlKSB7IHJldHVybjsgfVxuXG4gICAgICB0aGlzLnRhcmdldExpc3QucHVzaCh1c2VyRGF0YS5vYmplY3QpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0U3RheScsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xuXG4gICAgICBpZih1c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQgfHwgdXNlckRhdGEuaW1tdW5lVG9SYW5nZSkgeyByZXR1cm47IH1cblxuICAgICAgaWYodGhpcy5maW5kQ29sbGlkZXJJbmRleChvdGhlckNvbGxpZGVyLmlkKSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy50YXJnZXRMaXN0LnB1c2godXNlckRhdGEub2JqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICB0aGlzLnRhcmdldExpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgob3RoZXJDb2xsaWRlciksIDEpO1xuICAgICAgdGhpcy5kZXRlcm1pbmVUYXJnZXQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEV4aXQnLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVUYXJnZXQob3RoZXJDb2xsaWRlcik7XG4gICAgICB0aGlzLmRldGVybWluZVRhcmdldCgpO1xuICAgIH0pO1xuICB9XG5cbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YXJnZXRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZih0aGlzLnRhcmdldExpc3RbaV0uY29sbGlkZXIuaWQgPT09IGlkKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICByZW1vdmVUYXJnZXQoaWQpIHtcbiAgICB0aGlzLnRhcmdldExpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgoaWQpLCAxKTtcbiAgfVxuXG4gIGNhbkF0dGFjayh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLnRhcmdldExpc3QubGVuZ3RoID09PSAwKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlmKHRoaXMuaW5pdGlhdGVBdHRhY2sgfHwgdGhpcy5yZWNoYXJnaW5nKSB7IHJldHVybiBmYWxzZTsgfVxuXG4gICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RBdHRhY2s7XG4gICAgcmV0dXJuIGRlbHRhID49IHRoaXMuYXR0YWNrU3BlZWQ7XG4gIH1cblxuICBnZXRBdHRhY2tWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRhY2tTdHJlbmd0aDtcbiAgfVxuXG4gIGRldGVybWluZVRhcmdldCgpIHtcbiAgICBpZih0aGlzLnRhcmdldExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0TGlzdFswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xuICAgIGlmKCF0aGlzLmNhbkF0dGFjayh0aW1lc3RhbXApKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IHRhcmdldCA9IHRoaXMuZGV0ZXJtaW5lVGFyZ2V0KCk7XG4gICAgaWYodGFyZ2V0ICE9PSBudWxsICYmIHRhcmdldC52aWV3T2JqKSB7XG4gICAgICB0aGlzLm5leHRUYXJnZXQgPSB7XG4gICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICBjYWxsYmFjazogKHRhcmdldCkgPT4ge1xuICAgICAgICAgIHRhcmdldC5oZWFsdGggLT0gdGhpcy5nZXRBdHRhY2tWYWx1ZSgpO1xuICAgICAgICAgIGlmKHRhcmdldC5oZWFsdGggPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIucHJvY2Vzc1Jld2FyZCh0YXJnZXQua2lsbFJld2FyZCk7XG5cbiAgICAgICAgICAgIHRhcmdldC5hdHRhY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIHRhcmdldC5kZXN0cm95ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGFyZ2V0KHRhcmdldC5jb2xsaWRlci5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmluaXRpYXRlQXR0YWNrID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdEF0dGFjayA9IHRpbWVzdGFtcDtcbiAgfVxuXG5cbiAgc3Bhd25BcnJvdyh0YXJnZXQsIHRpbWVzdGFtcCwgY2FsbGJhY2spIHtcbiAgICBsZXQgdGV4dHVyZSA9IHRoaXMudGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9maXJlYmFsbC5qcGcnLCBUSFJFRS5TcGhlcmljYWxSZWZyYWN0aW9uTWFwcGluZyk7XG4gICAgbGV0IGFycm93RyA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgxLCAzMiwgMTYpO1xuICAgIGxldCBhcnJvd01hdCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7IGNvbG9yOiAweEZGRkZGRiAsIG1hcDogdGV4dHVyZSwgZW1pc3NpdmU6IDB4NDQwMDAwIH0pO1xuXG5cbiAgICBsZXQgZmFjZVZlcnRleFV2cyA9IGFycm93Ry5mYWNlVmVydGV4VXZzWyAwIF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWNlVmVydGV4VXZzLmxlbmd0aDsgaSArKykge1xuXG4gICAgICBsZXQgdXZzID0gZmFjZVZlcnRleFV2c1sgaSBdO1xuICAgICAgbGV0IGZhY2UgPSBhcnJvd0cuZmFjZXNbIGkgXTtcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqICsrKSB7XG5cbiAgICAgICAgdXZzWyBqIF0ueCA9IGZhY2UudmVydGV4Tm9ybWFsc1sgaiBdLnggKiAwLjUgKyAwLjU7XG4gICAgICAgIHV2c1sgaiBdLnkgPSBmYWNlLnZlcnRleE5vcm1hbHNbIGogXS55ICogMC41ICsgMC41O1xuXG4gICAgICB9XG5cbiAgICB9XG5cblxuICAgIGxldCBhcnJvdyA9IG5ldyBUSFJFRS5NZXNoKGFycm93RywgYXJyb3dNYXQpO1xuICAgIGFycm93Lm5hbWUgPSBcIkFycm93XCI7XG4gICAgdGhpcy5zY2VuZS5hZGQoYXJyb3cpO1xuXG4gICAgYXJyb3cucG9zaXRpb24uc2V0KHRoaXMuc3RhcnRpbmdYLCB0aGlzLnN0YXJ0aW5nWSArIDIsIHRoaXMuc3RhcnRpbmdaKTtcblxuICAgIGxldCBpZCA9IHRoaXMuYXJyb3dJZCsrO1xuXG4gICAgbGV0IHN0YXJ0aW5nWSA9IGFycm93LnBvc2l0aW9uLnk7XG4gICAgbGV0IG1heCA9IHN0YXJ0aW5nWSArIDU7XG4gICAgbGV0IGVuZGluZ1kgPSB0YXJnZXQudmlld09iai5wb3NpdGlvbi55O1xuXG4gICAgbGV0IHhfMSA9IDA7XG4gICAgbGV0IHlfMSA9IHN0YXJ0aW5nWTtcblxuICAgIGxldCB4XzIgPSAwLjU7XG4gICAgbGV0IHlfMiA9IG1heDtcblxuICAgIGxldCB4XzMgPSAxO1xuICAgIGxldCB5XzMgPSBlbmRpbmdZO1xuXG4gICAgbGV0IGEgPSB5XzEvKCh4XzEteF8yKSooeF8xLXhfMykpICsgeV8yLygoeF8yLXhfMSkqKHhfMi14XzMpKSArIHlfMy8oKHhfMy14XzEpKih4XzMteF8yKSlcblxuICAgIGxldCBiID0gLXlfMSooeF8yK3hfMykvKCh4XzEteF8yKSooeF8xLXhfMykpXG4gICAgICAgIC15XzIqKHhfMSt4XzMpLygoeF8yLXhfMSkqKHhfMi14XzMpKVxuICAgICAgICAteV8zKih4XzEreF8yKS8oKHhfMy14XzEpKih4XzMteF8yKSlcblxuICAgIGxldCBjID0geV8xKnhfMip4XzMvKCh4XzEteF8yKSooeF8xLXhfMykpXG4gICAgICArIHlfMip4XzEqeF8zLygoeF8yLXhfMSkqKHhfMi14XzMpKVxuICAgICAgKyB5XzMqeF8xKnhfMi8oKHhfMy14XzEpKih4XzMteF8yKSlcblxuXG5cbiAgICBsZXQgeUZ1bmN0aW9uID0gKGRlbHRhKSA9PiB7XG4gICAgICByZXR1cm4gKGEgKiAoZGVsdGEgKiBkZWx0YSkpICsgKGIgKiBkZWx0YSkgKyBjO1xuICAgIH1cblxuICAgIGxldCBpbml0aWFsRGlzdGFuY2VYID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueCAtIGFycm93LnBvc2l0aW9uLng7XG4gICAgbGV0IGRpc3RhbmNlVGFyZ2V0V2lsbFRyYXZlbFggPSAodGFyZ2V0LnNwZWVkLzE2KSAqIHRoaXMuYXJyb3dTcGVlZCAqIC10aGlzLmRpcmVjdGlvbjtcbiAgICBsZXQgbV94ID0gaW5pdGlhbERpc3RhbmNlWCArIGRpc3RhbmNlVGFyZ2V0V2lsbFRyYXZlbFg7XG5cbiAgICBjb25zb2xlLmxvZyhtX3gsIGFycm93LnBvc2l0aW9uLngpO1xuICAgIGlmKG1feCAqIC10aGlzLmRpcmVjdGlvbiA+IDApIHtcbiAgICAgIG1feCA9IHRoaXMuZGlyZWN0aW9uICogNTtcbiAgICB9XG4gICAgbGV0IGNfeCA9IGFycm93LnBvc2l0aW9uLng7XG5cbiAgICBsZXQgeEZ1bmN0aW9uID0gKGRlbHRhKSA9PiB7XG4gICAgICByZXR1cm4gKG1feCAqIGRlbHRhKSArIGNfeDtcbiAgICB9XG5cbiAgICBsZXQgbV96ID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueiAtIGFycm93LnBvc2l0aW9uLno7XG4gICAgbGV0IGNfeiA9IGFycm93LnBvc2l0aW9uLno7XG5cbiAgICBsZXQgekZ1bmN0aW9uID0gKGRlbHRhKSA9PiB7XG4gICAgICByZXR1cm4gKG1feiAqIGRlbHRhKSArIGNfejtcbiAgICB9XG5cblxuICAgIHRoaXMuYXJyb3dzLnB1c2goe1xuICAgICAgaWQ6IGlkLFxuICAgICAgb2JqOiBhcnJvdyxcbiAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgc3RhcnRpbmdUaW1lOiB0aW1lc3RhbXAsXG4gICAgICB5RnVuY3Rpb246IHlGdW5jdGlvbixcbiAgICAgIHhGdW5jdGlvbjogeEZ1bmN0aW9uLFxuICAgICAgekZ1bmN0aW9uOiB6RnVuY3Rpb25cbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2FsbGJhY2sodGFyZ2V0KTtcbiAgICAgIHRoaXMuYXJyb3dzID0gdGhpcy5hcnJvd3MuZmlsdGVyKChhKSA9PiB7XG4gICAgICAgIHJldHVybiBhICE9PSBpZDtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUoYXJyb3cpO1xuICAgIH0sIHRoaXMuYXJyb3dTcGVlZCk7XG5cbiAgfVxuXG4gIGFuaW1hdGVBcnJvd3ModGltZXN0YW1wKSB7XG4gICAgdGhpcy5hcnJvd3MuZm9yRWFjaCgoYXJyb3cpID0+IHtcbiAgICAgIGxldCBkZWx0YSA9ICh0aW1lc3RhbXAgLSBhcnJvdy5zdGFydGluZ1RpbWUpIC8gdGhpcy5hcnJvd1NwZWVkO1xuICAgICAgYXJyb3cub2JqLnBvc2l0aW9uLnkgPSBhcnJvdy55RnVuY3Rpb24oZGVsdGEpO1xuICAgICAgYXJyb3cub2JqLnBvc2l0aW9uLnggPSBhcnJvdy54RnVuY3Rpb24oZGVsdGEpO1xuICAgICAgYXJyb3cub2JqLnBvc2l0aW9uLnogPSBhcnJvdy56RnVuY3Rpb24oZGVsdGEpO1xuICAgICAgYXJyb3cub2JqLnJvdGF0aW9uLnkgKz0gMC4xO1xuICAgICAgYXJyb3cub2JqLnJvdGF0aW9uLnggKz0gMC4xO1xuXG4gICAgfSk7XG4gIH1cblxuICBhbmltYXRlQXR0YWNrKHRpbWVzdGFtcCkge1xuICAgIGlmKHRoaXMucmlnaHRBcm0gJiYgdGhpcy5pbml0aWF0ZUF0dGFjaykge1xuICAgICAgaWYodGhpcy5yaWdodEFybS5yb3RhdGlvbi56ID4gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5lbmRpbmdBbmdsZSkge1xuICAgICAgICBpZih0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID09PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGU7XG4gICAgICAgIGxldCB0aW1lUmF0aW8gPSBkZWx0YSAvIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uc3BlZWREb3duO1xuICAgICAgICBsZXQgZGVncmVlQ2hhbmdlID0gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5hbmdsZURpZmZlcmVuY2UgKiB0aW1lUmF0aW87XG5cblxuICAgICAgICB0aGlzLnJpZ2h0QXJtLnJvdGF0aW9uLnogLT0gZGVncmVlQ2hhbmdlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gdGltZXN0YW1wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zcGF3bkFycm93KFxuICAgICAgICAgICAgdGhpcy5uZXh0VGFyZ2V0LnRhcmdldCxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldC5jYWxsYmFjayApO1xuXG4gICAgICAgIHRoaXMucmVzZXRBdHRhY2tBbmltYXRpb24oKTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmKHRoaXMucmlnaHRBcm0gJiYgdGhpcy5yZWNoYXJnaW5nKSB7XG4gICAgICBpZih0aGlzLnJpZ2h0QXJtLnJvdGF0aW9uLnogPCB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLnN0YXJ0aW5nQW5nbGUpIHtcbiAgICAgICAgaWYodGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPSB0aW1lc3RhbXA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlO1xuICAgICAgICBsZXQgdGltZVJhdGlvID0gZGVsdGEgLyB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLnNwZWVkVXA7XG4gICAgICAgIGxldCBkZWdyZWVDaGFuZ2UgPSB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmFuZ2xlRGlmZmVyZW5jZSAqIHRpbWVSYXRpbztcblxuICAgICAgICB0aGlzLnJpZ2h0QXJtLnJvdGF0aW9uLnogKz0gZGVncmVlQ2hhbmdlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gdGltZXN0YW1wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZWNoYXJnaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmKHRoaXMubmV4dFRhcmdldCAmJiB0aGlzLm5leHRUYXJnZXQudGFyZ2V0KSB7XG4gICAgICBsZXQgYW5nbGVUb3dhcmRzVGFyZ2V0ID0gdGhpcy5jYWxjdWxhdGVBbmdsZVRvVGFyZ2V0KHRoaXMubmV4dFRhcmdldC50YXJnZXQpO1xuICAgICAgdGhpcy5ib2R5TW9kZWwucm90YXRpb24ueSA9IGFuZ2xlVG93YXJkc1RhcmdldCArIHRoaXMuc3RhcnRpbmdSb3RhdGlvbjtcbiAgICB9XG4gIH1cblxuICByZXNldEF0dGFja0FuaW1hdGlvbigpIHtcbiAgICB0aGlzLmluaXRpYXRlQXR0YWNrID0gZmFsc2U7XG4gICAgdGhpcy5yZWNoYXJnaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gbnVsbDtcbiAgfVxuXG4gIGNhbGN1bGF0ZUFuZ2xlVG9UYXJnZXQodGFyZ2V0KSB7XG4gICAgbGV0IHhEaWZmID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueCAtIHRoaXMudmlld09iai5wb3NpdGlvbi54O1xuICAgIGxldCB6RGlmZiA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnogLSB0aGlzLnZpZXdPYmoucG9zaXRpb24uejtcbiAgICBsZXQgZGlmZlJhdGlvID0gekRpZmYgLyB4RGlmZjtcbiAgICByZXR1cm4gKE1hdGguUEkgKiAtdGhpcy5kaXJlY3Rpb24pIC0gTWF0aC5hdGFuKGRpZmZSYXRpbykgKyBNYXRoLlBJO1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcbiAgICB0aGlzLmF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApO1xuICAgIHRoaXMuYW5pbWF0ZUFycm93cyh0aW1lc3RhbXApO1xuICAgIHRoaXMuYW5pbWF0ZUF0dGFjayh0aW1lc3RhbXApO1xuICAgIHRoaXMuY29sbGlkZXIudXBkYXRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZSB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xuICAgIHRoaXMucGxheWVySWQgPSB0aGlzLnBsYXllci5pZDtcblxuICAgIHRoaXMuYmFzZVdpZHRoID0gZ3JpZFdpZHRoO1xuICAgIHRoaXMuYmFzZUhlaWdodCA9IDIwO1xuICAgIHRoaXMuYmFzZURlcHRoID0gMTA7XG5cbiAgICB0aGlzLm1heEhlYWx0aCA9IDI1MDtcbiAgICB0aGlzLmhlYWx0aCA9IHRoaXMubWF4SGVhbHRoO1xuXG4gICAgdGhpcy5oaXRCb3hCdWZmZXIgPSAyO1xuXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xuICAgICAgbW9uZXk6IDU1MCxcbiAgICAgIHNjb3JlOiAxMDAwXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplVmlldyh0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy5yZWdpc3RlckNvbGxpc2lvbigpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVZpZXcoZGlyZWN0aW9uLCBoaXRCb3hPcGFjaXR5PTApIHtcbiAgICB0aGlzLnZpZXdPYmogPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxuICAgICAgdGhpcy5iYXNlRGVwdGgsXG4gICAgICB0aGlzLmJhc2VIZWlnaHQsXG4gICAgICB0aGlzLmJhc2VXaWR0aFxuICAgICk7XG5cblxuICAgIGxldCB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcbiAgICBsZXQgbm9ybWFsTWFwID0gdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9yb2NrLW5vcm1hbC1tYXAuanBnJyk7XG4gICAgbGV0IGxvbmdUZXh0dXJlID0gdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9icmljay13YWxsLmpwZycpO1xuICAgIGxldCBza2lubnlUZXh0dXJlID0gdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9icmljay13YWxsLmpwZycpO1xuICAgIGxldCBzaWRlVGV4dHVyZSA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvYnJpY2std2FsbC5qcGcnKTtcbiAgICBsZXQgYmFzZUNvbG9yID0gMHg1NTU1NTU7XG5cbiAgICBsb25nVGV4dHVyZS53cmFwUyA9IGxvbmdUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgbG9uZ1RleHR1cmUucmVwZWF0LnNldCgzLCAxKTtcblxuICAgIHNraW5ueVRleHR1cmUud3JhcFMgPSBza2lubnlUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgc2tpbm55VGV4dHVyZS5yZXBlYXQuc2V0KDEsIDMpO1xuXG4gICAgc2lkZVRleHR1cmUud3JhcFMgPSBzaWRlVGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIHNpZGVUZXh0dXJlLnJlcGVhdC5zZXQoMSwgMSk7XG5cbiAgICBsZXQgc2tpbm55TWF0ID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogMHgzMzMzMzMsIHNwZWN1bGFyOiAweDMzMzMzMywgc2hpbmluZXNzOiAxNSwgbm9ybWFsTWFwOiB0ZXh0dXJlTG9hZGVyLmxvYWQoJ3RleHR1cmVzL3JvY2stbm9ybWFsLW1hcC5qcGcnKSwgbm9ybWFsU2NhbGU6IG5ldyBUSFJFRS5WZWN0b3IyKCAwLjA1LCAxICksIG1hcDogc2tpbm55VGV4dHVyZSB9KTtcblxuXG4gICAgbGV0IGxvbmdNYXQgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBiYXNlQ29sb3IsIHNwZWN1bGFyOiAweDMzMzMzMywgc2hpbmluZXNzOiAxNSwgbm9ybWFsTWFwOiBub3JtYWxNYXAsIG5vcm1hbFNjYWxlOiBuZXcgVEhSRUUuVmVjdG9yMiggMSwgMSApLCBtYXA6IGxvbmdUZXh0dXJlIH0pO1xuXG4gICAgbGV0IHNpZGVNYXQgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBiYXNlQ29sb3IsIHNwZWN1bGFyOiAweDMzMzMzMywgc2hpbmluZXNzOiAxNSwgbm9ybWFsTWFwOiBub3JtYWxNYXAsIG5vcm1hbFNjYWxlOiBuZXcgVEhSRUUuVmVjdG9yMiggMSwgMSApLCBtYXA6IHNpZGVUZXh0dXJlIH0pO1xuXG4gICAgbGV0IHNoYXBlTWF0ZXJpYWxzID0gW1xuICAgICAgbG9uZ01hdCwgLy8gUmlnaHRcbiAgICAgIGxvbmdNYXQsIC8vIExlZnRcbiAgICAgIHNraW5ueU1hdCwgLy8gVG9wXG4gICAgICBzaWRlTWF0LCAvLyBCYWNrXG4gICAgICBzaWRlTWF0LCAvLyBGcm9udFxuICAgICAgc2tpbm55TWF0LCAvLyBCb3R0b21cblxuICAgIF1cblxuICAgIGxldCBzaGFwZU1lc2ggPSBuZXcgVEhSRUUuTWVzaChzaGFwZUdlb21ldHJ5LCBuZXcgVEhSRUUuTXVsdGlNYXRlcmlhbChzaGFwZU1hdGVyaWFscykpO1xuXG5cbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoXG4gICAgICB0aGlzLmJhc2VEZXB0aCArIHRoaXMuaGl0Qm94QnVmZmVyLFxuICAgICAgdGhpcy5iYXNlSGVpZ2h0ICsgdGhpcy5oaXRCb3hCdWZmZXIsXG4gICAgICB0aGlzLmJhc2VXaWR0aCArIHRoaXMuaGl0Qm94QnVmZmVyIFxuICAgICk7XG5cbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHksIGRlcHRoV3JpdGU6IGZhbHNlIH0pO1xuICAgIGxldCBoaXRNZXNoID0gbmV3IFRIUkVFLk1lc2goaGl0R2VvbWV0cnksIGhpdE1hdGVyaWFsKTtcblxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XG4gICAgdGhpcy5oaXRCb3ggPSBoaXRNZXNoO1xuXG4gICAgdGhpcy52aWV3T2JqLmFkZChzaGFwZU1lc2gpO1xuICAgIHRoaXMudmlld09iai5hZGQoaGl0TWVzaCk7XG4gICAgdGhpcy52aWV3T2JqLmFkZCh0aGlzLmhlYWx0aEJhcik7XG5cbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCA9ICgoLWdyaWRXaWR0aC8yKSAtICh0aGlzLmJhc2VEZXB0aCAvIDIpKSAqIHRoaXMuZGlyZWN0aW9uO1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi55ID0gdGhpcy5iYXNlSGVpZ2h0LzI7XG5cbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLnBsYXllciA9IHRoaXMucGxheWVyO1xuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLmltbXVuZVRvUmFuZ2UgPSB0cnVlO1xuICB9XG5cbiAgaW5pdGlhbGl6ZUhlYWx0aEJhcigpIHtcbiAgICB0aGlzLl9oZWFsdGhCYXJMZW5ndGggPSBncmlkV2lkdGggLyAxMDtcbiAgICB0aGlzLl9oZWFsdGhCYXJXaWR0aCA9IGdyaWRXaWR0aCAvIDE1MDtcbiAgICBsZXQgZnVsbEhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhckxlbmd0aCwgdGhpcy5faGVhbHRoQmFyV2lkdGgsIHRoaXMuX2hlYWx0aEJhcldpZHRoKTtcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDB9KTtcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XG4gICAgZnVsbEhlYWx0aEJhck1lc2gubmFtZSA9IFwiRnVsbEhlYWx0aEJhclwiO1xuXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyTGVuZ3RoICogMC45OSwgdGhpcy5faGVhbHRoQmFyV2lkdGggKiAwLjksIHRoaXMuX2hlYWx0aEJhcldpZHRoICogMC45KTtcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwfSk7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGVtcHR5SGVhbHRoQmFyR2VvbWV0cnksIGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xuXG4gICAgbGV0IGhlYWx0aEJhckdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZW1wdHlIZWFsdGhCYXJNZXNoKTtcblxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSB0aGlzLmJhc2VIZWlnaHQgKyA1O1xuXG4gICAgcmV0dXJuIGhlYWx0aEJhckdyb3VwO1xuICB9XG5cbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhckxlbmd0aCAvIDI7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcblxuICAgIGZ1bGxIZWFsdGhCYXIuc2NhbGUueCA9IGhlYWx0aFBlcmNlbnQ7XG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xuICB9XG5cbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KClcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5wdXNoKHRoaXMuY29sbGlkZXIpO1xuICB9XG5cbiAgcnVuTG9vcCgpIHtcbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCB4UG9zaXRpdmUgPSAxO1xuZXhwb3J0IGNvbnN0IHhOZWdhdGl2ZSA9IC0xO1xuZXhwb3J0IGNvbnN0IGdyaWRXaWR0aCA9IDY0O1xuZXhwb3J0IGNvbnN0IGdyaWRTdWJEaXYgPSAxNjtcblxubGV0IG1pbmlvbiA9IHtcblx0YmFzZUhlYWx0aDogMTAsXG5cdGJhc2VBdHRhY2s6IDMsXG5cdGJhc2VBdHRhY2tTcGVlZDogMTAwMCxcblx0dXBncmFkZXM6IHtcblx0XHRoZWFsdGg6IHtcblx0XHRcdGNvc3Q6IDUwLFxuXHRcdFx0YW1vdW50OiA1XG5cdFx0fSxcblx0XHRhdHRhY2s6IHtcblx0XHRcdGNvc3Q6IDc1LFxuXHRcdFx0YW1vdW50OiAyXG5cdFx0fSxcblx0XHRhdHRhY2tTcGVlZDoge1xuXHRcdFx0Y29zdDogMTAwLFxuXHRcdFx0YW1vdW50OiAyNVxuXHRcdH1cblx0fVxufTtcblxubGV0IGJhc2UgPSB7XG5cdGJhc2VIZWFsdGg6IDI1MCxcblx0dXBncmFkZXM6IHtcblx0XHRoZWFsdGg6IHtcblx0XHRcdGNvc3Q6IDE1MCxcblx0XHRcdGFtb3VudDogMjUwLFxuXHRcdH1cblx0fVxufTtcblxubGV0IGFyY2hlciA9IHtcblx0YmFzZUF0dGFjazogNSxcblx0YmFzZUF0dGFja1NwZWVkOiAxMDAwLFxuXHRiYXNlQXJyb3dTcGVlZDogMTAwMCxcblx0dXBncmFkZXM6IHtcblx0XHRhdHRhY2s6IHtcblx0XHRcdGNvc3Q6IDUwLFxuXHRcdFx0YW1vdW50OiA0LFxuXHRcdH0sXG5cdFx0YXR0YWNrU3BlZWQ6IHtcblx0XHRcdGNvc3Q6IDEwMCxcblx0XHRcdGFtb3VudDogNTAsXG5cdFx0fVxuXHR9XG59XG5cbmxldCBwbGF5ZXIgPSB7XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHttaW5pb24sIGJhc2UsIGFyY2hlciwgcGxheWVyfTtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IEFJIGZyb20gJy4vYWktcGxheWVyJztcbmltcG9ydCB7IGFjdGl2YXRlTWVudSB9IGZyb20gJy4vbWVudS1zY3JlZW4nO1xuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMuY2FtZXJhID0gYXJncy5jYW1lcmE7XG5cbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtID0gbmV3IFRIUkVFeC5Db2xsaWRlclN5c3RlbSgpO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gW107XG5cbiAgICB0aGlzLnBsYXllcklkID0gMDtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemVQbGF5ZXJzKCkge1xuICAgIHRoaXMubXlQbGF5ZXIgPSBuZXcgUGxheWVyKHtcbiAgICAgIHR5cGU6ICdodW1hbicsXG4gICAgICBkaXJlY3Rpb246IHhQb3NpdGl2ZSxcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXG4gICAgICBjb2xsaWRlclN5c3RlbTogdGhpcy5jb2xsaWRlclN5c3RlbSxcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XG4gICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgY29sbGlkZXJTeXN0ZW06IHRoaXMuY29sbGlkZXJTeXN0ZW0sXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIGlkOiB0aGlzLnBsYXllcklkKytcbiAgICB9KTtcblxuICAgIHRoaXMuQUkgPSBuZXcgQUkoe1xuICAgICAgcGxheWVyOiB0aGlzLmNvbXB1dGVyLFxuICAgICAgcGVyc29uYWxpdHk6IFwicmFuZG9tQUlcIlxuICAgIH0pO1xuXG4gICAgIHRoaXMucGxheWVyQUkgPSBuZXcgQUkoe1xuICAgICAgIHBsYXllcjogdGhpcy5teVBsYXllcixcbiAgICAgICBwZXJzb25hbGl0eTogXCJyYW5kb21BSVwiXG4gICAgIH0pO1xuXG5cbiAgICB0aGlzLnN0YXRlLnBsYXllcnMgPSBbIHRoaXMubXlQbGF5ZXIsIHRoaXMuY29tcHV0ZXIgXTtcbiAgfVxuXG4gIGluaXRpYWxpemVHYW1lT3Zlcih7IHdpbm5lciwgc2NvcmUgfSkge1xuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHAgPT4gcC5zZXRHYW1lT3ZlcigpKTtcbiAgICBhY3RpdmF0ZU1lbnUoe1xuICAgICAgd2lubmVyOiB3aW5uZXIsXG4gICAgICBzY29yZTogc2NvcmVcbiAgICB9KVxuICB9XG5cbiAgcmVzdGFydCgpIHtcbiAgICB3aGlsZSh0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmNvbGxpZGVyTGlzdC5wb3AoKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcbiAgICAgIHBsYXllci5yZXNldCgpO1xuICAgIH0pO1xuICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcbiAgfVxuXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xuICAgIGlmKHRoaXMuZ2FtZU92ZXIpIHtcblxuICAgIH1cbiAgICBpZih0aGlzLkFJKSB7XG4gICAgICB0aGlzLkFJLnJ1bkxvb3AodGltZXN0YW1wLCB0aGlzLm15UGxheWVyLm1pbmlvbnMpO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyQUkpIHtcbiAgICAgIHRoaXMucGxheWVyQUkucnVuTG9vcCh0aW1lc3RhbXAsIHRoaXMuY29tcHV0ZXIubWluaW9ucyk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7XG4gICAgICBwbGF5ZXIucnVuTG9vcCh0aW1lc3RhbXApO1xuICAgICAgaWYocGxheWVyLmxvc3QgJiYgIXRoaXMuZ2FtZU92ZXIpIHtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIGxldCB3aW5uZXIgPSB0aGlzLnN0YXRlLnBsYXllcnMuZmluZChwID0+IHAuaWQgIT09IHBsYXllci5pZCk7XG4gICAgICAgIGxldCBzY29yZSA9IHdpbm5lci5zY29yZTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplR2FtZU92ZXIoeyB3aW5uZXIsIHNjb3JlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0uY29tcHV0ZUFuZE5vdGlmeSh0aGlzLmNvbGxpZGVyTGlzdCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGdyaWRXaWR0aCxcbiAgICAgICAgIGdyaWRMZW5ndGgsXG4gICAgICAgICBncmlkU3ViRGl2LFxuICAgICAgICAgbWluaW9uQmFzZUhlYWx0aCxcbiAgICAgICAgIG1pbmlvbkJhc2VBdHRhY2ssXG4gICAgICAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWQsXG4gICAgICAgICBhcmNoZXJCYXNlQXR0YWNrLFxuICAgICAgICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkLFxuICAgICAgICAgYmFzZUhlYWx0aFVwZ3JhZGVBbW91bnRcbiAgICAgICB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBiaW5kQnV0dG9ucyB9IGZyb20gJy4vbWVudS1zY3JlZW4nO1xuXG4vLyBVSSBFbGVtZW50c1xubGV0IHNjb3JlVGV4dCwgbW9uZXlUZXh0LCBwb3BwdWxhdGlvblRleHQsIGJhc2VIZWFsdGhUZXh0LCBtaW5pb25CYXNlSGVhbHRoVGV4dCAsbWluaW9uQmFzZUF0dGFja1RleHQgLG1pbmlvbkJhc2VBdHRhY2tTcGVlZFRleHQgLGFyY2hlckJhc2VBdHRhY2tUZXh0ICxhcmNoZXJCYXNlQXR0YWNrU3BlZWRUZXh0O1xubGV0IGJhc2VIZWFsdGhVcGdyYWRlLCBtaW5pb25CYXNlSGVhbHRoVXBncmFkZSAsbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUgLG1pbmlvbkJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUgLGFyY2hlckJhc2VBdHRhY2tVcGdyYWRlICxhcmNoZXJCYXNlQXR0YWNrU3BlZWRVcGdyYWRlO1xuXG5cbi8vIFRleHR1cmVcbmNvbnN0IHBsYW5lVGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZChcInRleHR1cmVzL3N0b25lLmpwZ1wiKTtcbnBsYW5lVGV4dHVyZS5yZXBlYXQuc2V0KDEwLDEwKTtcbnBsYW5lVGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xucGxhbmVUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVZpZXcge1xuICBjb25zdHJ1Y3RvcihnbG9iYWxzLCBnYW1lRW5naW5lKSB7XG4gICAgdGhpcy5zY2VuZSA9IGdsb2JhbHMuc2NlbmU7XG4gICAgdGhpcy5jYW1lcmEgPSBnbG9iYWxzLmNhbWVyYTtcbiAgICB0aGlzLnJlbmRlcmVyID0gZ2xvYmFscy5yZW5kZXJlcjtcblxuICAgIHRoaXMuZ2FtZUVuZ2luZSA9IGdhbWVFbmdpbmU7XG5cbiAgICB0aGlzLnNldHVwR3JpZCgpO1xuICAgIHRoaXMuc2V0dXBHcmFzc0ZpZWxkKCk7XG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XG5cbiAgICB0aGlzLm1vdXNlID0geyB4OiAtMTAwMDAsIHk6IDAgfTtcblxuICAgIGxldCBwb3NpdGlvblNjYWxlID0gZ3JpZFdpZHRoIC8gMjtcblxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSAyICogcG9zaXRpb25TY2FsZTtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gMS41ICogcG9zaXRpb25TY2FsZTtcbiAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5zY2VuZS5wb3NpdGlvbik7XG5cbiAgICB0aGlzLmh1ZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodWQnKTtcbiAgICB0aGlzLmh1ZFVwZ3JhZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHVkLXVwZ3JhZGUnKTtcbiAgICB0aGlzLmxhc3RUaW1lU3RhbXAgPSAwO1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcblxuICAgIHRoaXMuc2V0dXBNb3VzZUV2ZW50KCk7XG4gICAgYmluZEJ1dHRvbnModGhpcywgdGhpcy5nYW1lRW5naW5lKTtcbiAgfVxuXG4gIHNldHVwTGlnaHQoKSB7XG4gICAgbGV0IGxpZ2h0QW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg2NjY2NjYsIDMpO1xuICAgIGxldCBsaWdodFNvdXJjZSA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ODg4ODg4LCAxKTtcblxuICAgIGxpZ2h0U291cmNlLnBvc2l0aW9uLnNldCgwLCAzMCwgMCk7XG4gICAgbGlnaHRBbWJpZW50LnBvc2l0aW9uLnNldCgwLCAzMCwgMCk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodEFtYmllbnQpO1xuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0U291cmNlKTtcbiAgfVxuXG4gIHNldHVwR3JpZCgpIHtcbiAgICAgLy9sZXQgdGV4dHVyZWRTdXJmYWNlR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIGdyaWRXaWR0aCk7XG4gICAgIC8vbGV0IHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHttYXA6IHBsYW5lVGV4dHVyZX0pO1xuICAgICAvL2xldCB0ZXh0dXJlZFN1cmZhY2UgPSBuZXcgVEhSRUUuTWVzaCh0ZXh0dXJlZFN1cmZhY2VHZW9tZXRyeSwgdGV4dHVyZWRTdXJmYWNlTWF0ZXJpYWwpO1xuICAgICAvL3RleHR1cmVkU3VyZmFjZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgIC8vdGV4dHVyZWRTdXJmYWNlLnBvc2l0aW9uLnkgPSAtMC4zO1xuICAgICAvL3RoaXMuc2NlbmUuYWRkKHRleHR1cmVkU3VyZmFjZSk7XG5cbiAgICBsZXQgZ3JpZCA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKGdyaWRXaWR0aCwgZ3JpZFN1YkRpdik7XG4gICAgZ3JpZC5wb3NpdGlvbi55ID0gLS40XG4gICAgdGhpcy5zY2VuZS5hZGQoZ3JpZCk7XG5cbiAgICB0aGlzLmdyaWRQYW5lbHMgPSB7fTtcblxuICAgIGxldCBwYW5lbExlbmd0aCA9IGdyaWRXaWR0aCAvIGdyaWRTdWJEaXY7XG4gICAgbGV0IHpQb3MgPSAoKGdyaWRXaWR0aCAvIDIpIC0gcGFuZWxMZW5ndGggLyAyKSAqIC0xO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xuICAgICAgbGV0IHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIHBhbmVsTGVuZ3RoKTtcbiAgICAgIGxldCBwbGFuZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMH0pO1xuICAgICAgbGV0IHBsYW5lID0gbmV3IFRIUkVFLk1lc2gocGxhbmVHZW9tZXRyeSwgcGxhbmVNYXRlcmlhbCk7XG4gICAgICBwbGFuZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gelBvcztcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAwO1xuICAgICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuICAgICAgdGhpcy5ncmlkUGFuZWxzW2ldID0gcGxhbmU7XG5cbiAgICAgIHpQb3MgKz0gcGFuZWxMZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgc2V0dXBHcmFzc0ZpZWxkKCkge1xuICAgIGxldCB0ZXh0dXJlVXJsICA9ICd0ZXh0dXJlcy9ncmFzc2xpZ2h0LXNtYWxsLmpwZydcbiAgICBsZXQgdGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZCh0ZXh0dXJlVXJsKTtcbiAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgdGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIHRleHR1cmUucmVwZWF0Lnk9IGdyaWRTdWJEaXY7XG4gICAgdGV4dHVyZS5yZXBlYXQueD0gZ3JpZFN1YkRpdjtcbiAgICB0ZXh0dXJlLmFuaXNvdHJvcHkgPSB0aGlzLnJlbmRlcmVyLmdldE1heEFuaXNvdHJvcHkoKVxuICAgIC8vIGJ1aWxkIG9iamVjdDNkXG4gICAgbGV0IGdlb21ldHJ5ICA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCAqIDEwLCBncmlkV2lkdGggKiAxMClcbiAgICBsZXQgbWF0ZXJpYWwgID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcbiAgICAgIG1hcCA6IHRleHR1cmUsXG4gICAgICBzaGluaW5lc3M6IDEwXG4gICAgfSlcbiAgICBsZXQgcGxhbmUgID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKVxuICAgIHBsYW5lLnJvdGF0ZVgoLU1hdGguUEkvMik7XG4gICAgcGxhbmUucG9zaXRpb24ueSA9IC0wLjI7XG4gICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuXG4gICAgIC8vIGxldCBuVHVmdHMgID0gMjAwMDtcbiAgICAgLy8gbGV0IHBvc2l0aW9ucyA9IG5ldyBBcnJheShuVHVmdHMpO1xuICAgICAvLyBmb3IobGV0IGkgPSAwOyBpIDwgblR1ZnRzOyBpKyspe1xuICAgICAvLyAgIGxldCBwb3NpdGlvbiAgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAvLyAgIHBvc2l0aW9uLnggID0gKE1hdGgucmFuZG9tKCktMC41KSpncmlkV2lkdGg7XG4gICAgIC8vICAgcG9zaXRpb24ueiAgPSAoTWF0aC5yYW5kb20oKS0wLjUpKmdyaWRXaWR0aDtcbiAgICAgLy8gICBwb3NpdGlvbnNbaV0gID0gcG9zaXRpb247XG4gICAgIC8vIH1cbiAgICAgLy8gbGV0IG1lc2ggID0gVEhSRUV4LmNyZWF0ZUdyYXNzVHVmdHMocG9zaXRpb25zKTtcbiAgICAgLy8gdGhpcy5zY2VuZS5hZGQobWVzaCk7XG4gIH1cblxuICBjaGVja0dyaWRJbnRlcnNlY3Rpb25zKCkge1xuICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5tb3VzZSwgdGhpcy5jYW1lcmEpO1xuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XG4gICAgbGV0IGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHBsYW5lcyk7XG5cbiAgICBwbGFuZXMuZm9yRWFjaCgocGFuZWwpID0+IHtcbiAgICAgIHBhbmVsLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweDY2NjY2Nik7XG4gICAgICBwYW5lbC5tYXRlcmlhbC5vcGFjaXR5ID0gMDtcbiAgICB9KTtcblxuICAgIGlmKGludGVyc2VjdHMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IG9iaiA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xuXG4gICAgICBvYmoubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4ZmYwMDAwKTtcbiAgICAgIG9iai5tYXRlcmlhbC5vcGFjaXR5ID0gLjU7XG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBvYmo7XG4gICAgfSBlbHNlIGlmKHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCl7XG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGdldEN1cnJlbnRQYW5lbEluZGV4KCkge1xuICAgIGlmKCF0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xuICAgICAgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID09PSBwbGFuZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBzZXR1cE1vdXNlRXZlbnQoKSB7XG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldnQgPT4ge1xuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcbiAgICAgIG1vdXNlLnkgPSAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDE7XG4gICAgfSk7XG4gIH1cblxuICBzdGFydEZpcnN0R2FtZSgpIHtcbiAgICB0aGlzLmdhbWVFbmdpbmUucmVzdGFydCgpO1xuICAgIHRoaXMuZ2FtZUVuZ2luZS5wbGF5ZXJBSSA9IG51bGw7XG5cbiAgICB0aGlzLmh1ZC5jbGFzc0xpc3QucmVtb3ZlKCdodWQtLWhpZGRlbicpO1xuICAgIHRoaXMuaHVkVXBncmFkZS5jbGFzc0xpc3QucmVtb3ZlKCdodWQtLWhpZGRlbicpO1xuXG4gICAgdGhpcy5pbml0aWFsaXplVXBncmFkZUJ1dHRvbnMoKTtcbiAgICB0aGlzLmluaXRpYWxpemVIdWRUZXh0cygpO1xuXG4gICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0Q3VycmVudFBhbmVsSW5kZXgoKTtcbiAgICAgIGlmKGluZGV4ID49IDApIHtcbiAgICAgICAgdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnNwYXduTWluaW9uKGluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsICgpID0+IHtcbiAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0Q3VycmVudFBhbmVsSW5kZXgoKTtcbiAgICAgIGlmKGluZGV4ID49IDApIHtcbiAgICAgICAgdGhpcy5nYW1lRW5naW5lLmNvbXB1dGVyLnNwYXduTWluaW9uKGluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUZQUyh0aW1lc3RhbXApIHtcbiAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RUaW1lU3RhbXA7XG4gICAgZGVsdGEgPSBkZWx0YSAvIDEwMDA7XG4gICAgdGhpcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKDEgLyBkZWx0YSk7XG4gIH1cblxuICB1cGRhdGVVSSh0aW1lc3RhbXApIHtcbiAgICBzY29yZVRleHQudGV4dENvbnRlbnQgPSB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIuc2NvcmU7XG4gICAgbW9uZXlUZXh0LnRleHRDb250ZW50ID0gdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLm1vbmV5O1xuICAgIHBvcHB1bGF0aW9uVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5taW5pb25zLmxlbmd0aCArIFwiL1wiICsgdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnBvcHB1bGF0aW9uQ2FwO1xuICAgIFxuICAgIGlmKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5iYXNlICE9PSBudWxsKSB7XG4gICAgICBiYXNlSGVhbHRoVGV4dC50ZXh0Q29udGVudCA9IE1hdGgubWF4KHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5iYXNlLmhlYWx0aCwgMCkudG9GaXhlZCgyKSArIFwiIC8gXCIgKyB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIuYmFzZS5tYXhIZWFsdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhc2VIZWFsdGhUZXh0LnRleHRDb250ZW50ID0gXCIwXCI7XG4gICAgfVxuICAgIFxuICAgIG1pbmlvbkJhc2VIZWFsdGhUZXh0LnRleHRDb250ZW50ID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlSGVhbHRoICsgKENvbnN0YW50cy5taW5pb24udXBncmFkZXMuaGVhbHRoLmFtb3VudCAqIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5taW5pb25CYXNlSGVhbHRoKTtcbiAgICBtaW5pb25CYXNlQXR0YWNrVGV4dC50ZXh0Q29udGVudCA9IENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFjayArIChDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQgKiB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZXMubWluaW9uQmFzZUF0dGFjayk7XG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVGV4dC50ZXh0Q29udGVudCA9ICgoQ29uc3RhbnRzLm1pbmlvbi5iYXNlQXR0YWNrU3BlZWQgKyAodGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2tTcGVlZCAqIC1Db25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudCkpIC8gMTAwMCkudG9GaXhlZCgyKSArICdzJztcbiAgICBcbiAgICBhcmNoZXJCYXNlQXR0YWNrVGV4dC50ZXh0Q29udGVudCA9IENvbnN0YW50cy5hcmNoZXIuYmFzZUF0dGFjayArICh0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFjayAqIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrLmFtb3VudCk7XG4gICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkVGV4dC50ZXh0Q29udGVudCA9ICgoQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrU3BlZWQgLSAodGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZCAqIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50KSkgLyAxMDAwKS50b0ZpeGVkKDIpICsgXCJzXCI7XG4gIH0gICAgIFxuXG4gIHJlbmRlckxvb3AodGltZXN0YW1wKSB7XG4gICAgdGhpcy5jaGVja0dyaWRJbnRlcnNlY3Rpb25zKCk7XG4gICAgdGhpcy5nYW1lRW5naW5lLmdhbWVMb29wKHRpbWVzdGFtcCk7XG5cbiAgICBpZih0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlVUkodGltZXN0YW1wKTtcbiAgICB9XG4gIH1cblxuICBpbml0aWFsaXplSHVkVGV4dHMoKSB7XG4gICAgc2NvcmVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XG4gICAgbW9uZXlUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmV5Jyk7XG4gICAgcG9wcHVsYXRpb25UZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHB1bGF0aW9uJyk7XG4gICAgYmFzZUhlYWx0aFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFzZUhlYWx0aCcpO1xuICAgIG1pbmlvbkJhc2VIZWFsdGhUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmlvbkJhc2VIZWFsdGgnKTtcbiAgICBtaW5pb25CYXNlQXR0YWNrVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlQXR0YWNrJyk7XG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlQXR0YWNrU3BlZWQnKTtcbiAgICBhcmNoZXJCYXNlQXR0YWNrVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoZXJCYXNlQXR0YWNrJyk7XG4gICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoZXJCYXNlQXR0YWNrU3BlZWQnKTtcbiAgfVxuXG4gIGluaXRpYWxpemVVcGdyYWRlQnV0dG9ucygpIHtcbiAgICBsZXQgZ2FtZVZpZXcgPSB0aGlzO1xuICAgIFxuICAgIGJhc2VIZWFsdGhVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNlSGVhbHRoVXBncmFkZScpO1xuICAgIGJhc2VIZWFsdGhVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVCYXNlSGVhbHRoKCk7XG4gICAgfSk7XG5cbiAgICBtaW5pb25CYXNlSGVhbHRoVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUhlYWx0aFVwZ3JhZGUnKTtcbiAgICBtaW5pb25CYXNlSGVhbHRoVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlTWluaW9uSGVhbHRoKCk7XG4gICAgfSk7XG5cbiAgICBtaW5pb25CYXNlQXR0YWNrVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUnKTtcbiAgICBtaW5pb25CYXNlQXR0YWNrVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlTWluaW9uQXR0YWNrKCk7XG4gICAgfSk7XG5cbiAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWRVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlQXR0YWNrU3BlZWRVcGdyYWRlJyk7XG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlTWluaW9uQXR0YWNrU3BlZWQoKTtcbiAgICB9KTtcblxuICAgIGFyY2hlckJhc2VBdHRhY2tVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoZXJCYXNlQXR0YWNrVXBncmFkZScpO1xuICAgIGFyY2hlckJhc2VBdHRhY2tVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVXaXphcmRBdHRhY2soKTtcbiAgICB9KTtcblxuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUnKTtcbiAgICBhcmNoZXJCYXNlQXR0YWNrU3BlZWRVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVXaXphcmRBdHRhY2tTcGVlZCgpO1xuICAgIH0pO1xuICB9XG59IFxuIiwibGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsJyk7XG5sZXQgc3RhcnRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0TW9kYWwnKTtcbmxldCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydEJ1dHRvbicpO1xubGV0IHJlc3RhcnRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhcnRNb2RhbCcpO1xubGV0IHJlc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydEJ1dHRvbicpO1xubGV0IHJlc3RhcnRNb2RhbE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydE1vZGFsTWVzc2FnZScpO1xuXG5mdW5jdGlvbiBhY3RpdmF0ZVN0YXJ0U2NyZWVuKCkge1xuICBzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbn1cblxuZnVuY3Rpb24gYWN0aXZhdGVSZXN0YXJ0U2NyZWVuKHdpbm5lciwgc2NvcmUpIHtcblxuICBsZXQgdGV4dCA9IGBQbGF5ZXIgJHt3aW5uZXIuaWQgKyAxfSB3aW5zIHdpdGggYSBzY29yZSBvZiAke3Njb3JlfSFgO1xuICByZXN0YXJ0TW9kYWxNZXNzYWdlLnRleHRDb250ZW50ID0gdGV4dDtcblxuICBzdGFydFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlTWVudShhcmdzKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XG5cbiAgaWYoYXJncy53aW5uZXIgIT09IG51bGwpIHtcbiAgICBhY3RpdmF0ZVJlc3RhcnRTY3JlZW4oYXJncy53aW5uZXIsIGFyZ3Muc2NvcmUpO1xuICB9IGVsc2Uge1xuICAgIGFjdGl2YXRlU3RhcnRTY3JlZW4oKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VNZW51KGFyZ3MpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRCdXR0b25zKGdhbWVWaWV3LCBnYW1lRW5naW5lKSB7XG4gIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGdhbWVWaWV3LnN0YXJ0Rmlyc3RHYW1lKCk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xuXG4gIHJlc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZ2FtZUVuZ2luZS5yZXN0YXJ0KCk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7IFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XG4gICAgdGhpcy5zdGFydGluZ1ogPSBhcmdzLnN0YXJ0aW5nWjtcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcblxuICAgIHRoaXMubWF4SGVhbHRoID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlSGVhbHRoICsgKGFyZ3MuaGVhbHRoVXBncmFkZSAqIENvbnN0YW50cy5taW5pb24udXBncmFkZXMuaGVhbHRoLmFtb3VudCk7XG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFjayArIChhcmdzLmF0dGFja1VwZ3JhZGUgKiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQpO1xuICAgIHRoaXMuYXR0YWNrU3BlZWQgPSBDb25zdGFudHMubWluaW9uLmJhc2VBdHRhY2tTcGVlZCArIChhcmdzLmF0dGFja1NwZWVkVXBncmFkZSAqIC1Db25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudCk7XG4gICAgdGhpcy5kZWZhdWx0U3BlZWQgPSAuMztcblxuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XG4gICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcbiAgICAgIGxhc3RUaW1lU3RhbXA6IG51bGwsXG4gICAgICBhdHRhY2tUaW1lOiAwXG4gICAgfTtcblxuICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcyA9IHtcbiAgICAgIGRpcmVjdGlvbjogMSxcbiAgICAgIHNwZWVkOiB0aGlzLmF0dGFja1NwZWVkIC8gMixcbiAgICB9O1xuXG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcyA9IHtcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICBzcGVlZDogNTAgLyB0aGlzLmRlZmF1bHRTcGVlZCwgLy8gVGhpcyBzaG91bGQgbm90IGNoYW5nZSBvbmx5IGNoYW5nZSB0aGUgc3BlZWQgb2YgdGhlIG1pbmlvbiBhbmQgdGhlIGFuaW1hdGlvbiB3aWxsIHVwZGF0ZSBhY2NvcmRpbmdseVxuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcbiAgICAgIHRpbWU6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xuICAgICAgbW9uZXk6IDc1LFxuICAgICAgc2NvcmU6IDI1XG4gICAgfTtcblxuICAgIHRoaXMuZGVzdHJveSA9IGZhbHNlO1xuICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XG5cbiAgICB0aGlzLnJvdE9iamVjdE1hdHJpeCA9IG51bGw7XG5cbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuc3RhcnRpbmdaKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XG4gIH1cblxuICBpbml0aWFsaXplVmlldyhzdGFydGluZ1osIGhpdEJveE9wYWNpdHk9MCkge1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDMsOCwzKTtcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xuXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcblxuICAgIGhpdE1lc2guYWRkKHRoaXMuaGVhbHRoQmFyKTtcbiAgICB0aGlzLnZpZXdPYmogPSBoaXRNZXNoO1xuICAgIHRoaXMuaGl0Qm94ID0gdGhpcy52aWV3T2JqO1xuXG4gICAgbGV0IHogPSAoKHN0YXJ0aW5nWiAqIChncmlkV2lkdGggLyBncmlkU3ViRGl2KSkgLSAoZ3JpZFdpZHRoIC8gMikpICsgKGdyaWRXaWR0aCAvIGdyaWRTdWJEaXYgLyAyKTtcbiAgICBsZXQgeCA9IChncmlkV2lkdGggLyAyKSAqIC10aGlzLmRpcmVjdGlvbjtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueiA9IHo7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSB4O1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi55ID0gNDtcblxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgaGl0R2VvbWV0cnkuZGlzcG9zZSgpO1xuICAgIGhpdE1hdGVyaWFsLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIGdldFBvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdPYmoucG9zaXRpb247XG4gIH1cblxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjMsIDAuMyk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcblxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjIsIDAuMik7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcblxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XG5cbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gNDtcblxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcbiAgfVxuXG4gIGlzT2JqZWN0TG9hZGVkKG9iaikge1xuICAgIHJldHVybiAob2JqLnBvc2l0aW9uLnggPT09IDAgJiYgb2JqLnBvc2l0aW9uLnkgPT09IDAgJiYgb2JqLnBvc2l0aW9uLnogPT09IDApO1xuICB9XG5cbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KClcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcblxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xuXG4gICAgICBpZih1c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHRoaXMuc3BlZWQgPSAwO1xuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gdXNlckRhdGEub2JqZWN0O1xuICAgICAgdGhpcy5yZXNldFdhbGtBbmltYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFN0YXknLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgbGV0IHVzZXJEYXRhID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YTtcblxuICAgICAgaWYodXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuICAgICAgaWYodXNlckRhdGEucmFuZ2VkKSB7IHJldHVybjsgfVxuXG4gICAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgIHRoaXMuYXR0YWNrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gdXNlckRhdGEub2JqZWN0O1xuICAgICAgICB0aGlzLnJlc2V0V2Fsa0FuaW1hdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEV4aXQnLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xuICAgICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgfSk7XG4gIH1cblxuICBnZXRBdHRhY2tWYWx1ZSgpIHtcbiAgICBsZXQgY3JpdFByb2MgPSBNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiBjcml0UHJvYyA+PSAuOSA/IHRoaXMuYXR0YWNrU3RyZW5ndGggKiAoTWF0aC5yYW5kb20oKSArIDEpIDogdGhpcy5hdHRhY2tTdHJlbmd0aDtcbiAgfVxuXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJXaWR0aCAvIDI7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcblxuICAgIGZ1bGxIZWFsdGhCYXIuc2NhbGUueCA9IGhlYWx0aFBlcmNlbnQ7XG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcbiAgICB0aGlzLmF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApO1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ICs9ICh0aGlzLnNwZWVkICogdGhpcy5kaXJlY3Rpb24pO1xuICAgIHRoaXMud2Fsa1Byb2NlZHVyZSh0aW1lc3RhbXApO1xuXG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICB9XG5cbiAgYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xuICAgIGlmKHRoaXMuaGVhbHRoIDw9IDApIHsgcmV0dXJuOyB9XG5cblxuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wICE9IG51bGwgJiYgdGhpcy5hdHRhY2spIHtcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSArIGRlbHRhO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmF0dGFja0xvb3AoZGVsdGEpO1xuICAgIH0gZWxzZSBpZih0aGlzLmF0dGFjaykge1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmF0dGFja0xvb3AoMCk7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gIH1cblxuICBhdHRhY2tMb29wKGRlbHRhKSB7XG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsIHx8IHRoaXMuY3VycmVudFRhcmdldC5wbGF5ZXJJZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cbiAgICB0aGlzLmFuaW1hdGVBdHRhY2soZGVsdGEpO1xuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lIDw9IHRoaXMuYXR0YWNrU3BlZWQpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcblxuICAgIGlmKHRoaXMuY3VycmVudFRhcmdldC5oZWFsdGggPD0gMCkge1xuICAgICAgdGhpcy5wbGF5ZXIucHJvY2Vzc1Jld2FyZCh0aGlzLmN1cnJlbnRUYXJnZXQua2lsbFJld2FyZCk7XG5cbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5hdHRhY2sgPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5kZXN0cm95ID0gdHJ1ZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gbnVsbDtcbiAgfVxuXG4gIGFuaW1hdGVBdHRhY2soZGVsdGEpIHtcbiAgICBpZih0aGlzLnZpZXdPYmouY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgbGV0IHJpZ2h0QXJtID0gdGhpcy52aWV3T2JqLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdO1xuICAgICAgbGV0IGN1cnJlbnRBdHRhY2tUaW1lID0gdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWU7XG4gICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbjtcbiAgICAgIGxldCBhbmltYXRpb25TcGVlZCA9IHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5zcGVlZDtcbiAgICAgIGxldCBtYXhSb3RhdGlvbiA9IDEzNTtcblxuICAgICAgbGV0IHJvdGF0aW9uID0gZGlyZWN0aW9uICogKChtYXhSb3RhdGlvbiAqIChNYXRoLlBJIC8gMTgwKSkgKiAoZGVsdGEgLyBhbmltYXRpb25TcGVlZCkpO1xuICAgICAgcm90YXRpb24gPSBNYXRoLm1pbihyaWdodEFybS5yb3RhdGlvbi56ICsgcm90YXRpb24sIG1heFJvdGF0aW9uKTtcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5tYXgocm90YXRpb24sIDApO1xuXG4gICAgICByaWdodEFybS5yb3RhdGlvbi56ID0gcm90YXRpb247XG4gICAgICBpZihjdXJyZW50QXR0YWNrVGltZSA+IGFuaW1hdGlvblNwZWVkKSB7XG4gICAgICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAxO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0QXR0YWNrQW5pbWF0aW9uKCkge1xuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgcmlnaHRBcm0gPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV07XG4gICAgICByaWdodEFybS5yb3RhdGlvbi56ID0gMDtcbiAgICB9XG4gIH1cblxuICB3YWxrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xuICAgIGlmKCF0aGlzLmF0dGFjayAmJiB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgIT09IG51bGwpIHtcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMubGFzdFRpbWVTdGFtcDtcbiAgICAgIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSArIGRlbHRhO1xuICAgICAgdGhpcy53YWxrTG9vcChkZWx0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2Fsa0xvb3AoMCk7XG4gICAgfVxuXG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xuICB9O1xuXG4gIHdhbGtMb29wKGRlbHRhKSB7XG4gICAgdGhpcy5hbmltYXRlV2FsayhkZWx0YSk7XG4gICAgaWYodGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lIDw9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuc3BlZWQpIHsgcmV0dXJuOyB9XG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lID0gMDtcbiAgfVxuXG4gIGFuaW1hdGVXYWxrKGRlbHRhKSB7XG4gICAgaWYodGhpcy52aWV3T2JqLmNoaWxkcmVuLmxlbmd0aCA+IDEgJiYgIXRoaXMuYXR0YWNrKSB7XG4gICAgICBsZXQgbGVncyA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblszXTtcbiAgICAgIGxldCBsZWZ0TGVnID0gbGVncy5jaGlsZHJlblswXTtcbiAgICAgIGxldCByaWdodExlZyA9IGxlZ3MuY2hpbGRyZW5bMV07XG4gICAgICBsZXQgYW5pbWF0aW9uVGltZSA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZTtcbiAgICAgIGxldCBhbmltYXRpb25TcGVlZCA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuc3BlZWQ7XG4gICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb247XG4gICAgICBsZXQgbWF4Um90YXRpb24gPSA0NTsgXG5cbiAgICAgIGxldCByb3RhdGlvbiA9IChtYXhSb3RhdGlvbiAqIChkZWx0YSAvIGFuaW1hdGlvblNwZWVkKSk7XG5cbiAgICAgIGlmKGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLmFuaW1hdGVMZWdGb3J3YXJkKGxlZnRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgICB0aGlzLmFuaW1hdGVMZWdCYWNrKHJpZ2h0TGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZUxlZ0ZvcndhcmQocmlnaHRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgICB0aGlzLmFuaW1hdGVMZWdCYWNrKGxlZnRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgfVxuXG4gICAgICBpZih0aGlzLnRvRGVncmVlcyhsZWZ0TGVnLnJvdGF0aW9uLnopID49IG1heFJvdGF0aW9uIHx8IHRoaXMudG9EZWdyZWVzKGxlZnRMZWcucm90YXRpb24ueikgPD0gLW1heFJvdGF0aW9uKSB7XG4gICAgICAgIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uID0gIXRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFuaW1hdGVMZWdCYWNrKGxlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSkge1xuICAgIGxldCBtYXggPSB0aGlzLnRvUmFkaWFucygtbWF4Um90YXRpb24pO1xuXG4gICAgaWYobGVnLnJvdGF0aW9uLnogKyB0aGlzLnRvUmFkaWFucygtcm90YXRpb24pIDwgbWF4KSB7XG4gICAgICBsZWcucm90YXRpb24ueiA9IG1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVnLnJvdGF0aW9uLnogKz0gdGhpcy50b1JhZGlhbnMoLXJvdGF0aW9uKTtcbiAgICB9XG4gIH0gXG5cbiAgYW5pbWF0ZUxlZ0ZvcndhcmQobGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKSB7XG4gICAgbGV0IG1heCA9IHRoaXMudG9SYWRpYW5zKG1heFJvdGF0aW9uKTtcbiAgICBpZihsZWcucm90YXRpb24ueiArIHRoaXMudG9SYWRpYW5zKCByb3RhdGlvbikgPiBtYXgpIHtcbiAgICAgIGxlZy5yb3RhdGlvbi56ID0gbWF4O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWcucm90YXRpb24ueiArPSB0aGlzLnRvUmFkaWFucyhyb3RhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRXYWxrQW5pbWF0aW9uKCkge1xuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgbGVncyA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblszXTtcbiAgICAgIGxldCBsZWZ0TGVnID0gbGVncy5jaGlsZHJlblswXTtcbiAgICAgIGxldCByaWdodExlZyA9IGxlZ3MuY2hpbGRyZW5bMV07XG5cbiAgICAgIGxlZnRMZWcucm90YXRpb24ueiA9IDA7XG4gICAgICByaWdodExlZy5yb3RhdGlvbi56ID0gMDtcbiAgICB9XG4gIH1cblxuICB0b0RlZ3JlZXMoYW5nbGVSYWRpYW5zKSB7XG4gICAgcmV0dXJuIChhbmdsZVJhZGlhbnMgKiAxODApIC8gTWF0aC5QSTtcbiAgfVxuXG4gIHRvUmFkaWFucyhhbmdsZURlZ3JlZXMpIHtcbiAgICByZXR1cm4gKGFuZ2xlRGVncmVlcyAvIDE4MCkgKiBNYXRoLlBJO1xuICB9XG59XG4iLCJpbXBvcnQgTWluaW9uIGZyb20gJy4vbWluaW9uJztcbmltcG9ydCBBcmNoZXIgZnJvbSAnLi9hcmNoZXInO1xuaW1wb3J0IEJhc2UgZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBhcmdzLmNvbGxpZGVyU3lzdGVtO1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMubWluaW9uSWQgPSAwO1xuICAgIHRoaXMuc3Bhd25Qb3MgPSAtZ3JpZFdpZHRoIC8gMiAqIHRoaXMuZGlyZWN0aW9uO1xuICAgIHRoaXMucG9wcHVsYXRpb25DYXAgPSAzMDtcblxuICAgIHRoaXMuc2V0VXBncmFkZVZhbHVlcygpO1xuICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLk9iamVjdExvYWRlcigpO1xuXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xuICAgIHRoaXMuc3Bhd25CYXNlKCk7XG4gICAgdGhpcy5zcGF3bkFyY2hlcnMoKTtcbiAgfVxuXG4gIHNwYXduQXJjaGVycygpIHtcbiAgICBsZXQgYXJjaGVyID0gbmV3IEFyY2hlcih7IFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsIFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCwgXG4gICAgICBzdGFydGluZ1o6IDIsIFxuICAgICAgc3RhcnRpbmdZOiAyMCwgXG4gICAgICBzdGFydGluZ1g6IHRoaXMuc3Bhd25Qb3MsIFxuICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiwgXG4gICAgICBwbGF5ZXI6IHRoaXMgXG4gICAgfSk7XG5cbiAgICB0aGlzLmFyY2hlcnMucHVzaChhcmNoZXIpO1xuXG4gICAgdGhpcy5sb2FkZXIubG9hZCgnLi9nZW9tZXRyeS93aXphcmQuanNvbicsIChvYmopID0+IHtcbiAgICAgIG9iai5wb3NpdGlvbi55ID0gLTQ7XG4gICAgICBhcmNoZXIudmlld09iai5hZGQob2JqKTtcblxuICAgICAgYXJjaGVyLmJvZHlNb2RlbCA9IGFyY2hlci52aWV3T2JqLmNoaWxkcmVuWzJdO1xuICAgICAgYXJjaGVyLnJpZ2h0QXJtID0gYXJjaGVyLmJvZHlNb2RlbC5jaGlsZHJlblsxXTtcbiAgICAgIGFyY2hlci5yaWdodEFybS5yb3RhdGlvbi56ID0gKDEzNSAvIDE4MCkgKiBNYXRoLlBJO1xuICAgICAgaWYoYXJjaGVyLmRpcmVjdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgYXJjaGVyLnZpZXdPYmouY2hpbGRyZW5bMl0ucm90YXRpb24ueSA9IE1hdGguUEk7XG4gICAgICAgIGFyY2hlci5zdGFydGluZ1JvdGF0aW9uID0gTWF0aC5QSTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zY2VuZS5hZGQoYXJjaGVyLnZpZXdPYmopO1xuICAgIH0pO1xuICB9XG5cbiAgc3Bhd25CYXNlKCkge1xuICAgIHRoaXMuYmFzZSA9IG5ldyBCYXNlKHtcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgcGxheWVyOiB0aGlzXG4gICAgfSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmJhc2Uudmlld09iaik7XG4gIH1cblxuICBzcGF3bk1pbmlvbihpbmRleCkge1xuICAgIGlmKHRoaXMubWluaW9ucy5sZW5ndGggPCB0aGlzLnBvcHB1bGF0aW9uQ2FwKSB7XG4gICAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xuICAgICAgICBpZighdGhpcy5nYW1lT3Zlcikge1xuICAgICAgICAgIHRoaXMubW9uZXkgLT0gdGhpcy5taW5pb25Db3N0O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1pbmlvbiA9IG5ldyBNaW5pb24oe1xuICAgICAgICAgIGlkOiB0aGlzLm1pbmlvbklkKyssXG4gICAgICAgICAgaGVhbHRoVXBncmFkZTogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlSGVhbHRoLFxuICAgICAgICAgIGF0dGFja1VwZ3JhZGU6IHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFjayxcbiAgICAgICAgICBhdHRhY2tTcGVlZFVwZ3JhZGU6IHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkLFxuICAgICAgICAgIHBsYXllcklkOiB0aGlzLmlkLFxuICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcbiAgICAgICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgICAgIHBsYXllcjogdGhpc1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1pbmlvbnMucHVzaChtaW5pb24pO1xuICAgICAgICB0aGlzLmxvYWRlci5sb2FkKCcuL2dlb21ldHJ5L21vZGVsLmpzb24nLCAob2JqKSA9PiB7XG4gICAgICAgICAgb2JqLnBvc2l0aW9uLnkgPSAtNDtcbiAgICAgICAgICBtaW5pb24udmlld09iai5hZGQob2JqKTtcblxuICAgICAgICAgIGlmKG1pbmlvbi5kaXJlY3Rpb24gPT09IC0xKSB7XG4gICAgICAgICAgICBtaW5pb24udmlld09iai5jaGlsZHJlblsxXS5yb3RhdGlvbi55ID0gTWF0aC5QSTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnNjZW5lLmFkZChtaW5pb24udmlld09iaik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb2Nlc3NSZXdhcmQocmV3YXJkKSB7XG4gICAgaWYodGhpcy5nYW1lT3ZlcikgeyByZXR1cm47IH1cbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgT2JqZWN0LmtleXMocmV3YXJkKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRba2V5XSArPSByZXdhcmRba2V5XTtcbiAgICB9KTtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy5iYXNlICE9PSBudWxsKSB7IFxuICAgICAgdGhpcy5iYXNlLnJ1bkxvb3AoKTtcbiAgICAgIGlmKHRoaXMuYmFzZS5kZXN0cm95KSB7IHRoaXMuZGVzdHJveUJhc2UoKTsgfSBcbiAgICB9XG5cbiAgICB0aGlzLmFyY2hlcnMuZm9yRWFjaCgoYXJjaGVyKSA9PiB7XG4gICAgICBhcmNoZXIucnVuTG9vcCh0aW1lc3RhbXApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5taW5pb25zLmZvckVhY2goKG1pbmlvbiwgaW5kZXgpID0+IHtcbiAgICAgIG1pbmlvbi5ydW5Mb29wKHRpbWVzdGFtcCk7XG4gICAgICBpZighbWluaW9uLmF0dGFjaykgeyBtaW5pb24ucmVzZXRBdHRhY2tBbmltYXRpb24oKTsgfVxuICAgICAgaWYobWluaW9uLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpOyB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xuICB9XG5cbiAgZGVzdHJveU1pbmlvbihtaW5pb24sIGluZGV4KSB7XG4gICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xuXG4gICAgdGhpcy5jb2xsaWRlckxpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgobWluaW9uLmNvbGxpZGVyLmlkKSwgMSk7XG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicpO1xuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0U3RheScpO1xuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0RXhpdCcpO1xuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcpO1xuICAgIHRoaXMubWluaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgZGVzdHJveUJhc2UoKSB7XG4gICAgdGhpcy5hcmNoZXJzLmZvckVhY2goYXJjaGVyID0+IHtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGFyY2hlci52aWV3T2JqKTtcbiAgICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KGFyY2hlci5jb2xsaWRlci5pZCksIDEpO1xuICAgIH0pO1xuICAgIHRoaXMuYXJjaGVycy5sZW5ndGggPSAwO1xuICAgIFxuICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuYmFzZS52aWV3T2JqKTtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleCh0aGlzLmJhc2UuY29sbGlkZXIuaWQpLCAxKTtcbiAgICB0aGlzLmJhc2UgPSBudWxsO1xuICAgIHRoaXMubG9zdCA9IHRydWU7XG4gIH1cblxuICBmaW5kQ29sbGlkZXJJbmRleChpZCkge1xuICAgIGxldCBpbmRleCA9IC0xO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy5jb2xsaWRlckxpc3RbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBzZXRHYW1lT3ZlcigpIHtcbiAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKG1pbmlvbiA9PiB7XG4gICAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XG4gICAgfSk7XG5cbiAgICBpZih0aGlzLmJhc2UpIHtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuYmFzZS52aWV3T2JqKTtcbiAgICAgIHRoaXMuYmFzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5hcmNoZXJzLmZvckVhY2goYXJjaGVycyA9PiB7XG4gICAgICB0aGlzLnNjZW5lLnJlbW92ZShhcmNoZXJzLnZpZXdPYmopO1xuICAgIH0pO1xuXG4gICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgIHRoaXMuc2V0VXBncmFkZVZhbHVlcygpO1xuICAgIHRoaXMuc2V0dXBHYW1lU3RhdGUoKTtcbiAgICB0aGlzLnNwYXduQmFzZSgpO1xuICAgIHRoaXMuc3Bhd25BcmNoZXJzKCk7XG4gIH1cblxuXG4gIHNldHVwR2FtZVN0YXRlKCkge1xuICAgIHRoaXMubWluaW9ucyA9IFtdO1xuICAgIHRoaXMuYXJjaGVycyA9IFtdO1xuICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgIHRoaXMubW9uZXkgPSA0MDAwO1xuICAgIHRoaXMubWluaW9uQ29zdCA9IDUwO1xuICAgIHRoaXMubG9zdCA9IGZhbHNlO1xuICB9XG5cbiAgc2V0VXBncmFkZVZhbHVlcygpIHtcbiAgICB0aGlzLnVwZ3JhZGVzID0ge1xuICAgICAgYmFzZUhlYWx0aDogMCxcbiAgICAgIG1pbmlvbkJhc2VIZWFsdGg6IDAsXG4gICAgICBtaW5pb25CYXNlQXR0YWNrOiAwLFxuICAgICAgbWluaW9uQmFzZUF0dGFja1NwZWVkOiAwLFxuICAgICAgYXJjaGVyQmFzZUF0dGFjazogMCxcbiAgICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZDogMFxuICAgIH1cbiAgfVxuXG4gIGdldEJhc2VIZWFsdGhVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLmJhc2UudXBncmFkZXMuaGVhbHRoLmNvc3QgKiAodGhpcy51cGdyYWRlcy5iYXNlSGVhbHRoICsgMSk7XG4gIH1cblxuICBjYW5VcGdyYWRlQmFzZUhlYWx0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0QmFzZUhlYWx0aFVwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlQmFzZUhlYWx0aCgpIHtcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVCYXNlSGVhbHRoKCkpIHtcbiAgICAgIHRoaXMudXBncmFkZXMuYmFzZUhlYWx0aCsrO1xuICAgICAgdGhpcy5iYXNlLm1heEhlYWx0aCArPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguYW1vdW50O1xuICAgICAgdGhpcy5iYXNlLmhlYWx0aCArPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguYW1vdW50O1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguY29zdCAqIHRoaXMudXBncmFkZXMuYmFzZUhlYWx0aDtcbiAgICB9XG4gIH1cblxuICBnZXRNaW5pb25IZWFsdGhVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGggKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVNaW5pb25IZWFsdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldE1pbmlvbkhlYWx0aFVwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlTWluaW9uSGVhbHRoKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZU1pbmlvbkhlYWx0aCgpKSB7XG4gICAgICB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGgrKztcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguY29zdCAqIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUhlYWx0aDtcbiAgICB9XG4gIH1cblxuICBnZXRNaW5pb25BdHRhY2tVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2suY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2sgKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVNaW5pb25BdHRhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldE1pbmlvbkF0dGFja1VwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlTWluaW9uQXR0YWNrKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZU1pbmlvbkF0dGFjaygpKSB7XG4gICAgICB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2srKztcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2suY29zdCAqIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFjaztcbiAgICB9XG4gIH1cblxuICBnZXRNaW5pb25BdHRhY2tTcGVlZFVwZ3JhZGVDb3N0KCkge1xuICAgIHJldHVybiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmNvc3QgKiAodGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQgKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVNaW5pb25BdHRhY2tTcGVlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0TWluaW9uQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpO1xuICB9XG5cbiAgdXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkpIHtcbiAgICAgIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkKys7XG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkKys7XG4gICAgfVxuICB9XG5cbiAgZ2V0V2l6YXJkQXR0YWNrVXBncmFkZUNvc3QoKSB7XG4gICAgcmV0dXJuIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrLmNvc3QgKiAodGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrICsgMSk7XG4gIH1cblxuICBjYW5VcGdyYWRlV2l6YXJkQXR0YWNrKCkge1xuICAgIHJldHVybiB0aGlzLm1vbmV5ID4gdGhpcy5nZXRXaXphcmRBdHRhY2tVcGdyYWRlQ29zdCgpO1xuICB9XG5cbiAgdXBncmFkZVdpemFyZEF0dGFjaygpIHtcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVXaXphcmRBdHRhY2soKSkge1xuICAgICAgdGhpcy5hcmNoZXJzLmZvckVhY2goKGFyY2hlcikgPT4ge1xuICAgICAgICBhcmNoZXIuYXR0YWNrU3RyZW5ndGggKz0gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2suYW1vdW50O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFjaysrO1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFjay5jb3N0ICogdGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrO1xuICAgIH1cbiAgfVxuXG4gIGdldFdpemFyZEF0dGFja1NwZWVkVXBncmFkZUNvc3QoKSB7XG4gICAgcmV0dXJuIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqICh0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZCArIDEpIDtcbiAgfVxuXG4gIGNhblVwZ3JhZGVXaXphcmRBdHRhY2tTcGVlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0V2l6YXJkQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpO1xuICB9XG5cbiAgdXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkpIHtcbiAgICAgIHRoaXMuYXJjaGVycy5mb3JFYWNoKChhcmNoZXIpID0+IHtcbiAgICAgICAgYXJjaGVyLmF0dGFja1NwZWVkIC09IENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50O1xuICAgICAgICBhcmNoZXIuYXJyb3dTcGVlZCAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZCsrO1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmNvc3QgKiB0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZDtcbiAgICB9XG4gIH1cbn1cbiIsImZ1bmN0aW9uIGhhbmRsZVJlc2l6ZShyZW5kZXJlciwgY2FtZXJhKXtcbiAgbGV0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgbGV0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gIHJlbmRlcmVyLnNldFNpemUodyxoKTtcbiAgY2FtZXJhLmFzcGVjdCA9IHcvaDtcbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2NyZWVuVmlldygpIHtcbiAgbGV0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzAsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xuICBsZXQgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xuICByZW5kZXJlci5zaGFkb3dNYXBFbmFibGVkID0gdHJ1ZTtcbiAgcmVuZGVyZXIuc2hhZG93TWFwVHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXBcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpO1xuXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFBlcmZvcm1hbmNlKCkge1xuICB2YXIgcmVuZGVyZXJTdGF0cyA9IG5ldyBUSFJFRXguUmVuZGVyZXJTdGF0cygpO1xuICByZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXG4gIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCdcbiAgcmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLmJvdHRvbSA9ICcwcHgnXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudCApXG4gIHJldHVybiByZW5kZXJlclN0YXRzO1xufVxuIl19\n"]}