{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","delta","lastTimeStamp","fps","Math","round","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","rendererStats","update","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","fpsText","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","THREEx","RendererStats","domElement","style","position","left","bottom","document","body","appendChild","_setupScreenView","setupScreenView","getElementById","window","addEventListener","index","getCurrentPanelIndex","spawnMinion","computer","./modules/game-engine","./modules/game-view","./modules/view","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_constants","Array","unique","this","filter","self","indexOf","AI","args","determineAIFunction","personality","player","spawnInterval","lastSpawn","poppulationLimit","opponents","canSpawn","spawnIndex","AIFunction","minions","floor","random","gridSubDiv","friendlies","startingPos","spawnPos","friendlyMap","map","m","row","startingZ","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","forEach","val","idx","fullIdxArr","slice","gaps","arrayToUse","gridWidth","enemy","minion","spawnValue","values","./constants","3","Base","direction","colliderList","playerId","id","baseWidth","baseHeight","baseDepth","maxHealth","health","hitBoxBuffer","killReward","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","THREE","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","color","specular","shininess","shapeMesh","Mesh","hitGeometry","hitMaterial","MeshBasicMaterial","transparent","opacity","hitMesh","healthBar","initializeHealthBar","hitBox","add","y","userData","object","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","name","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","geometry","computeBoundingBox","box3","boundingBox","clone","collider","ColliderBox3","console","log","updateHealthBar","4","xPositive","xNegative","5","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","state","colliderSystem","ColliderSystem","initializePlayers","type","playerAI","players","activateMenu","winner","pop","reset","gameOver","_this","runLoop","lost","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","6","planeTexture","TextureLoader","load","repeat","set","wrapS","RepeatWrapping","wrapT","GameView","setupGrid","setupLight","mouse","positionScale","z","lookAt","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","texturedSurfaceGeometry","PlaneGeometry","texturedSurfaceMaterial","texturedSurface","rotation","PI","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","planeMaterial","plane","setFromCamera","planes","intersects","intersectObjects","panel","material","setHex","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","7","activateStartScreen","startSection","classList","restartSection","remove","activateRestartScreen","modal","closeMenu","restart","8","Minion","attackStrength","attackSpeed","defaultSpeed","speed","attackProperties","attackTime","destroy","attack","otherCollider","object3d","currentTarget","attackProcedure","attackLoop","animateAttack","getAttackValue","processReward","children","9","_minion","_minion2","_base","_base2","Player","minionId","setupGameState","spawnBase","base","minionCost","ObjectLoader","reward","keys","_this2","destroyBase","destroyMinion","splice","findColliderIndex","_this3","./base","./minion","10","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    fpsText = void 0;\n\n// Shapes\nvar cube;\n\n// performance\nvar rendererStats = new THREEx.RendererStats();\nrendererStats.domElement.style.position = 'absolute';\nrendererStats.domElement.style.left = '0px';\nrendererStats.domElement.style.bottom = '0px';\ndocument.body.appendChild(rendererStats.domElement);\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n  fpsText = document.getElementById('fps');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n      gameEngine.myPlayer.spawnMinion(index);\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    gameEngine.computer.spawnMinion(3);\n  });\n\n  render();\n}\n\nvar lastTimeStamp = 0;\nfunction render(timestamp) {\n  var delta = timestamp - lastTimeStamp;\n  delta = delta / 1000;\n  lastTimeStamp = timestamp;\n  var fps = Math.round(1 / delta);\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI(fps);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  rendererStats.update(globals.renderer);\n}\n\nfunction updateUI(fps) {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n  fpsText.textContent = fps;\n}\n\ninit();\n\n},{\"./modules/game-engine\":5,\"./modules/game-view\":6,\"./modules/view\":10}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 500;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 500;\n  }\n\n  _createClass(AI, [{\n    key: \"canSpawn\",\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp, opponents) {\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions);\n\n      if (spawnIndex >= 0 && this.player.minions.length < this.poppulationLimit) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: \"randomAI\",\n    value: function randomAI(opponents) {\n      return Math.floor(Math.random() * _constants.gridSubDiv);\n    }\n  }, {\n    key: \"nicksAI\",\n    value: function nicksAI(opponents, friendlies) {\n      var startingPos = this.player.spawnPos;\n\n      var friendlyMap = friendlies.map(function (m) {\n        return {\n          row: m.startingZ,\n          distance: m.getPosition().x - startingPos\n        };\n      });\n\n      var opponentMap = opponents.map(function (m) {\n\n        var distance = startingPos - m.getPosition().x;\n        return {\n          row: m.startingZ,\n          distance: distance\n        };\n      });\n\n      var rowArray = [];\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        rowArray.push(i);\n      }\n\n      var decision = {\n        hasFriendlies: [],\n        closestIndex: -1,\n        closestVal: 99999,\n        distanceTies: []\n\n      };\n\n      friendlyMap.forEach(function (val, idx) {\n        decision.hasFriendlies.push(val.row);\n      });\n\n      opponentMap.forEach(function (val, idx) {\n        if (val.distance < decision.closestVal) {\n          decision.closestIndex = val.row;\n          decision.closestVal = val.distance;\n\n          if (decision.distanceTies.length > 0) {\n            decision.distanceTies.length = 0;\n          }\n        } else if (val.distance === decision.closestVal) {\n          decision.distanceTies.push(val.row);\n        }\n      });\n\n      decision.distanceTies.push(decision.closestIndex);\n      decision.hasFriendlies = decision.hasFriendlies.unique();\n\n      var fullIdxArr = rowArray.slice(0);\n\n      decision.gaps = fullIdxArr.filter(function (x) {\n        return decision.hasFriendlies.indexOf(x) < 0;\n      });\n\n      //if(friendlies.length > 3) {\n      //friendlies[2].viewObj.position.z += 1;\n      //}\n\n\n      var arrayToUse = void 0;\n      if (decision.closestVal < _constants.gridWidth / 2) {\n        arrayToUse = decision.distanceTies;\n      } else {\n        arrayToUse = decision.gaps;\n      }\n\n      var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n      return arrayToUse[arrIdx];\n    }\n  }, {\n    key: \"defensiveAI\",\n    value: function defensiveAI(opponents) {\n      var map = {};\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        map[i] = 0;\n      }\n\n      opponents.forEach(function (enemy) {\n        map[enemy.startingZ]--;\n      });\n\n      this.player.minions.forEach(function (minion) {\n        map[minion.startingZ]++;\n      });\n\n      var spawnIndex = -1;\n      var spawnValue = 100000;\n      Object.values(map).forEach(function (val, index) {\n        if (val < spawnValue) {\n          spawnValue = val;\n          spawnIndex = index;\n        }\n      });\n\n      return spawnIndex;\n    }\n  }, {\n    key: \"determineAIFunction\",\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"./constants\":4}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n    function Base(args) {\n        _classCallCheck(this, Base);\n\n        this.direction = args.direction;\n        this.colliderList = args.colliderList;\n        this.player = args.player;\n        this.playerId = this.player.id;\n\n        this.baseWidth = _constants.gridWidth;\n        this.baseHeight = 20;\n        this.baseDepth = 10;\n\n        this.maxHealth = 5000;\n        this.health = this.maxHealth;\n\n        this.hitBoxBuffer = 2;\n\n        this.killReward = {\n            money: 550,\n            score: 1000\n        };\n\n        this.initializeView(this.direction);\n        this.registerCollision();\n    }\n\n    _createClass(Base, [{\n        key: \"initializeView\",\n        value: function initializeView(direction) {\n            var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n            this.viewObj = new THREE.Group();\n\n            var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n            var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x008800, specular: 0x555555, shininess: 30 });\n            var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n            var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n            var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n            var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n            this.healthBar = this.initializeHealthBar();\n            this.hitBox = hitMesh;\n\n            this.viewObj.add(shapeMesh);\n            this.viewObj.add(hitMesh);\n            this.viewObj.add(this.healthBar);\n\n            this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n            this.viewObj.position.y = this.baseHeight / 2;\n\n            this.hitBox.userData.object = this;\n            this.hitBox.userData.player = this.player;\n        }\n    }, {\n        key: \"initializeHealthBar\",\n        value: function initializeHealthBar() {\n            this._healthBarLength = _constants.gridWidth / 10;\n            this._healthBarWidth = _constants.gridWidth / 150;\n            var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n            var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n            var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n            fullHealthBarMesh.name = \"FullHealthBar\";\n\n            var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n            var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n            var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n            emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n            var healthBarGroup = new THREE.Group();\n            healthBarGroup.add(fullHealthBarMesh);\n            healthBarGroup.add(emptyHealthBarMesh);\n\n            healthBarGroup.position.y = this.baseHeight + 5;\n\n            return healthBarGroup;\n        }\n    }, {\n        key: \"updateHealthBar\",\n        value: function updateHealthBar() {\n            var healthPercent = this.health / this.maxHealth;\n            var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n            var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n            fullHealthBar.scale.x = healthPercent;\n            fullHealthBar.position.x = healthBarOffset;\n        }\n    }, {\n        key: \"registerCollision\",\n        value: function registerCollision() {\n            this.hitBox.geometry.computeBoundingBox();\n            var box3 = this.hitBox.geometry.boundingBox.clone();\n            this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n            console.log(this.colliderList);\n            this.colliderList.push(this.collider);\n        }\n    }, {\n        key: \"runLoop\",\n        value: function runLoop() {\n            this.collider.update();\n            this.updateHealthBar();\n        }\n    }]);\n\n    return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":4}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 64;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"nicksAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"nicksAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver() {\n      (0, _menuScreen.activateMenu)({\n        winner: this.winner\n      });\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          _this.winner = player.id !== _this.myPlayer.id;\n          _this.initializeGameOver();\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":2,\"./constants\":4,\"./menu-screen\":7,\"./player\":9}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var texturedSurfaceGeometry = new THREE.PlaneGeometry(_constants.gridWidth, _constants.gridWidth);\n      var texturedSurfaceMaterial = new THREE.MeshBasicMaterial({ map: planeTexture });\n      var texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      texturedSurface.rotation.x = -0.5 * Math.PI;\n      texturedSurface.position.y = -0.3;\n      this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.2;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":4,\"./menu-screen\":7}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar restartSection = document.getElementById('restartModal');\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner) {\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameEngine) {\n  startSection.addEventListener('click', function () {});\n\n  restartSection.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = 10;\n    this.health = this.maxHealth;\n    this.attackStrength = 3;\n    this.attackSpeed = 400;\n\n    this.defaultSpeed = 0.3;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.killReward = {\n      money: 15,\n      score: 10\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      //this.viewObj.add(shapeMesh);\n      //this.viewObj.add(hitMesh);\n      //this.viewObj.add(this.healthBar);\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"isObjectLoaded\",\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = otherCollider.object3d.userData.object;\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = otherCollider.object3d.userData.object;\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: \"getAttackValue\",\n    value: function getAttackValue() {\n      return Math.random() * this.attackStrength;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: \"attackProcedure\",\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime += delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: \"attackLoop\",\n    value: function attackLoop() {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      if (this.attackProperties.attackTime < this.attackSpeed) {\n        return;\n      }\n      this.animateAttack();\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: \"animateAttack\",\n    value: function animateAttack() {\n      //console.log(this.viewObj);\n      if (this.viewObj.children.length > 1) {\n        var modelMesh = this.viewObj.children[1];\n        modelMesh.children[1].rotation.z = Math.PI * .5;\n      }\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":4}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n\n    this.setupGameState();\n    this.spawnBase();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this = this;\n\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          playerId: this.id,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList,\n          player: this\n        });\n\n        this.minions.push(minion);\n        var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n        var loader = new THREE.ObjectLoader();\n        loader.load('../geometry/model.json', function (obj) {\n          console.log(obj);\n          obj.position.y = -4;\n          minion.viewObj.add(obj);\n          _this.scene.add(minion.viewObj);\n        });\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this2 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (minion.destroy) {\n          _this2.destroyMinion(minion, index);\n        }\n      });\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this3 = this;\n\n      this.minions.forEach(function (minion) {\n        _this3.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.spawnBase();\n      this.setupGameState();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 20;\n      this.lost = false;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./base\":3,\"./constants\":4,\"./minion\":8}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxhaS1wbGF5ZXIuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxiYXNlLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcY29uc3RhbnRzLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcZ2FtZS1lbmdpbmUuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxnYW1lLXZpZXcuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxtZW51LXNjcmVlbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXG1pbmlvbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHBsYXllci5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0FBQ0EsSUFBSSxnQkFBSjs7QUFFQSxJQUFJLG1CQUFKO0FBQUEsSUFBZ0IsaUJBQWhCOztBQUVBO0FBQ0EsSUFBSSxrQkFBSjtBQUFBLElBQWUsa0JBQWY7QUFBQSxJQUEwQixnQkFBMUI7O0FBRUE7QUFDQSxJQUFJLElBQUo7O0FBRUE7QUFDQSxJQUFJLGdCQUFnQixJQUFJLE9BQU8sYUFBWCxFQUFwQjtBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixRQUEvQixHQUEwQyxVQUExQztBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixJQUEvQixHQUFzQyxLQUF0QztBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixNQUEvQixHQUF3QyxLQUF4QztBQUNBLFNBQVMsSUFBVCxDQUFjLFdBQWQsQ0FBMkIsY0FBYyxVQUF6Qzs7QUFFQSxTQUFTLElBQVQsR0FBZ0I7QUFBQSx5QkFDb0IsNEJBRHBCO0FBQUEsTUFDUixLQURRLG9CQUNSLEtBRFE7QUFBQSxNQUNELE1BREMsb0JBQ0QsTUFEQztBQUFBLE1BQ08sUUFE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QixFQUFnQyxPQUFPLFVBQVAsR0FBb0IsT0FBTyxXQUEzRCxFQUF3RSxHQUF4RSxFQUE2RSxJQUE3RSxDQUFiO0FBQ0EsTUFBSSxXQUFXLElBQUksTUFBTSxhQUFWLEVBQWY7O0FBRUEsV0FBUyxPQUFULENBQWlCLE9BQU8sVUFBeEIsRUFBb0MsT0FBTyxXQUEzQztBQUNBLFdBQVMsSUFBVCxDQUFjLFdBQWQsQ0FBMEIsU0FBUyxVQUFuQzs7QUFFQSxnQkFBYyxRQUFkLEVBQXdCLE1BQXhCOztBQUVBLFNBQU8sRUFBRSxZQUFGLEVBQVMsY0FBVCxFQUFpQixrQkFBakIsRUFBUDtBQUNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IHNldHVwU2NyZWVuVmlldyB9IGZyb20gJy4vbW9kdWxlcy92aWV3JztcclxuaW1wb3J0IEdhbWVFbmdpbmUgZnJvbSAnLi9tb2R1bGVzL2dhbWUtZW5naW5lJztcclxuaW1wb3J0IEdhbWVWaWV3IGZyb20gJy4vbW9kdWxlcy9nYW1lLXZpZXcnO1xyXG5cclxuLy8gR2xvYmFsc1xyXG5sZXQgZ2xvYmFscztcclxuXHJcbmxldCBnYW1lRW5naW5lLCBnYW1lVmlldztcclxuXHJcbi8vIFVJIEVsZW1lbnRzXHJcbmxldCBzY29yZVRleHQsIG1vbmV5VGV4dCwgZnBzVGV4dDtcclxuXHJcbi8vIFNoYXBlc1xyXG52YXIgY3ViZTtcclxuXHJcbi8vIHBlcmZvcm1hbmNlXHJcbnZhciByZW5kZXJlclN0YXRzID0gbmV3IFRIUkVFeC5SZW5kZXJlclN0YXRzKCk7XHJcbnJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcclxucmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLmxlZnQgPSAnMHB4J1xyXG5yZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzBweCdcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggcmVuZGVyZXJTdGF0cy5kb21FbGVtZW50IClcclxuXHJcbmZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgbGV0IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfSA9IHNldHVwU2NyZWVuVmlldygpO1xyXG4gIGdsb2JhbHMgPSB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XHJcblxyXG4gIGdhbWVFbmdpbmUgPSBuZXcgR2FtZUVuZ2luZShnbG9iYWxzKTtcclxuICBnYW1lVmlldyA9IG5ldyBHYW1lVmlldyhnbG9iYWxzLCBnYW1lRW5naW5lKTtcclxuXHJcbiAgc2NvcmVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XHJcbiAgbW9uZXlUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmV5Jyk7XHJcbiAgZnBzVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcHMnKTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgbGV0IGluZGV4ID0gZ2FtZVZpZXcuZ2V0Q3VycmVudFBhbmVsSW5kZXgoKTtcclxuICAgIGlmKGluZGV4ID49IDApIHtcclxuICAgICAgZ2FtZUVuZ2luZS5teVBsYXllci5zcGF3bk1pbmlvbihpbmRleCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsICgpID0+IHtcclxuICAgIGdhbWVFbmdpbmUuY29tcHV0ZXIuc3Bhd25NaW5pb24oMyk7XHJcbiAgfSk7XHJcblxyXG4gIHJlbmRlcigpO1xyXG59XHJcblxyXG5sZXQgbGFzdFRpbWVTdGFtcCA9IDA7XHJcbmZ1bmN0aW9uIHJlbmRlcih0aW1lc3RhbXApIHtcclxuICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSBsYXN0VGltZVN0YW1wO1xyXG4gIGRlbHRhID0gZGVsdGEgLyAxMDAwO1xyXG4gIGxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgbGV0IGZwcyA9IE1hdGgucm91bmQoMSAvIGRlbHRhKTtcclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcclxuICBnYW1lVmlldy5yZW5kZXJMb29wKHRpbWVzdGFtcCk7XHJcblxyXG4gIHVwZGF0ZVVJKGZwcyk7XHJcblxyXG4gIGdsb2JhbHMucmVuZGVyZXIucmVuZGVyKGdsb2JhbHMuc2NlbmUsIGdsb2JhbHMuY2FtZXJhKTtcclxuICByZW5kZXJlclN0YXRzLnVwZGF0ZShnbG9iYWxzLnJlbmRlcmVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlVUkoZnBzKSB7XHJcbiAgc2NvcmVUZXh0LnRleHRDb250ZW50ID0gZ2FtZUVuZ2luZS5teVBsYXllci5zY29yZTtcclxuICBtb25leVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLm1vbmV5O1xyXG4gIGZwc1RleHQudGV4dENvbnRlbnQgPSBmcHM7XHJcbn1cclxuXHJcbmluaXQoKTtcclxuIiwiQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBzZWxmKSB7IFxyXG4gICAgcmV0dXJuIHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4O1xyXG4gIH0pO1xyXG59XHJcblxyXG5pbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBSSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuZGV0ZXJtaW5lQUlGdW5jdGlvbihhcmdzLnBlcnNvbmFsaXR5KTtcclxuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XHJcbiAgICB0aGlzLnNwYXduSW50ZXJ2YWwgPSA1MDA7XHJcbiAgICB0aGlzLmxhc3RTcGF3biA9IDA7XHJcbiAgICB0aGlzLnBvcHB1bGF0aW9uTGltaXQgPSA1MDA7XHJcbiAgfVxyXG5cclxuICBjYW5TcGF3bih0aW1lc3RhbXApIHtcclxuICAgIHJldHVybiB0aW1lc3RhbXAgLSB0aGlzLmxhc3RTcGF3biA+IHRoaXMuc3Bhd25JbnRlcnZhbDtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AodGltZXN0YW1wLCBvcHBvbmVudHMpIHtcclxuICAgIGlmKCF0aGlzLmNhblNwYXduKHRpbWVzdGFtcCkpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IHNwYXduSW5kZXggPSB0aGlzLkFJRnVuY3Rpb24ob3Bwb25lbnRzLCB0aGlzLnBsYXllci5taW5pb25zKTtcclxuXHJcbiAgICBpZihzcGF3bkluZGV4ID49IDAgJiYgdGhpcy5wbGF5ZXIubWluaW9ucy5sZW5ndGggPCB0aGlzLnBvcHB1bGF0aW9uTGltaXQpIHtcclxuICAgICAgdGhpcy5wbGF5ZXIuc3Bhd25NaW5pb24oc3Bhd25JbmRleCk7XHJcbiAgICAgIHRoaXMubGFzdFNwYXduID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmFuZG9tQUkob3Bwb25lbnRzKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XHJcbiAgfVxyXG5cclxuICBuaWNrc0FJKG9wcG9uZW50cywgZnJpZW5kbGllcykge1xyXG4gICAgbGV0IHN0YXJ0aW5nUG9zID0gdGhpcy5wbGF5ZXIuc3Bhd25Qb3M7XHJcblxyXG4gICAgbGV0IGZyaWVuZGx5TWFwID0gZnJpZW5kbGllcy5tYXAobSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcm93OiBtLnN0YXJ0aW5nWixcclxuICAgICAgICBkaXN0YW5jZTogbS5nZXRQb3NpdGlvbigpLnggLSBzdGFydGluZ1Bvc1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgb3Bwb25lbnRNYXAgPSBvcHBvbmVudHMubWFwKG0gPT4ge1xyXG5cclxuICAgICAgbGV0IGRpc3RhbmNlID0gc3RhcnRpbmdQb3MgLSBtLmdldFBvc2l0aW9uKCkueDtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICByb3c6IG0uc3RhcnRpbmdaLFxyXG4gICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJvd0FycmF5ID0gW107XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7IHJvd0FycmF5LnB1c2goaSk7IH1cclxuXHJcbiAgICBsZXQgZGVjaXNpb24gPSB7XHJcbiAgICAgIGhhc0ZyaWVuZGxpZXM6IFtdLFxyXG4gICAgICBjbG9zZXN0SW5kZXg6IC0xLFxyXG4gICAgICBjbG9zZXN0VmFsOiA5OTk5OSxcclxuICAgICAgZGlzdGFuY2VUaWVzOiBbXVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgZnJpZW5kbHlNYXAuZm9yRWFjaCgodmFsLCBpZHgpID0+IHtcclxuICAgICAgZGVjaXNpb24uaGFzRnJpZW5kbGllcy5wdXNoKHZhbC5yb3cpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG9wcG9uZW50TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XHJcbiAgICAgIGlmKHZhbC5kaXN0YW5jZSA8IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcclxuICAgICAgICBkZWNpc2lvbi5jbG9zZXN0SW5kZXggPSB2YWwucm93O1xyXG4gICAgICAgIGRlY2lzaW9uLmNsb3Nlc3RWYWwgPSB2YWwuZGlzdGFuY2U7XHJcblxyXG4gICAgICAgIGlmKGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZih2YWwuZGlzdGFuY2UgPT09IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcclxuICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMucHVzaCh2YWwucm93KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcclxuICAgIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMgPSBkZWNpc2lvbi5oYXNGcmllbmRsaWVzLnVuaXF1ZSgpO1xyXG5cclxuICAgIGxldCBmdWxsSWR4QXJyID0gcm93QXJyYXkuc2xpY2UoMCk7XHJcblxyXG4gICAgZGVjaXNpb24uZ2FwcyA9IGZ1bGxJZHhBcnIuZmlsdGVyKHggPT4ge1xyXG4gICAgICByZXR1cm4gZGVjaXNpb24uaGFzRnJpZW5kbGllcy5pbmRleE9mKHgpIDwgMDtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL2lmKGZyaWVuZGxpZXMubGVuZ3RoID4gMykge1xyXG4gICAgICAvL2ZyaWVuZGxpZXNbMl0udmlld09iai5wb3NpdGlvbi56ICs9IDE7XHJcbiAgICAvL31cclxuXHJcblxyXG4gICAgbGV0IGFycmF5VG9Vc2U7XHJcbiAgICBpZihkZWNpc2lvbi5jbG9zZXN0VmFsIDwgZ3JpZFdpZHRoLzIpIHtcclxuICAgICAgYXJyYXlUb1VzZSA9IGRlY2lzaW9uLmRpc3RhbmNlVGllcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFycmF5VG9Vc2UgPSBkZWNpc2lvbi5nYXBzO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhcnJJZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheVRvVXNlLmxlbmd0aCk7XHJcbiAgICByZXR1cm4gYXJyYXlUb1VzZVthcnJJZHhdO1xyXG5cclxuICB9XHJcblxyXG4gIGRlZmVuc2l2ZUFJKG9wcG9uZW50cykge1xyXG4gICAgbGV0IG1hcCA9IHt9O1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBtYXBbaV0gPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIG9wcG9uZW50cy5mb3JFYWNoKChlbmVteSkgPT4ge1xyXG4gICAgICBtYXBbZW5lbXkuc3RhcnRpbmdaXS0tO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXIubWluaW9ucy5mb3JFYWNoKChtaW5pb24pID0+IHtcclxuICAgICAgbWFwW21pbmlvbi5zdGFydGluZ1pdKytcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBzcGF3bkluZGV4ID0gLTE7XHJcbiAgICBsZXQgc3Bhd25WYWx1ZSA9IDEwMDAwMDtcclxuICAgIE9iamVjdC52YWx1ZXMobWFwKS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmKHZhbCA8IHNwYXduVmFsdWUpIHtcclxuICAgICAgICBzcGF3blZhbHVlID0gdmFsO1xyXG4gICAgICAgIHNwYXduSW5kZXggPSBpbmRleFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc3Bhd25JbmRleDtcclxuICB9XHJcblxyXG4gIGRldGVybWluZUFJRnVuY3Rpb24ocGVyc29uYWxpdHkpIHtcclxuICAgIGlmKHBlcnNvbmFsaXR5KSB7XHJcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbcGVyc29uYWxpdHldO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5BSUZ1bmN0aW9uID0gdGhpc1tcInJhbmRvbUFJXCJdO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xyXG4gICAgdGhpcy5wbGF5ZXJJZCA9IHRoaXMucGxheWVyLmlkO1xyXG5cclxuICAgIHRoaXMuYmFzZVdpZHRoID0gZ3JpZFdpZHRoO1xyXG4gICAgdGhpcy5iYXNlSGVpZ2h0ID0gMjA7XHJcbiAgICB0aGlzLmJhc2VEZXB0aCA9IDEwO1xyXG5cclxuICAgIHRoaXMubWF4SGVhbHRoID0gNTAwMDtcclxuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XHJcblxyXG4gICAgdGhpcy5oaXRCb3hCdWZmZXIgPSAyO1xyXG5cclxuICAgIHRoaXMua2lsbFJld2FyZCA9IHtcclxuICAgICAgbW9uZXk6IDU1MCxcclxuICAgICAgc2NvcmU6IDEwMDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuZGlyZWN0aW9uKTtcclxuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVWaWV3KGRpcmVjdGlvbiwgaGl0Qm94T3BhY2l0eT0uMjUpIHtcclxuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG5cclxuICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxyXG4gICAgICB0aGlzLmJhc2VEZXB0aCxcclxuICAgICAgdGhpcy5iYXNlSGVpZ2h0LFxyXG4gICAgICB0aGlzLmJhc2VXaWR0aFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgc2hhcGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IDB4MDA4ODAwLCBzcGVjdWxhcjogMHg1NTU1NTUsIHNoaW5pbmVzczogMzAgfSk7XHJcbiAgICBsZXQgc2hhcGVNZXNoID0gbmV3IFRIUkVFLk1lc2goc2hhcGVHZW9tZXRyeSwgc2hhcGVNYXRlcmlhbCk7XHJcblxyXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxyXG4gICAgICB0aGlzLmJhc2VEZXB0aCArIHRoaXMuaGl0Qm94QnVmZmVyLFxyXG4gICAgICB0aGlzLmJhc2VIZWlnaHQgKyB0aGlzLmhpdEJveEJ1ZmZlcixcclxuICAgICAgdGhpcy5iYXNlV2lkdGggKyB0aGlzLmhpdEJveEJ1ZmZlciBcclxuICAgICk7XHJcblxyXG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5IH0pO1xyXG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xyXG5cclxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XHJcbiAgICB0aGlzLmhpdEJveCA9IGhpdE1lc2g7XHJcblxyXG4gICAgdGhpcy52aWV3T2JqLmFkZChzaGFwZU1lc2gpO1xyXG4gICAgdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcclxuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG5cclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gKCgtZ3JpZFdpZHRoLzIpIC0gKHRoaXMuYmFzZURlcHRoIC8gMikpICogdGhpcy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodC8yO1xyXG5cclxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVIZWFsdGhCYXIoKSB7XHJcbiAgICB0aGlzLl9oZWFsdGhCYXJMZW5ndGggPSBncmlkV2lkdGggLyAxMDtcclxuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gZ3JpZFdpZHRoIC8gMTUwO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGgsIHRoaXMuX2hlYWx0aEJhcldpZHRoLCB0aGlzLl9oZWFsdGhCYXJXaWR0aCk7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDB9KTtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSwgZnVsbEhlYWx0aEJhck1hdGVyaWFsKTtcclxuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcclxuXHJcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGggKiAwLjk5LCB0aGlzLl9oZWFsdGhCYXJXaWR0aCAqIDAuOSwgdGhpcy5faGVhbHRoQmFyV2lkdGggKiAwLjkpO1xyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGVtcHR5SGVhbHRoQmFyR2VvbWV0cnksIGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwpO1xyXG4gICAgZW1wdHlIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkVtcHR5SGVhbHRoQmFyXCI7XHJcblxyXG4gICAgbGV0IGhlYWx0aEJhckdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZnVsbEhlYWx0aEJhck1lc2gpO1xyXG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XHJcblxyXG4gICAgaGVhbHRoQmFyR3JvdXAucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodCArIDU7XHJcblxyXG4gICAgcmV0dXJuIGhlYWx0aEJhckdyb3VwO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xyXG4gICAgbGV0IGhlYWx0aFBlcmNlbnQgPSB0aGlzLmhlYWx0aC90aGlzLm1heEhlYWx0aDtcclxuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJMZW5ndGggLyAyO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcclxuXHJcbiAgICBmdWxsSGVhbHRoQmFyLnNjYWxlLnggPSBoZWFsdGhQZXJjZW50O1xyXG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XHJcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxyXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLmNvbGxpZGVyTGlzdCk7XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5wdXNoKHRoaXMuY29sbGlkZXIpO1xyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCgpIHtcclxuICAgIHRoaXMuY29sbGlkZXIudXBkYXRlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcclxuZXhwb3J0IGNvbnN0IHhOZWdhdGl2ZSA9IC0xO1xyXG5leHBvcnQgY29uc3QgZ3JpZFdpZHRoID0gNjQ7XHJcbmV4cG9ydCBjb25zdCBncmlkU3ViRGl2ID0gMTY7XHJcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xyXG5pbXBvcnQgQUkgZnJvbSAnLi9haS1wbGF5ZXInO1xyXG5pbXBvcnQgeyBhY3RpdmF0ZU1lbnUgfSBmcm9tICcuL21lbnUtc2NyZWVuJztcclxuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lRW5naW5lIHtcclxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XHJcbiAgICB0aGlzLnN0YXRlID0ge307XHJcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcclxuICAgIHRoaXMuY2FtZXJhID0gYXJncy5jYW1lcmE7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbSA9IG5ldyBUSFJFRXguQ29sbGlkZXJTeXN0ZW0oKTtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gW107XHJcblxyXG4gICAgdGhpcy5wbGF5ZXJJZCA9IDA7XHJcblxyXG4gICAgdGhpcy5pbml0aWFsaXplUGxheWVycygpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZVBsYXllcnMoKSB7XHJcbiAgICB0aGlzLm15UGxheWVyID0gbmV3IFBsYXllcih7XHJcbiAgICAgIHR5cGU6ICdodW1hbicsXHJcbiAgICAgIGRpcmVjdGlvbjogeFBvc2l0aXZlLFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICBzY2VuZTp0aGlzLnNjZW5lLFxyXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XHJcbiAgICAgIHR5cGU6ICdjb21wdXRlcicsXHJcbiAgICAgIGRpcmVjdGlvbjogeE5lZ2F0aXZlLFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcclxuICAgICAgaWQ6IHRoaXMucGxheWVySWQrK1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5BSSA9IG5ldyBBSSh7XHJcbiAgICAgIHBsYXllcjogdGhpcy5jb21wdXRlcixcclxuICAgICAgcGVyc29uYWxpdHk6IFwibmlja3NBSVwiXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnBsYXllckFJID0gbmV3IEFJKHtcclxuICAgICAgcGxheWVyOiB0aGlzLm15UGxheWVyLFxyXG4gICAgICBwZXJzb25hbGl0eTogXCJuaWNrc0FJXCJcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB0aGlzLnN0YXRlLnBsYXllcnMgPSBbIHRoaXMubXlQbGF5ZXIsIHRoaXMuY29tcHV0ZXIgXTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVHYW1lT3ZlcigpIHtcclxuICAgIGFjdGl2YXRlTWVudSh7XHJcbiAgICAgIHdpbm5lcjogdGhpcy53aW5uZXJcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICByZXN0YXJ0KCkge1xyXG4gICAgd2hpbGUodGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLmNvbGxpZGVyTGlzdC5wb3AoKTtcclxuICAgIH1cclxuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7XHJcbiAgICAgIHBsYXllci5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnYW1lTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIGlmKHRoaXMuZ2FtZU92ZXIpIHtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuQUkpIHtcclxuICAgICAgdGhpcy5BSS5ydW5Mb29wKHRpbWVzdGFtcCwgdGhpcy5teVBsYXllci5taW5pb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLnBsYXllckFJKSB7XHJcbiAgICAgIHRoaXMucGxheWVyQUkucnVuTG9vcCh0aW1lc3RhbXAsIHRoaXMuY29tcHV0ZXIubWluaW9ucyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXRlLnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xyXG4gICAgICBwbGF5ZXIucnVuTG9vcCh0aW1lc3RhbXApO1xyXG4gICAgICBpZihwbGF5ZXIubG9zdCAmJiAhdGhpcy5nYW1lT3Zlcikge1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMud2lubmVyID0gcGxheWVyLmlkICE9PSB0aGlzLm15UGxheWVyLmlkO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdhbWVPdmVyKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbS5jb21wdXRlQW5kTm90aWZ5KHRoaXMuY29sbGlkZXJMaXN0KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBiaW5kQnV0dG9ucyB9IGZyb20gJy4vbWVudS1zY3JlZW4nO1xyXG5cclxuY29uc3QgcGxhbmVUZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKS5sb2FkKFwidGV4dHVyZXMvc3RvbmUuanBnXCIpO1xyXG5wbGFuZVRleHR1cmUucmVwZWF0LnNldCgxMCwxMCk7XHJcbnBsYW5lVGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG5wbGFuZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XHJcbiAgY29uc3RydWN0b3IoZ2xvYmFscywgZ2FtZUVuZ2luZSkge1xyXG4gICAgdGhpcy5zY2VuZSA9IGdsb2JhbHMuc2NlbmU7XHJcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IGdsb2JhbHMucmVuZGVyZXI7XHJcblxyXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcclxuXHJcbiAgICB0aGlzLnNldHVwR3JpZCgpO1xyXG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XHJcblxyXG4gICAgdGhpcy5tb3VzZSA9IHsgeDogLTEwMDAwLCB5OiAwIH07XHJcblxyXG4gICAgbGV0IHBvc2l0aW9uU2NhbGUgPSBncmlkV2lkdGggLyAyO1xyXG5cclxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSAyICogcG9zaXRpb25TY2FsZTtcclxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSAxLjUgKiBwb3NpdGlvblNjYWxlO1xyXG4gICAgdGhpcy5jYW1lcmEubG9va0F0KHRoaXMuc2NlbmUucG9zaXRpb24pO1xyXG5cclxuXHJcbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcclxuICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zZXR1cE1vdXNlRXZlbnQoKTtcclxuICAgIGJpbmRCdXR0b25zKHRoaXMuZ2FtZUVuZ2luZSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cExpZ2h0KCkge1xyXG4gICAgbGV0IGxpZ2h0QW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg2NjY2NjYsIDMpO1xyXG4gICAgbGV0IGxpZ2h0U291cmNlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHg4ODg4ODgpO1xyXG5cclxuICAgIGxpZ2h0U291cmNlLnBvc2l0aW9uLnNldCgzLCAzLCAzKTtcclxuXHJcbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodEFtYmllbnQpO1xyXG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHRTb3VyY2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBHcmlkKCkge1xyXG4gICAgbGV0IHRleHR1cmVkU3VyZmFjZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZ3JpZFdpZHRoLCBncmlkV2lkdGgpO1xyXG4gICAgbGV0IHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHttYXA6IHBsYW5lVGV4dHVyZX0pO1xyXG4gICAgbGV0IHRleHR1cmVkU3VyZmFjZSA9IG5ldyBUSFJFRS5NZXNoKHRleHR1cmVkU3VyZmFjZUdlb21ldHJ5LCB0ZXh0dXJlZFN1cmZhY2VNYXRlcmlhbCk7XHJcbiAgICB0ZXh0dXJlZFN1cmZhY2Uucm90YXRpb24ueCA9IC0wLjUgKiBNYXRoLlBJO1xyXG4gICAgdGV4dHVyZWRTdXJmYWNlLnBvc2l0aW9uLnkgPSAtMC4zO1xyXG4gICAgdGhpcy5zY2VuZS5hZGQodGV4dHVyZWRTdXJmYWNlKTtcclxuXHJcbiAgICBsZXQgZ3JpZCA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKGdyaWRXaWR0aCwgZ3JpZFN1YkRpdik7XHJcbiAgICB0aGlzLnNjZW5lLmFkZChncmlkKTtcclxuXHJcbiAgICB0aGlzLmdyaWRQYW5lbHMgPSB7fTtcclxuXHJcbiAgICBsZXQgcGFuZWxMZW5ndGggPSBncmlkV2lkdGggLyBncmlkU3ViRGl2O1xyXG4gICAgbGV0IHpQb3MgPSAoKGdyaWRXaWR0aCAvIDIpIC0gcGFuZWxMZW5ndGggLyAyKSAqIC0xO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHtcclxuICAgICAgbGV0IHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIHBhbmVsTGVuZ3RoKTtcclxuICAgICAgbGV0IHBsYW5lTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe3RyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiAwfSk7XHJcbiAgICAgIGxldCBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnksIHBsYW5lTWF0ZXJpYWwpO1xyXG4gICAgICBwbGFuZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XHJcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnogPSB6UG9zO1xyXG4gICAgICBwbGFuZS5wb3NpdGlvbi55ID0gLTAuMjtcclxuICAgICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xyXG4gICAgICB0aGlzLmdyaWRQYW5lbHNbaV0gPSBwbGFuZTtcclxuXHJcbiAgICAgIHpQb3MgKz0gcGFuZWxMZW5ndGg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjaGVja0dyaWRJbnRlcnNlY3Rpb25zKCkge1xyXG4gICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLm1vdXNlLCB0aGlzLmNhbWVyYSk7XHJcbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xyXG4gICAgbGV0IGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHBsYW5lcyk7XHJcblxyXG4gICAgcGxhbmVzLmZvckVhY2goKHBhbmVsKSA9PiB7XHJcbiAgICAgIHBhbmVsLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweDY2NjY2Nik7XHJcbiAgICAgIHBhbmVsLm1hdGVyaWFsLm9wYWNpdHkgPSAwO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGxldCBvYmogPSBpbnRlcnNlY3RzWzBdLm9iamVjdDtcclxuXHJcbiAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHhmZjAwMDApOyAgICAgIFxyXG4gICAgICBvYmoubWF0ZXJpYWwub3BhY2l0eSA9IC41O1xyXG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBvYmo7XHJcbiAgICB9IGVsc2UgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKXtcclxuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRQYW5lbEluZGV4KCkge1xyXG4gICAgaWYoIXRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCkgeyByZXR1cm47IH1cclxuXHJcbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHtcclxuICAgICAgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID09PSBwbGFuZXNbaV0pIHtcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHNldHVwTW91c2VFdmVudCgpIHtcclxuICAgIGxldCBtb3VzZSA9IHRoaXMubW91c2U7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGV2dCA9PiB7XHJcbiAgICAgIG1vdXNlLnggPSAoIGV2ZW50LmNsaWVudFggLyB3aW5kb3cuaW5uZXJXaWR0aCApICogMiAtIDE7XHJcbiAgICAgIG1vdXNlLnkgPSAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDE7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvb3AodGltZXN0YW1wKSB7XHJcbiAgICB0aGlzLmNoZWNrR3JpZEludGVyc2VjdGlvbnMoKTtcclxuICAgIHRoaXMuZ2FtZUVuZ2luZS5nYW1lTG9vcCh0aW1lc3RhbXApO1xyXG4gIH1cclxufSBcclxuIiwibGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsJyk7XHJcbmxldCBzdGFydFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRNb2RhbCcpO1xyXG5sZXQgcmVzdGFydFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydE1vZGFsJyk7XHJcbmZ1bmN0aW9uIGFjdGl2YXRlU3RhcnRTY3JlZW4oKSB7XHJcbiAgc3RhcnRTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XHJcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGVSZXN0YXJ0U2NyZWVuKHdpbm5lcikge1xyXG4gIHN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xyXG4gIHJlc3RhcnRTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZU1lbnUoYXJncykge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XHJcblxyXG4gIGlmKGFyZ3Mud2lubmVyICE9PSBudWxsKSB7XHJcbiAgICBhY3RpdmF0ZVJlc3RhcnRTY3JlZW4oYXJncy53aW5uZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhY3RpdmF0ZVN0YXJ0U2NyZWVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VNZW51KGFyZ3MpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmluZEJ1dHRvbnMoZ2FtZUVuZ2luZSkge1xyXG4gIHN0YXJ0U2VjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHJcbiAgfSk7XHJcblxyXG4gIHJlc3RhcnRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZ2FtZUVuZ2luZS5yZXN0YXJ0KCk7XHJcbiAgICBjbG9zZU1lbnUoKTtcclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xyXG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XHJcbiAgICB0aGlzLnBsYXllcklkID0gYXJncy5wbGF5ZXJJZDtcclxuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XHJcbiAgICB0aGlzLnN0YXJ0aW5nWiA9IGFyZ3Muc3RhcnRpbmdaO1xyXG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XHJcblxyXG4gICAgdGhpcy5tYXhIZWFsdGggPSAxMDtcclxuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XHJcbiAgICB0aGlzLmF0dGFja1N0cmVuZ3RoID0gMztcclxuICAgIHRoaXMuYXR0YWNrU3BlZWQgPSA0MDA7XHJcblxyXG4gICAgdGhpcy5kZWZhdWx0U3BlZWQgPSAwLjM7XHJcbiAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMgPSB7XHJcbiAgICAgIGxhc3RUaW1lU3RhbXA6IG51bGwsXHJcbiAgICAgIGF0dGFja1RpbWU6IDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xyXG4gICAgICBtb25leTogMTUsXHJcbiAgICAgIHNjb3JlOiAxMFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGVzdHJveSA9IGZhbHNlO1xyXG4gICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuc3RhcnRpbmdaKTtcclxuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVWaWV3KHN0YXJ0aW5nWiwgaGl0Qm94T3BhY2l0eT0uMjUpIHtcclxuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpOyAgICBcclxuXHJcbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMyw4LDMpO1xyXG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5IH0pO1xyXG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xyXG5cclxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XHJcblxyXG4gICAgLy90aGlzLnZpZXdPYmouYWRkKHNoYXBlTWVzaCk7XHJcbiAgICAvL3RoaXMudmlld09iai5hZGQoaGl0TWVzaCk7XHJcbiAgICAvL3RoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG5cclxuICAgIGhpdE1lc2guYWRkKHRoaXMuaGVhbHRoQmFyKTtcclxuICAgIHRoaXMudmlld09iaiA9IGhpdE1lc2g7XHJcbiAgICB0aGlzLmhpdEJveCA9IHRoaXMudmlld09iajtcclxuXHJcbiAgICBsZXQgeiA9ICgoc3RhcnRpbmdaICogKGdyaWRXaWR0aCAvIGdyaWRTdWJEaXYpKSAtIChncmlkV2lkdGggLyAyKSkgKyAoZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdiAvIDIpO1xyXG4gICAgbGV0IHggPSAoZ3JpZFdpZHRoIC8gMikgKiAtdGhpcy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueiA9IHo7XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCA9IHg7XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IDQ7XHJcblxyXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEub2JqZWN0ID0gdGhpcztcclxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLnBsYXllciA9IHRoaXMucGxheWVyO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aWV3T2JqLnBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUhlYWx0aEJhcigpIHtcclxuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gMjtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMywgMC4zKTtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMH0pO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xyXG4gICAgZnVsbEhlYWx0aEJhck1lc2gubmFtZSA9IFwiRnVsbEhlYWx0aEJhclwiO1xyXG5cclxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjIsIDAuMik7XHJcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwfSk7XHJcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSwgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCk7XHJcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcclxuXHJcbiAgICBsZXQgaGVhbHRoQmFyR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcclxuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XHJcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZW1wdHlIZWFsdGhCYXJNZXNoKTtcclxuXHJcbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gNDtcclxuXHJcbiAgICByZXR1cm4gaGVhbHRoQmFyR3JvdXA7XHJcbiAgfVxyXG5cclxuICBpc09iamVjdExvYWRlZChvYmopIHtcclxuICAgIHJldHVybiAob2JqLnBvc2l0aW9uLnggPT09IDAgJiYgb2JqLnBvc2l0aW9uLnkgPT09IDAgJiYgb2JqLnBvc2l0aW9uLnogPT09IDApO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XHJcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxyXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5wdXNoKHRoaXMuY29sbGlkZXIpO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEVudGVyJywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgaWYob3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICB0aGlzLnNwZWVkID0gMDtcclxuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhLm9iamVjdDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFN0YXknLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICBpZihvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgIGlmKHRoaXMuY3VycmVudFRhcmdldCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuYXR0YWNrID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhLm9iamVjdDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XHJcbiAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcclxuICAgICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QXR0YWNrVmFsdWUoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIHRoaXMuYXR0YWNrU3RyZW5ndGg7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVIZWFsdGhCYXIoKSB7XHJcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xyXG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhcldpZHRoIC8gMjtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyID0gdGhpcy5oZWFsdGhCYXIuZ2V0T2JqZWN0QnlOYW1lKCdGdWxsSGVhbHRoQmFyJyk7XHJcblxyXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcclxuICAgIGZ1bGxIZWFsdGhCYXIucG9zaXRpb24ueCA9IGhlYWx0aEJhck9mZnNldDtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XHJcblxyXG4gICAgdGhpcy5hdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKTtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ICs9ICh0aGlzLnNwZWVkICogdGhpcy5kaXJlY3Rpb24pO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXIudXBkYXRlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xyXG4gIH1cclxuXHJcbiAgYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5oZWFsdGggPD0gMCkgeyByZXR1cm47IH1cclxuXHJcblxyXG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgIT0gbnVsbCAmJiB0aGlzLmF0dGFjaykge1xyXG4gICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcDtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgKz0gZGVsdGE7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgICB0aGlzLmF0dGFja0xvb3AoKTtcclxuICAgIH0gZWxzZSBpZih0aGlzLmF0dGFjaykge1xyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgICB0aGlzLmF0dGFja0xvb3AoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcclxuICB9XHJcblxyXG4gIGF0dGFja0xvb3AoKSB7XHJcbiAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQgPT09IG51bGwgfHwgdGhpcy5jdXJyZW50VGFyZ2V0LnBsYXllcklkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxyXG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPCB0aGlzLmF0dGFja1NwZWVkKSB7IHJldHVybjsgfVxyXG4gICAgdGhpcy5hbmltYXRlQXR0YWNrKCk7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VGFyZ2V0LmhlYWx0aCAtPSB0aGlzLmdldEF0dGFja1ZhbHVlKCk7XHJcblxyXG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0LmhlYWx0aCA8PSAwKSB7XHJcbiAgICAgIHRoaXMucGxheWVyLnByb2Nlc3NSZXdhcmQodGhpcy5jdXJyZW50VGFyZ2V0LmtpbGxSZXdhcmQpO1xyXG5cclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0LmF0dGFjayA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuZGVzdHJveSA9IHRydWU7XHJcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xyXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgYW5pbWF0ZUF0dGFjaygpIHtcclxuICAgIC8vY29uc29sZS5sb2codGhpcy52aWV3T2JqKTtcclxuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGxldCBtb2RlbE1lc2ggPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV07XHJcbiAgICAgIG1vZGVsTWVzaC5jaGlsZHJlblsxXS5yb3RhdGlvbi56ID0gTWF0aC5QSSAqIC41O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTWluaW9uIGZyb20gJy4vbWluaW9uJztcclxuaW1wb3J0IEJhc2UgZnJvbSAnLi9iYXNlJztcclxuaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy50eXBlID0gYXJncy50eXBlO1xyXG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5taW5pb25JZCA9IDA7XHJcbiAgICB0aGlzLnNwYXduUG9zID0gLWdyaWRXaWR0aCAvIDIgKiB0aGlzLmRpcmVjdGlvbjtcclxuXHJcbiAgICB0aGlzLnNldHVwR2FtZVN0YXRlKCk7XHJcbiAgICB0aGlzLnNwYXduQmFzZSgpO1xyXG4gIH1cclxuXHJcbiAgc3Bhd25CYXNlKCkge1xyXG4gICAgdGhpcy5iYXNlID0gbmV3IEJhc2Uoe1xyXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICBwbGF5ZXI6IHRoaXNcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuYmFzZS52aWV3T2JqKTtcclxuICB9XHJcblxyXG4gIHNwYXduTWluaW9uKGluZGV4KSB7XHJcbiAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xyXG4gICAgICB0aGlzLm1vbmV5IC09IHRoaXMubWluaW9uQ29zdDtcclxuXHJcbiAgICAgIGxldCBtaW5pb24gPSBuZXcgTWluaW9uKHtcclxuICAgICAgICBpZDogdGhpcy5taW5pb25JZCsrLFxyXG4gICAgICAgIHBsYXllcklkOiB0aGlzLmlkLFxyXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcclxuICAgICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICAgIHBsYXllcjogdGhpc1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMubWluaW9ucy5wdXNoKG1pbmlvbik7XHJcbiAgICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDIsMiwyKTtcclxuICAgICAgbGV0IGxvYWRlciA9IG5ldyBUSFJFRS5PYmplY3RMb2FkZXIoKTtcclxuICAgICAgbG9hZGVyLmxvYWQoJy4uL2dlb21ldHJ5L21vZGVsLmpzb24nLCAob2JqKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cob2JqKTtcclxuICAgICAgICBvYmoucG9zaXRpb24ueSA9IC00O1xyXG4gICAgICAgIG1pbmlvbi52aWV3T2JqLmFkZChvYmopO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm9jZXNzUmV3YXJkKHJld2FyZCkge1xyXG4gICAgbGV0IHQgPSB0aGlzO1xyXG4gICAgT2JqZWN0LmtleXMocmV3YXJkKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgdFtrZXldICs9IHJld2FyZFtrZXldO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5iYXNlICE9PSBudWxsKSB7IFxyXG4gICAgICB0aGlzLmJhc2UucnVuTG9vcCgpO1xyXG4gICAgICBpZih0aGlzLmJhc2UuZGVzdHJveSkgeyB0aGlzLmRlc3Ryb3lCYXNlKCk7IH0gXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5taW5pb25zLmZvckVhY2goKG1pbmlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgbWluaW9uLnJ1bkxvb3AodGltZXN0YW1wKTtcclxuICAgICAgaWYobWluaW9uLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpOyB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3lNaW5pb24obWluaW9uLCBpbmRleCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG1pbmlvbi5jb2xsaWRlci5pZCksIDEpO1xyXG5cclxuICAgIHRoaXMubWluaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveUJhc2UoKSB7XHJcbiAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmJhc2Uudmlld09iaik7XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleCh0aGlzLmJhc2UuY29sbGlkZXIuaWQpLCAxKTtcclxuICAgIHRoaXMuYmFzZSA9IG51bGw7XHJcbiAgICB0aGlzLmxvc3QgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYodGhpcy5jb2xsaWRlckxpc3RbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLm1pbmlvbnMuZm9yRWFjaChtaW5pb24gPT4ge1xyXG4gICAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZih0aGlzLmJhc2UpIHtcclxuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xyXG4gICAgICB0aGlzLmJhc2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3Bhd25CYXNlKCk7XHJcbiAgICB0aGlzLnNldHVwR2FtZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0dXBHYW1lU3RhdGUoKSB7XHJcbiAgICB0aGlzLm1pbmlvbnMgPSBbXTtcclxuICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgdGhpcy5tb25leSA9IDQwMDA7XHJcbiAgICB0aGlzLm1pbmlvbkNvc3QgPSAyMDtcclxuICAgIHRoaXMubG9zdCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJmdW5jdGlvbiBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSl7XHJcbiAgbGV0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICByZW5kZXJlci5zZXRTaXplKHcsaCk7XHJcbiAgY2FtZXJhLmFzcGVjdCA9IHcvaDtcclxuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xyXG4gIGxldCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG4gIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xyXG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XHJcblxyXG4gIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcclxuXHJcbiAgc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKTtcclxuXHJcbiAgcmV0dXJuIHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcclxufVxyXG4iXX0=\n"]}