{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","_setupScreenView","setupScreenView","document","getElementById","window","addEventListener","index","getCurrentPanelIndex","minion","spawnMinion","add","viewObj","computer","./modules/game-engine","./modules/game-view","./modules/view","2","Object","defineProperty","value","xPositive","xNegative","gridWidth","gridSubDiv","3","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_player","_player2","_constants","GameEngine","args","this","state","colliderSystem","THREEx","ColliderSystem","colliderList","playerId","initializePlayers","type","direction","id","players","forEach","player","runLoop","computeAndNotify","./constants","./player","4","GameView","setupGrid","setupLight","mouse","x","y","position","z","lookAt","raycaster","THREE","Raycaster","currentHoveredPanel","setupMouseEvent","lightAmbient","AmbientLight","lightSource","PointLight","set","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","MeshBasicMaterial","color","plane","Mesh","rotation","Math","PI","setFromCamera","planes","values","intersects","intersectObjects","panel","material","setHex","object","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","5","Minion","maxHealth","health","attackStrength","attackSpeed","defaultSpeed","speed","attackProperties","lastTimeStamp","attackTime","destroy","attack","initializeView","startingZ","registerCollision","hitBoxOpacity","arguments","undefined","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","specular","shininess","shapeMesh","hitGeometry","hitMaterial","transparent","opacity","hitMesh","healthBar","initializeHealthBar","hitBox","userData","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","name","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","_this","geometry","computeBoundingBox","box3","boundingBox","clone","collider","ColliderBox3","push","otherCollider","currentTarget","object3d","random","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","delta","attackLoop","update","updateHealthBar","getAttackValue","console","log","6","_minion","_minion2","Player","minionId","setupGameState","minionCost","minions","remove","findColliderIndex","splice","./minion","7","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","body","appendChild","domElement"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0;\n\n// Shapes\nvar cube;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n\n      var minion = gameEngine.myPlayer.spawnMinion(index);\n      if (minion) {\n        scene.add(minion.viewObj);\n      }\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    var minion = gameEngine.computer.spawnMinion(3);\n    if (minion) {\n      scene.add(minion.viewObj);\n    }\n  });\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI();\n\n  globals.renderer.render(globals.scene, globals.camera);\n}\n\nfunction updateUI() {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n}\n\ninit();\n\n},{\"./modules/game-engine\":3,\"./modules/game-view\":4,\"./modules/view\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 70;\nvar gridSubDiv = exports.gridSubDiv = 8;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      this.state.players.forEach(function (player) {\n        return player.runLoop(timestamp);\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./constants\":2,\"./player\":6}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: 0, y: 0 };\n\n    this.camera.position.z = 50;\n    this.camera.position.y = 50;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = -30.6;\n\n      for (var i = 0; i < 8; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ color: 0x666666 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.1;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < 8; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":2}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n\n    this.maxHealth = 10;\n    this.health = this.maxHealth;\n    this.attackStrength = 3;\n    this.attackSpeed = 500;\n    this.defaultSpeed = 0.1;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.initializeView(args.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(3, 3, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.z = startingZ * 9 - 32;\n      this.viewObj.position.x = -38 * this.direction;\n      this.viewObj.position.y = 2;\n\n      this.hitBox.userData.minion = this;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.1, 0.1);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.09, 0.09);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = otherCollider.object3d.userData.minion;\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: \"getAttackValue\",\n    value: function getAttackValue() {\n      return Math.random() * this.attackStrength;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime += delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: \"attackLoop\",\n    value: function attackLoop() {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      if (this.attackProperties.attackTime < this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      console.log(this.id, this.health);\n      if (this.currentTarget.health <= 0) {\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n\n    this.setupGameState();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          playerId: this.id,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList\n        });\n\n        this.minions.push(minion);\n        return minion;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this = this;\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (minion.destroy) {\n          _this.scene.remove(minion.viewObj);\n\n          console.log(index, _this.findColliderIndex(minion.collider.id));\n          _this.colliderList.splice(_this.findColliderIndex(minion.collider.id), 1);\n\n          var a = _this.minions.splice(index, 1);\n        }\n      });\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 400;\n      this.minionCost = 20;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./minion\":5}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL21vZHVsZXMvY29uc3RhbnRzLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS1lbmdpbmUuanMiLCJzcmMvanMvbW9kdWxlcy9nYW1lLXZpZXcuanMiLCJzcmMvanMvbW9kdWxlcy9taW5pb24uanMiLCJzcmMvanMvbW9kdWxlcy9wbGF5ZXIuanMiLCJzcmMvanMvbW9kdWxlcy92aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTtBQUNBLElBQUksZ0JBQUo7O0FBRUEsSUFBSSxtQkFBSjtBQUFBLElBQWdCLGlCQUFoQjs7QUFFQTtBQUNBLElBQUksa0JBQUo7QUFBQSxJQUFlLGtCQUFmOztBQUVBO0FBQ0EsSUFBSSxJQUFKOztBQUVBLFNBQVMsSUFBVCxHQUFnQjtBQUFBLHlCQUNvQiw0QkFEcEI7QUFBQSxNQUNSLEtBRFEsb0JBQ1IsS0FEUTtBQUFBLE1BQ0QsTUFEQyxvQkFDRCxNQURDO0FBQUEsTUFDTyxRQURQLG9CQUNPLFFBRFA7O0FBRWQsWUFBVSxFQUFFLFlBQUYsRUFBUyxjQUFULEVBQWlCLGtCQUFqQixFQUFWOztBQUVBLGVBQWEseUJBQWUsT0FBZixDQUFiO0FBQ0EsYUFBVyx1QkFBYSxPQUFiLEVBQXNCLFVBQXRCLENBQVg7O0FBRUEsY0FBWSxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWjtBQUNBLGNBQVksU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQVo7O0FBRUEsU0FBTyxnQkFBUCxDQUF3QixPQUF4QixFQUFpQyxZQUFNO0FBQ3JDLFFBQUksUUFBUSxTQUFTLG9CQUFULEVBQVo7QUFDQSxRQUFHLFNBQVMsQ0FBWixFQUFlOztBQUViLFVBQUksU0FBUyxXQUFXLFFBQVgsQ0FBb0IsV0FBcEIsQ0FBZ0MsS0FBaEMsQ0FBYjtBQUNBLFVBQUcsTUFBSCxFQUFXO0FBQ1QsY0FBTSxHQUFOLENBQVUsT0FBTyxPQUFqQjtBQUNEO0FBQ0Y7QUFDRixHQVREOztBQVdBLFNBQU8sZ0JBQVAsQ0FBd0IsVUFBeEIsRUFBb0MsWUFBTTtBQUN4QyxRQUFJLFNBQVMsV0FBVyxRQUFYLENBQW9CLFdBQXBCLENBQWdDLENBQWhDLENBQWI7QUFDQSxRQUFHLE1BQUgsRUFBVztBQUNULFlBQU0sR0FBTixDQUFVLE9BQU8sT0FBakI7QUFDRDtBQUNGLEdBTEQ7O0FBT0E7QUFDRDs7QUFHRCxTQUFTLE1BQVQsQ0FBZ0IsU0FBaEIsRUFBMkI7QUFDekIsd0JBQXNCLE1BQXRCO0FBQ0EsV0FBUyxVQUFULENBQW9CLFNBQXBCOztBQUVBOztBQUVBLFVBQVEsUUFBUixDQUFpQixNQUFqQixDQUF3QixRQUFRLEtBQWhDLEVBQXVDLFFBQVEsTUFBL0M7QUFDRDs7QUFFRCxTQUFTLFFBQVQsR0FBb0I7QUFDbEIsWUFBVSxXQUFWLEdBQXdCLFdBQVcsUUFBWCxDQUFvQixLQUE1QztBQUNBLFlBQVUsV0FBVixHQUF3QixXQUFXLFFBQVgsQ0FBb0IsS0FBNUM7QUFDRDs7QUFFRDs7Ozs7Ozs7QUM3RE8sSUFBTSxnQ0FBWSxDQUFsQjtBQUNBLElBQU0sZ0NBQVksQ0FBQyxDQUFuQjtBQUNBLElBQU0sZ0NBQVksRUFBbEI7QUFDQSxJQUFNLGtDQUFhLENBQW5COzs7Ozs7Ozs7OztBQ0hQOzs7O0FBQ0E7Ozs7OztJQUVxQixVO0FBQ25CLHNCQUFZLElBQVosRUFBa0I7QUFBQTs7QUFDaEIsU0FBSyxLQUFMLEdBQWEsRUFBYjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQUssS0FBbEI7QUFDQSxTQUFLLGNBQUwsR0FBc0IsSUFBSSxPQUFPLGNBQVgsRUFBdEI7QUFDQSxTQUFLLFlBQUwsR0FBb0IsRUFBcEI7O0FBRUEsU0FBSyxRQUFMLEdBQWdCLENBQWhCOztBQUVBLFNBQUssaUJBQUw7QUFDRDs7Ozt3Q0FFbUI7QUFDbEIsV0FBSyxRQUFMLEdBQWdCLHFCQUFXO0FBQ3pCLGNBQU0sT0FEbUI7QUFFekIsdUNBRnlCO0FBR3pCLHNCQUFjLEtBQUssWUFITTtBQUl6QixlQUFNLEtBQUssS0FKYztBQUt6QixZQUFJLEtBQUssUUFBTDtBQUxxQixPQUFYLENBQWhCOztBQVFBLFdBQUssUUFBTCxHQUFnQixxQkFBVztBQUN6QixjQUFNLFVBRG1CO0FBRXpCLHVDQUZ5QjtBQUd6QixzQkFBYyxLQUFLLFlBSE07QUFJekIsZUFBTyxLQUFLLEtBSmE7QUFLekIsWUFBSSxLQUFLLFFBQUw7QUFMcUIsT0FBWCxDQUFoQjs7QUFRQSxXQUFLLEtBQUwsQ0FBVyxPQUFYLEdBQXFCLENBQUUsS0FBSyxRQUFQLEVBQWlCLEtBQUssUUFBdEIsQ0FBckI7QUFDRDs7OzZCQUVRLFMsRUFBVztBQUNsQixXQUFLLEtBQUwsQ0FBVyxPQUFYLENBQW1CLE9BQW5CLENBQTJCO0FBQUEsZUFBVSxPQUFPLE9BQVAsQ0FBZSxTQUFmLENBQVY7QUFBQSxPQUEzQjtBQUNBLFdBQUssY0FBTCxDQUFvQixnQkFBcEIsQ0FBcUMsS0FBSyxZQUExQztBQUNEOzs7Ozs7a0JBbkNrQixVOzs7Ozs7Ozs7OztBQ0hyQjs7OztJQUVxQixRO0FBQ25CLG9CQUFZLE9BQVosRUFBcUIsVUFBckIsRUFBaUM7QUFBQTs7QUFDL0IsU0FBSyxLQUFMLEdBQWEsUUFBUSxLQUFyQjtBQUNBLFNBQUssTUFBTCxHQUFjLFFBQVEsTUFBdEI7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsUUFBUSxRQUF4Qjs7QUFFQSxTQUFLLFVBQUwsR0FBa0IsVUFBbEI7O0FBRUEsU0FBSyxTQUFMO0FBQ0EsU0FBSyxVQUFMOztBQUVBLFNBQUssS0FBTCxHQUFhLEVBQUUsR0FBRyxDQUFMLEVBQVEsR0FBRyxDQUFYLEVBQWI7O0FBRUEsU0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixDQUFyQixHQUF5QixFQUF6QjtBQUNBLFNBQUssTUFBTCxDQUFZLFFBQVosQ0FBcUIsQ0FBckIsR0FBeUIsRUFBekI7QUFDQSxTQUFLLE1BQUwsQ0FBWSxNQUFaLENBQW1CLEtBQUssS0FBTCxDQUFXLFFBQTlCOztBQUdBLFNBQUssU0FBTCxHQUFpQixJQUFJLE1BQU0sU0FBVixFQUFqQjtBQUNBLFNBQUssbUJBQUwsR0FBMkIsSUFBM0I7O0FBRUEsU0FBSyxlQUFMO0FBQ0Q7Ozs7aUNBRVk7QUFDWCxVQUFJLGVBQWUsSUFBSSxNQUFNLFlBQVYsQ0FBdUIsUUFBdkIsQ0FBbkI7QUFDQSxVQUFJLGNBQWMsSUFBSSxNQUFNLFVBQVYsQ0FBcUIsUUFBckIsQ0FBbEI7O0FBRUEsa0JBQVksUUFBWixDQUFxQixHQUFyQixDQUF5QixDQUF6QixFQUE0QixDQUE1QixFQUErQixDQUEvQjs7QUFFQSxXQUFLLEtBQUwsQ0FBVyxHQUFYLENBQWUsWUFBZjtBQUNBLFdBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxXQUFmO0FBQ0Q7OztnQ0FFVztBQUNWLFVBQUksT0FBTyxJQUFJLE1BQU0sVUFBViw2Q0FBWDtBQUNBLFdBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxJQUFmOztBQUVBLFdBQUssVUFBTCxHQUFrQixFQUFsQjs7QUFFQSxVQUFJLGNBQWMsNENBQWxCO0FBQ0EsVUFBSSxPQUFPLENBQUMsSUFBWjs7QUFFQSxXQUFJLElBQUksSUFBSSxDQUFaLEVBQWUsSUFBSSxDQUFuQixFQUFzQixHQUF0QixFQUEyQjtBQUN6QixZQUFJLGdCQUFnQixJQUFJLE1BQU0sYUFBVix1QkFBbUMsV0FBbkMsQ0FBcEI7QUFDQSxZQUFJLGdCQUFnQixJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBQyxPQUFPLFFBQVIsRUFBNUIsQ0FBcEI7QUFDQSxZQUFJLFFBQVEsSUFBSSxNQUFNLElBQVYsQ0FBZSxhQUFmLEVBQTZCLGFBQTdCLENBQVo7QUFDQSxjQUFNLFFBQU4sQ0FBZSxDQUFmLEdBQW1CLENBQUMsR0FBRCxHQUFPLEtBQUssRUFBL0I7QUFDQSxjQUFNLFFBQU4sQ0FBZSxDQUFmLEdBQW1CLElBQW5CO0FBQ0EsY0FBTSxRQUFOLENBQWUsQ0FBZixHQUFtQixDQUFDLEdBQXBCO0FBQ0EsYUFBSyxLQUFMLENBQVcsR0FBWCxDQUFlLEtBQWY7QUFDQSxhQUFLLFVBQUwsQ0FBZ0IsQ0FBaEIsSUFBcUIsS0FBckI7O0FBRUEsZ0JBQVEsV0FBUjtBQUNEO0FBQ0Y7Ozs2Q0FFd0I7QUFDdkIsV0FBSyxTQUFMLENBQWUsYUFBZixDQUE2QixLQUFLLEtBQWxDLEVBQXlDLEtBQUssTUFBOUM7QUFDQSxVQUFJLFNBQVMsT0FBTyxNQUFQLENBQWMsS0FBSyxVQUFuQixDQUFiO0FBQ0EsVUFBSSxhQUFhLEtBQUssU0FBTCxDQUFlLGdCQUFmLENBQWdDLE1BQWhDLENBQWpCOztBQUVBLGFBQU8sT0FBUCxDQUFlLFVBQUMsS0FBRCxFQUFXO0FBQ3hCLGNBQU0sUUFBTixDQUFlLEtBQWYsQ0FBcUIsTUFBckIsQ0FBNEIsUUFBNUI7QUFDRCxPQUZEOztBQUlBLFVBQUcsV0FBVyxNQUFYLEdBQW9CLENBQXZCLEVBQTBCO0FBQ3hCLFlBQUksTUFBTSxXQUFXLENBQVgsRUFBYyxNQUF4Qjs7QUFFQSxZQUFJLFFBQUosQ0FBYSxLQUFiLENBQW1CLE1BQW5CLENBQTBCLFFBQTFCO0FBQ0EsYUFBSyxtQkFBTCxHQUEyQixHQUEzQjtBQUNELE9BTEQsTUFLTyxJQUFHLEtBQUssbUJBQVIsRUFBNEI7QUFDakMsYUFBSyxtQkFBTCxHQUEyQixJQUEzQjtBQUNEO0FBRUY7OzsyQ0FFc0I7QUFDckIsVUFBRyxDQUFDLEtBQUssbUJBQVQsRUFBOEI7QUFBRTtBQUFTOztBQUV6QyxVQUFJLFNBQVMsT0FBTyxNQUFQLENBQWMsS0FBSyxVQUFuQixDQUFiOztBQUVBLFdBQUksSUFBSSxJQUFJLENBQVosRUFBZSxJQUFJLENBQW5CLEVBQXNCLEdBQXRCLEVBQTJCO0FBQ3pCLFlBQUcsS0FBSyxtQkFBTCxLQUE2QixPQUFPLENBQVAsQ0FBaEMsRUFBMkM7QUFDekMsaUJBQU8sQ0FBUDtBQUNEO0FBQ0Y7QUFFRjs7O3NDQUVpQjtBQUNoQixVQUFJLFFBQVEsS0FBSyxLQUFqQjs7QUFFQSxhQUFPLGdCQUFQLENBQXdCLFdBQXhCLEVBQXFDLGVBQU87QUFDMUMsY0FBTSxDQUFOLEdBQVksTUFBTSxPQUFOLEdBQWdCLE9BQU8sVUFBekIsR0FBd0MsQ0FBeEMsR0FBNEMsQ0FBdEQ7QUFDQSxjQUFNLENBQU4sR0FBVSxFQUFJLE1BQU0sT0FBTixHQUFnQixPQUFPLFdBQTNCLElBQTJDLENBQTNDLEdBQStDLENBQXpEO0FBQ0QsT0FIRDtBQUlEOzs7K0JBRVUsUyxFQUFXO0FBQ3BCLFdBQUssc0JBQUw7QUFDQSxXQUFLLFVBQUwsQ0FBZ0IsUUFBaEIsQ0FBeUIsU0FBekI7QUFDRDs7Ozs7O2tCQXRHa0IsUTs7Ozs7Ozs7Ozs7OztJQ0ZBLE07QUFDbkIsa0JBQVksSUFBWixFQUFrQjtBQUFBOztBQUNoQixTQUFLLFNBQUwsR0FBaUIsS0FBSyxTQUF0QjtBQUNBLFNBQUssWUFBTCxHQUFvQixLQUFLLFlBQXpCO0FBQ0EsU0FBSyxFQUFMLEdBQVUsS0FBSyxFQUFmO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLEtBQUssUUFBckI7O0FBRUEsU0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBSyxNQUFMLEdBQWMsS0FBSyxTQUFuQjtBQUNBLFNBQUssY0FBTCxHQUFzQixDQUF0QjtBQUNBLFNBQUssV0FBTCxHQUFtQixHQUFuQjtBQUNBLFNBQUssWUFBTCxHQUFvQixHQUFwQjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQUssWUFBbEI7QUFDQSxTQUFLLGdCQUFMLEdBQXdCO0FBQ3RCLHFCQUFlLElBRE87QUFFdEIsa0JBQVk7QUFGVSxLQUF4Qjs7QUFLQSxTQUFLLE9BQUwsR0FBZSxLQUFmO0FBQ0EsU0FBSyxNQUFMLEdBQWMsS0FBZDs7QUFFQSxTQUFLLGNBQUwsQ0FBb0IsS0FBSyxTQUF6QjtBQUNBLFNBQUssaUJBQUw7QUFDRDs7OzttQ0FFYyxTLEVBQThCO0FBQUEsVUFBbkIsYUFBbUIsdUVBQUwsR0FBSzs7QUFDM0MsV0FBSyxPQUFMLEdBQWUsSUFBSSxNQUFNLEtBQVYsRUFBZjs7QUFFQSxVQUFJLGdCQUFnQixJQUFJLE1BQU0sV0FBVixDQUFzQixDQUF0QixFQUF3QixDQUF4QixFQUEwQixDQUExQixDQUFwQjtBQUNBLFVBQUksZ0JBQWdCLElBQUksTUFBTSxpQkFBVixDQUE0QixFQUFDLE9BQU8sUUFBUixFQUFrQixVQUFVLFFBQTVCLEVBQXNDLFdBQVcsRUFBakQsRUFBNUIsQ0FBcEI7QUFDQSxVQUFJLFlBQVksSUFBSSxNQUFNLElBQVYsQ0FBZSxhQUFmLEVBQThCLGFBQTlCLENBQWhCOztBQUVBLFVBQUksY0FBYyxJQUFJLE1BQU0sV0FBVixDQUFzQixDQUF0QixFQUF3QixDQUF4QixFQUEwQixDQUExQixDQUFsQjtBQUNBLFVBQUksY0FBYyxJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBQyxPQUFPLFFBQVIsRUFBa0IsYUFBYSxJQUEvQixFQUFxQyxTQUFTLGFBQTlDLEVBQTVCLENBQWxCO0FBQ0EsVUFBSSxVQUFVLElBQUksTUFBTSxJQUFWLENBQWUsV0FBZixFQUE0QixXQUE1QixDQUFkOztBQUVBLFdBQUssU0FBTCxHQUFpQixLQUFLLG1CQUFMLEVBQWpCO0FBQ0EsV0FBSyxNQUFMLEdBQWMsT0FBZDs7QUFFQSxXQUFLLE9BQUwsQ0FBYSxHQUFiLENBQWlCLFNBQWpCO0FBQ0EsV0FBSyxPQUFMLENBQWEsR0FBYixDQUFpQixPQUFqQjtBQUNBLFdBQUssT0FBTCxDQUFhLEdBQWIsQ0FBaUIsS0FBSyxTQUF0Qjs7QUFFQSxXQUFLLE9BQUwsQ0FBYSxRQUFiLENBQXNCLENBQXRCLEdBQTJCLFlBQVksQ0FBYixHQUFrQixFQUE1QztBQUNBLFdBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsR0FBMEIsQ0FBQyxFQUFELEdBQU0sS0FBSyxTQUFyQztBQUNBLFdBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsR0FBMEIsQ0FBMUI7O0FBRUEsV0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixNQUFyQixHQUE4QixJQUE5QjtBQUNEOzs7MENBRXFCO0FBQ3BCLFdBQUssZUFBTCxHQUF1QixDQUF2QjtBQUNBLFVBQUksd0JBQXdCLElBQUksTUFBTSxXQUFWLENBQXNCLEtBQUssZUFBM0IsRUFBNEMsR0FBNUMsRUFBaUQsR0FBakQsQ0FBNUI7QUFDQSxVQUFJLHdCQUF3QixJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBQyxPQUFPLFFBQVIsRUFBNUIsQ0FBNUI7QUFDQSxVQUFJLG9CQUFvQixJQUFJLE1BQU0sSUFBVixDQUFlLHFCQUFmLEVBQXNDLHFCQUF0QyxDQUF4QjtBQUNBLHdCQUFrQixJQUFsQixHQUF5QixlQUF6Qjs7QUFFQSxVQUFJLHlCQUF5QixJQUFJLE1BQU0sV0FBVixDQUFzQixLQUFLLGVBQTNCLEVBQTRDLElBQTVDLEVBQWtELElBQWxELENBQTdCO0FBQ0EsVUFBSSx5QkFBeUIsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxRQUFSLEVBQTVCLENBQTdCO0FBQ0EsVUFBSSxxQkFBcUIsSUFBSSxNQUFNLElBQVYsQ0FBZSxzQkFBZixFQUF1QyxzQkFBdkMsQ0FBekI7QUFDQSx5QkFBbUIsSUFBbkIsR0FBMEIsZ0JBQTFCOztBQUVBLFVBQUksaUJBQWlCLElBQUksTUFBTSxLQUFWLEVBQXJCO0FBQ0EscUJBQWUsR0FBZixDQUFtQixpQkFBbkI7QUFDQSxxQkFBZSxHQUFmLENBQW1CLGtCQUFuQjs7QUFFQSxxQkFBZSxRQUFmLENBQXdCLENBQXhCLEdBQTRCLENBQTVCOztBQUVBLGFBQU8sY0FBUDtBQUNEOzs7d0NBRW1CO0FBQUE7O0FBQ2xCLFdBQUssTUFBTCxDQUFZLFFBQVosQ0FBcUIsa0JBQXJCO0FBQ0EsVUFBSSxPQUFPLEtBQUssTUFBTCxDQUFZLFFBQVosQ0FBcUIsV0FBckIsQ0FBaUMsS0FBakMsRUFBWDtBQUNBLFdBQUssUUFBTCxHQUFnQixJQUFJLE9BQU8sWUFBWCxDQUF3QixLQUFLLE1BQTdCLEVBQXFDLElBQXJDLENBQWhCOztBQUVBLFdBQUssWUFBTCxDQUFrQixJQUFsQixDQUF1QixLQUFLLFFBQTVCOztBQUVBLFdBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLGNBQS9CLEVBQStDLFVBQUMsYUFBRCxFQUFtQjtBQUNoRSxjQUFLLEtBQUwsR0FBYSxDQUFiO0FBQ0EsY0FBSyxNQUFMLEdBQWMsSUFBZDtBQUNBLGNBQUssYUFBTCxHQUFxQixjQUFjLFFBQWQsQ0FBdUIsUUFBdkIsQ0FBZ0MsTUFBckQ7QUFDRCxPQUpEOztBQU1BLFdBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLGdCQUEvQixFQUFpRCxVQUFDLGFBQUQsRUFBbUI7QUFDbEUsY0FBSyxLQUFMLEdBQWEsTUFBSyxZQUFsQjtBQUNBLGNBQUssTUFBTCxHQUFjLEtBQWQ7QUFDQSxjQUFLLGFBQUwsR0FBcUIsSUFBckI7QUFDRCxPQUpEO0FBS0Q7OztxQ0FFZ0I7QUFDZixhQUFPLEtBQUssTUFBTCxLQUFnQixLQUFLLGNBQTVCO0FBQ0Q7OztzQ0FFaUI7QUFDaEIsVUFBSSxnQkFBZ0IsS0FBSyxNQUFMLEdBQVksS0FBSyxTQUFyQztBQUNBLFVBQUksa0JBQWtCLEVBQUUsSUFBRSxhQUFKLElBQXFCLEtBQUssZUFBMUIsR0FBNEMsQ0FBbEU7QUFDQSxVQUFJLGdCQUFnQixLQUFLLFNBQUwsQ0FBZSxlQUFmLENBQStCLGVBQS9CLENBQXBCOztBQUVBLG9CQUFjLEtBQWQsQ0FBb0IsQ0FBcEIsR0FBd0IsYUFBeEI7QUFDQSxvQkFBYyxRQUFkLENBQXVCLENBQXZCLEdBQTJCLGVBQTNCO0FBQ0Q7Ozs0QkFFTyxTLEVBQVc7QUFDakIsVUFBRyxLQUFLLGdCQUFMLENBQXNCLGFBQXRCLElBQXVDLElBQXZDLElBQStDLEtBQUssTUFBdkQsRUFBK0Q7QUFDN0QsWUFBSSxRQUFRLFlBQVksS0FBSyxnQkFBTCxDQUFzQixhQUE5QztBQUNBLGFBQUssZ0JBQUwsQ0FBc0IsVUFBdEIsSUFBb0MsS0FBcEM7QUFDQSxhQUFLLGdCQUFMLENBQXNCLGFBQXRCLEdBQXNDLFNBQXRDO0FBQ0EsYUFBSyxVQUFMO0FBQ0QsT0FMRCxNQUtPLElBQUcsS0FBSyxNQUFSLEVBQWdCO0FBQ3JCLGFBQUssZ0JBQUwsQ0FBc0IsVUFBdEIsR0FBbUMsQ0FBbkM7QUFDQSxhQUFLLGdCQUFMLENBQXNCLGFBQXRCLEdBQXNDLFNBQXRDO0FBQ0EsYUFBSyxVQUFMO0FBQ0Q7O0FBRUQsV0FBSyxnQkFBTCxDQUFzQixhQUF0QixHQUFzQyxTQUF0QztBQUNBLFdBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsSUFBNEIsS0FBSyxLQUFMLEdBQWEsS0FBSyxTQUE5Qzs7QUFFQSxXQUFLLFFBQUwsQ0FBYyxNQUFkO0FBQ0EsV0FBSyxlQUFMO0FBQ0Q7OztpQ0FFWTtBQUNYLFVBQUcsS0FBSyxhQUFMLEtBQXVCLElBQXZCLElBQStCLEtBQUssYUFBTCxDQUFtQixRQUFuQixLQUFnQyxLQUFLLFFBQXZFLEVBQWlGO0FBQUU7QUFBUztBQUM1RixVQUFHLEtBQUssZ0JBQUwsQ0FBc0IsVUFBdEIsR0FBbUMsS0FBSyxXQUEzQyxFQUF3RDtBQUFFO0FBQVM7O0FBRW5FLFdBQUssYUFBTCxDQUFtQixNQUFuQixJQUE2QixLQUFLLGNBQUwsRUFBN0I7O0FBRUEsY0FBUSxHQUFSLENBQVksS0FBSyxFQUFqQixFQUFxQixLQUFLLE1BQTFCO0FBQ0EsVUFBRyxLQUFLLGFBQUwsQ0FBbUIsTUFBbkIsSUFBNkIsQ0FBaEMsRUFBbUM7QUFDakMsYUFBSyxhQUFMLENBQW1CLE1BQW5CLEdBQTRCLEtBQTVCO0FBQ0EsYUFBSyxhQUFMLENBQW1CLE9BQW5CLEdBQTZCLElBQTdCO0FBQ0EsYUFBSyxhQUFMLEdBQXFCLElBQXJCO0FBQ0Q7O0FBRUQsV0FBSyxnQkFBTCxDQUFzQixVQUF0QixHQUFtQyxDQUFuQztBQUNBLFdBQUssZ0JBQUwsQ0FBc0IsYUFBdEIsR0FBc0MsSUFBdEM7QUFDRDs7Ozs7O2tCQTFJa0IsTTs7Ozs7Ozs7Ozs7QUNBckI7Ozs7Ozs7O0lBRXFCLE07QUFFbkIsa0JBQVksSUFBWixFQUFrQjtBQUFBOztBQUNoQixTQUFLLElBQUwsR0FBWSxLQUFLLElBQWpCO0FBQ0EsU0FBSyxFQUFMLEdBQVUsS0FBSyxFQUFmO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLEtBQUssU0FBdEI7QUFDQSxTQUFLLFlBQUwsR0FBb0IsS0FBSyxZQUF6QjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQUssS0FBbEI7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7O0FBRUEsU0FBSyxjQUFMO0FBQ0Q7Ozs7Z0NBRVcsSyxFQUFPO0FBQ2pCLFVBQUcsS0FBSyxLQUFMLElBQWMsS0FBSyxVQUF0QixFQUFrQztBQUNoQyxhQUFLLEtBQUwsSUFBYyxLQUFLLFVBQW5COztBQUVBLFlBQUksU0FBUyxxQkFBVztBQUN0QixjQUFJLEtBQUssUUFBTCxFQURrQjtBQUV0QixvQkFBVSxLQUFLLEVBRk87QUFHdEIscUJBQVcsS0FBSyxTQUhNO0FBSXRCLHFCQUFXLEtBSlc7QUFLdEIsd0JBQWMsS0FBSztBQUxHLFNBQVgsQ0FBYjs7QUFRQSxhQUFLLE9BQUwsQ0FBYSxJQUFiLENBQWtCLE1BQWxCO0FBQ0EsZUFBTyxNQUFQO0FBQ0QsT0FiRCxNQWFPO0FBQ0wsZUFBTyxJQUFQO0FBQ0Q7QUFDRjs7OzRCQUVPLFMsRUFBVztBQUFBOztBQUNqQixXQUFLLE9BQUwsQ0FBYSxPQUFiLENBQXFCLFVBQUMsTUFBRCxFQUFTLEtBQVQsRUFBbUI7QUFDdEMsZUFBTyxPQUFQLENBQWUsU0FBZjtBQUNBLFlBQUcsT0FBTyxPQUFWLEVBQW1CO0FBQ2pCLGdCQUFLLEtBQUwsQ0FBVyxNQUFYLENBQWtCLE9BQU8sT0FBekI7O0FBRUEsa0JBQVEsR0FBUixDQUFZLEtBQVosRUFBbUIsTUFBSyxpQkFBTCxDQUF1QixPQUFPLFFBQVAsQ0FBZ0IsRUFBdkMsQ0FBbkI7QUFDQSxnQkFBSyxZQUFMLENBQWtCLE1BQWxCLENBQXlCLE1BQUssaUJBQUwsQ0FBdUIsT0FBTyxRQUFQLENBQWdCLEVBQXZDLENBQXpCLEVBQXFFLENBQXJFOztBQUVBLGNBQUksSUFBSSxNQUFLLE9BQUwsQ0FBYSxNQUFiLENBQW9CLEtBQXBCLEVBQTJCLENBQTNCLENBQVI7QUFDRDtBQUNGLE9BVkQ7QUFXRDs7O3NDQUVpQixFLEVBQUk7QUFDcEIsVUFBSSxRQUFRLENBQUMsQ0FBYjs7QUFFQSxXQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxZQUFMLENBQWtCLE1BQXRDLEVBQThDLEdBQTlDLEVBQW1EO0FBQ2pELFlBQUcsS0FBSyxZQUFMLENBQWtCLENBQWxCLEVBQXFCLEVBQXJCLEtBQTRCLEVBQS9CLEVBQW1DO0FBQ2pDLGtCQUFRLENBQVI7QUFDRDtBQUNGOztBQUVELGFBQU8sS0FBUDtBQUNEOzs7cUNBRWdCO0FBQ2YsV0FBSyxPQUFMLEdBQWUsRUFBZjtBQUNBLFdBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxXQUFLLEtBQUwsR0FBYSxHQUFiO0FBQ0EsV0FBSyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0Q7Ozs7OztrQkEvRGtCLE07Ozs7Ozs7O1FDWUwsZSxHQUFBLGU7QUFkaEIsU0FBUyxZQUFULENBQXNCLFFBQXRCLEVBQWdDLE1BQWhDLEVBQXVDO0FBQ3JDLE1BQUksSUFBSSxPQUFPLFVBQWY7QUFDQSxNQUFJLElBQUksT0FBTyxXQUFmO0FBQ0EsV0FBUyxPQUFULENBQWlCLENBQWpCLEVBQW1CLENBQW5CO0FBQ0EsU0FBTyxNQUFQLEdBQWdCLElBQUUsQ0FBbEI7QUFDQSxTQUFPLHNCQUFQO0FBQ0Q7O0FBRUQsU0FBUyxhQUFULENBQXVCLFFBQXZCLEVBQWlDLE1BQWpDLEVBQXlDO0FBQ3ZDLFNBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsWUFBTTtBQUN0QyxpQkFBYSxRQUFiLEVBQXVCLE1BQXZCO0FBQ0QsR0FGRDtBQUdEOztBQUVNLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFJLFFBQVEsSUFBSSxNQUFNLEtBQVYsRUFBWjtBQUNBLE1BQUksU0FBUyxJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBNUIsRUFBZ0MsT0FBTyxVQUFQLEdBQW9CLE9BQU8sV0FBM0QsRUFBd0UsR0FBeEUsRUFBNkUsSUFBN0UsQ0FBYjtBQUNBLE1BQUksV0FBVyxJQUFJLE1BQU0sYUFBVixFQUFmOztBQUVBLFdBQVMsT0FBVCxDQUFpQixPQUFPLFVBQXhCLEVBQW9DLE9BQU8sV0FBM0M7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsVUFBbkM7O0FBRUEsZ0JBQWMsUUFBZCxFQUF3QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBzZXR1cFNjcmVlblZpZXcgfSBmcm9tICcuL21vZHVsZXMvdmlldyc7XG5pbXBvcnQgR2FtZUVuZ2luZSBmcm9tICcuL21vZHVsZXMvZ2FtZS1lbmdpbmUnO1xuaW1wb3J0IEdhbWVWaWV3IGZyb20gJy4vbW9kdWxlcy9nYW1lLXZpZXcnO1xuXG4vLyBHbG9iYWxzXG5sZXQgZ2xvYmFscztcblxubGV0IGdhbWVFbmdpbmUsIGdhbWVWaWV3O1xuXG4vLyBVSSBFbGVtZW50c1xubGV0IHNjb3JlVGV4dCwgbW9uZXlUZXh0O1xuXG4vLyBTaGFwZXNcbnZhciBjdWJlO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICBsZXQgeyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9ID0gc2V0dXBTY3JlZW5WaWV3KCk7XG4gIGdsb2JhbHMgPSB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG5cbiAgZ2FtZUVuZ2luZSA9IG5ldyBHYW1lRW5naW5lKGdsb2JhbHMpO1xuICBnYW1lVmlldyA9IG5ldyBHYW1lVmlldyhnbG9iYWxzLCBnYW1lRW5naW5lKTtcblxuICBzY29yZVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgbW9uZXlUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmV5Jyk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGxldCBpbmRleCA9IGdhbWVWaWV3LmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XG4gICAgaWYoaW5kZXggPj0gMCkge1xuXG4gICAgICBsZXQgbWluaW9uID0gZ2FtZUVuZ2luZS5teVBsYXllci5zcGF3bk1pbmlvbihpbmRleCk7XG4gICAgICBpZihtaW5pb24pIHtcbiAgICAgICAgc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsICgpID0+IHtcbiAgICBsZXQgbWluaW9uID0gZ2FtZUVuZ2luZS5jb21wdXRlci5zcGF3bk1pbmlvbigzKTtcbiAgICBpZihtaW5pb24pIHtcbiAgICAgIHNjZW5lLmFkZChtaW5pb24udmlld09iaik7XG4gICAgfVxuICB9KTtcblxuICByZW5kZXIoKTtcbn1cblxuXG5mdW5jdGlvbiByZW5kZXIodGltZXN0YW1wKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICBnYW1lVmlldy5yZW5kZXJMb29wKHRpbWVzdGFtcCk7XG5cbiAgdXBkYXRlVUkoKTtcblxuICBnbG9iYWxzLnJlbmRlcmVyLnJlbmRlcihnbG9iYWxzLnNjZW5lLCBnbG9iYWxzLmNhbWVyYSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVVJKCkge1xuICBzY29yZVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLnNjb3JlO1xuICBtb25leVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLm1vbmV5O1xufVxuXG5pbml0KCk7XG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSA3MDtcbmV4cG9ydCBjb25zdCBncmlkU3ViRGl2ID0gODtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBuZXcgVEhSRUV4LkNvbGxpZGVyU3lzdGVtKCk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXTtcblxuICAgIHRoaXMucGxheWVySWQgPSAwO1xuXG4gICAgdGhpcy5pbml0aWFsaXplUGxheWVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVBsYXllcnMoKSB7XG4gICAgdGhpcy5teVBsYXllciA9IG5ldyBQbGF5ZXIoe1xuICAgICAgdHlwZTogJ2h1bWFuJyxcbiAgICAgIGRpcmVjdGlvbjogeFBvc2l0aXZlLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XG4gICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLnN0YXRlLnBsYXllcnMgPSBbIHRoaXMubXlQbGF5ZXIsIHRoaXMuY29tcHV0ZXIgXTtcbiAgfVxuXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiBwbGF5ZXIucnVuTG9vcCh0aW1lc3RhbXApKTtcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVWaWV3IHtcbiAgY29uc3RydWN0b3IoZ2xvYmFscywgZ2FtZUVuZ2luZSkge1xuICAgIHRoaXMuc2NlbmUgPSBnbG9iYWxzLnNjZW5lO1xuICAgIHRoaXMuY2FtZXJhID0gZ2xvYmFscy5jYW1lcmE7XG4gICAgdGhpcy5yZW5kZXJlciA9IGdsb2JhbHMucmVuZGVyZXI7XG5cbiAgICB0aGlzLmdhbWVFbmdpbmUgPSBnYW1lRW5naW5lO1xuXG4gICAgdGhpcy5zZXR1cEdyaWQoKTtcbiAgICB0aGlzLnNldHVwTGlnaHQoKTtcblxuICAgIHRoaXMubW91c2UgPSB7IHg6IDAsIHk6IDAgfTtcblxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1MDtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gNTA7XG4gICAgdGhpcy5jYW1lcmEubG9va0F0KHRoaXMuc2NlbmUucG9zaXRpb24pO1xuXG5cbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcbiAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xuXG4gICAgdGhpcy5zZXR1cE1vdXNlRXZlbnQoKTtcbiAgfVxuXG4gIHNldHVwTGlnaHQoKSB7XG4gICAgbGV0IGxpZ2h0QW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg2NjY2NjYpO1xuICAgIGxldCBsaWdodFNvdXJjZSA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ODg4ODg4KTtcblxuICAgIGxpZ2h0U291cmNlLnBvc2l0aW9uLnNldCgzLCAzLCAzKTtcblxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0QW1iaWVudCk7XG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHRTb3VyY2UpO1xuICB9XG5cbiAgc2V0dXBHcmlkKCkge1xuICAgIHZhciBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkU3ViRGl2KTtcbiAgICB0aGlzLnNjZW5lLmFkZChncmlkKTtcblxuICAgIHRoaXMuZ3JpZFBhbmVscyA9IHt9O1xuXG4gICAgbGV0IHBhbmVsTGVuZ3RoID0gZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdjtcbiAgICBsZXQgelBvcyA9IC0zMC42O1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgdmFyIHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIHBhbmVsTGVuZ3RoKTtcbiAgICAgIHZhciBwbGFuZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHg2NjY2NjZ9KTtcbiAgICAgIHZhciBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnkscGxhbmVNYXRlcmlhbCk7XG4gICAgICBwbGFuZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gelBvcztcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4xO1xuICAgICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuICAgICAgdGhpcy5ncmlkUGFuZWxzW2ldID0gcGxhbmU7XG5cbiAgICAgIHpQb3MgKz0gcGFuZWxMZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpIHtcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuICAgIHZhciBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhwbGFuZXMpO1xuXG4gICAgcGxhbmVzLmZvckVhY2goKHBhbmVsKSA9PiB7XG4gICAgICBwYW5lbC5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHg2NjY2NjYpO1xuICAgIH0pO1xuXG4gICAgaWYoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgb2JqID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7XG5cbiAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHhmZjAwMDApO1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gb2JqO1xuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcbiAgICB9XG5cbiAgfVxuXG4gIGdldEN1cnJlbnRQYW5lbEluZGV4KCkge1xuICAgIGlmKCF0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID09PSBwbGFuZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBzZXR1cE1vdXNlRXZlbnQoKSB7XG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldnQgPT4ge1xuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcbiAgICAgIG1vdXNlLnkgPSAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDE7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJMb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xuICAgIHRoaXMuZ2FtZUVuZ2luZS5nYW1lTG9vcCh0aW1lc3RhbXApO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xuXG4gICAgdGhpcy5tYXhIZWFsdGggPSAxMDtcbiAgICB0aGlzLmhlYWx0aCA9IHRoaXMubWF4SGVhbHRoO1xuICAgIHRoaXMuYXR0YWNrU3RyZW5ndGggPSAzO1xuICAgIHRoaXMuYXR0YWNrU3BlZWQgPSA1MDA7XG4gICAgdGhpcy5kZWZhdWx0U3BlZWQgPSAwLjE7XG4gICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcbiAgICAgIGxhc3RUaW1lU3RhbXA6IG51bGwsXG4gICAgICBhdHRhY2tUaW1lOiAwXG4gICAgfTtcblxuICAgIHRoaXMuZGVzdHJveSA9IGZhbHNlO1xuICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XG5cbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KGFyZ3Muc3RhcnRpbmdaKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XG4gIH1cblxuICBpbml0aWFsaXplVmlldyhzdGFydGluZ1osIGhpdEJveE9wYWNpdHk9LjI1KSB7XG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICBsZXQgc2hhcGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgyLDIsMik7XG4gICAgbGV0IHNoYXBlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMCwgc3BlY3VsYXI6IDB4NTU1NTU1LCBzaGluaW5lc3M6IDMwIH0pO1xuICAgIGxldCBzaGFwZU1lc2ggPSBuZXcgVEhSRUUuTWVzaChzaGFwZUdlb21ldHJ5LCBzaGFwZU1hdGVyaWFsKTtcblxuICAgIGxldCBoaXRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgzLDMsMyk7XG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5IH0pO1xuICAgIGxldCBoaXRNZXNoID0gbmV3IFRIUkVFLk1lc2goaGl0R2VvbWV0cnksIGhpdE1hdGVyaWFsKTtcblxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XG4gICAgdGhpcy5oaXRCb3ggPSBoaXRNZXNoO1xuXG4gICAgdGhpcy52aWV3T2JqLmFkZChzaGFwZU1lc2gpO1xuICAgIHRoaXMudmlld09iai5hZGQoaGl0TWVzaCk7XG4gICAgdGhpcy52aWV3T2JqLmFkZCh0aGlzLmhlYWx0aEJhcik7XG5cbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueiA9IChzdGFydGluZ1ogKiA5KSAtIDMyO1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gLTM4ICogdGhpcy5kaXJlY3Rpb247XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnkgPSAyO1xuXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEubWluaW9uID0gdGhpcztcbiAgfVxuXG4gIGluaXRpYWxpemVIZWFsdGhCYXIoKSB7XG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSAyO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMSwgMC4xKTtcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDB9KTtcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XG4gICAgZnVsbEhlYWx0aEJhck1lc2gubmFtZSA9IFwiRnVsbEhlYWx0aEJhclwiO1xuXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMDksIDAuMDkpO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSwgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCk7XG4gICAgZW1wdHlIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkVtcHR5SGVhbHRoQmFyXCI7XG5cbiAgICBsZXQgaGVhbHRoQmFyR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZnVsbEhlYWx0aEJhck1lc2gpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xuXG4gICAgaGVhbHRoQmFyR3JvdXAucG9zaXRpb24ueSA9IDQ7XG5cbiAgICByZXR1cm4gaGVhbHRoQmFyR3JvdXA7XG4gIH1cblxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTsgXG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcblxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICB0aGlzLnNwZWVkID0gMDtcbiAgICAgIHRoaXMuYXR0YWNrID0gdHJ1ZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEubWluaW9uO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEF0dGFja1ZhbHVlKCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogdGhpcy5hdHRhY2tTdHJlbmd0aDtcbiAgfVxuXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJXaWR0aCAvIDI7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcblxuICAgIGZ1bGxIZWFsdGhCYXIuc2NhbGUueCA9IGhlYWx0aFBlcmNlbnQ7XG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCAhPSBudWxsICYmIHRoaXMuYXR0YWNrKSB7XG4gICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcDtcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lICs9IGRlbHRhO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmF0dGFja0xvb3AoKTtcbiAgICB9IGVsc2UgaWYodGhpcy5hdHRhY2spIHtcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID0gMDtcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgdGhpcy5hdHRhY2tMb29wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggKz0gKHRoaXMuc3BlZWQgKiB0aGlzLmRpcmVjdGlvbik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XG4gIH1cblxuICBhdHRhY2tMb29wKCkge1xuICAgIGlmKHRoaXMuY3VycmVudFRhcmdldCA9PT0gbnVsbCB8fCB0aGlzLmN1cnJlbnRUYXJnZXQucGxheWVySWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPCB0aGlzLmF0dGFja1NwZWVkKSB7IHJldHVybjsgfVxuXG4gICAgdGhpcy5jdXJyZW50VGFyZ2V0LmhlYWx0aCAtPSB0aGlzLmdldEF0dGFja1ZhbHVlKCk7XG5cbiAgICBjb25zb2xlLmxvZyh0aGlzLmlkLCB0aGlzLmhlYWx0aCk7XG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0LmhlYWx0aCA8PSAwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuYXR0YWNrID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuZGVzdHJveSA9IHRydWU7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID0gMDtcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IG51bGw7XG4gIH1cbn1cbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMubWluaW9uSWQgPSAwO1xuXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xuICB9XG5cbiAgc3Bhd25NaW5pb24oaW5kZXgpIHsgXG4gICAgaWYodGhpcy5tb25leSA+PSB0aGlzLm1pbmlvbkNvc3QpIHtcbiAgICAgIHRoaXMubW9uZXkgLT0gdGhpcy5taW5pb25Db3N0O1xuXG4gICAgICBsZXQgbWluaW9uID0gbmV3IE1pbmlvbih7XG4gICAgICAgIGlkOiB0aGlzLm1pbmlvbklkKyssXG4gICAgICAgIHBsYXllcklkOiB0aGlzLmlkLFxuICAgICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxuICAgICAgICBzdGFydGluZ1o6IGluZGV4LFxuICAgICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5taW5pb25zLnB1c2gobWluaW9uKTtcbiAgICAgIHJldHVybiBtaW5pb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XG4gICAgdGhpcy5taW5pb25zLmZvckVhY2goKG1pbmlvbiwgaW5kZXgpID0+IHtcbiAgICAgIG1pbmlvbi5ydW5Mb29wKHRpbWVzdGFtcCk7XG4gICAgICBpZihtaW5pb24uZGVzdHJveSkge1xuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XG5cbiAgICAgICAgY29uc29sZS5sb2coaW5kZXgsIHRoaXMuZmluZENvbGxpZGVySW5kZXgobWluaW9uLmNvbGxpZGVyLmlkKSk7XG4gICAgICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG1pbmlvbi5jb2xsaWRlci5pZCksIDEpO1xuXG4gICAgICAgIGxldCBhID0gdGhpcy5taW5pb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfSk7IFxuICB9XG5cbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHRoaXMuY29sbGlkZXJMaXN0W2ldLmlkID09PSBpZCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgc2V0dXBHYW1lU3RhdGUoKSB7XG4gICAgdGhpcy5taW5pb25zID0gW107XG4gICAgdGhpcy5zY29yZSA9IDA7XG4gICAgdGhpcy5tb25leSA9IDQwMDtcbiAgICB0aGlzLm1pbmlvbkNvc3QgPSAyMDtcbiAgfVxufVxuIiwiZnVuY3Rpb24gaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpe1xuICBsZXQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3LGgpO1xuICBjYW1lcmEuYXNwZWN0ID0gdy9oO1xuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xufVxuXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xuICBsZXQgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgbGV0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG5cbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpO1xuXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG59XG4iXX0=\n"]}