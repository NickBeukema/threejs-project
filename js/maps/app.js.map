{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","_setupScreenView","setupScreenView","document","getElementById","window","addEventListener","index","getCurrentPanelIndex","minion","spawnMinion","add","viewObj","computer","./modules/game-engine","./modules/game-view","./modules/view","2","Object","defineProperty","value","xPositive","xNegative","gridWidth","gridSubDiv","3","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_player","_player2","_constants","GameEngine","this","state","colliderSystem","THREEx","ColliderSystem","colliderList","initializePlayers","type","direction","players","computeAndNotify","forEach","player","runLoop","./constants","./player","4","GameView","setupGrid","setupLight","mouse","x","y","position","z","lookAt","raycaster","THREE","Raycaster","currentHoveredPanel","setupMouseEvent","lightAmbient","AmbientLight","lightSource","PointLight","set","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","MeshBasicMaterial","color","plane","Mesh","rotation","Math","PI","setFromCamera","planes","values","intersects","intersectObjects","panel","material","setHex","object","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","5","Minion","args","health","attackStrength","speed","initializeView","startingZ","registerCollision","hitBoxOpacity","arguments","undefined","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","specular","shininess","shapeMesh","hitGeometry","hitMaterial","transparent","opacity","hitMesh","hitBox","userData","geometry","computeBoundingBox","box3","boundingBox","clone","collider","ColliderBox3","push","otherCollider","console","log","6","_minion","_minion2","Player","setupGameState","minionCost","minions","_this","splice","./minion","7","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","body","appendChild","domElement"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0;\n\n// Shapes\nvar cube;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default();\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n\n      var minion = gameEngine.myPlayer.spawnMinion(index);\n      if (minion) {\n        scene.add(minion.viewObj);\n      }\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    var minion = gameEngine.computer.spawnMinion(3);\n    if (minion) {\n      scene.add(minion.viewObj);\n    }\n  });\n\n  render();\n}\n\nfunction render() {\n  requestAnimationFrame(render);\n  gameView.renderLoop();\n\n  updateUI();\n\n  globals.renderer.render(globals.scene, globals.camera);\n}\n\nfunction updateUI() {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n}\n\ninit();\n\n},{\"./modules/game-engine\":3,\"./modules/game-view\":4,\"./modules/view\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 70;\nvar gridSubDiv = exports.gridSubDiv = 8;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine() {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop() {\n      this.colliderSystem.computeAndNotify(this.colliderList);\n      this.state.players.forEach(function (player) {\n        return player.runLoop();\n      });\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./constants\":2,\"./player\":6}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: 0, y: 0 };\n\n    this.camera.position.z = 50;\n    this.camera.position.y = 50;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = -30.6;\n\n      for (var i = 0; i < 8; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ color: 0x666666 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.1;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < 8; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop() {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop();\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":2}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n\n    this.health = 20;\n    this.attackStrength = 3;\n    this.speed = 0.08;\n\n    this.initializeView(args.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(1, 1, 1);\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(2, 2, 2);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n\n      this.viewObj.position.z = startingZ * 9 - 32;\n      this.viewObj.position.x = -38 * this.direction;\n      this.viewObj.position.y = 1;\n\n      this.hitBox.userData.minion = this;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        console.log(otherCollider);\n        console.log(\"collision!\");\n      });\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop() {\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n\n    this.setupGameState();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList\n        });\n\n        this.minions.push(minion);\n        return minion;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop() {\n      var _this = this;\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop();\n\n        console.log(minion.viewObj.position.x);\n        if (minion.viewObj.position.x > 35) {\n          _this.score += 20;\n          _this.money += 30;\n          _this.minions.splice(index, 1);\n        }\n      });\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 200;\n      this.minionCost = 20;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./minion\":5}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL21vZHVsZXMvY29uc3RhbnRzLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS1lbmdpbmUuanMiLCJzcmMvanMvbW9kdWxlcy9nYW1lLXZpZXcuanMiLCJzcmMvanMvbW9kdWxlcy9taW5pb24uanMiLCJzcmMvanMvbW9kdWxlcy9wbGF5ZXIuanMiLCJzcmMvanMvbW9kdWxlcy92aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTtBQUNBLElBQUksZ0JBQUo7O0FBRUEsSUFBSSxtQkFBSjtBQUFBLElBQWdCLGlCQUFoQjs7QUFFQTtBQUNBLElBQUksa0JBQUo7QUFBQSxJQUFlLGtCQUFmOztBQUVBO0FBQ0EsSUFBSSxJQUFKOztBQUVBLFNBQVMsSUFBVCxHQUFnQjtBQUFBLHlCQUNvQiw0QkFEcEI7QUFBQSxNQUNSLEtBRFEsb0JBQ1IsS0FEUTtBQUFBLE1BQ0QsTUFEQyxvQkFDRCxNQURDO0FBQUEsTUFDTyxRQURQLG9CQUNPLFFBRFA7O0FBRWQsWUFBVSxFQUFFLFlBQUYsRUFBUyxjQUFULEVBQWlCLGtCQUFqQixFQUFWOztBQUVBLGVBQWEsMEJBQWI7QUFDQSxhQUFXLHVCQUFhLE9BQWIsRUFBc0IsVUFBdEIsQ0FBWDs7QUFFQSxjQUFZLFNBQVMsY0FBVCxDQUF3QixPQUF4QixDQUFaO0FBQ0EsY0FBWSxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWjs7QUFFQSxTQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLFlBQU07QUFDckMsUUFBSSxRQUFRLFNBQVMsb0JBQVQsRUFBWjtBQUNBLFFBQUcsU0FBUyxDQUFaLEVBQWU7O0FBRWIsVUFBSSxTQUFTLFdBQVcsUUFBWCxDQUFvQixXQUFwQixDQUFnQyxLQUFoQyxDQUFiO0FBQ0EsVUFBRyxNQUFILEVBQVc7QUFDVCxjQUFN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VCxDQUFzQixRQUF0QixFQUFnQyxNQUFoQyxFQUF1QztBQUNyQyxNQUFJLElBQUksT0FBTyxVQUFmO0FBQ0EsTUFBSSxJQUFJLE9BQU8sV0FBZjtBQUNBLFdBQVMsT0FBVCxDQUFpQixDQUFqQixFQUFtQixDQUFuQjtBQUNBLFNBQU8sTUFBUCxHQUFnQixJQUFFLENBQWxCO0FBQ0EsU0FBTyxzQkFBUDtBQUNEOztBQUVELFNBQVMsYUFBVCxDQUF1QixRQUF2QixFQUFpQyxNQUFqQyxFQUF5QztBQUN2QyxTQUFPLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDLFlBQU07QUFDdEMsaUJBQWEsUUFBYixFQUF1QixNQUF2QjtBQUNELEdBRkQ7QUFHRDs7QUFFTSxTQUFTLGVBQVQsR0FBMkI7QUFDaEMsTUFBSSxRQUFRLElBQUksTUFBTSxLQUFWLEVBQVo7QUFDQSxNQUFJLFNBQVMsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQTVCLEVBQWdDLE9BQU8sVUFBUCxHQUFvQixPQUFPLFdBQTNELEVBQXdFLEdBQXhFLEVBQTZFLElBQTdFLENBQWI7QUFDQSxNQUFJLFdBQVcsSUFBSSxNQUFNLGFBQVYsRUFBZjs7QUFFQSxXQUFTLE9BQVQsQ0FBaUIsT0FBTyxVQUF4QixFQUFvQyxPQUFPLFdBQTNDO0FBQ0EsV0FBUyxJQUFULENBQWMsV0FBZCxDQUEwQixTQUFTLFVBQW5DOztBQUVBLGdCQUFjLFFBQWQsRUFBd0IsTUFBeEI7O0FBRUEsU0FBTyxFQUFFLFlBQUYsRUFBUyxjQUFULEVBQWlCLGtCQUFqQixFQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgc2V0dXBTY3JlZW5WaWV3IH0gZnJvbSAnLi9tb2R1bGVzL3ZpZXcnO1xuaW1wb3J0IEdhbWVFbmdpbmUgZnJvbSAnLi9tb2R1bGVzL2dhbWUtZW5naW5lJztcbmltcG9ydCBHYW1lVmlldyBmcm9tICcuL21vZHVsZXMvZ2FtZS12aWV3JztcblxuLy8gR2xvYmFsc1xubGV0IGdsb2JhbHM7XG5cbmxldCBnYW1lRW5naW5lLCBnYW1lVmlldztcblxuLy8gVUkgRWxlbWVudHNcbmxldCBzY29yZVRleHQsIG1vbmV5VGV4dDtcblxuLy8gU2hhcGVzXG52YXIgY3ViZTtcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgbGV0IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfSA9IHNldHVwU2NyZWVuVmlldygpO1xuICBnbG9iYWxzID0geyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9O1xuXG4gIGdhbWVFbmdpbmUgPSBuZXcgR2FtZUVuZ2luZSgpO1xuICBnYW1lVmlldyA9IG5ldyBHYW1lVmlldyhnbG9iYWxzLCBnYW1lRW5naW5lKTtcblxuICBzY29yZVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgbW9uZXlUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmV5Jyk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGxldCBpbmRleCA9IGdhbWVWaWV3LmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XG4gICAgaWYoaW5kZXggPj0gMCkge1xuXG4gICAgICBsZXQgbWluaW9uID0gZ2FtZUVuZ2luZS5teVBsYXllci5zcGF3bk1pbmlvbihpbmRleCk7XG4gICAgICBpZihtaW5pb24pIHtcbiAgICAgICAgc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsICgpID0+IHtcbiAgICBsZXQgbWluaW9uID0gZ2FtZUVuZ2luZS5jb21wdXRlci5zcGF3bk1pbmlvbigzKTtcbiAgICBpZihtaW5pb24pIHtcbiAgICAgIHNjZW5lLmFkZChtaW5pb24udmlld09iaik7XG4gICAgfVxuICB9KTtcblxuICByZW5kZXIoKTtcbn1cblxuXG5mdW5jdGlvbiByZW5kZXIoKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICBnYW1lVmlldy5yZW5kZXJMb29wKCk7XG5cbiAgdXBkYXRlVUkoKTtcblxuICBnbG9iYWxzLnJlbmRlcmVyLnJlbmRlcihnbG9iYWxzLnNjZW5lLCBnbG9iYWxzLmNhbWVyYSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVVJKCkge1xuICBzY29yZVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLnNjb3JlO1xuICBtb25leVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLm1vbmV5O1xufVxuXG5pbml0KCk7XG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSA3MDtcbmV4cG9ydCBjb25zdCBncmlkU3ViRGl2ID0gODtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3RhdGUgPSB7fTtcblxuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBuZXcgVEhSRUV4LkNvbGxpZGVyU3lzdGVtKCk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXVxuXG4gICAgdGhpcy5pbml0aWFsaXplUGxheWVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVBsYXllcnMoKSB7XG4gICAgdGhpcy5teVBsYXllciA9IG5ldyBQbGF5ZXIoe1xuICAgICAgdHlwZTogJ2h1bWFuJyxcbiAgICAgIGRpcmVjdGlvbjogeFBvc2l0aXZlLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdFxuICAgIH0pO1xuXG4gICAgdGhpcy5jb21wdXRlciA9IG5ldyBQbGF5ZXIoe1xuICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcbiAgICAgIGRpcmVjdGlvbjogeE5lZ2F0aXZlLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdFxuICAgIH0pO1xuXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzID0gWyB0aGlzLm15UGxheWVyLCB0aGlzLmNvbXB1dGVyIF07XG4gIH1cblxuICBnYW1lTG9vcCgpIHtcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiBwbGF5ZXIucnVuTG9vcCgpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbHMsIGdhbWVFbmdpbmUpIHtcbiAgICB0aGlzLnNjZW5lID0gZ2xvYmFscy5zY2VuZTtcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xuICAgIHRoaXMucmVuZGVyZXIgPSBnbG9iYWxzLnJlbmRlcmVyO1xuXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcblxuICAgIHRoaXMuc2V0dXBHcmlkKCk7XG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XG5cbiAgICB0aGlzLm1vdXNlID0geyB4OiAwLCB5OiAwIH07XG5cbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gNTA7XG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDUwO1xuICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnNjZW5lLnBvc2l0aW9uKTtcblxuXG4gICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcblxuICAgIHRoaXMuc2V0dXBNb3VzZUV2ZW50KCk7XG4gIH1cblxuICBzZXR1cExpZ2h0KCkge1xuICAgIGxldCBsaWdodEFtYmllbnQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NjY2NjY2KTtcbiAgICBsZXQgbGlnaHRTb3VyY2UgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDg4ODg4OCk7XG5cbiAgICBsaWdodFNvdXJjZS5wb3NpdGlvbi5zZXQoMywgMywgMyk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodEFtYmllbnQpO1xuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0U291cmNlKTtcbiAgfVxuXG4gIHNldHVwR3JpZCgpIHtcbiAgICB2YXIgZ3JpZCA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKGdyaWRXaWR0aCwgZ3JpZFN1YkRpdik7XG4gICAgdGhpcy5zY2VuZS5hZGQoZ3JpZCk7XG5cbiAgICB0aGlzLmdyaWRQYW5lbHMgPSB7fTtcblxuICAgIGxldCBwYW5lbExlbmd0aCA9IGdyaWRXaWR0aCAvIGdyaWRTdWJEaXY7XG4gICAgbGV0IHpQb3MgPSAtMzAuNjtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgIHZhciBwbGFuZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZ3JpZFdpZHRoLCBwYW5lbExlbmd0aCk7XG4gICAgICB2YXIgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4NjY2NjY2fSk7XG4gICAgICB2YXIgcGxhbmUgPSBuZXcgVEhSRUUuTWVzaChwbGFuZUdlb21ldHJ5LHBsYW5lTWF0ZXJpYWwpO1xuICAgICAgcGxhbmUucm90YXRpb24ueCA9IC0wLjUgKiBNYXRoLlBJO1xuICAgICAgcGxhbmUucG9zaXRpb24ueiA9IHpQb3M7XG4gICAgICBwbGFuZS5wb3NpdGlvbi55ID0gLTAuMTtcbiAgICAgIHRoaXMuc2NlbmUuYWRkKHBsYW5lKTtcbiAgICAgIHRoaXMuZ3JpZFBhbmVsc1tpXSA9IHBsYW5lO1xuXG4gICAgICB6UG9zICs9IHBhbmVsTGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIGNoZWNrR3JpZEludGVyc2VjdGlvbnMoKSB7XG4gICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLm1vdXNlLCB0aGlzLmNhbWVyYSk7XG4gICAgbGV0IHBsYW5lcyA9IE9iamVjdC52YWx1ZXModGhpcy5ncmlkUGFuZWxzKTtcbiAgICB2YXIgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMocGxhbmVzKTtcblxuICAgIHBsYW5lcy5mb3JFYWNoKChwYW5lbCkgPT4ge1xuICAgICAgcGFuZWwubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4NjY2NjY2KTtcbiAgICB9KTtcblxuICAgIGlmKGludGVyc2VjdHMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IG9iaiA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xuXG4gICAgICBvYmoubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4ZmYwMDAwKTtcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG9iajtcbiAgICB9IGVsc2UgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKXtcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG51bGw7XG4gICAgfVxuXG4gIH1cblxuICBnZXRDdXJyZW50UGFuZWxJbmRleCgpIHtcbiAgICBpZighdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IHBsYW5lcyA9IE9iamVjdC52YWx1ZXModGhpcy5ncmlkUGFuZWxzKTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgIGlmKHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9PT0gcGxhbmVzW2ldKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgc2V0dXBNb3VzZUV2ZW50KCkge1xuICAgIGxldCBtb3VzZSA9IHRoaXMubW91c2U7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcbiAgICAgIG1vdXNlLnggPSAoIGV2ZW50LmNsaWVudFggLyB3aW5kb3cuaW5uZXJXaWR0aCApICogMiAtIDE7XG4gICAgICBtb3VzZS55ID0gLSAoIGV2ZW50LmNsaWVudFkgLyB3aW5kb3cuaW5uZXJIZWlnaHQgKSAqIDIgKyAxO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyTG9vcCgpIHtcbiAgICB0aGlzLmNoZWNrR3JpZEludGVyc2VjdGlvbnMoKTtcbiAgICB0aGlzLmdhbWVFbmdpbmUuZ2FtZUxvb3AoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWluaW9uIHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcblxuICAgIHRoaXMuaGVhbHRoID0gMjA7XG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IDM7XG4gICAgdGhpcy5zcGVlZCA9IDAuMDg7XG5cbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KGFyZ3Muc3RhcnRpbmdaKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XG4gIH1cblxuICBpbml0aWFsaXplVmlldyhzdGFydGluZ1osIGhpdEJveE9wYWNpdHk9MCkge1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgbGV0IHNoYXBlR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMSwxLDEpO1xuICAgIGxldCBzaGFwZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDAsIHNwZWN1bGFyOiAweDU1NTU1NSwgc2hpbmluZXNzOiAzMCB9KTtcbiAgICBsZXQgc2hhcGVNZXNoID0gbmV3IFRIUkVFLk1lc2goc2hhcGVHZW9tZXRyeSwgc2hhcGVNYXRlcmlhbCk7XG5cbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMiwyLDIpO1xuICAgIGxldCBoaXRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwLCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogaGl0Qm94T3BhY2l0eSB9KTtcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XG5cbiAgICB0aGlzLmhpdEJveCA9IGhpdE1lc2g7XG5cbiAgICB0aGlzLnZpZXdPYmouYWRkKHNoYXBlTWVzaCk7XG4gICAgdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcblxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi56ID0gKHN0YXJ0aW5nWiAqIDkpIC0gMzI7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSAtMzggKiB0aGlzLmRpcmVjdGlvbjtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IDE7XG5cbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5taW5pb24gPSB0aGlzO1xuICB9XG5cbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KClcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcblxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhvdGhlckNvbGxpZGVyKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiY29sbGlzaW9uIVwiKTtcbiAgICB9KTtcblxuICB9XG5cbiAgcnVuTG9vcCgpIHtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCArPSAodGhpcy5zcGVlZCAqIHRoaXMuZGlyZWN0aW9uKTtcblxuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XG4gIH1cbn1cbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xuICB9XG5cbiAgc3Bhd25NaW5pb24oaW5kZXgpIHtcbiAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xuICAgICAgdGhpcy5tb25leSAtPSB0aGlzLm1pbmlvbkNvc3Q7XG5cbiAgICAgIGxldCBtaW5pb24gPSBuZXcgTWluaW9uKHtcbiAgICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbixcbiAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcbiAgICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMubWluaW9ucy5wdXNoKG1pbmlvbik7XG4gICAgICByZXR1cm4gbWluaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBydW5Mb29wKCkge1xuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKChtaW5pb24sIGluZGV4KSA9PiB7XG4gICAgICBtaW5pb24ucnVuTG9vcCgpO1xuXG4gICAgICBjb25zb2xlLmxvZyhtaW5pb24udmlld09iai5wb3NpdGlvbi54KTtcbiAgICAgIGlmKG1pbmlvbi52aWV3T2JqLnBvc2l0aW9uLnggPiAzNSkge1xuICAgICAgICB0aGlzLnNjb3JlICs9IDIwO1xuICAgICAgICB0aGlzLm1vbmV5ICs9IDMwO1xuICAgICAgICB0aGlzLm1pbmlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHNldHVwR2FtZVN0YXRlKCkge1xuICAgIHRoaXMubWluaW9ucyA9IFtdO1xuICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgIHRoaXMubW9uZXkgPSAyMDA7XG4gICAgdGhpcy5taW5pb25Db3N0ID0gMjA7XG4gIH1cbn1cbiIsImZ1bmN0aW9uIGhhbmRsZVJlc2l6ZShyZW5kZXJlciwgY2FtZXJhKXtcbiAgbGV0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgbGV0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gIHJlbmRlcmVyLnNldFNpemUodyxoKTtcbiAgY2FtZXJhLmFzcGVjdCA9IHcvaDtcbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2NyZWVuVmlldygpIHtcbiAgbGV0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xuICBsZXQgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xuXG4gIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cbiAgc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKTtcblxuICByZXR1cm4geyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9O1xufVxuIl19\n"]}