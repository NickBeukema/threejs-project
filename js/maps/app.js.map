{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","default","opponents","map","_constants","gridSubDiv","forEach","enemy","startingZ","this","player","minions","minion","spawnIndex","spawnValue","values","val","index","../modules/constants","2","Math","floor","random","3","friendlies","spawnPos","startingPos","friendlyMap","m","row","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","idx","unique","fullIdxArr","slice","gaps","filter","indexOf","arrayToUse","gridWidth","Array","prototype","self","4","_interopRequireDefault","obj","__esModule","render","timestamp","requestAnimationFrame","gameView","renderLoop","globals","renderer","scene","camera","performance","rendererStats","update","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","gameEngine","_setupScreenView","setupScreenView","setupPerformance","./modules/game-engine","./modules/game-view","./modules/view","5","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_smartAi","_smartAi2","_defensiveAi","_defensiveAi2","_randomAi","_randomAi2","AI","args","smartAI","defensiveAI","randomAI","determineAIFunction","personality","spawnInterval","lastUpgrade","upgradeInterval","lastSpawn","poppulationLimit","difficulty","setupEasy","setupHard","canUpgrade","applyUpgrades","checkUpgrades","canSpawn","AIFunction","spawnMinion","upgrades","canUpgradeBaseHealth","name","cost","getBaseHealthUpgradeCost","canUpgradeMinionHealth","getMinionHealthUpgradeCost","canUpgradeMinionAttack","getMinionAttackUpgradeCost","canUpgradeMinionAttackSpeed","getMinionAttackSpeedUpgradeCost","canUpgradeWizardAttack","getWizardAttackUpgradeCost","canUpgradeWizardAttackSpeed","getWizardAttackSpeedUpgradeCost","_this","upgrade","money","apply","../ai/defensive-ai","../ai/random-ai","../ai/smart-ai","./constants","6","_constants2","Archer","playerId","id","colliderList","direction","startingY","startingX","targetList","arrows","startingRotation","_90deg","PI","_135deg","animationProperties","arm","startingAngle","endingAngle","angleDifference","speedDown","speedUp","lastAnimate","arrowSpeed","attackProperties","lastAttack","textureLoader","THREE","TextureLoader","attackSpeed","archer","baseAttackSpeed","baseArrowSpeed","attackStrength","baseAttack","arrowId","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","Group","bodyG","BoxGeometry","bodyMat","MeshBasicMaterial","color","body","Mesh","hitBoxG","material","transparent","opacity","depthWrite","hitBox","userData","object","ranged","add","position","set","geometry","computeBoundingBox","box3","boundingBox","clone","collider","THREEx","ColliderBox3","addEventListener","otherCollider","object3d","immuneToRange","findColliderIndex","splice","determineTarget","removeTarget","initiateAttack","recharging","_this2","canAttack","nextTarget","callback","health","getAttackValue","processReward","killReward","attack","destroy","_this3","texture","load","SphericalRefractionMapping","arrowG","SphereGeometry","arrowMat","MeshPhongMaterial","emissive","faceVertexUvs","uvs","face","faces","j","vertexNormals","y","arrow","max","endingY","y_1","y_2","y_3","b","c","yFunction","delta","initialDistanceX","distanceTargetWillTravelX","speed","m_x","console","log","c_x","xFunction","m_z","z","c_z","zFunction","startingTime","setTimeout","remove","_this4","rotation","rightArm","timeRatio","degreeChange","spawnArrow","resetAttackAnimation","_delta","_timeRatio","_degreeChange","angleTowardsTarget","calculateAngleToTarget","bodyModel","xDiff","zDiff","diffRatio","atan","attackProcedure","animateArrows","animateAttack","7","Base","baseWidth","baseHeight","baseDepth","maxHealth","hitBoxBuffer","score","shapeGeometry","normalMap","longTexture","skinnyTexture","sideTexture","wrapS","wrapT","RepeatWrapping","repeat","skinnyMat","specular","shininess","normalScale","Vector2","longMat","sideMat","shapeMaterials","shapeMesh","MultiMaterial","hitGeometry","hitMaterial","hitMesh","healthBar","initializeHealthBar","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","updateHealthBar","8","xPositive","xNegative","gridHeight","baseHealth","amount","base","9","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","gameOver","state","colliderSystem","ColliderSystem","initializePlayers","myPlayer","type","computer","playerAI","players","_ref","winner","p","setGameOver","activateMenu","computers","setDifficulty","pop","setPlayers","reset","runLoop","lost","find","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","10","scoreText","moneyText","poppulationText","baseHealthText","minionBaseHealthText","minionBaseAttackText","minionBaseAttackSpeedText","archerBaseAttackText","archerBaseAttackSpeedText","baseHealthUpgrade","minionBaseHealthUpgrade","minionBaseAttackUpgrade","minionBaseAttackSpeedUpgrade","archerBaseAttackUpgrade","archerBaseAttackSpeedUpgrade","planeTexture","GameView","setupGrid","setupGrassField","setupLight","mouse","positionScale","lookAt","hud","document","getElementById","hudUpgrade","lastTimeStamp","started","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","plane","anisotropy","getMaxAnisotropy","rotateX","setFromCamera","planes","intersects","intersectObjects","panel","setHex","window","evt","event","clientX","innerWidth","clientY","innerHeight","restart","classList","initializeUpgradeButtons","initializeHudTexts","getCurrentPanelIndex","round","textContent","poppulationCap","toFixed","minionBaseHealth","minionBaseAttack","minionBaseAttackSpeed","archerBaseAttack","archerBaseAttackSpeed","checkGridIntersections","gameLoop","updateUI","upgradeBaseHealth","upgradeMinionHealth","upgradeMinionAttack","upgradeMinionAttackSpeed","upgradeWizardAttack","upgradeWizardAttackSpeed","11","activateStartScreen","startSection","restartSection","activateRestartScreen","text","restartModalMessage","modal","closeMenu","startButton","startFirstGame","restartButton","demoButton1","demoButton2","hardButton","12","Minion","healthUpgrade","attackUpgrade","attackSpeedUpgrade","defaultSpeed","attackTime","attackAnimationProperties","walkingAnimationProperties","time","rotObjectMatrix","dispose","currentTarget","resetWalkAnimation","walkProcedure","attackLoop","children","currentAttackTime","animationSpeed","min","walkLoop","animateWalk","legs","leftLeg","rightLeg","animateLegForward","animateLegBack","toDegrees","leg","maxRotation","toRadians","angleRadians","angleDegrees","13","_minion","_minion2","_archer","_archer2","_base","_base2","Player","minionId","setUpgradeValues","loader","ObjectLoader","setupGameState","spawnBase","spawnArchers","archers","minionCost","reward","keys","destroyBase","destroyMinion","removeEventListener","_this5","./archer","./base","./minion","14","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","shadowMapEnabled","shadowMapType","PCFSoftShadowMap","appendChild","domElement","RendererStats","style","left","bottom"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents) {\n  var map = {};\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    map[i] = 0;\n  }\n\n  opponents.forEach(function (enemy) {\n    map[enemy.startingZ]--;\n  });\n\n  this.player.minions.forEach(function (minion) {\n    map[minion.startingZ]++;\n  });\n\n  var spawnIndex = -1;\n  var spawnValue = 100000;\n  Object.values(map).forEach(function (val, index) {\n    if (val < spawnValue) {\n      spawnValue = val;\n      spawnIndex = index;\n    }\n  });\n\n  return spawnIndex;\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (opponents) {\n    return Math.floor(Math.random() * _constants.gridSubDiv);\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents, friendlies, spawnPos) {\n  var startingPos = spawnPos;\n\n  var friendlyMap = friendlies.map(function (m) {\n    return {\n      row: m.startingZ,\n      distance: m.getPosition().x - startingPos\n    };\n  });\n\n  var opponentMap = opponents.map(function (m) {\n\n    var distance = startingPos - m.getPosition().x;\n    return {\n      row: m.startingZ,\n      distance: distance\n    };\n  });\n\n  var rowArray = [];\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    rowArray.push(i);\n  }\n\n  var decision = {\n    hasFriendlies: [],\n    closestIndex: -1,\n    closestVal: 99999,\n    distanceTies: []\n\n  };\n\n  friendlyMap.forEach(function (val, idx) {\n    decision.hasFriendlies.push(val.row);\n  });\n\n  opponentMap.forEach(function (val, idx) {\n    if (val.distance < decision.closestVal) {\n      decision.closestIndex = val.row;\n      decision.closestVal = val.distance;\n\n      if (decision.distanceTies.length > 0) {\n        decision.distanceTies.length = 0;\n      }\n    } else if (val.distance === decision.closestVal) {\n      decision.distanceTies.push(val.row);\n    }\n  });\n\n  decision.distanceTies.push(decision.closestIndex);\n  decision.hasFriendlies = decision.hasFriendlies.unique();\n\n  var fullIdxArr = rowArray.slice(0);\n\n  decision.gaps = fullIdxArr.filter(function (x) {\n    return decision.hasFriendlies.indexOf(x) < 0;\n  });\n\n  //if(friendlies.length > 3) {\n  //friendlies[2].viewObj.position.z += 1;\n  //}\n\n\n  var arrayToUse = void 0;\n  if (decision.closestVal < _constants.gridWidth / 2) {\n    arrayToUse = decision.distanceTies;\n  } else {\n    arrayToUse = decision.gaps;\n  }\n\n  var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n  return arrayToUse[arrIdx];\n};\n\nvar _constants = require('../modules/constants');\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\n},{\"../modules/constants\":8}],4:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\nvar rendererStats = void 0;\nvar performance = true;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  if (performance) {\n    rendererStats = (0, _view.setupPerformance)();\n  }\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  if (performance) {\n    rendererStats.update(globals.renderer);\n  }\n}\n\ninit();\n\n},{\"./modules/game-engine\":9,\"./modules/game-view\":10,\"./modules/view\":14}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _smartAi = require('../ai/smart-ai');\n\nvar _smartAi2 = _interopRequireDefault(_smartAi);\n\nvar _defensiveAi = require('../ai/defensive-ai');\n\nvar _defensiveAi2 = _interopRequireDefault(_defensiveAi);\n\nvar _randomAi = require('../ai/random-ai');\n\nvar _randomAi2 = _interopRequireDefault(_randomAi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.smartAI = _smartAi2.default;\n    this.defensiveAI = _defensiveAi2.default;\n    this.randomAI = _randomAi2.default;\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 325;\n    this.lastUpgrade = 0;\n    this.upgradeInterval = 1500;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 30;\n  }\n\n  _createClass(AI, [{\n    key: 'canSpawn',\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval && this.player.minions.length < this.poppulationLimit;\n    }\n  }, {\n    key: 'canUpgrade',\n    value: function canUpgrade(timestamp) {\n      return timestamp - this.lastUpgrade > this.upgradeInterval;\n    }\n  }, {\n    key: 'setDifficulty',\n    value: function setDifficulty(difficulty) {\n      if (difficulty === 1) {\n        this.setupEasy();\n      } else if (difficulty === 2) {\n        this.setupHard();\n      }\n    }\n  }, {\n    key: 'setupEasy',\n    value: function setupEasy() {\n      this.spawnInterval = 1500;\n      this.upgradeInterval = 3000;\n    }\n  }, {\n    key: 'setupHard',\n    value: function setupHard() {\n      this.spawnInterval = 325;\n      this.upgradeInterval = 1500;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp, opponents) {\n      if (this.canUpgrade(timestamp)) {\n        this.applyUpgrades(this.checkUpgrades());\n        this.lastUpgrade = timestamp;\n      }\n\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions, this.player.spawnPos);\n\n      if (spawnIndex >= 0) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: 'determineAIFunction',\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n\n    //check all upgradeCosts to see if any can be upgrades returns a list of what can be upgraded and their cost\n\n  }, {\n    key: 'checkUpgrades',\n    value: function checkUpgrades() {\n      var upgrades = [];\n\n      if (this.player.canUpgradeBaseHealth()) {\n        upgrades.push({ name: \"upgradeBaseHealth\", cost: this.player.getBaseHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionHealth()) {\n        upgrades.push({ name: \"upgradeMinionHealth\", cost: this.player.getMinionHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttack()) {\n        upgrades.push({ name: \"upgradeMinionAttack\", cost: this.player.getMinionAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttackSpeed()) {\n        upgrades.push({ name: \"upgradeMinionAttackSpeed\", cost: this.player.getMinionAttackSpeedUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttack()) {\n        upgrades.push({ name: \"upgradeWizardAttack\", cost: this.player.getWizardAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttackSpeed()) {\n        upgrades.push({ name: \"upgradeWizardAttackSpeed\", cost: this.player.getWizardAttackSpeedUpgradeCost() });\n      }\n\n      return upgrades;\n    }\n  }, {\n    key: 'applyUpgrades',\n    value: function applyUpgrades(upgrades) {\n      var _this = this;\n\n      upgrades.forEach(function (upgrade) {\n        if (_this.player.money / 1.5 > upgrade.cost && _this.player.money > 750) {\n          var fn = _this.player[upgrade.name];\n          fn.apply(_this.player);\n        }\n      });\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"../ai/defensive-ai\":1,\"../ai/random-ai\":2,\"../ai/smart-ai\":3,\"./constants\":8}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Archer = function () {\n  function Archer(args) {\n    _classCallCheck(this, Archer);\n\n    this.scene = args.scene;\n    this.player = args.player;\n    this.playerId = this.player.id;\n    this.colliderList = args.colliderList;\n\n    this.direction = args.direction;\n    this.startingZ = args.startingZ;\n    this.startingY = args.startingY + 4;\n    this.startingX = args.startingX - 4 * this.direction;\n\n    this.targetList = [];\n    this.arrows = [];\n\n    this.startingRotation = 0;\n    var _90deg = 90 / 180 * Math.PI;\n    var _135deg = 135 / 180 * Math.PI;\n\n    this.animationProperties = {\n      arm: {\n        startingAngle: _135deg,\n        endingAngle: _90deg,\n        angleDifference: _135deg - _90deg,\n        speedDown: 200,\n        speedUp: 150,\n        lastAnimate: null\n      },\n      arrowSpeed: 500\n    };\n\n    this.attackProperties = {\n      lastAttack: 0\n    };\n    this.textureLoader = new THREE.TextureLoader();\n\n    this.attackSpeed = _constants2.default.archer.baseAttackSpeed;\n    this.arrowSpeed = _constants2.default.archer.baseArrowSpeed;\n    this.attackStrength = _constants2.default.archer.baseAttack;\n    this.arrowId = 0;\n    this.initializeView();\n    this.registerCollision();\n  }\n\n  _createClass(Archer, [{\n    key: 'initializeView',\n    value: function initializeView() {\n      var hitBoxOpacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var bodyG = new THREE.BoxGeometry(0.01, 0.013, 0.013);\n      var bodyMat = new THREE.MeshBasicMaterial({ color: 0x00FF00 });\n      this.body = new THREE.Mesh(bodyG, bodyMat);\n\n      var hitBoxG = new THREE.BoxGeometry(60, 60, 60);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffff00, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      this.hitBox = new THREE.Mesh(hitBoxG, material);\n\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.ranged = true;\n\n      this.viewObj.add(this.body);\n      this.viewObj.add(this.hitBox);\n\n      this.viewObj.position.set(this.startingX, this.startingY, this.startingZ);\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        _this.targetList.push(userData.object);\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        if (_this.findColliderIndex(otherCollider.id) === -1) {\n          _this.targetList.push(userData.object);\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.targetList.splice(_this.findColliderIndex(otherCollider), 1);\n        _this.determineTarget();\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.removeTarget(otherCollider);\n        _this.determineTarget();\n      });\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.targetList.length; i++) {\n        if (this.targetList[i].collider.id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'removeTarget',\n    value: function removeTarget(id) {\n      this.targetList.splice(this.findColliderIndex(id), 1);\n    }\n  }, {\n    key: 'canAttack',\n    value: function canAttack(timestamp) {\n      if (this.targetList.length === 0) {\n        return false;\n      }\n      if (this.initiateAttack || this.recharging) {\n        return false;\n      }\n\n      var delta = timestamp - this.attackProperties.lastAttack;\n      return delta >= this.attackSpeed;\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      return this.attackStrength;\n    }\n  }, {\n    key: 'determineTarget',\n    value: function determineTarget() {\n      if (this.targetList.length > 0) {\n        return this.targetList[0];\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      var _this2 = this;\n\n      if (!this.canAttack(timestamp)) {\n        return;\n      }\n\n      var target = this.determineTarget();\n      if (target !== null && target.viewObj) {\n        this.nextTarget = {\n          target: target,\n          callback: function callback(target) {\n            target.health -= _this2.getAttackValue();\n            if (target.health <= 0) {\n              _this2.player.processReward(target.killReward);\n\n              target.attack = false;\n              target.destroy = true;\n              _this2.removeTarget(target.collider.id);\n            }\n          }\n        };\n        this.initiateAttack = true;\n      }\n\n      this.attackProperties.lastAttack = timestamp;\n    }\n  }, {\n    key: 'spawnArrow',\n    value: function spawnArrow(target, timestamp, callback) {\n      var _this3 = this;\n\n      var texture = this.textureLoader.load('textures/fireball.jpg', THREE.SphericalRefractionMapping);\n      var arrowG = new THREE.SphereGeometry(1, 32, 16);\n      var arrowMat = new THREE.MeshPhongMaterial({ color: 0xFFFFFF, map: texture, emissive: 0x440000 });\n\n      var faceVertexUvs = arrowG.faceVertexUvs[0];\n      for (var i = 0; i < faceVertexUvs.length; i++) {\n\n        var uvs = faceVertexUvs[i];\n        var face = arrowG.faces[i];\n\n        for (var j = 0; j < 3; j++) {\n\n          uvs[j].x = face.vertexNormals[j].x * 0.5 + 0.5;\n          uvs[j].y = face.vertexNormals[j].y * 0.5 + 0.5;\n        }\n      }\n\n      var arrow = new THREE.Mesh(arrowG, arrowMat);\n      arrow.name = \"Arrow\";\n      this.scene.add(arrow);\n\n      arrow.position.set(this.startingX, this.startingY + 2, this.startingZ);\n\n      var id = this.arrowId++;\n\n      var startingY = arrow.position.y;\n      var max = startingY + 5;\n      var endingY = target.viewObj.position.y;\n\n      var x_1 = 0;\n      var y_1 = startingY;\n\n      var x_2 = 0.5;\n      var y_2 = max;\n\n      var x_3 = 1;\n      var y_3 = endingY;\n\n      var a = y_1 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var b = -y_1 * (x_2 + x_3) / ((x_1 - x_2) * (x_1 - x_3)) - y_2 * (x_1 + x_3) / ((x_2 - x_1) * (x_2 - x_3)) - y_3 * (x_1 + x_2) / ((x_3 - x_1) * (x_3 - x_2));\n\n      var c = y_1 * x_2 * x_3 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 * x_1 * x_3 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 * x_1 * x_2 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var yFunction = function yFunction(delta) {\n        return a * (delta * delta) + b * delta + c;\n      };\n\n      var initialDistanceX = target.viewObj.position.x - arrow.position.x;\n      var distanceTargetWillTravelX = target.speed / 16 * this.arrowSpeed * -this.direction;\n      var m_x = initialDistanceX + distanceTargetWillTravelX;\n\n      console.log(m_x, arrow.position.x);\n      if (m_x * -this.direction > 0) {\n        m_x = this.direction * 5;\n      }\n      var c_x = arrow.position.x;\n\n      var xFunction = function xFunction(delta) {\n        return m_x * delta + c_x;\n      };\n\n      var m_z = target.viewObj.position.z - arrow.position.z;\n      var c_z = arrow.position.z;\n\n      var zFunction = function zFunction(delta) {\n        return m_z * delta + c_z;\n      };\n\n      this.arrows.push({\n        id: id,\n        obj: arrow,\n        target: target,\n        startingTime: timestamp,\n        yFunction: yFunction,\n        xFunction: xFunction,\n        zFunction: zFunction\n      });\n\n      setTimeout(function () {\n        callback(target);\n        _this3.arrows = _this3.arrows.filter(function (a) {\n          return a !== id;\n        });\n        _this3.scene.remove(arrow);\n      }, this.arrowSpeed);\n    }\n  }, {\n    key: 'animateArrows',\n    value: function animateArrows(timestamp) {\n      var _this4 = this;\n\n      this.arrows.forEach(function (arrow) {\n        var delta = (timestamp - arrow.startingTime) / _this4.arrowSpeed;\n        arrow.obj.position.y = arrow.yFunction(delta);\n        arrow.obj.position.x = arrow.xFunction(delta);\n        arrow.obj.position.z = arrow.zFunction(delta);\n        arrow.obj.rotation.y += 0.1;\n        arrow.obj.rotation.x += 0.1;\n      });\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(timestamp) {\n      if (this.rightArm && this.initiateAttack) {\n        if (this.rightArm.rotation.z > this.animationProperties.arm.endingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var timeRatio = delta / this.animationProperties.arm.speedDown;\n          var degreeChange = this.animationProperties.arm.angleDifference * timeRatio;\n\n          this.rightArm.rotation.z -= degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.spawnArrow(this.nextTarget.target, timestamp, this.nextTarget.callback);\n\n          this.resetAttackAnimation();\n        }\n      }\n\n      if (this.rightArm && this.recharging) {\n        if (this.rightArm.rotation.z < this.animationProperties.arm.startingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var _delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var _timeRatio = _delta / this.animationProperties.arm.speedUp;\n          var _degreeChange = this.animationProperties.arm.angleDifference * _timeRatio;\n\n          this.rightArm.rotation.z += _degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.recharging = false;\n          this.animationProperties.arm.lastAnimate = null;\n        }\n      }\n\n      if (this.nextTarget && this.nextTarget.target) {\n        var angleTowardsTarget = this.calculateAngleToTarget(this.nextTarget.target);\n        this.bodyModel.rotation.y = angleTowardsTarget + this.startingRotation;\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      this.initiateAttack = false;\n      this.recharging = true;\n      this.animationProperties.arm.lastAnimate = null;\n    }\n  }, {\n    key: 'calculateAngleToTarget',\n    value: function calculateAngleToTarget(target) {\n      var xDiff = target.viewObj.position.x - this.viewObj.position.x;\n      var zDiff = target.viewObj.position.z - this.viewObj.position.z;\n      var diffRatio = zDiff / xDiff;\n      return Math.PI * -this.direction - Math.atan(diffRatio) + Math.PI;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.animateArrows(timestamp);\n      this.animateAttack(timestamp);\n      this.collider.update();\n    }\n  }]);\n\n  return Archer;\n}();\n\nexports.default = Archer;\n\n},{\"./constants\":8}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n  function Base(args) {\n    _classCallCheck(this, Base);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.player = args.player;\n    this.playerId = this.player.id;\n\n    this.baseWidth = _constants.gridWidth;\n    this.baseHeight = 20;\n    this.baseDepth = 10;\n\n    this.maxHealth = 250;\n    this.health = this.maxHealth;\n\n    this.hitBoxBuffer = 2;\n\n    this.killReward = {\n      money: 550,\n      score: 1000\n    };\n\n    this.initializeView(this.direction);\n    this.registerCollision();\n  }\n\n  _createClass(Base, [{\n    key: 'initializeView',\n    value: function initializeView(direction) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n      var textureLoader = new THREE.TextureLoader();\n      var normalMap = textureLoader.load('textures/rock-normal-map.jpg');\n      var longTexture = textureLoader.load('textures/brick-wall.jpg');\n      var skinnyTexture = textureLoader.load('textures/brick-wall.jpg');\n      var sideTexture = textureLoader.load('textures/brick-wall.jpg');\n      var baseColor = 0x555555;\n\n      longTexture.wrapS = longTexture.wrapT = THREE.RepeatWrapping;\n      longTexture.repeat.set(3, 1);\n\n      skinnyTexture.wrapS = skinnyTexture.wrapT = THREE.RepeatWrapping;\n      skinnyTexture.repeat.set(1, 3);\n\n      sideTexture.wrapS = sideTexture.wrapT = THREE.RepeatWrapping;\n      sideTexture.repeat.set(1, 1);\n\n      var skinnyMat = new THREE.MeshPhongMaterial({ color: 0x333333, specular: 0x333333, shininess: 15, normalMap: textureLoader.load('textures/rock-normal-map.jpg'), normalScale: new THREE.Vector2(0.05, 1), map: skinnyTexture });\n\n      var longMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: longTexture });\n\n      var sideMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: sideTexture });\n\n      var shapeMaterials = [longMat, // Right\n      longMat, // Left\n      skinnyMat, // Top\n      sideMat, // Back\n      sideMat, // Front\n      skinnyMat];\n\n      var shapeMesh = new THREE.Mesh(shapeGeometry, new THREE.MultiMaterial(shapeMaterials));\n\n      var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n      this.viewObj.position.y = this.baseHeight / 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.immuneToRange = true;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarLength = _constants.gridWidth / 10;\n      this._healthBarWidth = _constants.gridWidth / 150;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = this.baseHeight + 5;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop() {\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }]);\n\n  return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":8}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 64;\nvar gridHeight = exports.gridHeight = 16;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\nvar minion = {\n\tbaseHealth: 10,\n\tbaseAttack: 3,\n\tbaseAttackSpeed: 1000,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 50,\n\t\t\tamount: 5\n\t\t},\n\t\tattack: {\n\t\t\tcost: 75,\n\t\t\tamount: 2\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 25\n\t\t}\n\t}\n};\n\nvar base = {\n\tbaseHealth: 250,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 150,\n\t\t\tamount: 250\n\t\t}\n\t}\n};\n\nvar archer = {\n\tbaseAttack: 5,\n\tbaseAttackSpeed: 1000,\n\tbaseArrowSpeed: 1000,\n\tupgrades: {\n\t\tattack: {\n\t\t\tcost: 50,\n\t\t\tamount: 4\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 50\n\t\t}\n\t}\n};\n\nvar player = {};\n\nexports.default = { minion: minion, base: base, archer: archer, player: player };\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.gameOver = true;\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"randomAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"randomAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver(_ref) {\n      var winner = _ref.winner,\n          score = _ref.score;\n\n      this.state.players.forEach(function (p) {\n        return p.setGameOver();\n      });\n      (0, _menuScreen.activateMenu)({\n        winner: winner,\n        score: score\n      });\n    }\n  }, {\n    key: 'setPlayers',\n    value: function setPlayers(difficulty, computers) {\n      if (computers === 0) {\n        this.AI = null;\n        this.playerAI = null;\n      } else if (computers === 1) {\n        this.AI = new _aiPlayer2.default({\n          player: this.computer,\n          personality: \"randomAI\"\n        });\n        this.playerAI = null;\n      } else if (computers === 2) {\n        this.AI = new _aiPlayer2.default({\n          player: this.computer,\n          personality: \"randomAI\"\n        });\n\n        this.playerAI = new _aiPlayer2.default({\n          player: this.myPlayer,\n          personality: \"randomAI\"\n        });\n      }\n\n      if (this.AI) {\n        this.AI.setDifficulty(difficulty);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.setDifficulty(difficulty);\n      }\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      var difficulty = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var computers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n\n      this.setPlayers(difficulty, computers);\n\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          var winner = _this.state.players.find(function (p) {\n            return p.id !== player.id;\n          });\n          var score = winner.score;\n          _this.initializeGameOver({ winner: winner, score: score });\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":5,\"./constants\":8,\"./menu-screen\":11,\"./player\":13}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    poppulationText = void 0,\n    baseHealthText = void 0,\n    minionBaseHealthText = void 0,\n    minionBaseAttackText = void 0,\n    minionBaseAttackSpeedText = void 0,\n    archerBaseAttackText = void 0,\n    archerBaseAttackSpeedText = void 0;\nvar baseHealthUpgrade = void 0,\n    minionBaseHealthUpgrade = void 0,\n    minionBaseAttackUpgrade = void 0,\n    minionBaseAttackSpeedUpgrade = void 0,\n    archerBaseAttackUpgrade = void 0,\n    archerBaseAttackSpeedUpgrade = void 0;\n\n// Texture\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupGrassField();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.hud = document.getElementById('hud');\n    this.hudUpgrade = document.getElementById('hud-upgrade');\n    this.lastTimeStamp = 0;\n    this.started = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this, this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888, 1);\n\n      lightSource.position.set(0, 30, 0);\n      lightAmbient.position.set(0, 30, 0);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      //let texturedSurfaceGeometry = new THREE.PlaneGeometry(gridWidth, gridWidth);\n      //let texturedSurfaceMaterial = new THREE.MeshBasicMaterial({map: planeTexture});\n      //let texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      //texturedSurface.rotation.x = -0.5 * Math.PI;\n      //texturedSurface.position.y = -0.3;\n      //this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridHeight);\n      grid.position.y = -.4;\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridHeight;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridHeight; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = 0;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'setupGrassField',\n    value: function setupGrassField() {\n      var textureUrl = 'textures/grasslight-small.jpg';\n      var texture = new THREE.TextureLoader().load(textureUrl);\n      texture.wrapS = THREE.RepeatWrapping;\n      texture.wrapT = THREE.RepeatWrapping;\n      texture.repeat.y = _constants.gridSubDiv;\n      texture.repeat.x = _constants.gridSubDiv;\n      texture.anisotropy = this.renderer.getMaxAnisotropy();\n      // build object3d\n      var geometry = new THREE.PlaneGeometry(_constants.gridWidth * 10, _constants.gridWidth * 10);\n      var material = new THREE.MeshPhongMaterial({\n        map: texture,\n        shininess: 10\n      });\n      var plane = new THREE.Mesh(geometry, material);\n      plane.rotateX(-Math.PI / 2);\n      plane.position.y = -0.2;\n      this.scene.add(plane);\n\n      // let nTufts  = 2000;\n      // let positions = new Array(nTufts);\n      // for(let i = 0; i < nTufts; i++){\n      //   let position  = new THREE.Vector3();\n      //   position.x  = (Math.random()-0.5)*gridWidth;\n      //   position.z  = (Math.random()-0.5)*gridWidth;\n      //   positions[i]  = position;\n      // }\n      // let mesh  = THREEx.createGrassTufts(positions);\n      // this.scene.add(mesh);\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'startFirstGame',\n    value: function startFirstGame() {\n      var _this = this;\n\n      var difficulty = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var computers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      this.gameEngine.restart(difficulty, computers);\n\n      this.hud.classList.remove('hud--hidden');\n      this.hudUpgrade.classList.remove('hud--hidden');\n\n      this.initializeUpgradeButtons();\n      this.initializeHudTexts();\n\n      this.started = true;\n\n      window.addEventListener('click', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.myPlayer.spawnMinion(index);\n        }\n      });\n\n      window.addEventListener('keypress', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.computer.spawnMinion(index);\n        }\n      });\n    }\n  }, {\n    key: 'calculateFPS',\n    value: function calculateFPS(timestamp) {\n      var delta = timestamp - this.lastTimeStamp;\n      delta = delta / 1000;\n      this.lastTimeStamp = timestamp;\n      return Math.round(1 / delta);\n    }\n  }, {\n    key: 'updateUI',\n    value: function updateUI(timestamp) {\n      scoreText.textContent = this.gameEngine.myPlayer.score;\n      moneyText.textContent = this.gameEngine.myPlayer.money;\n      poppulationText.textContent = this.gameEngine.myPlayer.minions.length + \"/\" + this.gameEngine.myPlayer.poppulationCap;\n\n      if (this.gameEngine.myPlayer.base !== null) {\n        baseHealthText.textContent = Math.max(this.gameEngine.myPlayer.base.health, 0).toFixed(2) + \" / \" + this.gameEngine.myPlayer.base.maxHealth;\n      } else {\n        baseHealthText.textContent = \"0\";\n      }\n\n      minionBaseHealthText.textContent = _constants2.default.minion.baseHealth + _constants2.default.minion.upgrades.health.amount * this.gameEngine.myPlayer.upgrades.minionBaseHealth;\n      minionBaseAttackText.textContent = _constants2.default.minion.baseAttack + _constants2.default.minion.upgrades.attack.amount * this.gameEngine.myPlayer.upgrades.minionBaseAttack;\n      minionBaseAttackSpeedText.textContent = ((_constants2.default.minion.baseAttackSpeed + this.gameEngine.myPlayer.upgrades.minionBaseAttackSpeed * -_constants2.default.minion.upgrades.attackSpeed.amount) / 1000).toFixed(2) + 's';\n\n      archerBaseAttackText.textContent = _constants2.default.archer.baseAttack + this.gameEngine.myPlayer.upgrades.archerBaseAttack * _constants2.default.archer.upgrades.attack.amount;\n      archerBaseAttackSpeedText.textContent = ((_constants2.default.archer.baseAttackSpeed - this.gameEngine.myPlayer.upgrades.archerBaseAttackSpeed * _constants2.default.archer.upgrades.attackSpeed.amount) / 1000).toFixed(2) + \"s\";\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n\n      if (this.started) {\n        this.updateUI(timestamp);\n      }\n    }\n  }, {\n    key: 'initializeHudTexts',\n    value: function initializeHudTexts() {\n      scoreText = document.getElementById('score');\n      moneyText = document.getElementById('money');\n      poppulationText = document.getElementById('poppulation');\n      baseHealthText = document.getElementById('baseHealth');\n      minionBaseHealthText = document.getElementById('minionBaseHealth');\n      minionBaseAttackText = document.getElementById('minionBaseAttack');\n      minionBaseAttackSpeedText = document.getElementById('minionBaseAttackSpeed');\n      archerBaseAttackText = document.getElementById('archerBaseAttack');\n      archerBaseAttackSpeedText = document.getElementById('archerBaseAttackSpeed');\n    }\n  }, {\n    key: 'initializeUpgradeButtons',\n    value: function initializeUpgradeButtons() {\n      var gameView = this;\n\n      baseHealthUpgrade = document.getElementById('baseHealthUpgrade');\n      baseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeBaseHealth();\n      });\n\n      minionBaseHealthUpgrade = document.getElementById('minionBaseHealthUpgrade');\n      minionBaseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionHealth();\n      });\n\n      minionBaseAttackUpgrade = document.getElementById('minionBaseAttackUpgrade');\n      minionBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttack();\n      });\n\n      minionBaseAttackSpeedUpgrade = document.getElementById('minionBaseAttackSpeedUpgrade');\n      minionBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttackSpeed();\n      });\n\n      archerBaseAttackUpgrade = document.getElementById('archerBaseAttackUpgrade');\n      archerBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttack();\n      });\n\n      archerBaseAttackSpeedUpgrade = document.getElementById('archerBaseAttackSpeedUpgrade');\n      archerBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttackSpeed();\n      });\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":8,\"./menu-screen\":11}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar startButton = document.getElementById('startButton');\nvar restartSection = document.getElementById('restartModal');\nvar restartButton = document.getElementById('restartButton');\nvar demoButton1 = document.getElementById('demoButton1');\nvar demoButton2 = document.getElementById('demoButton2');\nvar hardButton = document.getElementById('hardButton');\nvar restartModalMessage = document.getElementById('restartModalMessage');\n\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner, score) {\n\n  var text = 'Player ' + (winner.id + 1) + ' wins with a score of ' + score + '!';\n  restartModalMessage.textContent = text;\n\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner, args.score);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameView, gameEngine) {\n  startButton.addEventListener('click', function () {\n    gameView.startFirstGame();\n    closeMenu();\n  });\n\n  restartButton.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n\n  demoButton1.addEventListener('click', function () {\n    gameView.startFirstGame(1, 0);\n    closeMenu();\n  });\n\n  demoButton2.addEventListener('click', function () {\n    gameEngine.restart(1, 0);\n    closeMenu();\n  });\n\n  hardButton.addEventListener('click', function () {\n    gameEngine.restart(2, 1);\n    closeMenu();\n  });\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = _constants2.default.minion.baseHealth + args.healthUpgrade * _constants2.default.minion.upgrades.health.amount;\n    this.attackStrength = _constants2.default.minion.baseAttack + args.attackUpgrade * _constants2.default.minion.upgrades.attack.amount;\n    this.attackSpeed = _constants2.default.minion.baseAttackSpeed + args.attackSpeedUpgrade * -_constants2.default.minion.upgrades.attackSpeed.amount;\n    this.defaultSpeed = .3;\n\n    this.health = this.maxHealth;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.attackAnimationProperties = {\n      direction: 1,\n      speed: this.attackSpeed / 2\n    };\n\n    this.walkingAnimationProperties = {\n      direction: this.direction,\n      speed: 50 / this.defaultSpeed, // This should not change only change the speed of the minion and the animation will update accordingly\n      lastTimeStamp: null,\n      time: 0\n    };\n\n    this.killReward = {\n      money: 75,\n      score: 25\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.rotObjectMatrix = null;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: 'initializeView',\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      hitGeometry.dispose();\n      hitMaterial.dispose();\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'isObjectLoaded',\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = userData.object;\n        _this.resetWalkAnimation();\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = userData.object;\n          _this.resetWalkAnimation();\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      var critProc = Math.random();\n      return critProc >= .9 ? this.attackStrength * (Math.random() + 1) : this.attackStrength;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n      this.walkProcedure(timestamp);\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime = this.attackProperties.attackTime + delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(delta);\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(0);\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'attackLoop',\n    value: function attackLoop(delta) {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      this.animateAttack(delta);\n      if (this.attackProperties.attackTime <= this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(delta) {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        var currentAttackTime = this.attackProperties.attackTime;\n        var direction = this.attackAnimationProperties.direction;\n        var animationSpeed = this.attackAnimationProperties.speed;\n        var maxRotation = 135;\n\n        var rotation = direction * (maxRotation * (Math.PI / 180) * (delta / animationSpeed));\n        rotation = Math.min(rightArm.rotation.z + rotation, maxRotation);\n        rotation = Math.max(rotation, 0);\n\n        rightArm.rotation.z = rotation;\n        if (currentAttackTime > animationSpeed) {\n          this.attackAnimationProperties.direction = -1;\n        } else {\n          this.attackAnimationProperties.direction = 1;\n        }\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        rightArm.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'walkProcedure',\n    value: function walkProcedure(timestamp) {\n      if (!this.attack && this.walkingAnimationProperties.lastTimeStamp !== null) {\n        var delta = timestamp - this.walkingAnimationProperties.lastTimeStamp;\n        this.walkingAnimationProperties.time = this.walkingAnimationProperties.time + delta;\n        this.walkLoop(delta);\n      } else {\n        this.walkLoop(0);\n      }\n\n      this.walkingAnimationProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'walkLoop',\n    value: function walkLoop(delta) {\n      this.animateWalk(delta);\n      if (this.walkingAnimationProperties.time <= this.walkingAnimationProperties.speed) {\n        return;\n      }\n      this.walkingAnimationProperties.time = 0;\n    }\n  }, {\n    key: 'animateWalk',\n    value: function animateWalk(delta) {\n      if (this.viewObj.children.length > 1 && !this.attack) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n        var animationTime = this.walkingAnimationProperties.time;\n        var animationSpeed = this.walkingAnimationProperties.speed;\n        var direction = this.walkingAnimationProperties.direction;\n        var maxRotation = 45;\n\n        var rotation = maxRotation * (delta / animationSpeed);\n\n        if (direction) {\n          this.animateLegForward(leftLeg, rotation, maxRotation, delta);\n          this.animateLegBack(rightLeg, rotation, maxRotation, delta);\n        } else {\n          this.animateLegForward(rightLeg, rotation, maxRotation, delta);\n          this.animateLegBack(leftLeg, rotation, maxRotation, delta);\n        }\n\n        if (this.toDegrees(leftLeg.rotation.z) >= maxRotation || this.toDegrees(leftLeg.rotation.z) <= -maxRotation) {\n          this.walkingAnimationProperties.direction = !this.walkingAnimationProperties.direction;\n        }\n      }\n    }\n  }, {\n    key: 'animateLegBack',\n    value: function animateLegBack(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(-maxRotation);\n\n      if (leg.rotation.z + this.toRadians(-rotation) < max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(-rotation);\n      }\n    }\n  }, {\n    key: 'animateLegForward',\n    value: function animateLegForward(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(maxRotation);\n      if (leg.rotation.z + this.toRadians(rotation) > max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(rotation);\n      }\n    }\n  }, {\n    key: 'resetWalkAnimation',\n    value: function resetWalkAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n\n        leftLeg.rotation.z = 0;\n        rightLeg.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'toDegrees',\n    value: function toDegrees(angleRadians) {\n      return angleRadians * 180 / Math.PI;\n    }\n  }, {\n    key: 'toRadians',\n    value: function toRadians(angleDegrees) {\n      return angleDegrees / 180 * Math.PI;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":8}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _archer = require('./archer');\n\nvar _archer2 = _interopRequireDefault(_archer);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.colliderSystem = args.colliderSystem;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n    this.poppulationCap = 30;\n\n    this.setUpgradeValues();\n    this.loader = new THREE.ObjectLoader();\n\n    this.setupGameState();\n    this.spawnBase();\n    this.spawnArchers();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnArchers',\n    value: function spawnArchers() {\n      var _this = this;\n\n      var archer = new _archer2.default({\n        scene: this.scene,\n        colliderList: this.colliderList,\n        startingZ: 2,\n        startingY: 20,\n        startingX: this.spawnPos,\n        direction: this.direction,\n        player: this\n      });\n\n      this.archers.push(archer);\n\n      this.loader.load('./geometry/wizard.json', function (obj) {\n        obj.position.y = -4;\n        archer.viewObj.add(obj);\n\n        archer.bodyModel = archer.viewObj.children[2];\n        archer.rightArm = archer.bodyModel.children[1];\n        archer.rightArm.rotation.z = 135 / 180 * Math.PI;\n        if (archer.direction === -1) {\n          archer.viewObj.children[2].rotation.y = Math.PI;\n          archer.startingRotation = Math.PI;\n        }\n\n        _this.scene.add(archer.viewObj);\n      });\n    }\n  }, {\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this2 = this;\n\n      if (this.minions.length < this.poppulationCap) {\n        if (this.money >= this.minionCost) {\n          if (!this.gameOver) {\n            this.money -= this.minionCost;\n          }\n\n          var minion = new _minion2.default({\n            id: this.minionId++,\n            healthUpgrade: this.upgrades.minionBaseHealth,\n            attackUpgrade: this.upgrades.minionBaseAttack,\n            attackSpeedUpgrade: this.upgrades.minionBaseAttackSpeed,\n            playerId: this.id,\n            direction: this.direction,\n            startingZ: index,\n            colliderList: this.colliderList,\n            player: this\n          });\n\n          this.minions.push(minion);\n          this.loader.load('./geometry/model.json', function (obj) {\n            obj.position.y = -4;\n            minion.viewObj.add(obj);\n\n            if (minion.direction === -1) {\n              minion.viewObj.children[1].rotation.y = Math.PI;\n            }\n\n            _this2.scene.add(minion.viewObj);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      if (this.gameOver) {\n        return;\n      }\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this3 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.archers.forEach(function (archer) {\n        archer.runLoop(timestamp);\n      });\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (!minion.attack) {\n          minion.resetAttackAnimation();\n        }\n        if (minion.destroy) {\n          _this3.destroyMinion(minion, index);\n        }\n      });\n\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n      minion.collider.removeEventListener('contactEnter');\n      minion.collider.removeEventListener('contactStay');\n      minion.collider.removeEventListener('contactExit');\n      minion.collider.removeEventListener('contactRemoved');\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      var _this4 = this;\n\n      this.archers.forEach(function (archer) {\n        _this4.scene.remove(archer.viewObj);\n        _this4.colliderList.splice(_this4.findColliderIndex(archer.collider.id), 1);\n      });\n      this.archers.length = 0;\n\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setGameOver',\n    value: function setGameOver() {\n      this.gameOver = true;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this5 = this;\n\n      this.minions.forEach(function (minion) {\n        _this5.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.archers.forEach(function (archers) {\n        _this5.scene.remove(archers.viewObj);\n      });\n\n      this.gameOver = false;\n      this.setUpgradeValues();\n      this.setupGameState();\n      this.spawnBase();\n      this.spawnArchers();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.archers = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 50;\n      this.lost = false;\n    }\n  }, {\n    key: 'setUpgradeValues',\n    value: function setUpgradeValues() {\n      this.upgrades = {\n        baseHealth: 0,\n        minionBaseHealth: 0,\n        minionBaseAttack: 0,\n        minionBaseAttackSpeed: 0,\n        archerBaseAttack: 0,\n        archerBaseAttackSpeed: 0\n      };\n    }\n  }, {\n    key: 'getBaseHealthUpgradeCost',\n    value: function getBaseHealthUpgradeCost() {\n      return _constants2.default.base.upgrades.health.cost * (this.upgrades.baseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeBaseHealth',\n    value: function canUpgradeBaseHealth() {\n      return this.money > this.getBaseHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeBaseHealth',\n    value: function upgradeBaseHealth() {\n      if (this.canUpgradeBaseHealth()) {\n        this.upgrades.baseHealth++;\n        this.base.maxHealth += _constants2.default.base.upgrades.health.amount;\n        this.base.health += _constants2.default.base.upgrades.health.amount;\n        this.money -= _constants2.default.base.upgrades.health.cost * this.upgrades.baseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionHealthUpgradeCost',\n    value: function getMinionHealthUpgradeCost() {\n      return _constants2.default.minion.upgrades.health.cost * (this.upgrades.minionBaseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionHealth',\n    value: function canUpgradeMinionHealth() {\n      return this.money > this.getMinionHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionHealth',\n    value: function upgradeMinionHealth() {\n      if (this.canUpgradeMinionHealth()) {\n        this.upgrades.minionBaseHealth++;\n        this.money -= _constants2.default.minion.upgrades.health.cost * this.upgrades.minionBaseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionAttackUpgradeCost',\n    value: function getMinionAttackUpgradeCost() {\n      return _constants2.default.minion.upgrades.attack.cost * (this.upgrades.minionBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttack',\n    value: function canUpgradeMinionAttack() {\n      return this.money > this.getMinionAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttack',\n    value: function upgradeMinionAttack() {\n      if (this.canUpgradeMinionAttack()) {\n        this.upgrades.minionBaseAttack++;\n        this.money -= _constants2.default.minion.upgrades.attack.cost * this.upgrades.minionBaseAttack;\n      }\n    }\n  }, {\n    key: 'getMinionAttackSpeedUpgradeCost',\n    value: function getMinionAttackSpeedUpgradeCost() {\n      return _constants2.default.minion.upgrades.attackSpeed.cost * (this.upgrades.minionBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttackSpeed',\n    value: function canUpgradeMinionAttackSpeed() {\n      return this.money > this.getMinionAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttackSpeed',\n    value: function upgradeMinionAttackSpeed() {\n      if (this.canUpgradeMinionAttackSpeed()) {\n        this.upgrades.minionBaseAttackSpeed++;\n        this.money -= _constants2.default.minion.upgrades.attackSpeed.cost * this.upgrades.minionBaseAttackSpeed++;\n      }\n    }\n  }, {\n    key: 'getWizardAttackUpgradeCost',\n    value: function getWizardAttackUpgradeCost() {\n      return _constants2.default.archer.upgrades.attack.cost * (this.upgrades.archerBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttack',\n    value: function canUpgradeWizardAttack() {\n      return this.money > this.getWizardAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttack',\n    value: function upgradeWizardAttack() {\n      if (this.canUpgradeWizardAttack()) {\n        this.archers.forEach(function (archer) {\n          archer.attackStrength += _constants2.default.archer.upgrades.attack.amount;\n        });\n\n        this.upgrades.archerBaseAttack++;\n        this.money -= _constants2.default.archer.upgrades.attack.cost * this.upgrades.archerBaseAttack;\n      }\n    }\n  }, {\n    key: 'getWizardAttackSpeedUpgradeCost',\n    value: function getWizardAttackSpeedUpgradeCost() {\n      return _constants2.default.archer.upgrades.attackSpeed.cost * (this.upgrades.archerBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttackSpeed',\n    value: function canUpgradeWizardAttackSpeed() {\n      return this.money > this.getWizardAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttackSpeed',\n    value: function upgradeWizardAttackSpeed() {\n      if (this.canUpgradeWizardAttackSpeed()) {\n        this.archers.forEach(function (archer) {\n          archer.attackSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n          archer.arrowSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n        });\n\n        this.upgrades.archerBaseAttackSpeed++;\n        this.money -= _constants2.default.archer.upgrades.attackSpeed.cost * this.upgrades.archerBaseAttackSpeed;\n      }\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./archer\":6,\"./base\":7,\"./constants\":8,\"./minion\":12}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nexports.setupPerformance = setupPerformance;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n  renderer.shadowMapEnabled = true;\n  renderer.shadowMapType = THREE.PCFSoftShadowMap;\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\nfunction setupPerformance() {\n  var rendererStats = new THREEx.RendererStats();\n  rendererStats.domElement.style.position = 'absolute';\n  rendererStats.domElement.style.left = '0px';\n  rendererStats.domElement.style.bottom = '0px';\n  document.body.appendChild(rendererStats.domElement);\n  return rendererStats;\n}\n\n},{}]},{},[4])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYWkvZGVmZW5zaXZlLWFpLmpzIiwic3JjL2pzL2FpL3JhbmRvbS1haS5qcyIsInNyYy9qcy9haS9zbWFydC1haS5qcyIsInNyYy9qcy9hcHAuanMiLCJzcmMvanMvbW9kdWxlcy9haS1wbGF5ZXIuanMiLCJzcmMvanMvbW9kdWxlcy9hcmNoZXIuanMiLCJzcmMvanMvbW9kdWxlcy9iYXNlLmpzIiwic3JjL2pzL21vZHVsZXMvY29uc3RhbnRzLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS1lbmdpbmUuanMiLCJzcmMvanMvbW9kdWxlcy9nYW1lLXZpZXcuanMiLCJzcmMvanMvbW9kdWxlcy9tZW51LXNjcmVlbi5qcyIsInNyYy9qcy9tb2R1bGVzL21pbmlvbi5qcyIsInNyYy9qcy9tb2R1bGVzL3BsYXllci5qcyIsInNyYy9qcy9tb2R1bGVzL3ZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7a0JDRWUsVUFBUyxTQUFULEVBQW9CO0FBQ2pDLE1BQUksTUFBTSxFQUFWO0FBQ0EsT0FBSSxJQUFJLElBQUksQ0FBWixFQUFlLHlCQUFmLEVBQStCLEdBQS9CLEVBQW9DO0FBQ2xDLFFBQUksQ0FBSixJQUFTLENBQVQ7QUFDRDs7QUFFRCxZQUFVLE9BQVYsQ0FBa0IsVUFBQyxLQUFELEVBQVc7QUFDM0IsUUFBSSxNQUFNLFNBQVY7QUFDRCxHQUZEOztBQUlBLE9BQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBcEIsQ0FBNEIsVUFBQyxNQUFELEVBQVk7QUFDdEMsUUFBSSxPQUFPLFNBQVg7QUFDRCxHQUZEOztBQUlBLE1BQUksYUFBYSxDQUFDLENBQWxCO0FBQ0EsTUFBSSxhQUFhLE1BQWpCO0FBQ0EsU0FBTyxNQUFQLENBQWMsR0FBZCxFQUFtQixPQUFuQixDQUEyQixVQUFDLEdBQUQsRUFBTSxLQUFOLEVBQWdCO0FBQ3pDLFFBQUcsTUFBTSxVQUFU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Q0QsR0FGRDtBQUdEOztBQUVNLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFJLFFBQVEsSUFBSSxNQUFNLEtBQVYsRUFBWjtBQUNBLE1BQUksU0FBUyxJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBNUIsRUFBZ0MsT0FBTyxVQUFQLEdBQW9CLE9BQU8sV0FBM0QsRUFBd0UsR0FBeEUsRUFBNkUsSUFBN0UsQ0FBYjtBQUNBLE1BQUksV0FBVyxJQUFJLE1BQU0sYUFBVixFQUFmO0FBQ0EsV0FBUyxnQkFBVCxHQUE0QixJQUE1QjtBQUNBLFdBQVMsYUFBVCxHQUF5QixNQUFNLGdCQUEvQjtBQUNBLFdBQVMsT0FBVCxDQUFpQixPQUFPLFVBQXhCLEVBQW9DLE9BQU8sV0FBM0M7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsVUFBbkM7O0FBRUEsZ0JBQWMsUUFBZCxFQUF3QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRDs7QUFFTSxTQUFTLGdCQUFULEdBQTRCO0FBQ2pDLE1BQUksZ0JBQWdCLElBQUksT0FBTyxhQUFYLEVBQXBCO0FBQ0EsZ0JBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixRQUEvQixHQUEwQyxVQUExQztBQUNBLGdCQUFjLFVBQWQsQ0FBeUIsS0FBekIsQ0FBK0IsSUFBL0IsR0FBc0MsS0FBdEM7QUFDQSxnQkFBYyxVQUFkLENBQXlCLEtBQXpCLENBQStCLE1BQS9CLEdBQXdDLEtBQXhDO0FBQ0EsV0FBUyxJQUFULENBQWMsV0FBZCxDQUEyQixjQUFjLFVBQXpDO0FBQ0EsU0FBTyxhQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcbiAgbGV0IG1hcCA9IHt9O1xuICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7XG4gICAgbWFwW2ldID0gMDtcbiAgfVxuXG4gIG9wcG9uZW50cy5mb3JFYWNoKChlbmVteSkgPT4ge1xuICAgIG1hcFtlbmVteS5zdGFydGluZ1pdLS07XG4gIH0pO1xuXG4gIHRoaXMucGxheWVyLm1pbmlvbnMuZm9yRWFjaCgobWluaW9uKSA9PiB7XG4gICAgbWFwW21pbmlvbi5zdGFydGluZ1pdKytcbiAgfSk7XG5cbiAgbGV0IHNwYXduSW5kZXggPSAtMTtcbiAgbGV0IHNwYXduVmFsdWUgPSAxMDAwMDA7XG4gIE9iamVjdC52YWx1ZXMobWFwKS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7XG4gICAgaWYodmFsIDwgc3Bhd25WYWx1ZSkge1xuICAgICAgc3Bhd25WYWx1ZSA9IHZhbDtcbiAgICAgIHNwYXduSW5kZXggPSBpbmRleFxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHNwYXduSW5kZXg7XG59IiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XG4gfSIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4uL21vZHVsZXMvY29uc3RhbnRzJztcblxuQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgc2VsZikgeyBcbiAgICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMsIGZyaWVuZGxpZXMsIHNwYXduUG9zKSB7XG4gIGxldCBzdGFydGluZ1BvcyA9IHNwYXduUG9zO1xuXG4gIGxldCBmcmllbmRseU1hcCA9IGZyaWVuZGxpZXMubWFwKG0gPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByb3c6IG0uc3RhcnRpbmdaLFxuICAgICAgZGlzdGFuY2U6IG0uZ2V0UG9zaXRpb24oKS54IC0gc3RhcnRpbmdQb3NcbiAgICB9XG4gIH0pO1xuXG4gIGxldCBvcHBvbmVudE1hcCA9IG9wcG9uZW50cy5tYXAobSA9PiB7XG5cbiAgICBsZXQgZGlzdGFuY2UgPSBzdGFydGluZ1BvcyAtIG0uZ2V0UG9zaXRpb24oKS54O1xuICAgIHJldHVybiB7XG4gICAgICByb3c6IG0uc3RhcnRpbmdaLFxuICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgfTtcbiAgfSk7XG5cbiAgbGV0IHJvd0FycmF5ID0gW107XG4gIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHsgcm93QXJyYXkucHVzaChpKTsgfVxuXG4gIGxldCBkZWNpc2lvbiA9IHtcbiAgICBoYXNGcmllbmRsaWVzOiBbXSxcbiAgICBjbG9zZXN0SW5kZXg6IC0xLFxuICAgIGNsb3Nlc3RWYWw6IDk5OTk5LFxuICAgIGRpc3RhbmNlVGllczogW11cblxuICB9O1xuXG4gIGZyaWVuZGx5TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XG4gICAgZGVjaXNpb24uaGFzRnJpZW5kbGllcy5wdXNoKHZhbC5yb3cpO1xuICB9KTtcblxuXG4gIG9wcG9uZW50TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XG4gICAgaWYodmFsLmRpc3RhbmNlIDwgZGVjaXNpb24uY2xvc2VzdFZhbCkge1xuICAgICAgZGVjaXNpb24uY2xvc2VzdEluZGV4ID0gdmFsLnJvdztcbiAgICAgIGRlY2lzaW9uLmNsb3Nlc3RWYWwgPSB2YWwuZGlzdGFuY2U7XG5cbiAgICAgIGlmKGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih2YWwuZGlzdGFuY2UgPT09IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcbiAgICAgIGRlY2lzaW9uLmRpc3RhbmNlVGllcy5wdXNoKHZhbC5yb3cpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcbiAgZGVjaXNpb24uaGFzRnJpZW5kbGllcyA9IGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMudW5pcXVlKCk7XG5cbiAgbGV0IGZ1bGxJZHhBcnIgPSByb3dBcnJheS5zbGljZSgwKTtcblxuICBkZWNpc2lvbi5nYXBzID0gZnVsbElkeEFyci5maWx0ZXIoeCA9PiB7XG4gICAgcmV0dXJuIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMuaW5kZXhPZih4KSA8IDA7XG4gIH0pO1xuXG5cbiAgLy9pZihmcmllbmRsaWVzLmxlbmd0aCA+IDMpIHtcbiAgICAvL2ZyaWVuZGxpZXNbMl0udmlld09iai5wb3NpdGlvbi56ICs9IDE7XG4gIC8vfVxuXG5cbiAgbGV0IGFycmF5VG9Vc2U7XG4gIGlmKGRlY2lzaW9uLmNsb3Nlc3RWYWwgPCBncmlkV2lkdGgvMikge1xuICAgIGFycmF5VG9Vc2UgPSBkZWNpc2lvbi5kaXN0YW5jZVRpZXM7XG4gIH0gZWxzZSB7XG4gICAgYXJyYXlUb1VzZSA9IGRlY2lzaW9uLmdhcHM7XG4gIH1cblxuICBsZXQgYXJySWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXlUb1VzZS5sZW5ndGgpO1xuICByZXR1cm4gYXJyYXlUb1VzZVthcnJJZHhdO1xufSIsImltcG9ydCB7XG4gIHNldHVwU2NyZWVuVmlldywgc2V0dXBQZXJmb3JtYW5jZVxufSBmcm9tICcuL21vZHVsZXMvdmlldyc7XG5cbmltcG9ydCBHYW1lRW5naW5lIGZyb20gJy4vbW9kdWxlcy9nYW1lLWVuZ2luZSc7XG5pbXBvcnQgR2FtZVZpZXcgZnJvbSAnLi9tb2R1bGVzL2dhbWUtdmlldyc7XG5cbi8vIEdsb2JhbHNcbmxldCBnbG9iYWxzO1xuXG5sZXQgZ2FtZUVuZ2luZSwgZ2FtZVZpZXc7XG5sZXQgcmVuZGVyZXJTdGF0cztcbmxldCBwZXJmb3JtYW5jZSA9IHRydWU7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGxldCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSBzZXR1cFNjcmVlblZpZXcoKTtcbiAgZ2xvYmFscyA9IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcblxuICBpZihwZXJmb3JtYW5jZSkge1xuICAgIHJlbmRlcmVyU3RhdHMgPSBzZXR1cFBlcmZvcm1hbmNlKCk7XG4gIH1cblxuICBnYW1lRW5naW5lID0gbmV3IEdhbWVFbmdpbmUoZ2xvYmFscyk7XG4gIGdhbWVWaWV3ID0gbmV3IEdhbWVWaWV3KGdsb2JhbHMsIGdhbWVFbmdpbmUpO1xuXG4gIHJlbmRlcigpO1xufVxuXG5mdW5jdGlvbiByZW5kZXIodGltZXN0YW1wKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICBnYW1lVmlldy5yZW5kZXJMb29wKHRpbWVzdGFtcCk7XG5cbiAgZ2xvYmFscy5yZW5kZXJlci5yZW5kZXIoZ2xvYmFscy5zY2VuZSwgZ2xvYmFscy5jYW1lcmEpO1xuICBpZihwZXJmb3JtYW5jZSkge1xuICAgIHJlbmRlcmVyU3RhdHMudXBkYXRlKGdsb2JhbHMucmVuZGVyZXIpO1xuICB9XG59XG5cbmluaXQoKTtcbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBzbWFydEFJIGZyb20gJy4uL2FpL3NtYXJ0LWFpJztcbmltcG9ydCBkZWZlbnNpdmVBSSBmcm9tICcuLi9haS9kZWZlbnNpdmUtYWknO1xuaW1wb3J0IHJhbmRvbUFJIGZyb20gJy4uL2FpL3JhbmRvbS1haSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFJIHtcblxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zbWFydEFJID0gc21hcnRBSTtcbiAgICB0aGlzLmRlZmVuc2l2ZUFJID0gZGVmZW5zaXZlQUk7XG4gICAgdGhpcy5yYW5kb21BSSA9IHJhbmRvbUFJO1xuICAgIHRoaXMuZGV0ZXJtaW5lQUlGdW5jdGlvbihhcmdzLnBlcnNvbmFsaXR5KTtcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xuICAgIHRoaXMuc3Bhd25JbnRlcnZhbCA9IDMyNTtcbiAgICB0aGlzLmxhc3RVcGdyYWRlID0gMDtcbiAgICB0aGlzLnVwZ3JhZGVJbnRlcnZhbCA9IDE1MDA7XG4gICAgdGhpcy5sYXN0U3Bhd24gPSAwO1xuICAgIHRoaXMucG9wcHVsYXRpb25MaW1pdCA9IDMwO1xuICB9XG5cbiAgY2FuU3Bhd24odGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRpbWVzdGFtcCAtIHRoaXMubGFzdFNwYXduID4gdGhpcy5zcGF3bkludGVydmFsICYmIHRoaXMucGxheWVyLm1pbmlvbnMubGVuZ3RoIDwgdGhpcy5wb3BwdWxhdGlvbkxpbWl0O1xuICB9XG5cbiAgY2FuVXBncmFkZSh0aW1lc3RhbXApIHtcbiAgICByZXR1cm4gdGltZXN0YW1wIC0gdGhpcy5sYXN0VXBncmFkZSA+IHRoaXMudXBncmFkZUludGVydmFsO1xuICB9XG5cbiAgc2V0RGlmZmljdWx0eShkaWZmaWN1bHR5KSB7XG4gICAgaWYoZGlmZmljdWx0eSA9PT0gMSkge1xuICAgICAgdGhpcy5zZXR1cEVhc3koKTtcbiAgICB9IGVsc2UgaWYoZGlmZmljdWx0eSA9PT0gMikge1xuICAgICAgdGhpcy5zZXR1cEhhcmQoKTtcbiAgICB9XG4gIH1cblxuICBzZXR1cEVhc3koKSB7XG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gMTUwMDtcbiAgICB0aGlzLnVwZ3JhZGVJbnRlcnZhbCA9IDMwMDA7XG4gIH1cblxuICBzZXR1cEhhcmQoKSB7XG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gMzI1O1xuICAgIHRoaXMudXBncmFkZUludGVydmFsID0gMTUwMDtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wLCBvcHBvbmVudHMpIHtcbiAgICBpZih0aGlzLmNhblVwZ3JhZGUodGltZXN0YW1wKSkge1xuICAgICAgdGhpcy5hcHBseVVwZ3JhZGVzKHRoaXMuY2hlY2tVcGdyYWRlcygpKTtcbiAgICAgIHRoaXMubGFzdFVwZ3JhZGUgPSB0aW1lc3RhbXA7XG4gICAgfVxuXG4gICAgaWYoIXRoaXMuY2FuU3Bhd24odGltZXN0YW1wKSkgeyByZXR1cm47IH1cblxuICAgIGxldCBzcGF3bkluZGV4ID0gdGhpcy5BSUZ1bmN0aW9uKG9wcG9uZW50cywgdGhpcy5wbGF5ZXIubWluaW9ucywgdGhpcy5wbGF5ZXIuc3Bhd25Qb3MpO1xuXG4gICAgaWYoc3Bhd25JbmRleCA+PSAwKSB7XG4gICAgICB0aGlzLnBsYXllci5zcGF3bk1pbmlvbihzcGF3bkluZGV4KTtcbiAgICAgIHRoaXMubGFzdFNwYXduID0gdGltZXN0YW1wO1xuICAgIH1cbiAgfVxuXG4gIGRldGVybWluZUFJRnVuY3Rpb24ocGVyc29uYWxpdHkpIHtcbiAgICBpZihwZXJzb25hbGl0eSkge1xuICAgICAgdGhpcy5BSUZ1bmN0aW9uID0gdGhpc1twZXJzb25hbGl0eV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbXCJyYW5kb21BSVwiXTtcbiAgICB9XG4gIH1cblxuICAvL2NoZWNrIGFsbCB1cGdyYWRlQ29zdHMgdG8gc2VlIGlmIGFueSBjYW4gYmUgdXBncmFkZXMgcmV0dXJucyBhIGxpc3Qgb2Ygd2hhdCBjYW4gYmUgdXBncmFkZWQgYW5kIHRoZWlyIGNvc3RcbiAgY2hlY2tVcGdyYWRlcygpIHtcbiAgICBsZXQgdXBncmFkZXMgPSBbXTtcblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVCYXNlSGVhbHRoKCkpIHtcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZUJhc2VIZWFsdGhcIiwgY29zdDp0aGlzLnBsYXllci5nZXRCYXNlSGVhbHRoVXBncmFkZUNvc3QoKX0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVNaW5pb25IZWFsdGgoKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlTWluaW9uSGVhbHRoXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldE1pbmlvbkhlYWx0aFVwZ3JhZGVDb3N0KCl9KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllci5jYW5VcGdyYWRlTWluaW9uQXR0YWNrKCkpIHtcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZU1pbmlvbkF0dGFja1wiLCBjb3N0OiB0aGlzLnBsYXllci5nZXRNaW5pb25BdHRhY2tVcGdyYWRlQ29zdCgpfSk7XG4gICAgfVxuXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkpIHtcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZU1pbmlvbkF0dGFja1NwZWVkXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldE1pbmlvbkF0dGFja1NwZWVkVXBncmFkZUNvc3QoKX0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVXaXphcmRBdHRhY2soKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlV2l6YXJkQXR0YWNrXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldFdpemFyZEF0dGFja1VwZ3JhZGVDb3N0KCl9KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllci5jYW5VcGdyYWRlV2l6YXJkQXR0YWNrU3BlZWQoKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlV2l6YXJkQXR0YWNrU3BlZWRcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0V2l6YXJkQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB1cGdyYWRlcztcbiAgfVxuXG4gIGFwcGx5VXBncmFkZXModXBncmFkZXMpIHtcbiAgICB1cGdyYWRlcy5mb3JFYWNoKCh1cGdyYWRlKSA9PiB7XG4gICAgICBpZigodGhpcy5wbGF5ZXIubW9uZXkgLyAxLjUpID4gdXBncmFkZS5jb3N0ICYmIHRoaXMucGxheWVyLm1vbmV5ID4gNzUwKSB7XG4gICAgICAgIGxldCBmbiA9IHRoaXMucGxheWVyW3VwZ3JhZGUubmFtZV07XG4gICAgICAgIGZuLmFwcGx5KHRoaXMucGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFyY2hlciB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XG4gICAgdGhpcy5wbGF5ZXJJZCA9IHRoaXMucGxheWVyLmlkO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG5cbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuc3RhcnRpbmdaID0gYXJncy5zdGFydGluZ1o7XG4gICAgdGhpcy5zdGFydGluZ1kgPSBhcmdzLnN0YXJ0aW5nWSArIDQ7XG4gICAgdGhpcy5zdGFydGluZ1ggPSBhcmdzLnN0YXJ0aW5nWCAtICg0ICogdGhpcy5kaXJlY3Rpb24pO1xuXG4gICAgdGhpcy50YXJnZXRMaXN0ID0gW107XG4gICAgdGhpcy5hcnJvd3MgPSBbXTtcblxuICAgIHRoaXMuc3RhcnRpbmdSb3RhdGlvbiA9IDA7XG4gICAgbGV0IF85MGRlZyA9ICg5MC8xODApICogTWF0aC5QSTtcbiAgICBsZXQgXzEzNWRlZyA9ICgxMzUvMTgwKSAqIE1hdGguUEk7XG5cbiAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMgPSB7XG4gICAgICBhcm06IHtcbiAgICAgICAgc3RhcnRpbmdBbmdsZTogXzEzNWRlZyxcbiAgICAgICAgZW5kaW5nQW5nbGU6IF85MGRlZyxcbiAgICAgICAgYW5nbGVEaWZmZXJlbmNlOiBfMTM1ZGVnIC0gXzkwZGVnLFxuICAgICAgICBzcGVlZERvd246IDIwMCxcbiAgICAgICAgc3BlZWRVcDogMTUwLFxuICAgICAgICBsYXN0QW5pbWF0ZTogbnVsbFxuICAgICAgfSxcbiAgICAgIGFycm93U3BlZWQ6IDUwMFxuICAgIH1cblxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcbiAgICAgIGxhc3RBdHRhY2s6IDBcbiAgICB9O1xuICAgIHRoaXMudGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG5cbiAgICB0aGlzLmF0dGFja1NwZWVkID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrU3BlZWQ7XG4gICAgdGhpcy5hcnJvd1NwZWVkID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXJyb3dTcGVlZDtcbiAgICB0aGlzLmF0dGFja1N0cmVuZ3RoID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrO1xuICAgIHRoaXMuYXJyb3dJZCA9IDA7XG4gICAgdGhpcy5pbml0aWFsaXplVmlldygpO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KGhpdEJveE9wYWNpdHk9MCkge1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgbGV0IGJvZHlHID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMDEsIDAuMDEzLCAwLjAxMyk7XG4gICAgbGV0IGJvZHlNYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHgwMEZGMDAgfSk7XG4gICAgdGhpcy5ib2R5ID0gbmV3IFRIUkVFLk1lc2goYm9keUcsIGJvZHlNYXQpO1xuXG4gICAgbGV0IGhpdEJveEcgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoIDYwLCA2MCwgNjAgKTtcbiAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHtjb2xvcjogMHhmZmZmMDAsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5LCBkZXB0aFdyaXRlOiBmYWxzZX0gKTtcbiAgICB0aGlzLmhpdEJveCA9IG5ldyBUSFJFRS5NZXNoKCBoaXRCb3hHLCBtYXRlcmlhbCApO1xuXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEub2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5yYW5nZWQgPSB0cnVlO1xuXG4gICAgdGhpcy52aWV3T2JqLmFkZCh0aGlzLmJvZHkpO1xuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oaXRCb3gpO1xuXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnNldCh0aGlzLnN0YXJ0aW5nWCwgdGhpcy5zdGFydGluZ1ksIHRoaXMuc3RhcnRpbmdaKTtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTtcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xuXG4gICAgICBpZih1c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQgfHwgdXNlckRhdGEuaW1tdW5lVG9SYW5nZSkgeyByZXR1cm47IH1cblxuICAgICAgdGhpcy50YXJnZXRMaXN0LnB1c2godXNlckRhdGEub2JqZWN0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFN0YXknLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgbGV0IHVzZXJEYXRhID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YTtcblxuICAgICAgaWYodXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuICAgICAgaWYodXNlckRhdGEucmFuZ2VkIHx8IHVzZXJEYXRhLmltbXVuZVRvUmFuZ2UpIHsgcmV0dXJuOyB9XG5cbiAgICAgIGlmKHRoaXMuZmluZENvbGxpZGVySW5kZXgob3RoZXJDb2xsaWRlci5pZCkgPT09IC0xKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0TGlzdC5wdXNoKHVzZXJEYXRhLm9iamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG5cblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFJlbW92ZWQnLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgdGhpcy50YXJnZXRMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG90aGVyQ29sbGlkZXIpLCAxKTtcbiAgICAgIHRoaXMuZGV0ZXJtaW5lVGFyZ2V0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFeGl0JywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlVGFyZ2V0KG90aGVyQ29sbGlkZXIpO1xuICAgICAgdGhpcy5kZXRlcm1pbmVUYXJnZXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZpbmRDb2xsaWRlckluZGV4KGlkKSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFyZ2V0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy50YXJnZXRMaXN0W2ldLmNvbGxpZGVyLmlkID09PSBpZCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgcmVtb3ZlVGFyZ2V0KGlkKSB7XG4gICAgdGhpcy50YXJnZXRMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KGlkKSwgMSk7XG4gIH1cblxuICBjYW5BdHRhY2sodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy50YXJnZXRMaXN0Lmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZih0aGlzLmluaXRpYXRlQXR0YWNrIHx8IHRoaXMucmVjaGFyZ2luZykgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0QXR0YWNrO1xuICAgIHJldHVybiBkZWx0YSA+PSB0aGlzLmF0dGFja1NwZWVkO1xuICB9XG5cbiAgZ2V0QXR0YWNrVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0YWNrU3RyZW5ndGg7XG4gIH1cblxuICBkZXRlcm1pbmVUYXJnZXQoKSB7XG4gICAgaWYodGhpcy50YXJnZXRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldExpc3RbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApIHtcbiAgICBpZighdGhpcy5jYW5BdHRhY2sodGltZXN0YW1wKSkgeyByZXR1cm47IH1cblxuICAgIGxldCB0YXJnZXQgPSB0aGlzLmRldGVybWluZVRhcmdldCgpO1xuICAgIGlmKHRhcmdldCAhPT0gbnVsbCAmJiB0YXJnZXQudmlld09iaikge1xuICAgICAgdGhpcy5uZXh0VGFyZ2V0ID0ge1xuICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgY2FsbGJhY2s6ICh0YXJnZXQpID0+IHtcbiAgICAgICAgICB0YXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcbiAgICAgICAgICBpZih0YXJnZXQuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnByb2Nlc3NSZXdhcmQodGFyZ2V0LmtpbGxSZXdhcmQpO1xuXG4gICAgICAgICAgICB0YXJnZXQuYXR0YWNrID0gZmFsc2U7XG4gICAgICAgICAgICB0YXJnZXQuZGVzdHJveSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRhcmdldCh0YXJnZXQuY29sbGlkZXIuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5pbml0aWF0ZUF0dGFjayA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RBdHRhY2sgPSB0aW1lc3RhbXA7XG4gIH1cblxuXG4gIHNwYXduQXJyb3codGFyZ2V0LCB0aW1lc3RhbXAsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRleHR1cmUgPSB0aGlzLnRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvZmlyZWJhbGwuanBnJywgVEhSRUUuU3BoZXJpY2FsUmVmcmFjdGlvbk1hcHBpbmcpO1xuICAgIGxldCBhcnJvd0cgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMSwgMzIsIDE2KTtcbiAgICBsZXQgYXJyb3dNYXQgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoeyBjb2xvcjogMHhGRkZGRkYgLCBtYXA6IHRleHR1cmUsIGVtaXNzaXZlOiAweDQ0MDAwMCB9KTtcblxuXG4gICAgbGV0IGZhY2VWZXJ0ZXhVdnMgPSBhcnJvd0cuZmFjZVZlcnRleFV2c1sgMCBdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmFjZVZlcnRleFV2cy5sZW5ndGg7IGkgKyspIHtcblxuICAgICAgbGV0IHV2cyA9IGZhY2VWZXJ0ZXhVdnNbIGkgXTtcbiAgICAgIGxldCBmYWNlID0gYXJyb3dHLmZhY2VzWyBpIF07XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaiArKykge1xuXG4gICAgICAgIHV2c1sgaiBdLnggPSBmYWNlLnZlcnRleE5vcm1hbHNbIGogXS54ICogMC41ICsgMC41O1xuICAgICAgICB1dnNbIGogXS55ID0gZmFjZS52ZXJ0ZXhOb3JtYWxzWyBqIF0ueSAqIDAuNSArIDAuNTtcblxuICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBsZXQgYXJyb3cgPSBuZXcgVEhSRUUuTWVzaChhcnJvd0csIGFycm93TWF0KTtcbiAgICBhcnJvdy5uYW1lID0gXCJBcnJvd1wiO1xuICAgIHRoaXMuc2NlbmUuYWRkKGFycm93KTtcblxuICAgIGFycm93LnBvc2l0aW9uLnNldCh0aGlzLnN0YXJ0aW5nWCwgdGhpcy5zdGFydGluZ1kgKyAyLCB0aGlzLnN0YXJ0aW5nWik7XG5cbiAgICBsZXQgaWQgPSB0aGlzLmFycm93SWQrKztcblxuICAgIGxldCBzdGFydGluZ1kgPSBhcnJvdy5wb3NpdGlvbi55O1xuICAgIGxldCBtYXggPSBzdGFydGluZ1kgKyA1O1xuICAgIGxldCBlbmRpbmdZID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueTtcblxuICAgIGxldCB4XzEgPSAwO1xuICAgIGxldCB5XzEgPSBzdGFydGluZ1k7XG5cbiAgICBsZXQgeF8yID0gMC41O1xuICAgIGxldCB5XzIgPSBtYXg7XG5cbiAgICBsZXQgeF8zID0gMTtcbiAgICBsZXQgeV8zID0gZW5kaW5nWTtcblxuICAgIGxldCBhID0geV8xLygoeF8xLXhfMikqKHhfMS14XzMpKSArIHlfMi8oKHhfMi14XzEpKih4XzIteF8zKSkgKyB5XzMvKCh4XzMteF8xKSooeF8zLXhfMikpXG5cbiAgICBsZXQgYiA9IC15XzEqKHhfMit4XzMpLygoeF8xLXhfMikqKHhfMS14XzMpKVxuICAgICAgICAteV8yKih4XzEreF8zKS8oKHhfMi14XzEpKih4XzIteF8zKSlcbiAgICAgICAgLXlfMyooeF8xK3hfMikvKCh4XzMteF8xKSooeF8zLXhfMikpXG5cbiAgICBsZXQgYyA9IHlfMSp4XzIqeF8zLygoeF8xLXhfMikqKHhfMS14XzMpKVxuICAgICAgKyB5XzIqeF8xKnhfMy8oKHhfMi14XzEpKih4XzIteF8zKSlcbiAgICAgICsgeV8zKnhfMSp4XzIvKCh4XzMteF8xKSooeF8zLXhfMikpXG5cblxuXG4gICAgbGV0IHlGdW5jdGlvbiA9IChkZWx0YSkgPT4ge1xuICAgICAgcmV0dXJuIChhICogKGRlbHRhICogZGVsdGEpKSArIChiICogZGVsdGEpICsgYztcbiAgICB9XG5cbiAgICBsZXQgaW5pdGlhbERpc3RhbmNlWCA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnggLSBhcnJvdy5wb3NpdGlvbi54O1xuICAgIGxldCBkaXN0YW5jZVRhcmdldFdpbGxUcmF2ZWxYID0gKHRhcmdldC5zcGVlZC8xNikgKiB0aGlzLmFycm93U3BlZWQgKiAtdGhpcy5kaXJlY3Rpb247XG4gICAgbGV0IG1feCA9IGluaXRpYWxEaXN0YW5jZVggKyBkaXN0YW5jZVRhcmdldFdpbGxUcmF2ZWxYO1xuXG4gICAgY29uc29sZS5sb2cobV94LCBhcnJvdy5wb3NpdGlvbi54KTtcbiAgICBpZihtX3ggKiAtdGhpcy5kaXJlY3Rpb24gPiAwKSB7XG4gICAgICBtX3ggPSB0aGlzLmRpcmVjdGlvbiAqIDU7XG4gICAgfVxuICAgIGxldCBjX3ggPSBhcnJvdy5wb3NpdGlvbi54O1xuXG4gICAgbGV0IHhGdW5jdGlvbiA9IChkZWx0YSkgPT4ge1xuICAgICAgcmV0dXJuIChtX3ggKiBkZWx0YSkgKyBjX3g7XG4gICAgfVxuXG4gICAgbGV0IG1feiA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnogLSBhcnJvdy5wb3NpdGlvbi56O1xuICAgIGxldCBjX3ogPSBhcnJvdy5wb3NpdGlvbi56O1xuXG4gICAgbGV0IHpGdW5jdGlvbiA9IChkZWx0YSkgPT4ge1xuICAgICAgcmV0dXJuIChtX3ogKiBkZWx0YSkgKyBjX3o7XG4gICAgfVxuXG5cbiAgICB0aGlzLmFycm93cy5wdXNoKHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIG9iajogYXJyb3csXG4gICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgIHN0YXJ0aW5nVGltZTogdGltZXN0YW1wLFxuICAgICAgeUZ1bmN0aW9uOiB5RnVuY3Rpb24sXG4gICAgICB4RnVuY3Rpb246IHhGdW5jdGlvbixcbiAgICAgIHpGdW5jdGlvbjogekZ1bmN0aW9uXG4gICAgfSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKHRhcmdldCk7XG4gICAgICB0aGlzLmFycm93cyA9IHRoaXMuYXJyb3dzLmZpbHRlcigoYSkgPT4ge1xuICAgICAgICByZXR1cm4gYSAhPT0gaWQ7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGFycm93KTtcbiAgICB9LCB0aGlzLmFycm93U3BlZWQpO1xuXG4gIH1cblxuICBhbmltYXRlQXJyb3dzKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuYXJyb3dzLmZvckVhY2goKGFycm93KSA9PiB7XG4gICAgICBsZXQgZGVsdGEgPSAodGltZXN0YW1wIC0gYXJyb3cuc3RhcnRpbmdUaW1lKSAvIHRoaXMuYXJyb3dTcGVlZDtcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi55ID0gYXJyb3cueUZ1bmN0aW9uKGRlbHRhKTtcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi54ID0gYXJyb3cueEZ1bmN0aW9uKGRlbHRhKTtcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi56ID0gYXJyb3cuekZ1bmN0aW9uKGRlbHRhKTtcbiAgICAgIGFycm93Lm9iai5yb3RhdGlvbi55ICs9IDAuMTtcbiAgICAgIGFycm93Lm9iai5yb3RhdGlvbi54ICs9IDAuMTtcblxuICAgIH0pO1xuICB9XG5cbiAgYW5pbWF0ZUF0dGFjayh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLnJpZ2h0QXJtICYmIHRoaXMuaW5pdGlhdGVBdHRhY2spIHtcbiAgICAgIGlmKHRoaXMucmlnaHRBcm0ucm90YXRpb24ueiA+IHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uZW5kaW5nQW5nbGUpIHtcbiAgICAgICAgaWYodGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPSB0aW1lc3RhbXA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlO1xuICAgICAgICBsZXQgdGltZVJhdGlvID0gZGVsdGEgLyB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLnNwZWVkRG93bjtcbiAgICAgICAgbGV0IGRlZ3JlZUNoYW5nZSA9IHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uYW5nbGVEaWZmZXJlbmNlICogdGltZVJhdGlvO1xuXG5cbiAgICAgICAgdGhpcy5yaWdodEFybS5yb3RhdGlvbi56IC09IGRlZ3JlZUNoYW5nZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3Bhd25BcnJvdyhcbiAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldC50YXJnZXQsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICB0aGlzLm5leHRUYXJnZXQuY2FsbGJhY2sgKTtcblxuICAgICAgICB0aGlzLnJlc2V0QXR0YWNrQW5pbWF0aW9uKCk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBpZih0aGlzLnJpZ2h0QXJtICYmIHRoaXMucmVjaGFyZ2luZykge1xuICAgICAgaWYodGhpcy5yaWdodEFybS5yb3RhdGlvbi56IDwgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5zdGFydGluZ0FuZ2xlKSB7XG4gICAgICAgIGlmKHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gdGltZXN0YW1wO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZTtcbiAgICAgICAgbGV0IHRpbWVSYXRpbyA9IGRlbHRhIC8gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5zcGVlZFVwO1xuICAgICAgICBsZXQgZGVncmVlQ2hhbmdlID0gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5hbmdsZURpZmZlcmVuY2UgKiB0aW1lUmF0aW87XG5cbiAgICAgICAgdGhpcy5yaWdodEFybS5yb3RhdGlvbi56ICs9IGRlZ3JlZUNoYW5nZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVjaGFyZ2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih0aGlzLm5leHRUYXJnZXQgJiYgdGhpcy5uZXh0VGFyZ2V0LnRhcmdldCkge1xuICAgICAgbGV0IGFuZ2xlVG93YXJkc1RhcmdldCA9IHRoaXMuY2FsY3VsYXRlQW5nbGVUb1RhcmdldCh0aGlzLm5leHRUYXJnZXQudGFyZ2V0KTtcbiAgICAgIHRoaXMuYm9keU1vZGVsLnJvdGF0aW9uLnkgPSBhbmdsZVRvd2FyZHNUYXJnZXQgKyB0aGlzLnN0YXJ0aW5nUm90YXRpb247XG4gICAgfVxuICB9XG5cbiAgcmVzZXRBdHRhY2tBbmltYXRpb24oKSB7XG4gICAgdGhpcy5pbml0aWF0ZUF0dGFjayA9IGZhbHNlO1xuICAgIHRoaXMucmVjaGFyZ2luZyA9IHRydWU7XG4gICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IG51bGw7XG4gIH1cblxuICBjYWxjdWxhdGVBbmdsZVRvVGFyZ2V0KHRhcmdldCkge1xuICAgIGxldCB4RGlmZiA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnggLSB0aGlzLnZpZXdPYmoucG9zaXRpb24ueDtcbiAgICBsZXQgekRpZmYgPSB0YXJnZXQudmlld09iai5wb3NpdGlvbi56IC0gdGhpcy52aWV3T2JqLnBvc2l0aW9uLno7XG4gICAgbGV0IGRpZmZSYXRpbyA9IHpEaWZmIC8geERpZmY7XG4gICAgcmV0dXJuIChNYXRoLlBJICogLXRoaXMuZGlyZWN0aW9uKSAtIE1hdGguYXRhbihkaWZmUmF0aW8pICsgTWF0aC5QSTtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XG4gICAgdGhpcy5hdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKTtcbiAgICB0aGlzLmFuaW1hdGVBcnJvd3ModGltZXN0YW1wKTtcbiAgICB0aGlzLmFuaW1hdGVBdHRhY2sodGltZXN0YW1wKTtcbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcbiAgICB0aGlzLnBsYXllcklkID0gdGhpcy5wbGF5ZXIuaWQ7XG5cbiAgICB0aGlzLmJhc2VXaWR0aCA9IGdyaWRXaWR0aDtcbiAgICB0aGlzLmJhc2VIZWlnaHQgPSAyMDtcbiAgICB0aGlzLmJhc2VEZXB0aCA9IDEwO1xuXG4gICAgdGhpcy5tYXhIZWFsdGggPSAyNTA7XG4gICAgdGhpcy5oZWFsdGggPSB0aGlzLm1heEhlYWx0aDtcblxuICAgIHRoaXMuaGl0Qm94QnVmZmVyID0gMjtcblxuICAgIHRoaXMua2lsbFJld2FyZCA9IHtcbiAgICAgIG1vbmV5OiA1NTAsXG4gICAgICBzY29yZTogMTAwMFxuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcodGhpcy5kaXJlY3Rpb24pO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KGRpcmVjdGlvbiwgaGl0Qm94T3BhY2l0eT0wKSB7XG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICBsZXQgc2hhcGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcbiAgICAgIHRoaXMuYmFzZURlcHRoLFxuICAgICAgdGhpcy5iYXNlSGVpZ2h0LFxuICAgICAgdGhpcy5iYXNlV2lkdGhcbiAgICApO1xuXG5cbiAgICBsZXQgdGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG4gICAgbGV0IG5vcm1hbE1hcCA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvcm9jay1ub3JtYWwtbWFwLmpwZycpO1xuICAgIGxldCBsb25nVGV4dHVyZSA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvYnJpY2std2FsbC5qcGcnKTtcbiAgICBsZXQgc2tpbm55VGV4dHVyZSA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvYnJpY2std2FsbC5qcGcnKTtcbiAgICBsZXQgc2lkZVRleHR1cmUgPSB0ZXh0dXJlTG9hZGVyLmxvYWQoJ3RleHR1cmVzL2JyaWNrLXdhbGwuanBnJyk7XG4gICAgbGV0IGJhc2VDb2xvciA9IDB4NTU1NTU1O1xuXG4gICAgbG9uZ1RleHR1cmUud3JhcFMgPSBsb25nVGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIGxvbmdUZXh0dXJlLnJlcGVhdC5zZXQoMywgMSk7XG5cbiAgICBza2lubnlUZXh0dXJlLndyYXBTID0gc2tpbm55VGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIHNraW5ueVRleHR1cmUucmVwZWF0LnNldCgxLCAzKTtcblxuICAgIHNpZGVUZXh0dXJlLndyYXBTID0gc2lkZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICBzaWRlVGV4dHVyZS5yZXBlYXQuc2V0KDEsIDEpO1xuXG4gICAgbGV0IHNraW5ueU1hdCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IDB4MzMzMzMzLCBzcGVjdWxhcjogMHgzMzMzMzMsIHNoaW5pbmVzczogMTUsIG5vcm1hbE1hcDogdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9yb2NrLW5vcm1hbC1tYXAuanBnJyksIG5vcm1hbFNjYWxlOiBuZXcgVEhSRUUuVmVjdG9yMiggMC4wNSwgMSApLCBtYXA6IHNraW5ueVRleHR1cmUgfSk7XG5cblxuICAgIGxldCBsb25nTWF0ID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogYmFzZUNvbG9yLCBzcGVjdWxhcjogMHgzMzMzMzMsIHNoaW5pbmVzczogMTUsIG5vcm1hbE1hcDogbm9ybWFsTWFwLCBub3JtYWxTY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoIDEsIDEgKSwgbWFwOiBsb25nVGV4dHVyZSB9KTtcblxuICAgIGxldCBzaWRlTWF0ID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogYmFzZUNvbG9yLCBzcGVjdWxhcjogMHgzMzMzMzMsIHNoaW5pbmVzczogMTUsIG5vcm1hbE1hcDogbm9ybWFsTWFwLCBub3JtYWxTY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoIDEsIDEgKSwgbWFwOiBzaWRlVGV4dHVyZSB9KTtcblxuICAgIGxldCBzaGFwZU1hdGVyaWFscyA9IFtcbiAgICAgIGxvbmdNYXQsIC8vIFJpZ2h0XG4gICAgICBsb25nTWF0LCAvLyBMZWZ0XG4gICAgICBza2lubnlNYXQsIC8vIFRvcFxuICAgICAgc2lkZU1hdCwgLy8gQmFja1xuICAgICAgc2lkZU1hdCwgLy8gRnJvbnRcbiAgICAgIHNraW5ueU1hdCwgLy8gQm90dG9tXG5cbiAgICBdXG5cbiAgICBsZXQgc2hhcGVNZXNoID0gbmV3IFRIUkVFLk1lc2goc2hhcGVHZW9tZXRyeSwgbmV3IFRIUkVFLk11bHRpTWF0ZXJpYWwoc2hhcGVNYXRlcmlhbHMpKTtcblxuXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxuICAgICAgdGhpcy5iYXNlRGVwdGggKyB0aGlzLmhpdEJveEJ1ZmZlcixcbiAgICAgIHRoaXMuYmFzZUhlaWdodCArIHRoaXMuaGl0Qm94QnVmZmVyLFxuICAgICAgdGhpcy5iYXNlV2lkdGggKyB0aGlzLmhpdEJveEJ1ZmZlciBcbiAgICApO1xuXG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5LCBkZXB0aFdyaXRlOiBmYWxzZSB9KTtcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XG5cbiAgICB0aGlzLmhlYWx0aEJhciA9IHRoaXMuaW5pdGlhbGl6ZUhlYWx0aEJhcigpO1xuICAgIHRoaXMuaGl0Qm94ID0gaGl0TWVzaDtcblxuICAgIHRoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcbiAgICB0aGlzLnZpZXdPYmouYWRkKGhpdE1lc2gpO1xuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xuXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSAoKC1ncmlkV2lkdGgvMikgLSAodGhpcy5iYXNlRGVwdGggLyAyKSkgKiB0aGlzLmRpcmVjdGlvbjtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodC8yO1xuXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEub2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5pbW11bmVUb1JhbmdlID0gdHJ1ZTtcbiAgfVxuXG4gIGluaXRpYWxpemVIZWFsdGhCYXIoKSB7XG4gICAgdGhpcy5faGVhbHRoQmFyTGVuZ3RoID0gZ3JpZFdpZHRoIC8gMTA7XG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSBncmlkV2lkdGggLyAxNTA7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGgsIHRoaXMuX2hlYWx0aEJhcldpZHRoLCB0aGlzLl9oZWFsdGhCYXJXaWR0aCk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcblxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhckxlbmd0aCAqIDAuOTksIHRoaXMuX2hlYWx0aEJhcldpZHRoICogMC45LCB0aGlzLl9oZWFsdGhCYXJXaWR0aCAqIDAuOSk7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcblxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XG5cbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gdGhpcy5iYXNlSGVpZ2h0ICsgNTtcblxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcbiAgfVxuXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJMZW5ndGggLyAyO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyID0gdGhpcy5oZWFsdGhCYXIuZ2V0T2JqZWN0QnlOYW1lKCdGdWxsSGVhbHRoQmFyJyk7XG5cbiAgICBmdWxsSGVhbHRoQmFyLnNjYWxlLnggPSBoZWFsdGhQZXJjZW50O1xuICAgIGZ1bGxIZWFsdGhCYXIucG9zaXRpb24ueCA9IGhlYWx0aEJhck9mZnNldDtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcbiAgfVxuXG4gIHJ1bkxvb3AoKSB7XG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSA2NDtcbmV4cG9ydCBjb25zdCBncmlkSGVpZ2h0ID0gMTY7XG5leHBvcnQgY29uc3QgZ3JpZFN1YkRpdiA9IDE2O1xuXG5sZXQgbWluaW9uID0ge1xuXHRiYXNlSGVhbHRoOiAxMCxcblx0YmFzZUF0dGFjazogMyxcblx0YmFzZUF0dGFja1NwZWVkOiAxMDAwLFxuXHR1cGdyYWRlczoge1xuXHRcdGhlYWx0aDoge1xuXHRcdFx0Y29zdDogNTAsXG5cdFx0XHRhbW91bnQ6IDVcblx0XHR9LFxuXHRcdGF0dGFjazoge1xuXHRcdFx0Y29zdDogNzUsXG5cdFx0XHRhbW91bnQ6IDJcblx0XHR9LFxuXHRcdGF0dGFja1NwZWVkOiB7XG5cdFx0XHRjb3N0OiAxMDAsXG5cdFx0XHRhbW91bnQ6IDI1XG5cdFx0fVxuXHR9XG59O1xuXG5sZXQgYmFzZSA9IHtcblx0YmFzZUhlYWx0aDogMjUwLFxuXHR1cGdyYWRlczoge1xuXHRcdGhlYWx0aDoge1xuXHRcdFx0Y29zdDogMTUwLFxuXHRcdFx0YW1vdW50OiAyNTAsXG5cdFx0fVxuXHR9XG59O1xuXG5sZXQgYXJjaGVyID0ge1xuXHRiYXNlQXR0YWNrOiA1LFxuXHRiYXNlQXR0YWNrU3BlZWQ6IDEwMDAsXG5cdGJhc2VBcnJvd1NwZWVkOiAxMDAwLFxuXHR1cGdyYWRlczoge1xuXHRcdGF0dGFjazoge1xuXHRcdFx0Y29zdDogNTAsXG5cdFx0XHRhbW91bnQ6IDQsXG5cdFx0fSxcblx0XHRhdHRhY2tTcGVlZDoge1xuXHRcdFx0Y29zdDogMTAwLFxuXHRcdFx0YW1vdW50OiA1MCxcblx0XHR9XG5cdH1cbn1cblxubGV0IHBsYXllciA9IHtcblxufTtcblxuZXhwb3J0IGRlZmF1bHQge21pbmlvbiwgYmFzZSwgYXJjaGVyLCBwbGF5ZXJ9O1xuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgQUkgZnJvbSAnLi9haS1wbGF5ZXInO1xuaW1wb3J0IHsgYWN0aXZhdGVNZW51IH0gZnJvbSAnLi9tZW51LXNjcmVlbic7XG5pbXBvcnQgeyB4UG9zaXRpdmUsIHhOZWdhdGl2ZSwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUVuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgICB0aGlzLnN0YXRlID0ge307XG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XG4gICAgdGhpcy5jYW1lcmEgPSBhcmdzLmNhbWVyYTtcblxuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBuZXcgVEhSRUV4LkNvbGxpZGVyU3lzdGVtKCk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXTtcblxuICAgIHRoaXMucGxheWVySWQgPSAwO1xuXG4gICAgdGhpcy5pbml0aWFsaXplUGxheWVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVBsYXllcnMoKSB7XG4gICAgdGhpcy5teVBsYXllciA9IG5ldyBQbGF5ZXIoe1xuICAgICAgdHlwZTogJ2h1bWFuJyxcbiAgICAgIGRpcmVjdGlvbjogeFBvc2l0aXZlLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcbiAgICAgIGNvbGxpZGVyU3lzdGVtOiB0aGlzLmNvbGxpZGVyU3lzdGVtLFxuICAgICAgc2NlbmU6dGhpcy5zY2VuZSxcbiAgICAgIGlkOiB0aGlzLnBsYXllcklkKytcbiAgICB9KTtcblxuICAgIHRoaXMuY29tcHV0ZXIgPSBuZXcgUGxheWVyKHtcbiAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICBkaXJlY3Rpb246IHhOZWdhdGl2ZSxcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXG4gICAgICBjb2xsaWRlclN5c3RlbTogdGhpcy5jb2xsaWRlclN5c3RlbSxcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgaWQ6IHRoaXMucGxheWVySWQrK1xuICAgIH0pO1xuXG4gICAgdGhpcy5BSSA9IG5ldyBBSSh7XG4gICAgICBwbGF5ZXI6IHRoaXMuY29tcHV0ZXIsXG4gICAgICBwZXJzb25hbGl0eTogXCJyYW5kb21BSVwiXG4gICAgfSk7XG5cbiAgICB0aGlzLnBsYXllckFJID0gbmV3IEFJKHtcbiAgICAgIHBsYXllcjogdGhpcy5teVBsYXllcixcbiAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcbiAgICB9KTtcblxuXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzID0gWyB0aGlzLm15UGxheWVyLCB0aGlzLmNvbXB1dGVyIF07XG4gIH1cblxuICBpbml0aWFsaXplR2FtZU92ZXIoeyB3aW5uZXIsIHNjb3JlIH0pIHtcbiAgICB0aGlzLnN0YXRlLnBsYXllcnMuZm9yRWFjaChwID0+IHAuc2V0R2FtZU92ZXIoKSk7XG4gICAgYWN0aXZhdGVNZW51KHtcbiAgICAgIHdpbm5lcjogd2lubmVyLFxuICAgICAgc2NvcmU6IHNjb3JlXG4gICAgfSlcbiAgfVxuXG4gIHNldFBsYXllcnMoZGlmZmljdWx0eSwgY29tcHV0ZXJzKSB7XG4gICAgaWYoY29tcHV0ZXJzID09PSAwKSB7XG4gICAgICB0aGlzLkFJID0gbnVsbDtcbiAgICAgIHRoaXMucGxheWVyQUkgPSBudWxsO1xuICAgIH0gZWxzZSBpZihjb21wdXRlcnMgPT09IDEpIHtcbiAgICAgIHRoaXMuQUkgPSBuZXcgQUkoe1xuICAgICAgICBwbGF5ZXI6IHRoaXMuY29tcHV0ZXIsXG4gICAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wbGF5ZXJBSSA9IG51bGw7XG4gICAgfSBlbHNlIGlmKGNvbXB1dGVycyA9PT0gMikge1xuICAgICAgdGhpcy5BSSA9IG5ldyBBSSh7XG4gICAgICAgIHBsYXllcjogdGhpcy5jb21wdXRlcixcbiAgICAgICAgcGVyc29uYWxpdHk6IFwicmFuZG9tQUlcIlxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMucGxheWVyQUkgPSBuZXcgQUkoe1xuICAgICAgICBwbGF5ZXI6IHRoaXMubXlQbGF5ZXIsXG4gICAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMuQUkpIHtcbiAgICAgIHRoaXMuQUkuc2V0RGlmZmljdWx0eShkaWZmaWN1bHR5KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllckFJKSB7XG4gICAgICB0aGlzLnBsYXllckFJLnNldERpZmZpY3VsdHkoZGlmZmljdWx0eSk7XG4gICAgfVxuICB9XG5cbiAgcmVzdGFydChkaWZmaWN1bHR5PTEsIGNvbXB1dGVycz0xKSB7XG4gICAgd2hpbGUodGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5jb2xsaWRlckxpc3QucG9wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRQbGF5ZXJzKGRpZmZpY3VsdHksIGNvbXB1dGVycyk7XG5cbiAgICB0aGlzLnN0YXRlLnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xuICAgICAgcGxheWVyLnJlc2V0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICB9XG5cbiAgZ2FtZUxvb3AodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy5nYW1lT3Zlcikge1xuXG4gICAgfVxuICAgIGlmKHRoaXMuQUkpIHtcbiAgICAgIHRoaXMuQUkucnVuTG9vcCh0aW1lc3RhbXAsIHRoaXMubXlQbGF5ZXIubWluaW9ucyk7XG4gICAgfVxuXG4gICAgaWYodGhpcy5wbGF5ZXJBSSkge1xuICAgICAgdGhpcy5wbGF5ZXJBSS5ydW5Mb29wKHRpbWVzdGFtcCwgdGhpcy5jb21wdXRlci5taW5pb25zKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcbiAgICAgIHBsYXllci5ydW5Mb29wKHRpbWVzdGFtcCk7XG4gICAgICBpZihwbGF5ZXIubG9zdCAmJiAhdGhpcy5nYW1lT3Zlcikge1xuICAgICAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgbGV0IHdpbm5lciA9IHRoaXMuc3RhdGUucGxheWVycy5maW5kKHAgPT4gcC5pZCAhPT0gcGxheWVyLmlkKTtcbiAgICAgICAgbGV0IHNjb3JlID0gd2lubmVyLnNjb3JlO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVHYW1lT3Zlcih7IHdpbm5lciwgc2NvcmUgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbS5jb21wdXRlQW5kTm90aWZ5KHRoaXMuY29sbGlkZXJMaXN0KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLFxuICAgICAgICAgZ3JpZEhlaWdodCxcbiAgICAgICAgIGdyaWRTdWJEaXYsXG4gICAgICAgICBtaW5pb25CYXNlSGVhbHRoLFxuICAgICAgICAgbWluaW9uQmFzZUF0dGFjayxcbiAgICAgICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZCxcbiAgICAgICAgIGFyY2hlckJhc2VBdHRhY2ssXG4gICAgICAgICBhcmNoZXJCYXNlQXR0YWNrU3BlZWQsXG4gICAgICAgICBiYXNlSGVhbHRoVXBncmFkZUFtb3VudFxuICAgICAgIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGJpbmRCdXR0b25zIH0gZnJvbSAnLi9tZW51LXNjcmVlbic7XG5cbi8vIFVJIEVsZW1lbnRzXG5sZXQgc2NvcmVUZXh0LCBtb25leVRleHQsIHBvcHB1bGF0aW9uVGV4dCwgYmFzZUhlYWx0aFRleHQsIG1pbmlvbkJhc2VIZWFsdGhUZXh0ICxtaW5pb25CYXNlQXR0YWNrVGV4dCAsbWluaW9uQmFzZUF0dGFja1NwZWVkVGV4dCAsYXJjaGVyQmFzZUF0dGFja1RleHQgLGFyY2hlckJhc2VBdHRhY2tTcGVlZFRleHQ7XG5sZXQgYmFzZUhlYWx0aFVwZ3JhZGUsIG1pbmlvbkJhc2VIZWFsdGhVcGdyYWRlICxtaW5pb25CYXNlQXR0YWNrVXBncmFkZSAsbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZSAsYXJjaGVyQmFzZUF0dGFja1VwZ3JhZGUgLGFyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGU7XG5cblxuLy8gVGV4dHVyZVxuY29uc3QgcGxhbmVUZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKS5sb2FkKFwidGV4dHVyZXMvc3RvbmUuanBnXCIpO1xucGxhbmVUZXh0dXJlLnJlcGVhdC5zZXQoMTAsMTApO1xucGxhbmVUZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5wbGFuZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbHMsIGdhbWVFbmdpbmUpIHtcbiAgICB0aGlzLnNjZW5lID0gZ2xvYmFscy5zY2VuZTtcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xuICAgIHRoaXMucmVuZGVyZXIgPSBnbG9iYWxzLnJlbmRlcmVyO1xuXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcblxuICAgIHRoaXMuc2V0dXBHcmlkKCk7XG4gICAgdGhpcy5zZXR1cEdyYXNzRmllbGQoKTtcbiAgICB0aGlzLnNldHVwTGlnaHQoKTtcblxuICAgIHRoaXMubW91c2UgPSB7IHg6IC0xMDAwMCwgeTogMCB9O1xuXG4gICAgbGV0IHBvc2l0aW9uU2NhbGUgPSBncmlkV2lkdGggLyAyO1xuXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IDIgKiBwb3NpdGlvblNjYWxlO1xuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSAxLjUgKiBwb3NpdGlvblNjYWxlO1xuICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnNjZW5lLnBvc2l0aW9uKTtcblxuICAgIHRoaXMuaHVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h1ZCcpO1xuICAgIHRoaXMuaHVkVXBncmFkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodWQtdXBncmFkZScpO1xuICAgIHRoaXMubGFzdFRpbWVTdGFtcCA9IDA7XG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcbiAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xuXG4gICAgdGhpcy5zZXR1cE1vdXNlRXZlbnQoKTtcbiAgICBiaW5kQnV0dG9ucyh0aGlzLCB0aGlzLmdhbWVFbmdpbmUpO1xuICB9XG5cbiAgc2V0dXBMaWdodCgpIHtcbiAgICBsZXQgbGlnaHRBbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDY2NjY2NiwgMyk7XG4gICAgbGV0IGxpZ2h0U291cmNlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHg4ODg4ODgsIDEpO1xuXG4gICAgbGlnaHRTb3VyY2UucG9zaXRpb24uc2V0KDAsIDMwLCAwKTtcbiAgICBsaWdodEFtYmllbnQucG9zaXRpb24uc2V0KDAsIDMwLCAwKTtcblxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0QW1iaWVudCk7XG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHRTb3VyY2UpO1xuICB9XG5cbiAgc2V0dXBHcmlkKCkge1xuICAgICAvL2xldCB0ZXh0dXJlZFN1cmZhY2VHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCwgZ3JpZFdpZHRoKTtcbiAgICAgLy9sZXQgdGV4dHVyZWRTdXJmYWNlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogcGxhbmVUZXh0dXJlfSk7XG4gICAgIC8vbGV0IHRleHR1cmVkU3VyZmFjZSA9IG5ldyBUSFJFRS5NZXNoKHRleHR1cmVkU3VyZmFjZUdlb21ldHJ5LCB0ZXh0dXJlZFN1cmZhY2VNYXRlcmlhbCk7XG4gICAgIC8vdGV4dHVyZWRTdXJmYWNlLnJvdGF0aW9uLnggPSAtMC41ICogTWF0aC5QSTtcbiAgICAgLy90ZXh0dXJlZFN1cmZhY2UucG9zaXRpb24ueSA9IC0wLjM7XG4gICAgIC8vdGhpcy5zY2VuZS5hZGQodGV4dHVyZWRTdXJmYWNlKTtcblxuICAgIGxldCBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkSGVpZ2h0KTtcbiAgICBncmlkLnBvc2l0aW9uLnkgPSAtLjRcbiAgICB0aGlzLnNjZW5lLmFkZChncmlkKTtcblxuICAgIHRoaXMuZ3JpZFBhbmVscyA9IHt9O1xuXG4gICAgbGV0IHBhbmVsTGVuZ3RoID0gZ3JpZFdpZHRoL2dyaWRIZWlnaHQ7XG4gICAgbGV0IHpQb3MgPSAoKGdyaWRXaWR0aCAvIDIpIC0gcGFuZWxMZW5ndGggLyAyKSAqIC0xO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRIZWlnaHQ7IGkrKykge1xuICAgICAgbGV0IHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIHBhbmVsTGVuZ3RoKTtcbiAgICAgIGxldCBwbGFuZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMH0pO1xuICAgICAgbGV0IHBsYW5lID0gbmV3IFRIUkVFLk1lc2gocGxhbmVHZW9tZXRyeSwgcGxhbmVNYXRlcmlhbCk7XG4gICAgICBwbGFuZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gelBvcztcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAwO1xuICAgICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuICAgICAgdGhpcy5ncmlkUGFuZWxzW2ldID0gcGxhbmU7XG5cbiAgICAgIHpQb3MgKz0gcGFuZWxMZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgc2V0dXBHcmFzc0ZpZWxkKCkge1xuICAgIGxldCB0ZXh0dXJlVXJsICA9ICd0ZXh0dXJlcy9ncmFzc2xpZ2h0LXNtYWxsLmpwZydcbiAgICBsZXQgdGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZCh0ZXh0dXJlVXJsKTtcbiAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgdGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIHRleHR1cmUucmVwZWF0Lnk9IGdyaWRTdWJEaXY7XG4gICAgdGV4dHVyZS5yZXBlYXQueD0gZ3JpZFN1YkRpdjtcbiAgICB0ZXh0dXJlLmFuaXNvdHJvcHkgPSB0aGlzLnJlbmRlcmVyLmdldE1heEFuaXNvdHJvcHkoKVxuICAgIC8vIGJ1aWxkIG9iamVjdDNkXG4gICAgbGV0IGdlb21ldHJ5ICA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCAqIDEwLCBncmlkV2lkdGggKiAxMClcbiAgICBsZXQgbWF0ZXJpYWwgID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtcbiAgICAgIG1hcCA6IHRleHR1cmUsXG4gICAgICBzaGluaW5lc3M6IDEwXG4gICAgfSlcbiAgICBsZXQgcGxhbmUgID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKVxuICAgIHBsYW5lLnJvdGF0ZVgoLU1hdGguUEkvMik7XG4gICAgcGxhbmUucG9zaXRpb24ueSA9IC0wLjI7XG4gICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuXG4gICAgIC8vIGxldCBuVHVmdHMgID0gMjAwMDtcbiAgICAgLy8gbGV0IHBvc2l0aW9ucyA9IG5ldyBBcnJheShuVHVmdHMpO1xuICAgICAvLyBmb3IobGV0IGkgPSAwOyBpIDwgblR1ZnRzOyBpKyspe1xuICAgICAvLyAgIGxldCBwb3NpdGlvbiAgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAvLyAgIHBvc2l0aW9uLnggID0gKE1hdGgucmFuZG9tKCktMC41KSpncmlkV2lkdGg7XG4gICAgIC8vICAgcG9zaXRpb24ueiAgPSAoTWF0aC5yYW5kb20oKS0wLjUpKmdyaWRXaWR0aDtcbiAgICAgLy8gICBwb3NpdGlvbnNbaV0gID0gcG9zaXRpb247XG4gICAgIC8vIH1cbiAgICAgLy8gbGV0IG1lc2ggID0gVEhSRUV4LmNyZWF0ZUdyYXNzVHVmdHMocG9zaXRpb25zKTtcbiAgICAgLy8gdGhpcy5zY2VuZS5hZGQobWVzaCk7XG4gIH1cblxuICBjaGVja0dyaWRJbnRlcnNlY3Rpb25zKCkge1xuICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5tb3VzZSwgdGhpcy5jYW1lcmEpO1xuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XG4gICAgbGV0IGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHBsYW5lcyk7XG5cbiAgICBwbGFuZXMuZm9yRWFjaCgocGFuZWwpID0+IHtcbiAgICAgIHBhbmVsLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweDY2NjY2Nik7XG4gICAgICBwYW5lbC5tYXRlcmlhbC5vcGFjaXR5ID0gMDtcbiAgICB9KTtcblxuICAgIGlmKGludGVyc2VjdHMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IG9iaiA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xuXG4gICAgICBvYmoubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4ZmYwMDAwKTtcbiAgICAgIG9iai5tYXRlcmlhbC5vcGFjaXR5ID0gLjU7XG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBvYmo7XG4gICAgfSBlbHNlIGlmKHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCl7XG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGdldEN1cnJlbnRQYW5lbEluZGV4KCkge1xuICAgIGlmKCF0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xuICAgICAgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID09PSBwbGFuZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBzZXR1cE1vdXNlRXZlbnQoKSB7XG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldnQgPT4ge1xuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcbiAgICAgIG1vdXNlLnkgPSAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDE7XG4gICAgfSk7XG4gIH1cblxuICBzdGFydEZpcnN0R2FtZShkaWZmaWN1bHR5PTEsIGNvbXB1dGVycz0xKSB7XG4gICAgdGhpcy5nYW1lRW5naW5lLnJlc3RhcnQoZGlmZmljdWx0eSwgY29tcHV0ZXJzKTtcblxuICAgIHRoaXMuaHVkLmNsYXNzTGlzdC5yZW1vdmUoJ2h1ZC0taGlkZGVuJyk7XG4gICAgdGhpcy5odWRVcGdyYWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2h1ZC0taGlkZGVuJyk7XG5cbiAgICB0aGlzLmluaXRpYWxpemVVcGdyYWRlQnV0dG9ucygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUh1ZFRleHRzKCk7XG5cbiAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRDdXJyZW50UGFuZWxJbmRleCgpO1xuICAgICAgaWYoaW5kZXggPj0gMCkge1xuICAgICAgICB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIuc3Bhd25NaW5pb24oaW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKCkgPT4ge1xuICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRDdXJyZW50UGFuZWxJbmRleCgpO1xuICAgICAgaWYoaW5kZXggPj0gMCkge1xuICAgICAgICB0aGlzLmdhbWVFbmdpbmUuY29tcHV0ZXIuc3Bhd25NaW5pb24oaW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY2FsY3VsYXRlRlBTKHRpbWVzdGFtcCkge1xuICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMubGFzdFRpbWVTdGFtcDtcbiAgICBkZWx0YSA9IGRlbHRhIC8gMTAwMDtcbiAgICB0aGlzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoMSAvIGRlbHRhKTtcbiAgfVxuXG4gIHVwZGF0ZVVJKHRpbWVzdGFtcCkge1xuICAgIHNjb3JlVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5zY29yZTtcbiAgICBtb25leVRleHQudGV4dENvbnRlbnQgPSB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIubW9uZXk7XG4gICAgcG9wcHVsYXRpb25UZXh0LnRleHRDb250ZW50ID0gdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLm1pbmlvbnMubGVuZ3RoICsgXCIvXCIgKyB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIucG9wcHVsYXRpb25DYXA7XG4gICAgXG4gICAgaWYodGhpcy5nYW1lRW5naW5lLm15UGxheWVyLmJhc2UgIT09IG51bGwpIHtcbiAgICAgIGJhc2VIZWFsdGhUZXh0LnRleHRDb250ZW50ID0gTWF0aC5tYXgodGhpcy5nYW1lRW5naW5lLm15UGxheWVyLmJhc2UuaGVhbHRoLCAwKS50b0ZpeGVkKDIpICsgXCIgLyBcIiArIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5iYXNlLm1heEhlYWx0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgYmFzZUhlYWx0aFRleHQudGV4dENvbnRlbnQgPSBcIjBcIjtcbiAgICB9XG4gICAgXG4gICAgbWluaW9uQmFzZUhlYWx0aFRleHQudGV4dENvbnRlbnQgPSBDb25zdGFudHMubWluaW9uLmJhc2VIZWFsdGggKyAoQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguYW1vdW50ICogdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGgpO1xuICAgIG1pbmlvbkJhc2VBdHRhY2tUZXh0LnRleHRDb250ZW50ID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlQXR0YWNrICsgKENvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrLmFtb3VudCAqIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrKTtcbiAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWRUZXh0LnRleHRDb250ZW50ID0gKChDb25zdGFudHMubWluaW9uLmJhc2VBdHRhY2tTcGVlZCArICh0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkICogLUNvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50KSkgLyAxMDAwKS50b0ZpeGVkKDIpICsgJ3MnO1xuICAgIFxuICAgIGFyY2hlckJhc2VBdHRhY2tUZXh0LnRleHRDb250ZW50ID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrICsgKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrICogQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2suYW1vdW50KTtcbiAgICBhcmNoZXJCYXNlQXR0YWNrU3BlZWRUZXh0LnRleHRDb250ZW50ID0gKChDb25zdGFudHMuYXJjaGVyLmJhc2VBdHRhY2tTcGVlZCAtICh0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFja1NwZWVkICogQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2tTcGVlZC5hbW91bnQpKSAvIDEwMDApLnRvRml4ZWQoMikgKyBcInNcIjtcbiAgfSAgICAgXG5cbiAgcmVuZGVyTG9vcCh0aW1lc3RhbXApIHtcbiAgICB0aGlzLmNoZWNrR3JpZEludGVyc2VjdGlvbnMoKTtcbiAgICB0aGlzLmdhbWVFbmdpbmUuZ2FtZUxvb3AodGltZXN0YW1wKTtcblxuICAgIGlmKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy51cGRhdGVVSSh0aW1lc3RhbXApO1xuICAgIH1cbiAgfVxuXG4gIGluaXRpYWxpemVIdWRUZXh0cygpIHtcbiAgICBzY29yZVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgICBtb25leVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9uZXknKTtcbiAgICBwb3BwdWxhdGlvblRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wcHVsYXRpb24nKTtcbiAgICBiYXNlSGVhbHRoVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNlSGVhbHRoJyk7XG4gICAgbWluaW9uQmFzZUhlYWx0aFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUhlYWx0aCcpO1xuICAgIG1pbmlvbkJhc2VBdHRhY2tUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmlvbkJhc2VBdHRhY2snKTtcbiAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWRUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmlvbkJhc2VBdHRhY2tTcGVlZCcpO1xuICAgIGFyY2hlckJhc2VBdHRhY2tUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2snKTtcbiAgICBhcmNoZXJCYXNlQXR0YWNrU3BlZWRUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2tTcGVlZCcpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVVwZ3JhZGVCdXR0b25zKCkge1xuICAgIGxldCBnYW1lVmlldyA9IHRoaXM7XG4gICAgXG4gICAgYmFzZUhlYWx0aFVwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhc2VIZWFsdGhVcGdyYWRlJyk7XG4gICAgYmFzZUhlYWx0aFVwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZUJhc2VIZWFsdGgoKTtcbiAgICB9KTtcblxuICAgIG1pbmlvbkJhc2VIZWFsdGhVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlSGVhbHRoVXBncmFkZScpO1xuICAgIG1pbmlvbkJhc2VIZWFsdGhVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVNaW5pb25IZWFsdGgoKTtcbiAgICB9KTtcblxuICAgIG1pbmlvbkJhc2VBdHRhY2tVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlQXR0YWNrVXBncmFkZScpO1xuICAgIG1pbmlvbkJhc2VBdHRhY2tVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVNaW5pb25BdHRhY2soKTtcbiAgICB9KTtcblxuICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmlvbkJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUnKTtcbiAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWRVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVNaW5pb25BdHRhY2tTcGVlZCgpO1xuICAgIH0pO1xuXG4gICAgYXJjaGVyQmFzZUF0dGFja1VwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2tVcGdyYWRlJyk7XG4gICAgYXJjaGVyQmFzZUF0dGFja1VwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZVdpemFyZEF0dGFjaygpO1xuICAgIH0pO1xuXG4gICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGVyQmFzZUF0dGFja1NwZWVkVXBncmFkZScpO1xuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCk7XG4gICAgfSk7XG4gIH1cbn0gXG4iLCJsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcbmxldCBzdGFydFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRNb2RhbCcpO1xubGV0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0QnV0dG9uJyk7XG5sZXQgcmVzdGFydFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydE1vZGFsJyk7XG5sZXQgcmVzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXJ0QnV0dG9uJyk7XG5sZXQgZGVtb0J1dHRvbjEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVtb0J1dHRvbjEnKTtcbmxldCBkZW1vQnV0dG9uMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZW1vQnV0dG9uMicpO1xubGV0IGhhcmRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGFyZEJ1dHRvbicpO1xubGV0IHJlc3RhcnRNb2RhbE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGFydE1vZGFsTWVzc2FnZScpO1xuXG5mdW5jdGlvbiBhY3RpdmF0ZVN0YXJ0U2NyZWVuKCkge1xuICBzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbn1cblxuZnVuY3Rpb24gYWN0aXZhdGVSZXN0YXJ0U2NyZWVuKHdpbm5lciwgc2NvcmUpIHtcblxuICBsZXQgdGV4dCA9IGBQbGF5ZXIgJHt3aW5uZXIuaWQgKyAxfSB3aW5zIHdpdGggYSBzY29yZSBvZiAke3Njb3JlfSFgO1xuICByZXN0YXJ0TW9kYWxNZXNzYWdlLnRleHRDb250ZW50ID0gdGV4dDtcblxuICBzdGFydFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlTWVudShhcmdzKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XG5cbiAgaWYoYXJncy53aW5uZXIgIT09IG51bGwpIHtcbiAgICBhY3RpdmF0ZVJlc3RhcnRTY3JlZW4oYXJncy53aW5uZXIsIGFyZ3Muc2NvcmUpO1xuICB9IGVsc2Uge1xuICAgIGFjdGl2YXRlU3RhcnRTY3JlZW4oKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VNZW51KGFyZ3MpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRCdXR0b25zKGdhbWVWaWV3LCBnYW1lRW5naW5lKSB7XG4gIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGdhbWVWaWV3LnN0YXJ0Rmlyc3RHYW1lKCk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xuXG4gIHJlc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZ2FtZUVuZ2luZS5yZXN0YXJ0KCk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xuXG4gIGRlbW9CdXR0b24xLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGdhbWVWaWV3LnN0YXJ0Rmlyc3RHYW1lKDEsIDApO1xuICAgIGNsb3NlTWVudSgpO1xuICB9KTtcblxuICBkZW1vQnV0dG9uMi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBnYW1lRW5naW5lLnJlc3RhcnQoMSwgMCk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xuXG4gIGhhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZ2FtZUVuZ2luZS5yZXN0YXJ0KDIsIDEpO1xuICAgIGNsb3NlTWVudSgpO1xuICB9KTtcblxufVxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7IFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XG4gICAgdGhpcy5zdGFydGluZ1ogPSBhcmdzLnN0YXJ0aW5nWjtcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcblxuICAgIHRoaXMubWF4SGVhbHRoID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlSGVhbHRoICsgKGFyZ3MuaGVhbHRoVXBncmFkZSAqIENvbnN0YW50cy5taW5pb24udXBncmFkZXMuaGVhbHRoLmFtb3VudCk7XG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFjayArIChhcmdzLmF0dGFja1VwZ3JhZGUgKiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQpO1xuICAgIHRoaXMuYXR0YWNrU3BlZWQgPSBDb25zdGFudHMubWluaW9uLmJhc2VBdHRhY2tTcGVlZCArIChhcmdzLmF0dGFja1NwZWVkVXBncmFkZSAqIC1Db25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudCk7XG4gICAgdGhpcy5kZWZhdWx0U3BlZWQgPSAuMztcblxuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XG4gICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcbiAgICAgIGxhc3RUaW1lU3RhbXA6IG51bGwsXG4gICAgICBhdHRhY2tUaW1lOiAwXG4gICAgfTtcblxuICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcyA9IHtcbiAgICAgIGRpcmVjdGlvbjogMSxcbiAgICAgIHNwZWVkOiB0aGlzLmF0dGFja1NwZWVkIC8gMixcbiAgICB9O1xuXG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcyA9IHtcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICBzcGVlZDogNTAgLyB0aGlzLmRlZmF1bHRTcGVlZCwgLy8gVGhpcyBzaG91bGQgbm90IGNoYW5nZSBvbmx5IGNoYW5nZSB0aGUgc3BlZWQgb2YgdGhlIG1pbmlvbiBhbmQgdGhlIGFuaW1hdGlvbiB3aWxsIHVwZGF0ZSBhY2NvcmRpbmdseVxuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcbiAgICAgIHRpbWU6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xuICAgICAgbW9uZXk6IDc1LFxuICAgICAgc2NvcmU6IDI1XG4gICAgfTtcblxuICAgIHRoaXMuZGVzdHJveSA9IGZhbHNlO1xuICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XG5cbiAgICB0aGlzLnJvdE9iamVjdE1hdHJpeCA9IG51bGw7XG5cbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuc3RhcnRpbmdaKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XG4gIH1cblxuICBpbml0aWFsaXplVmlldyhzdGFydGluZ1osIGhpdEJveE9wYWNpdHk9MCkge1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDMsOCwzKTtcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xuXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcblxuICAgIGhpdE1lc2guYWRkKHRoaXMuaGVhbHRoQmFyKTtcbiAgICB0aGlzLnZpZXdPYmogPSBoaXRNZXNoO1xuICAgIHRoaXMuaGl0Qm94ID0gdGhpcy52aWV3T2JqO1xuXG4gICAgbGV0IHogPSAoKHN0YXJ0aW5nWiAqIChncmlkV2lkdGggLyBncmlkU3ViRGl2KSkgLSAoZ3JpZFdpZHRoIC8gMikpICsgKGdyaWRXaWR0aCAvIGdyaWRTdWJEaXYgLyAyKTtcbiAgICBsZXQgeCA9IChncmlkV2lkdGggLyAyKSAqIC10aGlzLmRpcmVjdGlvbjtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueiA9IHo7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSB4O1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi55ID0gNDtcblxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgaGl0R2VvbWV0cnkuZGlzcG9zZSgpO1xuICAgIGhpdE1hdGVyaWFsLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIGdldFBvc2l0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdPYmoucG9zaXRpb247XG4gIH1cblxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjMsIDAuMyk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcblxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjIsIDAuMik7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcblxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XG5cbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gNDtcblxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcbiAgfVxuXG4gIGlzT2JqZWN0TG9hZGVkKG9iaikge1xuICAgIHJldHVybiAob2JqLnBvc2l0aW9uLnggPT09IDAgJiYgb2JqLnBvc2l0aW9uLnkgPT09IDAgJiYgb2JqLnBvc2l0aW9uLnogPT09IDApO1xuICB9XG5cbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KClcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcblxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xuXG4gICAgICBpZih1c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHRoaXMuc3BlZWQgPSAwO1xuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gdXNlckRhdGEub2JqZWN0O1xuICAgICAgdGhpcy5yZXNldFdhbGtBbmltYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFN0YXknLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgbGV0IHVzZXJEYXRhID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YTtcblxuICAgICAgaWYodXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuICAgICAgaWYodXNlckRhdGEucmFuZ2VkKSB7IHJldHVybjsgfVxuXG4gICAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgIHRoaXMuYXR0YWNrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gdXNlckRhdGEub2JqZWN0O1xuICAgICAgICB0aGlzLnJlc2V0V2Fsa0FuaW1hdGlvbigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEV4aXQnLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xuICAgICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgfSk7XG4gIH1cblxuICBnZXRBdHRhY2tWYWx1ZSgpIHtcbiAgICBsZXQgY3JpdFByb2MgPSBNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiBjcml0UHJvYyA+PSAuOSA/IHRoaXMuYXR0YWNrU3RyZW5ndGggKiAoTWF0aC5yYW5kb20oKSArIDEpIDogdGhpcy5hdHRhY2tTdHJlbmd0aDtcbiAgfVxuXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJXaWR0aCAvIDI7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcblxuICAgIGZ1bGxIZWFsdGhCYXIuc2NhbGUueCA9IGhlYWx0aFBlcmNlbnQ7XG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcbiAgICB0aGlzLmF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApO1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ICs9ICh0aGlzLnNwZWVkICogdGhpcy5kaXJlY3Rpb24pO1xuICAgIHRoaXMud2Fsa1Byb2NlZHVyZSh0aW1lc3RhbXApO1xuXG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICB9XG5cbiAgYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xuICAgIGlmKHRoaXMuaGVhbHRoIDw9IDApIHsgcmV0dXJuOyB9XG5cblxuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wICE9IG51bGwgJiYgdGhpcy5hdHRhY2spIHtcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSArIGRlbHRhO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmF0dGFja0xvb3AoZGVsdGEpO1xuICAgIH0gZWxzZSBpZih0aGlzLmF0dGFjaykge1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmF0dGFja0xvb3AoMCk7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gIH1cblxuICBhdHRhY2tMb29wKGRlbHRhKSB7XG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsIHx8IHRoaXMuY3VycmVudFRhcmdldC5wbGF5ZXJJZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cbiAgICB0aGlzLmFuaW1hdGVBdHRhY2soZGVsdGEpO1xuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lIDw9IHRoaXMuYXR0YWNrU3BlZWQpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcblxuICAgIGlmKHRoaXMuY3VycmVudFRhcmdldC5oZWFsdGggPD0gMCkge1xuICAgICAgdGhpcy5wbGF5ZXIucHJvY2Vzc1Jld2FyZCh0aGlzLmN1cnJlbnRUYXJnZXQua2lsbFJld2FyZCk7XG5cbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5hdHRhY2sgPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5kZXN0cm95ID0gdHJ1ZTtcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gbnVsbDtcbiAgfVxuXG4gIGFuaW1hdGVBdHRhY2soZGVsdGEpIHtcbiAgICBpZih0aGlzLnZpZXdPYmouY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgbGV0IHJpZ2h0QXJtID0gdGhpcy52aWV3T2JqLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdO1xuICAgICAgbGV0IGN1cnJlbnRBdHRhY2tUaW1lID0gdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWU7XG4gICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbjtcbiAgICAgIGxldCBhbmltYXRpb25TcGVlZCA9IHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5zcGVlZDtcbiAgICAgIGxldCBtYXhSb3RhdGlvbiA9IDEzNTtcblxuICAgICAgbGV0IHJvdGF0aW9uID0gZGlyZWN0aW9uICogKChtYXhSb3RhdGlvbiAqIChNYXRoLlBJIC8gMTgwKSkgKiAoZGVsdGEgLyBhbmltYXRpb25TcGVlZCkpO1xuICAgICAgcm90YXRpb24gPSBNYXRoLm1pbihyaWdodEFybS5yb3RhdGlvbi56ICsgcm90YXRpb24sIG1heFJvdGF0aW9uKTtcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5tYXgocm90YXRpb24sIDApO1xuXG4gICAgICByaWdodEFybS5yb3RhdGlvbi56ID0gcm90YXRpb247XG4gICAgICBpZihjdXJyZW50QXR0YWNrVGltZSA+IGFuaW1hdGlvblNwZWVkKSB7XG4gICAgICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAxO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0QXR0YWNrQW5pbWF0aW9uKCkge1xuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgcmlnaHRBcm0gPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV07XG4gICAgICByaWdodEFybS5yb3RhdGlvbi56ID0gMDtcbiAgICB9XG4gIH1cblxuICB3YWxrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xuICAgIGlmKCF0aGlzLmF0dGFjayAmJiB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgIT09IG51bGwpIHtcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMubGFzdFRpbWVTdGFtcDtcbiAgICAgIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSArIGRlbHRhO1xuICAgICAgdGhpcy53YWxrTG9vcChkZWx0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2Fsa0xvb3AoMCk7XG4gICAgfVxuXG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xuICB9O1xuXG4gIHdhbGtMb29wKGRlbHRhKSB7XG4gICAgdGhpcy5hbmltYXRlV2FsayhkZWx0YSk7XG4gICAgaWYodGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lIDw9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuc3BlZWQpIHsgcmV0dXJuOyB9XG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lID0gMDtcbiAgfVxuXG4gIGFuaW1hdGVXYWxrKGRlbHRhKSB7XG4gICAgaWYodGhpcy52aWV3T2JqLmNoaWxkcmVuLmxlbmd0aCA+IDEgJiYgIXRoaXMuYXR0YWNrKSB7XG4gICAgICBsZXQgbGVncyA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblszXTtcbiAgICAgIGxldCBsZWZ0TGVnID0gbGVncy5jaGlsZHJlblswXTtcbiAgICAgIGxldCByaWdodExlZyA9IGxlZ3MuY2hpbGRyZW5bMV07XG4gICAgICBsZXQgYW5pbWF0aW9uVGltZSA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZTtcbiAgICAgIGxldCBhbmltYXRpb25TcGVlZCA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuc3BlZWQ7XG4gICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb247XG4gICAgICBsZXQgbWF4Um90YXRpb24gPSA0NTsgXG5cbiAgICAgIGxldCByb3RhdGlvbiA9IChtYXhSb3RhdGlvbiAqIChkZWx0YSAvIGFuaW1hdGlvblNwZWVkKSk7XG5cbiAgICAgIGlmKGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLmFuaW1hdGVMZWdGb3J3YXJkKGxlZnRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgICB0aGlzLmFuaW1hdGVMZWdCYWNrKHJpZ2h0TGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZUxlZ0ZvcndhcmQocmlnaHRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgICB0aGlzLmFuaW1hdGVMZWdCYWNrKGxlZnRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgfVxuXG4gICAgICBpZih0aGlzLnRvRGVncmVlcyhsZWZ0TGVnLnJvdGF0aW9uLnopID49IG1heFJvdGF0aW9uIHx8IHRoaXMudG9EZWdyZWVzKGxlZnRMZWcucm90YXRpb24ueikgPD0gLW1heFJvdGF0aW9uKSB7XG4gICAgICAgIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uID0gIXRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFuaW1hdGVMZWdCYWNrKGxlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSkge1xuICAgIGxldCBtYXggPSB0aGlzLnRvUmFkaWFucygtbWF4Um90YXRpb24pO1xuXG4gICAgaWYobGVnLnJvdGF0aW9uLnogKyB0aGlzLnRvUmFkaWFucygtcm90YXRpb24pIDwgbWF4KSB7XG4gICAgICBsZWcucm90YXRpb24ueiA9IG1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVnLnJvdGF0aW9uLnogKz0gdGhpcy50b1JhZGlhbnMoLXJvdGF0aW9uKTtcbiAgICB9XG4gIH0gXG5cbiAgYW5pbWF0ZUxlZ0ZvcndhcmQobGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKSB7XG4gICAgbGV0IG1heCA9IHRoaXMudG9SYWRpYW5zKG1heFJvdGF0aW9uKTtcbiAgICBpZihsZWcucm90YXRpb24ueiArIHRoaXMudG9SYWRpYW5zKCByb3RhdGlvbikgPiBtYXgpIHtcbiAgICAgIGxlZy5yb3RhdGlvbi56ID0gbWF4O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWcucm90YXRpb24ueiArPSB0aGlzLnRvUmFkaWFucyhyb3RhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcmVzZXRXYWxrQW5pbWF0aW9uKCkge1xuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgbGVncyA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblszXTtcbiAgICAgIGxldCBsZWZ0TGVnID0gbGVncy5jaGlsZHJlblswXTtcbiAgICAgIGxldCByaWdodExlZyA9IGxlZ3MuY2hpbGRyZW5bMV07XG5cbiAgICAgIGxlZnRMZWcucm90YXRpb24ueiA9IDA7XG4gICAgICByaWdodExlZy5yb3RhdGlvbi56ID0gMDtcbiAgICB9XG4gIH1cblxuICB0b0RlZ3JlZXMoYW5nbGVSYWRpYW5zKSB7XG4gICAgcmV0dXJuIChhbmdsZVJhZGlhbnMgKiAxODApIC8gTWF0aC5QSTtcbiAgfVxuXG4gIHRvUmFkaWFucyhhbmdsZURlZ3JlZXMpIHtcbiAgICByZXR1cm4gKGFuZ2xlRGVncmVlcyAvIDE4MCkgKiBNYXRoLlBJO1xuICB9XG59XG4iLCJpbXBvcnQgTWluaW9uIGZyb20gJy4vbWluaW9uJztcbmltcG9ydCBBcmNoZXIgZnJvbSAnLi9hcmNoZXInO1xuaW1wb3J0IEJhc2UgZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBhcmdzLmNvbGxpZGVyU3lzdGVtO1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMubWluaW9uSWQgPSAwO1xuICAgIHRoaXMuc3Bhd25Qb3MgPSAtZ3JpZFdpZHRoIC8gMiAqIHRoaXMuZGlyZWN0aW9uO1xuICAgIHRoaXMucG9wcHVsYXRpb25DYXAgPSAzMDtcblxuICAgIHRoaXMuc2V0VXBncmFkZVZhbHVlcygpO1xuICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLk9iamVjdExvYWRlcigpO1xuXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xuICAgIHRoaXMuc3Bhd25CYXNlKCk7XG4gICAgdGhpcy5zcGF3bkFyY2hlcnMoKTtcbiAgfVxuXG4gIHNwYXduQXJjaGVycygpIHtcbiAgICBsZXQgYXJjaGVyID0gbmV3IEFyY2hlcih7IFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsIFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCwgXG4gICAgICBzdGFydGluZ1o6IDIsIFxuICAgICAgc3RhcnRpbmdZOiAyMCwgXG4gICAgICBzdGFydGluZ1g6IHRoaXMuc3Bhd25Qb3MsIFxuICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbiwgXG4gICAgICBwbGF5ZXI6IHRoaXMgXG4gICAgfSk7XG5cbiAgICB0aGlzLmFyY2hlcnMucHVzaChhcmNoZXIpO1xuXG4gICAgdGhpcy5sb2FkZXIubG9hZCgnLi9nZW9tZXRyeS93aXphcmQuanNvbicsIChvYmopID0+IHtcbiAgICAgIG9iai5wb3NpdGlvbi55ID0gLTQ7XG4gICAgICBhcmNoZXIudmlld09iai5hZGQob2JqKTtcblxuICAgICAgYXJjaGVyLmJvZHlNb2RlbCA9IGFyY2hlci52aWV3T2JqLmNoaWxkcmVuWzJdO1xuICAgICAgYXJjaGVyLnJpZ2h0QXJtID0gYXJjaGVyLmJvZHlNb2RlbC5jaGlsZHJlblsxXTtcbiAgICAgIGFyY2hlci5yaWdodEFybS5yb3RhdGlvbi56ID0gKDEzNSAvIDE4MCkgKiBNYXRoLlBJO1xuICAgICAgaWYoYXJjaGVyLmRpcmVjdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgYXJjaGVyLnZpZXdPYmouY2hpbGRyZW5bMl0ucm90YXRpb24ueSA9IE1hdGguUEk7XG4gICAgICAgIGFyY2hlci5zdGFydGluZ1JvdGF0aW9uID0gTWF0aC5QSTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zY2VuZS5hZGQoYXJjaGVyLnZpZXdPYmopO1xuICAgIH0pO1xuICB9XG5cbiAgc3Bhd25CYXNlKCkge1xuICAgIHRoaXMuYmFzZSA9IG5ldyBCYXNlKHtcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgcGxheWVyOiB0aGlzXG4gICAgfSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmJhc2Uudmlld09iaik7XG4gIH1cblxuICBzcGF3bk1pbmlvbihpbmRleCkge1xuICAgIGlmKHRoaXMubWluaW9ucy5sZW5ndGggPCB0aGlzLnBvcHB1bGF0aW9uQ2FwKSB7XG4gICAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xuICAgICAgICBpZighdGhpcy5nYW1lT3Zlcikge1xuICAgICAgICAgIHRoaXMubW9uZXkgLT0gdGhpcy5taW5pb25Db3N0O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1pbmlvbiA9IG5ldyBNaW5pb24oe1xuICAgICAgICAgIGlkOiB0aGlzLm1pbmlvbklkKyssXG4gICAgICAgICAgaGVhbHRoVXBncmFkZTogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlSGVhbHRoLFxuICAgICAgICAgIGF0dGFja1VwZ3JhZGU6IHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFjayxcbiAgICAgICAgICBhdHRhY2tTcGVlZFVwZ3JhZGU6IHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkLFxuICAgICAgICAgIHBsYXllcklkOiB0aGlzLmlkLFxuICAgICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcbiAgICAgICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgICAgIHBsYXllcjogdGhpc1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1pbmlvbnMucHVzaChtaW5pb24pO1xuICAgICAgICB0aGlzLmxvYWRlci5sb2FkKCcuL2dlb21ldHJ5L21vZGVsLmpzb24nLCAob2JqKSA9PiB7XG4gICAgICAgICAgb2JqLnBvc2l0aW9uLnkgPSAtNDtcbiAgICAgICAgICBtaW5pb24udmlld09iai5hZGQob2JqKTtcblxuICAgICAgICAgIGlmKG1pbmlvbi5kaXJlY3Rpb24gPT09IC0xKSB7XG4gICAgICAgICAgICBtaW5pb24udmlld09iai5jaGlsZHJlblsxXS5yb3RhdGlvbi55ID0gTWF0aC5QSTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnNjZW5lLmFkZChtaW5pb24udmlld09iaik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb2Nlc3NSZXdhcmQocmV3YXJkKSB7XG4gICAgaWYodGhpcy5nYW1lT3ZlcikgeyByZXR1cm47IH1cbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgT2JqZWN0LmtleXMocmV3YXJkKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRba2V5XSArPSByZXdhcmRba2V5XTtcbiAgICB9KTtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy5iYXNlICE9PSBudWxsKSB7IFxuICAgICAgdGhpcy5iYXNlLnJ1bkxvb3AoKTtcbiAgICAgIGlmKHRoaXMuYmFzZS5kZXN0cm95KSB7IHRoaXMuZGVzdHJveUJhc2UoKTsgfSBcbiAgICB9XG5cbiAgICB0aGlzLmFyY2hlcnMuZm9yRWFjaCgoYXJjaGVyKSA9PiB7XG4gICAgICBhcmNoZXIucnVuTG9vcCh0aW1lc3RhbXApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5taW5pb25zLmZvckVhY2goKG1pbmlvbiwgaW5kZXgpID0+IHtcbiAgICAgIG1pbmlvbi5ydW5Mb29wKHRpbWVzdGFtcCk7XG4gICAgICBpZighbWluaW9uLmF0dGFjaykgeyBtaW5pb24ucmVzZXRBdHRhY2tBbmltYXRpb24oKTsgfVxuICAgICAgaWYobWluaW9uLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpOyB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xuICB9XG5cbiAgZGVzdHJveU1pbmlvbihtaW5pb24sIGluZGV4KSB7XG4gICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xuXG4gICAgdGhpcy5jb2xsaWRlckxpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgobWluaW9uLmNvbGxpZGVyLmlkKSwgMSk7XG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicpO1xuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0U3RheScpO1xuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0RXhpdCcpO1xuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcpO1xuICAgIHRoaXMubWluaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgZGVzdHJveUJhc2UoKSB7XG4gICAgdGhpcy5hcmNoZXJzLmZvckVhY2goYXJjaGVyID0+IHtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGFyY2hlci52aWV3T2JqKTtcbiAgICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KGFyY2hlci5jb2xsaWRlci5pZCksIDEpO1xuICAgIH0pO1xuICAgIHRoaXMuYXJjaGVycy5sZW5ndGggPSAwO1xuICAgIFxuICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuYmFzZS52aWV3T2JqKTtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleCh0aGlzLmJhc2UuY29sbGlkZXIuaWQpLCAxKTtcbiAgICB0aGlzLmJhc2UgPSBudWxsO1xuICAgIHRoaXMubG9zdCA9IHRydWU7XG4gIH1cblxuICBmaW5kQ29sbGlkZXJJbmRleChpZCkge1xuICAgIGxldCBpbmRleCA9IC0xO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy5jb2xsaWRlckxpc3RbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBzZXRHYW1lT3ZlcigpIHtcbiAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKG1pbmlvbiA9PiB7XG4gICAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XG4gICAgfSk7XG5cbiAgICBpZih0aGlzLmJhc2UpIHtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuYmFzZS52aWV3T2JqKTtcbiAgICAgIHRoaXMuYmFzZSA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5hcmNoZXJzLmZvckVhY2goYXJjaGVycyA9PiB7XG4gICAgICB0aGlzLnNjZW5lLnJlbW92ZShhcmNoZXJzLnZpZXdPYmopO1xuICAgIH0pO1xuXG4gICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgIHRoaXMuc2V0VXBncmFkZVZhbHVlcygpO1xuICAgIHRoaXMuc2V0dXBHYW1lU3RhdGUoKTtcbiAgICB0aGlzLnNwYXduQmFzZSgpO1xuICAgIHRoaXMuc3Bhd25BcmNoZXJzKCk7XG4gIH1cblxuXG4gIHNldHVwR2FtZVN0YXRlKCkge1xuICAgIHRoaXMubWluaW9ucyA9IFtdO1xuICAgIHRoaXMuYXJjaGVycyA9IFtdO1xuICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgIHRoaXMubW9uZXkgPSA0MDAwO1xuICAgIHRoaXMubWluaW9uQ29zdCA9IDUwO1xuICAgIHRoaXMubG9zdCA9IGZhbHNlO1xuICB9XG5cbiAgc2V0VXBncmFkZVZhbHVlcygpIHtcbiAgICB0aGlzLnVwZ3JhZGVzID0ge1xuICAgICAgYmFzZUhlYWx0aDogMCxcbiAgICAgIG1pbmlvbkJhc2VIZWFsdGg6IDAsXG4gICAgICBtaW5pb25CYXNlQXR0YWNrOiAwLFxuICAgICAgbWluaW9uQmFzZUF0dGFja1NwZWVkOiAwLFxuICAgICAgYXJjaGVyQmFzZUF0dGFjazogMCxcbiAgICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZDogMFxuICAgIH1cbiAgfVxuXG4gIGdldEJhc2VIZWFsdGhVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLmJhc2UudXBncmFkZXMuaGVhbHRoLmNvc3QgKiAodGhpcy51cGdyYWRlcy5iYXNlSGVhbHRoICsgMSk7XG4gIH1cblxuICBjYW5VcGdyYWRlQmFzZUhlYWx0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0QmFzZUhlYWx0aFVwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlQmFzZUhlYWx0aCgpIHtcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVCYXNlSGVhbHRoKCkpIHtcbiAgICAgIHRoaXMudXBncmFkZXMuYmFzZUhlYWx0aCsrO1xuICAgICAgdGhpcy5iYXNlLm1heEhlYWx0aCArPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguYW1vdW50O1xuICAgICAgdGhpcy5iYXNlLmhlYWx0aCArPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguYW1vdW50O1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguY29zdCAqIHRoaXMudXBncmFkZXMuYmFzZUhlYWx0aDtcbiAgICB9XG4gIH1cblxuICBnZXRNaW5pb25IZWFsdGhVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGggKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVNaW5pb25IZWFsdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldE1pbmlvbkhlYWx0aFVwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlTWluaW9uSGVhbHRoKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZU1pbmlvbkhlYWx0aCgpKSB7XG4gICAgICB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGgrKztcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguY29zdCAqIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUhlYWx0aDtcbiAgICB9XG4gIH1cblxuICBnZXRNaW5pb25BdHRhY2tVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2suY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2sgKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVNaW5pb25BdHRhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldE1pbmlvbkF0dGFja1VwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlTWluaW9uQXR0YWNrKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZU1pbmlvbkF0dGFjaygpKSB7XG4gICAgICB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2srKztcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2suY29zdCAqIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFjaztcbiAgICB9XG4gIH1cblxuICBnZXRNaW5pb25BdHRhY2tTcGVlZFVwZ3JhZGVDb3N0KCkge1xuICAgIHJldHVybiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmNvc3QgKiAodGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQgKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVNaW5pb25BdHRhY2tTcGVlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0TWluaW9uQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpO1xuICB9XG5cbiAgdXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkpIHtcbiAgICAgIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkKys7XG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkKys7XG4gICAgfVxuICB9XG5cbiAgZ2V0V2l6YXJkQXR0YWNrVXBncmFkZUNvc3QoKSB7XG4gICAgcmV0dXJuIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrLmNvc3QgKiAodGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrICsgMSk7XG4gIH1cblxuICBjYW5VcGdyYWRlV2l6YXJkQXR0YWNrKCkge1xuICAgIHJldHVybiB0aGlzLm1vbmV5ID4gdGhpcy5nZXRXaXphcmRBdHRhY2tVcGdyYWRlQ29zdCgpO1xuICB9XG5cbiAgdXBncmFkZVdpemFyZEF0dGFjaygpIHtcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVXaXphcmRBdHRhY2soKSkge1xuICAgICAgdGhpcy5hcmNoZXJzLmZvckVhY2goKGFyY2hlcikgPT4ge1xuICAgICAgICBhcmNoZXIuYXR0YWNrU3RyZW5ndGggKz0gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2suYW1vdW50O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFjaysrO1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFjay5jb3N0ICogdGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrO1xuICAgIH1cbiAgfVxuXG4gIGdldFdpemFyZEF0dGFja1NwZWVkVXBncmFkZUNvc3QoKSB7XG4gICAgcmV0dXJuIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqICh0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZCArIDEpIDtcbiAgfVxuXG4gIGNhblVwZ3JhZGVXaXphcmRBdHRhY2tTcGVlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0V2l6YXJkQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpO1xuICB9XG5cbiAgdXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkpIHtcbiAgICAgIHRoaXMuYXJjaGVycy5mb3JFYWNoKChhcmNoZXIpID0+IHtcbiAgICAgICAgYXJjaGVyLmF0dGFja1NwZWVkIC09IENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50O1xuICAgICAgICBhcmNoZXIuYXJyb3dTcGVlZCAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZCsrO1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmNvc3QgKiB0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZDtcbiAgICB9XG4gIH1cbn1cbiIsImZ1bmN0aW9uIGhhbmRsZVJlc2l6ZShyZW5kZXJlciwgY2FtZXJhKXtcbiAgbGV0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgbGV0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gIHJlbmRlcmVyLnNldFNpemUodyxoKTtcbiAgY2FtZXJhLmFzcGVjdCA9IHcvaDtcbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2NyZWVuVmlldygpIHtcbiAgbGV0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzAsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xuICBsZXQgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xuICByZW5kZXJlci5zaGFkb3dNYXBFbmFibGVkID0gdHJ1ZTtcbiAgcmVuZGVyZXIuc2hhZG93TWFwVHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXBcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpO1xuXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFBlcmZvcm1hbmNlKCkge1xuICB2YXIgcmVuZGVyZXJTdGF0cyA9IG5ldyBUSFJFRXguUmVuZGVyZXJTdGF0cygpO1xuICByZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXG4gIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCdcbiAgcmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLmJvdHRvbSA9ICcwcHgnXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudCApXG4gIHJldHVybiByZW5kZXJlclN0YXRzO1xufVxuIl19\n"]}