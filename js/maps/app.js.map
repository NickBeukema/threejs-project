{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","default","opponents","map","_constants","gridSubDiv","forEach","enemy","startingZ","this","player","minions","minion","spawnIndex","spawnValue","values","val","index","../modules/constants","2","Math","floor","random","3","friendlies","spawnPos","startingPos","friendlyMap","m","row","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","idx","unique","fullIdxArr","slice","gaps","filter","indexOf","arrayToUse","gridWidth","Array","prototype","self","4","_interopRequireDefault","obj","__esModule","render","timestamp","requestAnimationFrame","gameView","renderLoop","globals","renderer","scene","camera","performance","rendererStats","update","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","gameEngine","_setupScreenView","setupScreenView","setupPerformance","./modules/game-engine","./modules/game-view","./modules/view","5","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_smartAi","_smartAi2","_defensiveAi","_defensiveAi2","_randomAi","_randomAi2","AI","args","smartAI","defensiveAI","randomAI","determineAIFunction","personality","spawnInterval","lastUpgrade","upgradeInterval","lastSpawn","poppulationLimit","canUpgrade","applyUpgrades","checkUpgrades","canSpawn","AIFunction","spawnMinion","upgrades","canUpgradeBaseHealth","name","cost","getBaseHealthUpgradeCost","canUpgradeMinionHealth","getMinionHealthUpgradeCost","canUpgradeMinionAttack","getMinionAttackUpgradeCost","canUpgradeMinionAttackSpeed","getMinionAttackSpeedUpgradeCost","canUpgradeWizardAttack","getWizardAttackUpgradeCost","canUpgradeWizardAttackSpeed","getWizardAttackSpeedUpgradeCost","_this","upgrade","money","apply","../ai/defensive-ai","../ai/random-ai","../ai/smart-ai","./constants","6","_constants2","Archer","playerId","id","colliderList","direction","startingY","startingX","targetList","arrows","startingRotation","_90deg","PI","_135deg","animationProperties","arm","startingAngle","endingAngle","angleDifference","speedDown","speedUp","lastAnimate","arrowSpeed","attackProperties","lastAttack","attackSpeed","archer","baseAttackSpeed","baseArrowSpeed","attackStrength","baseAttack","arrowId","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","THREE","Group","bodyG","BoxGeometry","bodyMat","MeshBasicMaterial","color","body","Mesh","hitBoxG","material","transparent","opacity","depthWrite","hitBox","userData","object","ranged","add","position","set","geometry","computeBoundingBox","box3","boundingBox","clone","collider","THREEx","ColliderBox3","addEventListener","otherCollider","object3d","immuneToRange","findColliderIndex","splice","determineTarget","removeTarget","initiateAttack","recharging","_this2","canAttack","nextTarget","callback","health","getAttackValue","processReward","killReward","attack","destroy","_this3","arrowG","SphereGeometry","arrowMat","arrow","y","max","endingY","y_1","y_2","y_3","b","c","yFunction","delta","m_x","c_x","xFunction","m_z","z","c_z","zFunction","startingTime","setTimeout","remove","_this4","rightArm","rotation","timeRatio","degreeChange","spawnArrow","resetAttackAnimation","_delta","_timeRatio","_degreeChange","angleTowardsTarget","calculateAngleToTarget","bodyModel","xDiff","zDiff","diffRatio","atan","attackProcedure","animateArrows","animateAttack","7","Base","baseWidth","baseHeight","baseDepth","maxHealth","hitBoxBuffer","score","shapeGeometry","textureLoader","TextureLoader","normalMap","load","longTexture","skinnyTexture","sideTexture","wrapS","wrapT","RepeatWrapping","repeat","skinnyMat","MeshPhongMaterial","specular","shininess","normalScale","Vector2","longMat","sideMat","shapeMaterials","shapeMesh","MultiMaterial","hitGeometry","hitMaterial","hitMesh","healthBar","initializeHealthBar","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","updateHealthBar","8","xPositive","xNegative","baseHealth","amount","base","9","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","gameOver","state","colliderSystem","ColliderSystem","initializePlayers","myPlayer","type","computer","playerAI","players","_ref","winner","p","setGameOver","activateMenu","pop","reset","runLoop","lost","find","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","10","scoreText","moneyText","poppulationText","baseHealthText","minionBaseHealthText","minionBaseAttackText","minionBaseAttackSpeedText","archerBaseAttackText","archerBaseAttackSpeedText","baseHealthUpgrade","minionBaseHealthUpgrade","minionBaseAttackUpgrade","minionBaseAttackSpeedUpgrade","archerBaseAttackUpgrade","archerBaseAttackSpeedUpgrade","planeTexture","GameView","setupGrid","setupGrassField","setupLight","mouse","positionScale","lookAt","hud","document","getElementById","hudUpgrade","lastTimeStamp","started","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","plane","texture","anisotropy","getMaxAnisotropy","rotateX","setFromCamera","planes","intersects","intersectObjects","panel","setHex","window","evt","event","clientX","innerWidth","clientY","innerHeight","restart","classList","initializeUpgradeButtons","initializeHudTexts","getCurrentPanelIndex","round","textContent","poppulationCap","toFixed","minionBaseHealth","minionBaseAttack","minionBaseAttackSpeed","archerBaseAttack","archerBaseAttackSpeed","checkGridIntersections","gameLoop","updateUI","upgradeBaseHealth","upgradeMinionHealth","upgradeMinionAttack","upgradeMinionAttackSpeed","upgradeWizardAttack","upgradeWizardAttackSpeed","11","activateStartScreen","startSection","restartSection","activateRestartScreen","text","restartModalMessage","modal","closeMenu","startButton","startFirstGame","restartButton","12","Minion","healthUpgrade","attackUpgrade","attackSpeedUpgrade","defaultSpeed","speed","attackTime","attackAnimationProperties","walkingAnimationProperties","time","rotObjectMatrix","dispose","currentTarget","resetWalkAnimation","walkProcedure","attackLoop","children","currentAttackTime","animationSpeed","min","walkLoop","animateWalk","legs","leftLeg","rightLeg","animateLegForward","animateLegBack","toDegrees","leg","maxRotation","toRadians","angleRadians","angleDegrees","13","_minion","_minion2","_archer","_archer2","_base","_base2","Player","minionId","setUpgradeValues","loader","ObjectLoader","setupGameState","spawnBase","spawnArchers","archers","minionCost","reward","keys","destroyBase","destroyMinion","removeEventListener","_this5","./archer","./base","./minion","14","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","shadowMapEnabled","shadowMapType","PCFSoftShadowMap","appendChild","domElement","RendererStats","style","left","bottom"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents) {\n  var map = {};\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    map[i] = 0;\n  }\n\n  opponents.forEach(function (enemy) {\n    map[enemy.startingZ]--;\n  });\n\n  this.player.minions.forEach(function (minion) {\n    map[minion.startingZ]++;\n  });\n\n  var spawnIndex = -1;\n  var spawnValue = 100000;\n  Object.values(map).forEach(function (val, index) {\n    if (val < spawnValue) {\n      spawnValue = val;\n      spawnIndex = index;\n    }\n  });\n\n  return spawnIndex;\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (opponents) {\n    return Math.floor(Math.random() * _constants.gridSubDiv);\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents, friendlies, spawnPos) {\n  var startingPos = spawnPos;\n\n  var friendlyMap = friendlies.map(function (m) {\n    return {\n      row: m.startingZ,\n      distance: m.getPosition().x - startingPos\n    };\n  });\n\n  var opponentMap = opponents.map(function (m) {\n\n    var distance = startingPos - m.getPosition().x;\n    return {\n      row: m.startingZ,\n      distance: distance\n    };\n  });\n\n  var rowArray = [];\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    rowArray.push(i);\n  }\n\n  var decision = {\n    hasFriendlies: [],\n    closestIndex: -1,\n    closestVal: 99999,\n    distanceTies: []\n\n  };\n\n  friendlyMap.forEach(function (val, idx) {\n    decision.hasFriendlies.push(val.row);\n  });\n\n  opponentMap.forEach(function (val, idx) {\n    if (val.distance < decision.closestVal) {\n      decision.closestIndex = val.row;\n      decision.closestVal = val.distance;\n\n      if (decision.distanceTies.length > 0) {\n        decision.distanceTies.length = 0;\n      }\n    } else if (val.distance === decision.closestVal) {\n      decision.distanceTies.push(val.row);\n    }\n  });\n\n  decision.distanceTies.push(decision.closestIndex);\n  decision.hasFriendlies = decision.hasFriendlies.unique();\n\n  var fullIdxArr = rowArray.slice(0);\n\n  decision.gaps = fullIdxArr.filter(function (x) {\n    return decision.hasFriendlies.indexOf(x) < 0;\n  });\n\n  //if(friendlies.length > 3) {\n  //friendlies[2].viewObj.position.z += 1;\n  //}\n\n\n  var arrayToUse = void 0;\n  if (decision.closestVal < _constants.gridWidth / 2) {\n    arrayToUse = decision.distanceTies;\n  } else {\n    arrayToUse = decision.gaps;\n  }\n\n  var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n  return arrayToUse[arrIdx];\n};\n\nvar _constants = require('../modules/constants');\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\n},{\"../modules/constants\":8}],4:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\nvar rendererStats = void 0;\nvar performance = true;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  if (performance) {\n    rendererStats = (0, _view.setupPerformance)();\n  }\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  if (performance) {\n    rendererStats.update(globals.renderer);\n  }\n}\n\ninit();\n\n},{\"./modules/game-engine\":9,\"./modules/game-view\":10,\"./modules/view\":14}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _smartAi = require('../ai/smart-ai');\n\nvar _smartAi2 = _interopRequireDefault(_smartAi);\n\nvar _defensiveAi = require('../ai/defensive-ai');\n\nvar _defensiveAi2 = _interopRequireDefault(_defensiveAi);\n\nvar _randomAi = require('../ai/random-ai');\n\nvar _randomAi2 = _interopRequireDefault(_randomAi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.smartAI = _smartAi2.default;\n    this.defensiveAI = _defensiveAi2.default;\n    this.randomAI = _randomAi2.default;\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 350;\n    this.lastUpgrade = 0;\n    this.upgradeInterval = 2000;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 30;\n  }\n\n  _createClass(AI, [{\n    key: 'canSpawn',\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval && this.player.minions.length < this.poppulationLimit;\n    }\n  }, {\n    key: 'canUpgrade',\n    value: function canUpgrade(timestamp) {\n      return timestamp - this.lastUpgrade > this.upgradeInterval;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp, opponents) {\n      if (this.canUpgrade(timestamp)) {\n        this.applyUpgrades(this.checkUpgrades());\n        this.lastUpgrade = timestamp;\n      }\n\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions, this.player.spawnPos);\n\n      if (spawnIndex >= 0) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: 'determineAIFunction',\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n\n    //check all upgradeCosts to see if any can be upgrades returns a list of what can be upgraded and their cost\n\n  }, {\n    key: 'checkUpgrades',\n    value: function checkUpgrades() {\n      var upgrades = [];\n\n      if (this.player.canUpgradeBaseHealth()) {\n        upgrades.push({ name: \"upgradeBaseHealth\", cost: this.player.getBaseHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionHealth()) {\n        upgrades.push({ name: \"upgradeMinionHealth\", cost: this.player.getMinionHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttack()) {\n        upgrades.push({ name: \"upgradeMinionAttack\", cost: this.player.getMinionAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttackSpeed()) {\n        upgrades.push({ name: \"upgradeMinionAttackSpeed\", cost: this.player.getMinionAttackSpeedUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttack()) {\n        upgrades.push({ name: \"upgradeWizardAttack\", cost: this.player.getWizardAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttackSpeed()) {\n        upgrades.push({ name: \"upgradeWizardAttackSpeed\", cost: this.player.getWizardAttackSpeedUpgradeCost() });\n      }\n\n      return upgrades;\n    }\n  }, {\n    key: 'applyUpgrades',\n    value: function applyUpgrades(upgrades) {\n      var _this = this;\n\n      upgrades.forEach(function (upgrade) {\n        if (_this.player.money / 2 > upgrade.cost && _this.player.money > 750) {\n          var fn = _this.player[upgrade.name];\n          fn.apply(_this.player);\n        }\n      });\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"../ai/defensive-ai\":1,\"../ai/random-ai\":2,\"../ai/smart-ai\":3,\"./constants\":8}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Archer = function () {\n  function Archer(args) {\n    _classCallCheck(this, Archer);\n\n    this.scene = args.scene;\n    this.player = args.player;\n    this.playerId = this.player.id;\n    this.colliderList = args.colliderList;\n\n    this.direction = args.direction;\n    this.startingZ = args.startingZ;\n    this.startingY = args.startingY + 4;\n    this.startingX = args.startingX - 4 * this.direction;\n\n    this.targetList = [];\n    this.arrows = [];\n\n    this.startingRotation = 0;\n    var _90deg = 90 / 180 * Math.PI;\n    var _135deg = 135 / 180 * Math.PI;\n\n    this.animationProperties = {\n      arm: {\n        startingAngle: _135deg,\n        endingAngle: _90deg,\n        angleDifference: _135deg - _90deg,\n        speedDown: 200,\n        speedUp: 150,\n        lastAnimate: null\n      },\n      arrowSpeed: 500\n    };\n\n    this.attackProperties = {\n      lastAttack: 0\n    };\n\n    this.attackSpeed = _constants2.default.archer.baseAttackSpeed;\n    this.arrowSpeed = _constants2.default.archer.baseArrowSpeed;\n    this.attackStrength = _constants2.default.archer.baseAttack;\n    this.arrowId = 0;\n    this.initializeView();\n    this.registerCollision();\n  }\n\n  _createClass(Archer, [{\n    key: 'initializeView',\n    value: function initializeView() {\n      var hitBoxOpacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var bodyG = new THREE.BoxGeometry(0.01, 0.013, 0.013);\n      var bodyMat = new THREE.MeshBasicMaterial({ color: 0x00FF00 });\n      this.body = new THREE.Mesh(bodyG, bodyMat);\n\n      var hitBoxG = new THREE.BoxGeometry(60, 60, 60);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffff00, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      this.hitBox = new THREE.Mesh(hitBoxG, material);\n\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.ranged = true;\n\n      this.viewObj.add(this.body);\n      this.viewObj.add(this.hitBox);\n\n      this.viewObj.position.set(this.startingX, this.startingY, this.startingZ);\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        _this.targetList.push(userData.object);\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        if (_this.findColliderIndex(otherCollider.id) === -1) {\n          _this.targetList.push(userData.object);\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.targetList.splice(_this.findColliderIndex(otherCollider), 1);\n        _this.determineTarget();\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.removeTarget(otherCollider);\n        _this.determineTarget();\n      });\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.targetList.length; i++) {\n        if (this.targetList[i].collider.id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'removeTarget',\n    value: function removeTarget(id) {\n      this.targetList.splice(this.findColliderIndex(id), 1);\n    }\n  }, {\n    key: 'canAttack',\n    value: function canAttack(timestamp) {\n      if (this.targetList.length === 0) {\n        return false;\n      }\n      if (this.initiateAttack || this.recharging) {\n        return false;\n      }\n\n      var delta = timestamp - this.attackProperties.lastAttack;\n      return delta >= this.attackSpeed;\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      return this.attackStrength;\n    }\n  }, {\n    key: 'determineTarget',\n    value: function determineTarget() {\n      if (this.targetList.length > 0) {\n        return this.targetList[0];\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      var _this2 = this;\n\n      if (!this.canAttack(timestamp)) {\n        return;\n      }\n\n      var target = this.determineTarget();\n      if (target !== null && target.viewObj) {\n        this.nextTarget = {\n          target: target,\n          callback: function callback(target) {\n            target.health -= _this2.getAttackValue();\n            if (target.health <= 0) {\n              _this2.player.processReward(target.killReward);\n\n              target.attack = false;\n              target.destroy = true;\n              _this2.removeTarget(target.collider.id);\n            }\n          }\n        };\n        this.initiateAttack = true;\n      }\n\n      this.attackProperties.lastAttack = timestamp;\n    }\n  }, {\n    key: 'spawnArrow',\n    value: function spawnArrow(target, timestamp, callback) {\n      var _this3 = this;\n\n      var arrowG = new THREE.SphereGeometry(1, 10, 10);\n      var arrowMat = new THREE.MeshBasicMaterial({ color: 0x9C3724 });\n      var arrow = new THREE.Mesh(arrowG, arrowMat);\n      arrow.name = \"Arrow\";\n      this.scene.add(arrow);\n\n      arrow.position.set(this.startingX, this.startingY + 2, this.startingZ);\n\n      var id = this.arrowId++;\n\n      var startingY = arrow.position.y;\n      var max = startingY + 5;\n      var endingY = target.viewObj.position.y;\n\n      var x_1 = 0;\n      var y_1 = startingY;\n\n      var x_2 = 0.5;\n      var y_2 = max;\n\n      var x_3 = 1;\n      var y_3 = endingY;\n\n      var a = y_1 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var b = -y_1 * (x_2 + x_3) / ((x_1 - x_2) * (x_1 - x_3)) - y_2 * (x_1 + x_3) / ((x_2 - x_1) * (x_2 - x_3)) - y_3 * (x_1 + x_2) / ((x_3 - x_1) * (x_3 - x_2));\n\n      var c = y_1 * x_2 * x_3 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 * x_1 * x_3 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 * x_1 * x_2 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var yFunction = function yFunction(delta) {\n        return a * (delta * delta) + b * delta + c;\n      };\n\n      var m_x = target.viewObj.position.x - arrow.position.x;\n      var c_x = arrow.position.x;\n\n      var xFunction = function xFunction(delta) {\n        return m_x * delta + c_x;\n      };\n\n      var m_z = target.viewObj.position.z - arrow.position.z;\n      var c_z = arrow.position.z;\n\n      var zFunction = function zFunction(delta) {\n        return m_z * delta + c_z;\n      };\n\n      this.arrows.push({\n        id: id,\n        obj: arrow,\n        target: target,\n        startingTime: timestamp,\n        yFunction: yFunction,\n        xFunction: xFunction,\n        zFunction: zFunction\n      });\n\n      setTimeout(function () {\n        callback(target);\n        _this3.arrows = _this3.arrows.filter(function (a) {\n          return a !== id;\n        });\n        _this3.scene.remove(arrow);\n      }, this.arrowSpeed);\n    }\n  }, {\n    key: 'animateArrows',\n    value: function animateArrows(timestamp) {\n      var _this4 = this;\n\n      this.arrows.forEach(function (arrow) {\n        var delta = (timestamp - arrow.startingTime) / _this4.arrowSpeed;\n        arrow.obj.position.y = arrow.yFunction(delta);\n        arrow.obj.position.x = arrow.xFunction(delta);\n        arrow.obj.position.z = arrow.zFunction(delta);\n      });\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(timestamp) {\n      if (this.rightArm && this.initiateAttack) {\n        if (this.rightArm.rotation.z > this.animationProperties.arm.endingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var timeRatio = delta / this.animationProperties.arm.speedDown;\n          var degreeChange = this.animationProperties.arm.angleDifference * timeRatio;\n\n          this.rightArm.rotation.z -= degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.spawnArrow(this.nextTarget.target, timestamp, this.nextTarget.callback);\n\n          this.resetAttackAnimation();\n        }\n      }\n\n      if (this.rightArm && this.recharging) {\n        if (this.rightArm.rotation.z < this.animationProperties.arm.startingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var _delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var _timeRatio = _delta / this.animationProperties.arm.speedUp;\n          var _degreeChange = this.animationProperties.arm.angleDifference * _timeRatio;\n\n          this.rightArm.rotation.z += _degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.recharging = false;\n          this.animationProperties.arm.lastAnimate = null;\n        }\n      }\n\n      if (this.nextTarget && this.nextTarget.target) {\n        var angleTowardsTarget = this.calculateAngleToTarget(this.nextTarget.target);\n        this.bodyModel.rotation.y = angleTowardsTarget + this.startingRotation;\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      this.initiateAttack = false;\n      this.recharging = true;\n      this.animationProperties.arm.lastAnimate = null;\n    }\n  }, {\n    key: 'calculateAngleToTarget',\n    value: function calculateAngleToTarget(target) {\n      var xDiff = target.viewObj.position.x - this.viewObj.position.x;\n      var zDiff = target.viewObj.position.z - this.viewObj.position.z;\n      var diffRatio = zDiff / xDiff;\n      return Math.PI * -this.direction - Math.atan(diffRatio) + Math.PI;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.animateArrows(timestamp);\n      this.animateAttack(timestamp);\n      this.collider.update();\n    }\n  }]);\n\n  return Archer;\n}();\n\nexports.default = Archer;\n\n},{\"./constants\":8}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n    function Base(args) {\n        _classCallCheck(this, Base);\n\n        this.direction = args.direction;\n        this.colliderList = args.colliderList;\n        this.player = args.player;\n        this.playerId = this.player.id;\n\n        this.baseWidth = _constants.gridWidth;\n        this.baseHeight = 20;\n        this.baseDepth = 10;\n\n        this.maxHealth = 250;\n        this.health = this.maxHealth;\n\n        this.hitBoxBuffer = 2;\n\n        this.killReward = {\n            money: 550,\n            score: 1000\n        };\n\n        this.initializeView(this.direction);\n        this.registerCollision();\n    }\n\n    _createClass(Base, [{\n        key: 'initializeView',\n        value: function initializeView(direction) {\n            var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n            this.viewObj = new THREE.Group();\n\n            var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n            var textureLoader = new THREE.TextureLoader();\n            var normalMap = textureLoader.load('textures/rock-normal-map.jpg');\n            var longTexture = textureLoader.load('textures/brick-wall.jpg');\n            var skinnyTexture = textureLoader.load('textures/brick-wall.jpg');\n            var sideTexture = textureLoader.load('textures/brick-wall.jpg');\n            var baseColor = 0x555555;\n\n            longTexture.wrapS = longTexture.wrapT = THREE.RepeatWrapping;\n            longTexture.repeat.set(3, 1);\n\n            skinnyTexture.wrapS = skinnyTexture.wrapT = THREE.RepeatWrapping;\n            skinnyTexture.repeat.set(1, 3);\n\n            sideTexture.wrapS = sideTexture.wrapT = THREE.RepeatWrapping;\n            sideTexture.repeat.set(1, 1);\n\n            var skinnyMat = new THREE.MeshPhongMaterial({ color: 0x333333, specular: 0x333333, shininess: 15, normalMap: textureLoader.load('textures/rock-normal-map.jpg'), normalScale: new THREE.Vector2(0.05, 1), map: skinnyTexture });\n\n            var longMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: longTexture });\n\n            var sideMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: sideTexture });\n\n            var shapeMaterials = [longMat, // Right\n            longMat, // Left\n            skinnyMat, // Top\n            sideMat, // Back\n            sideMat, // Front\n            skinnyMat];\n\n            var shapeMesh = new THREE.Mesh(shapeGeometry, new THREE.MultiMaterial(shapeMaterials));\n\n            var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n            var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n            var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n            this.healthBar = this.initializeHealthBar();\n            this.hitBox = hitMesh;\n\n            this.viewObj.add(shapeMesh);\n            this.viewObj.add(hitMesh);\n            this.viewObj.add(this.healthBar);\n\n            this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n            this.viewObj.position.y = this.baseHeight / 2;\n\n            this.hitBox.userData.object = this;\n            this.hitBox.userData.player = this.player;\n            this.hitBox.userData.immuneToRange = true;\n        }\n    }, {\n        key: 'initializeHealthBar',\n        value: function initializeHealthBar() {\n            this._healthBarLength = _constants.gridWidth / 10;\n            this._healthBarWidth = _constants.gridWidth / 150;\n            var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n            var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n            var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n            fullHealthBarMesh.name = \"FullHealthBar\";\n\n            var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n            var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n            var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n            emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n            var healthBarGroup = new THREE.Group();\n            healthBarGroup.add(fullHealthBarMesh);\n            healthBarGroup.add(emptyHealthBarMesh);\n\n            healthBarGroup.position.y = this.baseHeight + 5;\n\n            return healthBarGroup;\n        }\n    }, {\n        key: 'updateHealthBar',\n        value: function updateHealthBar() {\n            var healthPercent = this.health / this.maxHealth;\n            var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n            var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n            fullHealthBar.scale.x = healthPercent;\n            fullHealthBar.position.x = healthBarOffset;\n        }\n    }, {\n        key: 'registerCollision',\n        value: function registerCollision() {\n            this.hitBox.geometry.computeBoundingBox();\n            var box3 = this.hitBox.geometry.boundingBox.clone();\n            this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n            this.colliderList.push(this.collider);\n        }\n    }, {\n        key: 'runLoop',\n        value: function runLoop() {\n            this.collider.update();\n            this.updateHealthBar();\n        }\n    }]);\n\n    return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":8}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 64;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\nvar minion = {\n\tbaseHealth: 10,\n\tbaseAttack: 3,\n\tbaseAttackSpeed: 1000,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 50,\n\t\t\tamount: 5\n\t\t},\n\t\tattack: {\n\t\t\tcost: 75,\n\t\t\tamount: 2\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 25\n\t\t}\n\t}\n};\n\nvar base = {\n\tbaseHealth: 250,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 150,\n\t\t\tamount: 250\n\t\t}\n\t}\n};\n\nvar archer = {\n\tbaseAttack: 5,\n\tbaseAttackSpeed: 1000,\n\tbaseArrowSpeed: 1000,\n\tupgrades: {\n\t\tattack: {\n\t\t\tcost: 50,\n\t\t\tamount: 4\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 50\n\t\t}\n\t}\n};\n\nvar player = {};\n\nexports.default = { minion: minion, base: base, archer: archer, player: player };\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.gameOver = true;\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"randomAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"randomAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver(_ref) {\n      var winner = _ref.winner,\n          score = _ref.score;\n\n      this.state.players.forEach(function (p) {\n        return p.setGameOver();\n      });\n      (0, _menuScreen.activateMenu)({\n        winner: winner,\n        score: score\n      });\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          var winner = _this.state.players.find(function (p) {\n            return p.id !== player.id;\n          });\n          var score = winner.score;\n          _this.initializeGameOver({ winner: winner, score: score });\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":5,\"./constants\":8,\"./menu-screen\":11,\"./player\":13}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    poppulationText = void 0,\n    baseHealthText = void 0,\n    minionBaseHealthText = void 0,\n    minionBaseAttackText = void 0,\n    minionBaseAttackSpeedText = void 0,\n    archerBaseAttackText = void 0,\n    archerBaseAttackSpeedText = void 0;\nvar baseHealthUpgrade = void 0,\n    minionBaseHealthUpgrade = void 0,\n    minionBaseAttackUpgrade = void 0,\n    minionBaseAttackSpeedUpgrade = void 0,\n    archerBaseAttackUpgrade = void 0,\n    archerBaseAttackSpeedUpgrade = void 0;\n\n// Texture\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupGrassField();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.hud = document.getElementById('hud');\n    this.hudUpgrade = document.getElementById('hud-upgrade');\n    this.lastTimeStamp = 0;\n    this.started = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this, this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888, 1);\n\n      lightSource.position.set(0, 30, 0);\n      lightAmbient.position.set(0, 30, 0);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      //let texturedSurfaceGeometry = new THREE.PlaneGeometry(gridWidth, gridWidth);\n      //let texturedSurfaceMaterial = new THREE.MeshBasicMaterial({map: planeTexture});\n      //let texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      //texturedSurface.rotation.x = -0.5 * Math.PI;\n      //texturedSurface.position.y = -0.3;\n      //this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      grid.position.y = -.4;\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = 0;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'setupGrassField',\n    value: function setupGrassField() {\n      var textureUrl = 'textures/grasslight-small.jpg';\n      var texture = new THREE.TextureLoader().load(textureUrl);\n      texture.wrapS = THREE.RepeatWrapping;\n      texture.wrapT = THREE.RepeatWrapping;\n      texture.repeat.y = _constants.gridSubDiv;\n      texture.repeat.x = _constants.gridSubDiv;\n      texture.anisotropy = this.renderer.getMaxAnisotropy();\n      // build object3d\n      var geometry = new THREE.PlaneGeometry(_constants.gridWidth * 10, _constants.gridWidth * 10);\n      var material = new THREE.MeshPhongMaterial({\n        map: texture,\n        shininess: 10\n      });\n      var plane = new THREE.Mesh(geometry, material);\n      plane.rotateX(-Math.PI / 2);\n      plane.position.y = -0.2;\n      this.scene.add(plane);\n\n      // let nTufts  = 2000;\n      // let positions = new Array(nTufts);\n      // for(let i = 0; i < nTufts; i++){\n      //   let position  = new THREE.Vector3();\n      //   position.x  = (Math.random()-0.5)*gridWidth;\n      //   position.z  = (Math.random()-0.5)*gridWidth;\n      //   positions[i]  = position;\n      // }\n      // let mesh  = THREEx.createGrassTufts(positions);\n      // this.scene.add(mesh);\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'startFirstGame',\n    value: function startFirstGame() {\n      var _this = this;\n\n      this.gameEngine.restart();\n\n      this.hud.classList.remove('hud--hidden');\n      this.hudUpgrade.classList.remove('hud--hidden');\n\n      this.initializeUpgradeButtons();\n      this.initializeHudTexts();\n\n      this.started = true;\n\n      window.addEventListener('click', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.myPlayer.spawnMinion(index);\n        }\n      });\n\n      window.addEventListener('keypress', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.computer.spawnMinion(index);\n        }\n      });\n    }\n  }, {\n    key: 'calculateFPS',\n    value: function calculateFPS(timestamp) {\n      var delta = timestamp - this.lastTimeStamp;\n      delta = delta / 1000;\n      this.lastTimeStamp = timestamp;\n      return Math.round(1 / delta);\n    }\n  }, {\n    key: 'updateUI',\n    value: function updateUI(timestamp) {\n      scoreText.textContent = this.gameEngine.myPlayer.score;\n      moneyText.textContent = this.gameEngine.myPlayer.money;\n      poppulationText.textContent = this.gameEngine.myPlayer.minions.length + \"/\" + this.gameEngine.myPlayer.poppulationCap;\n\n      if (this.gameEngine.myPlayer.base !== null) {\n        baseHealthText.textContent = Math.max(this.gameEngine.myPlayer.base.health, 0).toFixed(2) + \" / \" + this.gameEngine.myPlayer.base.maxHealth;\n      } else {\n        baseHealthText.textContent = \"0\";\n      }\n\n      minionBaseHealthText.textContent = _constants2.default.minion.baseHealth + _constants2.default.minion.upgrades.health.amount * this.gameEngine.myPlayer.upgrades.minionBaseHealth;\n      minionBaseAttackText.textContent = _constants2.default.minion.baseAttack + _constants2.default.minion.upgrades.attack.amount * this.gameEngine.myPlayer.upgrades.minionBaseAttack;\n      minionBaseAttackSpeedText.textContent = ((_constants2.default.minion.baseAttackSpeed + this.gameEngine.myPlayer.upgrades.minionBaseAttackSpeed * -_constants2.default.minion.upgrades.attackSpeed.amount) / 1000).toFixed(2) + 's';\n\n      archerBaseAttackText.textContent = _constants2.default.archer.baseAttack + this.gameEngine.myPlayer.upgrades.archerBaseAttack * _constants2.default.archer.upgrades.attack.amount;\n      archerBaseAttackSpeedText.textContent = ((_constants2.default.archer.baseAttackSpeed - this.gameEngine.myPlayer.upgrades.archerBaseAttackSpeed * _constants2.default.archer.upgrades.attackSpeed.amount) / 1000).toFixed(2) + \"s\";\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n\n      if (this.started) {\n        this.updateUI(timestamp);\n      }\n    }\n  }, {\n    key: 'initializeHudTexts',\n    value: function initializeHudTexts() {\n      scoreText = document.getElementById('score');\n      moneyText = document.getElementById('money');\n      poppulationText = document.getElementById('poppulation');\n      baseHealthText = document.getElementById('baseHealth');\n      minionBaseHealthText = document.getElementById('minionBaseHealth');\n      minionBaseAttackText = document.getElementById('minionBaseAttack');\n      minionBaseAttackSpeedText = document.getElementById('minionBaseAttackSpeed');\n      archerBaseAttackText = document.getElementById('archerBaseAttack');\n      archerBaseAttackSpeedText = document.getElementById('archerBaseAttackSpeed');\n    }\n  }, {\n    key: 'initializeUpgradeButtons',\n    value: function initializeUpgradeButtons() {\n      var gameView = this;\n\n      baseHealthUpgrade = document.getElementById('baseHealthUpgrade');\n      baseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeBaseHealth();\n      });\n\n      minionBaseHealthUpgrade = document.getElementById('minionBaseHealthUpgrade');\n      minionBaseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionHealth();\n      });\n\n      minionBaseAttackUpgrade = document.getElementById('minionBaseAttackUpgrade');\n      minionBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttack();\n      });\n\n      minionBaseAttackSpeedUpgrade = document.getElementById('minionBaseAttackSpeedUpgrade');\n      minionBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttackSpeed();\n      });\n\n      archerBaseAttackUpgrade = document.getElementById('archerBaseAttackUpgrade');\n      archerBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttack();\n      });\n\n      archerBaseAttackSpeedUpgrade = document.getElementById('archerBaseAttackSpeedUpgrade');\n      archerBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttackSpeed();\n      });\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":8,\"./menu-screen\":11}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar startButton = document.getElementById('startButton');\nvar restartSection = document.getElementById('restartModal');\nvar restartButton = document.getElementById('restartButton');\nvar restartModalMessage = document.getElementById('restartModalMessage');\n\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner, score) {\n\n  var text = 'Player ' + (winner.id + 1) + ' wins with a score of ' + score + '!';\n  restartModalMessage.textContent = text;\n\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner, args.score);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameView, gameEngine) {\n  startButton.addEventListener('click', function () {\n    gameView.startFirstGame();\n    closeMenu();\n  });\n\n  restartButton.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = _constants2.default.minion.baseHealth + args.healthUpgrade * _constants2.default.minion.upgrades.health.amount;\n    this.attackStrength = _constants2.default.minion.baseAttack + args.attackUpgrade * _constants2.default.minion.upgrades.attack.amount;\n    this.attackSpeed = _constants2.default.minion.baseAttackSpeed + args.attackSpeedUpgrade * -_constants2.default.minion.upgrades.attackSpeed.amount;\n    this.defaultSpeed = .3;\n\n    this.health = this.maxHealth;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.attackAnimationProperties = {\n      direction: 1,\n      speed: this.attackSpeed / 2\n    };\n\n    this.walkingAnimationProperties = {\n      direction: this.direction,\n      speed: 50 / this.defaultSpeed, // This should not change only change the speed of the minion and the animation will update accordingly\n      lastTimeStamp: null,\n      time: 0\n    };\n\n    this.killReward = {\n      money: 75,\n      score: 25\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.rotObjectMatrix = null;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: 'initializeView',\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      hitGeometry.dispose();\n      hitMaterial.dispose();\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'isObjectLoaded',\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = userData.object;\n        _this.resetWalkAnimation();\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = userData.object;\n          _this.resetWalkAnimation();\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      var critProc = Math.random();\n      return critProc >= .9 ? this.attackStrength * (Math.random() + 1) : this.attackStrength;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n      this.walkProcedure(timestamp);\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime = this.attackProperties.attackTime + delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(delta);\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(0);\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'attackLoop',\n    value: function attackLoop(delta) {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      this.animateAttack(delta);\n      if (this.attackProperties.attackTime <= this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(delta) {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        var currentAttackTime = this.attackProperties.attackTime;\n        var direction = this.attackAnimationProperties.direction;\n        var animationSpeed = this.attackAnimationProperties.speed;\n        var maxRotation = 135;\n\n        var rotation = direction * (maxRotation * (Math.PI / 180) * (delta / animationSpeed));\n        rotation = Math.min(rightArm.rotation.z + rotation, maxRotation);\n        rotation = Math.max(rotation, 0);\n\n        rightArm.rotation.z = rotation;\n        if (currentAttackTime > animationSpeed) {\n          this.attackAnimationProperties.direction = -1;\n        } else {\n          this.attackAnimationProperties.direction = 1;\n        }\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        rightArm.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'walkProcedure',\n    value: function walkProcedure(timestamp) {\n      if (!this.attack && this.walkingAnimationProperties.lastTimeStamp !== null) {\n        var delta = timestamp - this.walkingAnimationProperties.lastTimeStamp;\n        this.walkingAnimationProperties.time = this.walkingAnimationProperties.time + delta;\n        this.walkLoop(delta);\n      } else {\n        this.walkLoop(0);\n      }\n\n      this.walkingAnimationProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'walkLoop',\n    value: function walkLoop(delta) {\n      this.animateWalk(delta);\n      if (this.walkingAnimationProperties.time <= this.walkingAnimationProperties.speed) {\n        return;\n      }\n      this.walkingAnimationProperties.time = 0;\n    }\n  }, {\n    key: 'animateWalk',\n    value: function animateWalk(delta) {\n      if (this.viewObj.children.length > 1 && !this.attack) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n        var animationTime = this.walkingAnimationProperties.time;\n        var animationSpeed = this.walkingAnimationProperties.speed;\n        var direction = this.walkingAnimationProperties.direction;\n        var maxRotation = 45;\n\n        var rotation = maxRotation * (delta / animationSpeed);\n\n        if (direction) {\n          this.animateLegForward(leftLeg, rotation, maxRotation, delta);\n          this.animateLegBack(rightLeg, rotation, maxRotation, delta);\n        } else {\n          this.animateLegForward(rightLeg, rotation, maxRotation, delta);\n          this.animateLegBack(leftLeg, rotation, maxRotation, delta);\n        }\n\n        if (this.toDegrees(leftLeg.rotation.z) >= maxRotation || this.toDegrees(leftLeg.rotation.z) <= -maxRotation) {\n          this.walkingAnimationProperties.direction = !this.walkingAnimationProperties.direction;\n        }\n      }\n    }\n  }, {\n    key: 'animateLegBack',\n    value: function animateLegBack(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(-maxRotation);\n\n      if (leg.rotation.z + this.toRadians(-rotation) < max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(-rotation);\n      }\n    }\n  }, {\n    key: 'animateLegForward',\n    value: function animateLegForward(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(maxRotation);\n      if (leg.rotation.z + this.toRadians(rotation) > max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(rotation);\n      }\n    }\n  }, {\n    key: 'resetWalkAnimation',\n    value: function resetWalkAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n\n        leftLeg.rotation.z = 0;\n        rightLeg.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'toDegrees',\n    value: function toDegrees(angleRadians) {\n      return angleRadians * 180 / Math.PI;\n    }\n  }, {\n    key: 'toRadians',\n    value: function toRadians(angleDegrees) {\n      return angleDegrees / 180 * Math.PI;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":8}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _archer = require('./archer');\n\nvar _archer2 = _interopRequireDefault(_archer);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.colliderSystem = args.colliderSystem;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n    this.poppulationCap = 30;\n\n    this.setUpgradeValues();\n    this.loader = new THREE.ObjectLoader();\n\n    this.setupGameState();\n    this.spawnBase();\n    this.spawnArchers();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnArchers',\n    value: function spawnArchers() {\n      var _this = this;\n\n      var archer = new _archer2.default({\n        scene: this.scene,\n        colliderList: this.colliderList,\n        startingZ: 2,\n        startingY: 20,\n        startingX: this.spawnPos,\n        direction: this.direction,\n        player: this\n      });\n\n      this.archers.push(archer);\n\n      this.loader.load('./geometry/wizard.json', function (obj) {\n        obj.position.y = -4;\n        archer.viewObj.add(obj);\n\n        archer.bodyModel = archer.viewObj.children[2];\n        archer.rightArm = archer.bodyModel.children[1];\n        archer.rightArm.rotation.z = 135 / 180 * Math.PI;\n        if (archer.direction === -1) {\n          archer.viewObj.children[2].rotation.y = Math.PI;\n          archer.startingRotation = Math.PI;\n        }\n\n        _this.scene.add(archer.viewObj);\n      });\n    }\n  }, {\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this2 = this;\n\n      if (this.minions.length < this.poppulationCap) {\n        if (this.money >= this.minionCost) {\n          if (!this.gameOver) {\n            this.money -= this.minionCost;\n          }\n\n          var minion = new _minion2.default({\n            id: this.minionId++,\n            healthUpgrade: this.upgrades.minionBaseHealth,\n            attackUpgrade: this.upgrades.minionBaseAttack,\n            attackSpeedUpgrade: this.upgrades.minionBaseAttackSpeed,\n            playerId: this.id,\n            direction: this.direction,\n            startingZ: index,\n            colliderList: this.colliderList,\n            player: this\n          });\n\n          this.minions.push(minion);\n          this.loader.load('./geometry/model.json', function (obj) {\n            obj.position.y = -4;\n            minion.viewObj.add(obj);\n\n            if (minion.direction === -1) {\n              minion.viewObj.children[1].rotation.y = Math.PI;\n            }\n\n            _this2.scene.add(minion.viewObj);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      if (this.gameOver) {\n        return;\n      }\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this3 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.archers.forEach(function (archer) {\n        archer.runLoop(timestamp);\n      });\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (!minion.attack) {\n          minion.resetAttackAnimation();\n        }\n        if (minion.destroy) {\n          _this3.destroyMinion(minion, index);\n        }\n      });\n\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n      minion.collider.removeEventListener('contactEnter');\n      minion.collider.removeEventListener('contactStay');\n      minion.collider.removeEventListener('contactExit');\n      minion.collider.removeEventListener('contactRemoved');\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      var _this4 = this;\n\n      this.archers.forEach(function (archer) {\n        _this4.scene.remove(archer.viewObj);\n        _this4.colliderList.splice(_this4.findColliderIndex(archer.collider.id), 1);\n      });\n      this.archers.length = 0;\n\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setGameOver',\n    value: function setGameOver() {\n      this.gameOver = true;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this5 = this;\n\n      this.minions.forEach(function (minion) {\n        _this5.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.archers.forEach(function (archers) {\n        _this5.scene.remove(archers.viewObj);\n      });\n\n      this.gameOver = false;\n      this.setUpgradeValues();\n      this.setupGameState();\n      this.spawnBase();\n      this.spawnArchers();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.archers = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 50;\n      this.lost = false;\n    }\n  }, {\n    key: 'setUpgradeValues',\n    value: function setUpgradeValues() {\n      this.upgrades = {\n        baseHealth: 0,\n        minionBaseHealth: 0,\n        minionBaseAttack: 0,\n        minionBaseAttackSpeed: 0,\n        archerBaseAttack: 0,\n        archerBaseAttackSpeed: 0\n      };\n    }\n  }, {\n    key: 'getBaseHealthUpgradeCost',\n    value: function getBaseHealthUpgradeCost() {\n      return _constants2.default.base.upgrades.health.cost * (this.upgrades.baseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeBaseHealth',\n    value: function canUpgradeBaseHealth() {\n      return this.money > this.getBaseHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeBaseHealth',\n    value: function upgradeBaseHealth() {\n      if (this.canUpgradeBaseHealth()) {\n        this.upgrades.baseHealth++;\n        this.base.maxHealth += _constants2.default.base.upgrades.health.amount;\n        this.base.health += _constants2.default.base.upgrades.health.amount;\n        this.money -= _constants2.default.base.upgrades.health.cost * this.upgrades.baseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionHealthUpgradeCost',\n    value: function getMinionHealthUpgradeCost() {\n      return _constants2.default.minion.upgrades.health.cost * (this.upgrades.minionBaseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionHealth',\n    value: function canUpgradeMinionHealth() {\n      return this.money > this.getMinionHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionHealth',\n    value: function upgradeMinionHealth() {\n      if (this.canUpgradeMinionHealth()) {\n        this.upgrades.minionBaseHealth++;\n        this.money -= _constants2.default.minion.upgrades.health.cost * this.upgrades.minionBaseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionAttackUpgradeCost',\n    value: function getMinionAttackUpgradeCost() {\n      return _constants2.default.minion.upgrades.attack.cost * (this.upgrades.minionBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttack',\n    value: function canUpgradeMinionAttack() {\n      return this.money > this.getMinionAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttack',\n    value: function upgradeMinionAttack() {\n      if (this.canUpgradeMinionAttack()) {\n        this.upgrades.minionBaseAttack++;\n        this.money -= _constants2.default.minion.upgrades.attack.cost * this.upgrades.minionBaseAttack;\n      }\n    }\n  }, {\n    key: 'getMinionAttackSpeedUpgradeCost',\n    value: function getMinionAttackSpeedUpgradeCost() {\n      return _constants2.default.minion.upgrades.attackSpeed.cost * (this.upgrades.minionBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttackSpeed',\n    value: function canUpgradeMinionAttackSpeed() {\n      return this.money > this.getMinionAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttackSpeed',\n    value: function upgradeMinionAttackSpeed() {\n      if (this.canUpgradeMinionAttackSpeed()) {\n        this.upgrades.minionBaseAttackSpeed++;\n        this.money -= _constants2.default.minion.upgrades.attackSpeed.cost * this.upgrades.minionBaseAttackSpeed++;\n      }\n    }\n  }, {\n    key: 'getWizardAttackUpgradeCost',\n    value: function getWizardAttackUpgradeCost() {\n      return _constants2.default.archer.upgrades.attack.cost * (this.upgrades.archerBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttack',\n    value: function canUpgradeWizardAttack() {\n      return this.money > this.getWizardAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttack',\n    value: function upgradeWizardAttack() {\n      if (this.canUpgradeWizardAttack()) {\n        this.archers.forEach(function (archer) {\n          archer.attackStrength += _constants2.default.archer.upgrades.attack.amount;\n        });\n\n        this.upgrades.archerBaseAttack++;\n        this.money -= _constants2.default.archer.upgrades.attack.cost * this.upgrades.archerBaseAttack;\n      }\n    }\n  }, {\n    key: 'getWizardAttackSpeedUpgradeCost',\n    value: function getWizardAttackSpeedUpgradeCost() {\n      return _constants2.default.archer.upgrades.attackSpeed.cost * (this.upgrades.archerBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttackSpeed',\n    value: function canUpgradeWizardAttackSpeed() {\n      return this.money > this.getWizardAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttackSpeed',\n    value: function upgradeWizardAttackSpeed() {\n      if (this.canUpgradeWizardAttackSpeed()) {\n        this.archers.forEach(function (archer) {\n          archer.attackSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n          archer.arrowSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n        });\n\n        this.upgrades.archerBaseAttackSpeed++;\n        this.money -= _constants2.default.archer.upgrades.attackSpeed.cost * this.upgrades.archerBaseAttackSpeed;\n      }\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./archer\":6,\"./base\":7,\"./constants\":8,\"./minion\":12}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nexports.setupPerformance = setupPerformance;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n  renderer.shadowMapEnabled = true;\n  renderer.shadowMapType = THREE.PCFSoftShadowMap;\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\nfunction setupPerformance() {\n  var rendererStats = new THREEx.RendererStats();\n  rendererStats.domElement.style.position = 'absolute';\n  rendererStats.domElement.style.left = '0px';\n  rendererStats.domElement.style.bottom = '0px';\n  document.body.appendChild(rendererStats.domElement);\n  return rendererStats;\n}\n\n},{}]},{},[4])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhaVxcZGVmZW5zaXZlLWFpLmpzIiwic3JjXFxqc1xcYWlcXHJhbmRvbS1haS5qcyIsInNyY1xcanNcXGFpXFxzbWFydC1haS5qcyIsInNyY1xcanNcXGFwcC5qcyIsInNyY1xcanNcXG1vZHVsZXNcXGFpLXBsYXllci5qcyIsInNyY1xcanNcXG1vZHVsZXNcXGFyY2hlci5qcyIsInNyY1xcanNcXG1vZHVsZXNcXGJhc2UuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxjb25zdGFudHMuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxnYW1lLWVuZ2luZS5qcyIsInNyY1xcanNcXG1vZHVsZXNcXGdhbWUtdmlldy5qcyIsInNyY1xcanNcXG1vZHVsZXNcXG1lbnUtc2NyZWVuLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcbWluaW9uLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xccGxheWVyLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcdmlldy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztrQkNFZSxVQUFTLFNBQVQsRUFBb0I7QUFDakMsTUFBSSxNQUFNLEVBQVY7QUFDQSxPQUFJLElBQUksSUFBSSxDQUFaLEVBQWUseUJBQWYsRUFBK0IsR0FBL0IsRUFBb0M7QUFDbEMsUUFBSSxDQUFKLElBQVMsQ0FBVDtBQUNEOztBQUVELFlBQVUsT0FBVixDQUFrQixVQUFDLEtBQUQsRUFBVztBQUMzQixRQUFJLE1BQU0sU0FBVjtBQUNELEdBRkQ7O0FBSUEsT0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFwQixDQUE0QixVQUFDLE1BQUQsRUFBWTtBQUN0QyxRQUFJLE9BQU8sU0FBWDtBQUNELEdBRkQ7O0FBSUEsTUFBSSxhQUFhLENBQUMsQ0FBbEI7QUFDQSxNQUFJLGFBQWEsTUFBakI7QUFDQSxTQUFPLE1BQVAsQ0FBYyxHQUFkLEVBQW1CLE9BQW5CLENBQTJCLFVBQUMs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Z0IsSUFBSSxPQUFPLGFBQVgsRUFBcEI7QUFDQSxnQkFBYyxVQUFkLENBQXlCLEtBQXpCLENBQStCLFFBQS9CLEdBQTBDLFVBQTFDO0FBQ0EsZ0JBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixJQUEvQixHQUFzQyxLQUF0QztBQUNBLGdCQUFjLFVBQWQsQ0FBeUIsS0FBekIsQ0FBK0IsTUFBL0IsR0FBd0MsS0FBeEM7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTJCLGNBQWMsVUFBekM7QUFDQSxTQUFPLGFBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuLi9tb2R1bGVzL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcclxuICBsZXQgbWFwID0ge307XHJcbiAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgbWFwW2ldID0gMDtcclxuICB9XHJcblxyXG4gIG9wcG9uZW50cy5mb3JFYWNoKChlbmVteSkgPT4ge1xyXG4gICAgbWFwW2VuZW15LnN0YXJ0aW5nWl0tLTtcclxuICB9KTtcclxuXHJcbiAgdGhpcy5wbGF5ZXIubWluaW9ucy5mb3JFYWNoKChtaW5pb24pID0+IHtcclxuICAgIG1hcFttaW5pb24uc3RhcnRpbmdaXSsrXHJcbiAgfSk7XHJcblxyXG4gIGxldCBzcGF3bkluZGV4ID0gLTE7XHJcbiAgbGV0IHNwYXduVmFsdWUgPSAxMDAwMDA7XHJcbiAgT2JqZWN0LnZhbHVlcyhtYXApLmZvckVhY2goKHZhbCwgaW5kZXgpID0+IHtcclxuICAgIGlmKHZhbCA8IHNwYXduVmFsdWUpIHtcclxuICAgICAgc3Bhd25WYWx1ZSA9IHZhbDtcclxuICAgICAgc3Bhd25JbmRleCA9IGluZGV4XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBzcGF3bkluZGV4O1xyXG59IiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ob3Bwb25lbnRzKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XHJcbiB9IiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xyXG5cclxuQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBzZWxmKSB7IFxyXG4gICAgcmV0dXJuIHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4O1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMsIGZyaWVuZGxpZXMsIHNwYXduUG9zKSB7XHJcbiAgbGV0IHN0YXJ0aW5nUG9zID0gc3Bhd25Qb3M7XHJcblxyXG4gIGxldCBmcmllbmRseU1hcCA9IGZyaWVuZGxpZXMubWFwKG0gPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcm93OiBtLnN0YXJ0aW5nWixcclxuICAgICAgZGlzdGFuY2U6IG0uZ2V0UG9zaXRpb24oKS54IC0gc3RhcnRpbmdQb3NcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgbGV0IG9wcG9uZW50TWFwID0gb3Bwb25lbnRzLm1hcChtID0+IHtcclxuXHJcbiAgICBsZXQgZGlzdGFuY2UgPSBzdGFydGluZ1BvcyAtIG0uZ2V0UG9zaXRpb24oKS54O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcm93OiBtLnN0YXJ0aW5nWixcclxuICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxuICBsZXQgcm93QXJyYXkgPSBbXTtcclxuICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7IHJvd0FycmF5LnB1c2goaSk7IH1cclxuXHJcbiAgbGV0IGRlY2lzaW9uID0ge1xyXG4gICAgaGFzRnJpZW5kbGllczogW10sXHJcbiAgICBjbG9zZXN0SW5kZXg6IC0xLFxyXG4gICAgY2xvc2VzdFZhbDogOTk5OTksXHJcbiAgICBkaXN0YW5jZVRpZXM6IFtdXHJcblxyXG4gIH07XHJcblxyXG4gIGZyaWVuZGx5TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XHJcbiAgICBkZWNpc2lvbi5oYXNGcmllbmRsaWVzLnB1c2godmFsLnJvdyk7XHJcbiAgfSk7XHJcblxyXG5cclxuICBvcHBvbmVudE1hcC5mb3JFYWNoKCh2YWwsIGlkeCkgPT4ge1xyXG4gICAgaWYodmFsLmRpc3RhbmNlIDwgZGVjaXNpb24uY2xvc2VzdFZhbCkge1xyXG4gICAgICBkZWNpc2lvbi5jbG9zZXN0SW5kZXggPSB2YWwucm93O1xyXG4gICAgICBkZWNpc2lvbi5jbG9zZXN0VmFsID0gdmFsLmRpc3RhbmNlO1xyXG5cclxuICAgICAgaWYoZGVjaXNpb24uZGlzdGFuY2VUaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMubGVuZ3RoID0gMDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmKHZhbC5kaXN0YW5jZSA9PT0gZGVjaXNpb24uY2xvc2VzdFZhbCkge1xyXG4gICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMucHVzaCh2YWwucm93KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcclxuICBkZWNpc2lvbi5oYXNGcmllbmRsaWVzID0gZGVjaXNpb24uaGFzRnJpZW5kbGllcy51bmlxdWUoKTtcclxuXHJcbiAgbGV0IGZ1bGxJZHhBcnIgPSByb3dBcnJheS5zbGljZSgwKTtcclxuXHJcbiAgZGVjaXNpb24uZ2FwcyA9IGZ1bGxJZHhBcnIuZmlsdGVyKHggPT4ge1xyXG4gICAgcmV0dXJuIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMuaW5kZXhPZih4KSA8IDA7XHJcbiAgfSk7XHJcblxyXG5cclxuICAvL2lmKGZyaWVuZGxpZXMubGVuZ3RoID4gMykge1xyXG4gICAgLy9mcmllbmRsaWVzWzJdLnZpZXdPYmoucG9zaXRpb24ueiArPSAxO1xyXG4gIC8vfVxyXG5cclxuXHJcbiAgbGV0IGFycmF5VG9Vc2U7XHJcbiAgaWYoZGVjaXNpb24uY2xvc2VzdFZhbCA8IGdyaWRXaWR0aC8yKSB7XHJcbiAgICBhcnJheVRvVXNlID0gZGVjaXNpb24uZGlzdGFuY2VUaWVzO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcnJheVRvVXNlID0gZGVjaXNpb24uZ2FwcztcclxuICB9XHJcblxyXG4gIGxldCBhcnJJZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheVRvVXNlLmxlbmd0aCk7XHJcbiAgcmV0dXJuIGFycmF5VG9Vc2VbYXJySWR4XTtcclxufSIsImltcG9ydCB7XHJcbiAgc2V0dXBTY3JlZW5WaWV3LCBzZXR1cFBlcmZvcm1hbmNlXHJcbn0gZnJvbSAnLi9tb2R1bGVzL3ZpZXcnO1xyXG5cclxuaW1wb3J0IEdhbWVFbmdpbmUgZnJvbSAnLi9tb2R1bGVzL2dhbWUtZW5naW5lJztcclxuaW1wb3J0IEdhbWVWaWV3IGZyb20gJy4vbW9kdWxlcy9nYW1lLXZpZXcnO1xyXG5cclxuLy8gR2xvYmFsc1xyXG5sZXQgZ2xvYmFscztcclxuXHJcbmxldCBnYW1lRW5naW5lLCBnYW1lVmlldztcclxubGV0IHJlbmRlcmVyU3RhdHM7XHJcbmxldCBwZXJmb3JtYW5jZSA9IHRydWU7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gIGxldCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSBzZXR1cFNjcmVlblZpZXcoKTtcclxuICBnbG9iYWxzID0geyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9O1xyXG5cclxuICBpZihwZXJmb3JtYW5jZSkge1xyXG4gICAgcmVuZGVyZXJTdGF0cyA9IHNldHVwUGVyZm9ybWFuY2UoKTtcclxuICB9XHJcblxyXG4gIGdhbWVFbmdpbmUgPSBuZXcgR2FtZUVuZ2luZShnbG9iYWxzKTtcclxuICBnYW1lVmlldyA9IG5ldyBHYW1lVmlldyhnbG9iYWxzLCBnYW1lRW5naW5lKTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0aW1lc3RhbXApIHtcclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcclxuICBnYW1lVmlldy5yZW5kZXJMb29wKHRpbWVzdGFtcCk7XHJcblxyXG4gIGdsb2JhbHMucmVuZGVyZXIucmVuZGVyKGdsb2JhbHMuc2NlbmUsIGdsb2JhbHMuY2FtZXJhKTtcclxuICBpZihwZXJmb3JtYW5jZSkge1xyXG4gICAgcmVuZGVyZXJTdGF0cy51cGRhdGUoZ2xvYmFscy5yZW5kZXJlcik7XHJcbiAgfVxyXG59XHJcblxyXG5pbml0KCk7XHJcbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0IHNtYXJ0QUkgZnJvbSAnLi4vYWkvc21hcnQtYWknO1xyXG5pbXBvcnQgZGVmZW5zaXZlQUkgZnJvbSAnLi4vYWkvZGVmZW5zaXZlLWFpJztcclxuaW1wb3J0IHJhbmRvbUFJIGZyb20gJy4uL2FpL3JhbmRvbS1haSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBSSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuc21hcnRBSSA9IHNtYXJ0QUk7XHJcbiAgICB0aGlzLmRlZmVuc2l2ZUFJID0gZGVmZW5zaXZlQUk7XHJcbiAgICB0aGlzLnJhbmRvbUFJID0gcmFuZG9tQUk7XHJcbiAgICB0aGlzLmRldGVybWluZUFJRnVuY3Rpb24oYXJncy5wZXJzb25hbGl0eSk7XHJcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xyXG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gMzUwO1xyXG4gICAgdGhpcy5sYXN0VXBncmFkZSA9IDA7XHJcbiAgICB0aGlzLnVwZ3JhZGVJbnRlcnZhbCA9IDIwMDA7XHJcbiAgICB0aGlzLmxhc3RTcGF3biA9IDA7XHJcbiAgICB0aGlzLnBvcHB1bGF0aW9uTGltaXQgPSAzMDtcclxuICB9XHJcblxyXG4gIGNhblNwYXduKHRpbWVzdGFtcCkge1xyXG4gICAgcmV0dXJuIHRpbWVzdGFtcCAtIHRoaXMubGFzdFNwYXduID4gdGhpcy5zcGF3bkludGVydmFsICYmIHRoaXMucGxheWVyLm1pbmlvbnMubGVuZ3RoIDwgdGhpcy5wb3BwdWxhdGlvbkxpbWl0O1xyXG4gIH1cclxuXHJcbiAgY2FuVXBncmFkZSh0aW1lc3RhbXApIHtcclxuICAgIHJldHVybiB0aW1lc3RhbXAgLSB0aGlzLmxhc3RVcGdyYWRlID4gdGhpcy51cGdyYWRlSW50ZXJ2YWw7XHJcbiAgfVxyXG5cclxuICBydW5Mb29wKHRpbWVzdGFtcCwgb3Bwb25lbnRzKSB7XHJcbiAgICBpZih0aGlzLmNhblVwZ3JhZGUodGltZXN0YW1wKSkge1xyXG4gICAgICB0aGlzLmFwcGx5VXBncmFkZXModGhpcy5jaGVja1VwZ3JhZGVzKCkpO1xyXG4gICAgICB0aGlzLmxhc3RVcGdyYWRlID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCF0aGlzLmNhblNwYXduKHRpbWVzdGFtcCkpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IHNwYXduSW5kZXggPSB0aGlzLkFJRnVuY3Rpb24ob3Bwb25lbnRzLCB0aGlzLnBsYXllci5taW5pb25zLCB0aGlzLnBsYXllci5zcGF3blBvcyk7XHJcblxyXG4gICAgaWYoc3Bhd25JbmRleCA+PSAwKSB7XHJcbiAgICAgIHRoaXMucGxheWVyLnNwYXduTWluaW9uKHNwYXduSW5kZXgpO1xyXG4gICAgICB0aGlzLmxhc3RTcGF3biA9IHRpbWVzdGFtcDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRldGVybWluZUFJRnVuY3Rpb24ocGVyc29uYWxpdHkpIHtcclxuICAgIGlmKHBlcnNvbmFsaXR5KSB7XHJcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbcGVyc29uYWxpdHldO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5BSUZ1bmN0aW9uID0gdGhpc1tcInJhbmRvbUFJXCJdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9jaGVjayBhbGwgdXBncmFkZUNvc3RzIHRvIHNlZSBpZiBhbnkgY2FuIGJlIHVwZ3JhZGVzIHJldHVybnMgYSBsaXN0IG9mIHdoYXQgY2FuIGJlIHVwZ3JhZGVkIGFuZCB0aGVpciBjb3N0XHJcbiAgY2hlY2tVcGdyYWRlcygpIHtcclxuICAgIGxldCB1cGdyYWRlcyA9IFtdO1xyXG5cclxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVCYXNlSGVhbHRoKCkpIHtcclxuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlQmFzZUhlYWx0aFwiLCBjb3N0OnRoaXMucGxheWVyLmdldEJhc2VIZWFsdGhVcGdyYWRlQ29zdCgpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZU1pbmlvbkhlYWx0aCgpKSB7XHJcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZU1pbmlvbkhlYWx0aFwiLCBjb3N0OiB0aGlzLnBsYXllci5nZXRNaW5pb25IZWFsdGhVcGdyYWRlQ29zdCgpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZU1pbmlvbkF0dGFjaygpKSB7XHJcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZU1pbmlvbkF0dGFja1wiLCBjb3N0OiB0aGlzLnBsYXllci5nZXRNaW5pb25BdHRhY2tVcGdyYWRlQ29zdCgpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkpIHtcclxuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlTWluaW9uQXR0YWNrU3BlZWRcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0TWluaW9uQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZVdpemFyZEF0dGFjaygpKSB7XHJcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZVdpemFyZEF0dGFja1wiLCBjb3N0OiB0aGlzLnBsYXllci5nZXRXaXphcmRBdHRhY2tVcGdyYWRlQ29zdCgpfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkpIHtcclxuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlV2l6YXJkQXR0YWNrU3BlZWRcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0V2l6YXJkQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB1cGdyYWRlcztcclxuICB9XHJcblxyXG4gIGFwcGx5VXBncmFkZXModXBncmFkZXMpIHtcclxuICAgIHVwZ3JhZGVzLmZvckVhY2goKHVwZ3JhZGUpID0+IHtcclxuICAgICAgaWYoKHRoaXMucGxheWVyLm1vbmV5IC8gMikgPiB1cGdyYWRlLmNvc3QgJiYgdGhpcy5wbGF5ZXIubW9uZXkgPiA3NTApIHtcclxuICAgICAgICBsZXQgZm4gPSB0aGlzLnBsYXllclt1cGdyYWRlLm5hbWVdO1xyXG4gICAgICAgIGZuLmFwcGx5KHRoaXMucGxheWVyKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXJjaGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XHJcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xyXG4gICAgdGhpcy5wbGF5ZXJJZCA9IHRoaXMucGxheWVyLmlkO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcclxuXHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xyXG4gICAgdGhpcy5zdGFydGluZ1ogPSBhcmdzLnN0YXJ0aW5nWjtcclxuICAgIHRoaXMuc3RhcnRpbmdZID0gYXJncy5zdGFydGluZ1kgKyA0O1xyXG4gICAgdGhpcy5zdGFydGluZ1ggPSBhcmdzLnN0YXJ0aW5nWCAtICg0ICogdGhpcy5kaXJlY3Rpb24pO1xyXG5cclxuICAgIHRoaXMudGFyZ2V0TGlzdCA9IFtdO1xyXG4gICAgdGhpcy5hcnJvd3MgPSBbXTtcclxuXHJcbiAgICB0aGlzLnN0YXJ0aW5nUm90YXRpb24gPSAwO1xyXG4gICAgbGV0IF85MGRlZyA9ICg5MC8xODApICogTWF0aC5QSTtcclxuICAgIGxldCBfMTM1ZGVnID0gKDEzNS8xODApICogTWF0aC5QSTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMgPSB7XHJcbiAgICAgIGFybToge1xyXG4gICAgICAgIHN0YXJ0aW5nQW5nbGU6IF8xMzVkZWcsXHJcbiAgICAgICAgZW5kaW5nQW5nbGU6IF85MGRlZyxcclxuICAgICAgICBhbmdsZURpZmZlcmVuY2U6IF8xMzVkZWcgLSBfOTBkZWcsXHJcbiAgICAgICAgc3BlZWREb3duOiAyMDAsXHJcbiAgICAgICAgc3BlZWRVcDogMTUwLFxyXG4gICAgICAgIGxhc3RBbmltYXRlOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIGFycm93U3BlZWQ6IDUwMFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcclxuICAgICAgbGFzdEF0dGFjazogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmF0dGFja1NwZWVkID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrU3BlZWQ7XHJcbiAgICB0aGlzLmFycm93U3BlZWQgPSBDb25zdGFudHMuYXJjaGVyLmJhc2VBcnJvd1NwZWVkO1xyXG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IENvbnN0YW50cy5hcmNoZXIuYmFzZUF0dGFjaztcclxuICAgIHRoaXMuYXJyb3dJZCA9IDA7XHJcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KCk7XHJcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplVmlldyhoaXRCb3hPcGFjaXR5PTApIHtcclxuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG5cclxuICAgIGxldCBib2R5RyA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgwLjAxLCAwLjAxMywgMC4wMTMpO1xyXG4gICAgbGV0IGJvZHlNYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHgwMEZGMDAgfSk7XHJcbiAgICB0aGlzLmJvZHkgPSBuZXcgVEhSRUUuTWVzaChib2R5RywgYm9keU1hdCk7XHJcblxyXG4gICAgbGV0IGhpdEJveEcgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoIDYwLCA2MCwgNjAgKTtcclxuICAgIHZhciBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgge2NvbG9yOiAweGZmZmYwMCwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHksIGRlcHRoV3JpdGU6IGZhbHNlfSApO1xyXG4gICAgdGhpcy5oaXRCb3ggPSBuZXcgVEhSRUUuTWVzaCggaGl0Qm94RywgbWF0ZXJpYWwgKTtcclxuXHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcclxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5yYW5nZWQgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5ib2R5KTtcclxuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oaXRCb3gpO1xyXG5cclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi5zZXQodGhpcy5zdGFydGluZ1gsIHRoaXMuc3RhcnRpbmdZLCB0aGlzLnN0YXJ0aW5nWik7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcclxuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xyXG5cclxuICAgICAgaWYodXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxyXG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQgfHwgdXNlckRhdGEuaW1tdW5lVG9SYW5nZSkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgIHRoaXMudGFyZ2V0TGlzdC5wdXNoKHVzZXJEYXRhLm9iamVjdCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RTdGF5JywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgbGV0IHVzZXJEYXRhID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YTtcclxuXHJcbiAgICAgIGlmKHVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cclxuICAgICAgaWYodXNlckRhdGEucmFuZ2VkIHx8IHVzZXJEYXRhLmltbXVuZVRvUmFuZ2UpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICBpZih0aGlzLmZpbmRDb2xsaWRlckluZGV4KG90aGVyQ29sbGlkZXIuaWQpID09PSAtMSkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0TGlzdC5wdXNoKHVzZXJEYXRhLm9iamVjdCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgdGhpcy50YXJnZXRMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG90aGVyQ29sbGlkZXIpLCAxKTtcclxuICAgICAgdGhpcy5kZXRlcm1pbmVUYXJnZXQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEV4aXQnLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICB0aGlzLnJlbW92ZVRhcmdldChvdGhlckNvbGxpZGVyKTtcclxuICAgICAgdGhpcy5kZXRlcm1pbmVUYXJnZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50YXJnZXRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKHRoaXMudGFyZ2V0TGlzdFtpXS5jb2xsaWRlci5pZCA9PT0gaWQpIHtcclxuICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5kZXg7XHJcbiAgfVxyXG5cclxuICByZW1vdmVUYXJnZXQoaWQpIHtcclxuICAgIHRoaXMudGFyZ2V0TGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleChpZCksIDEpO1xyXG4gIH1cclxuXHJcbiAgY2FuQXR0YWNrKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy50YXJnZXRMaXN0Lmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgIGlmKHRoaXMuaW5pdGlhdGVBdHRhY2sgfHwgdGhpcy5yZWNoYXJnaW5nKSB7IHJldHVybiBmYWxzZTsgfVxyXG5cclxuICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0QXR0YWNrO1xyXG4gICAgcmV0dXJuIGRlbHRhID49IHRoaXMuYXR0YWNrU3BlZWQ7XHJcbiAgfVxyXG5cclxuICBnZXRBdHRhY2tWYWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmF0dGFja1N0cmVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgZGV0ZXJtaW5lVGFyZ2V0KCkge1xyXG4gICAgaWYodGhpcy50YXJnZXRMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0TGlzdFswXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xyXG4gICAgaWYoIXRoaXMuY2FuQXR0YWNrKHRpbWVzdGFtcCkpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IHRhcmdldCA9IHRoaXMuZGV0ZXJtaW5lVGFyZ2V0KCk7XHJcbiAgICBpZih0YXJnZXQgIT09IG51bGwgJiYgdGFyZ2V0LnZpZXdPYmopIHtcclxuICAgICAgdGhpcy5uZXh0VGFyZ2V0ID0ge1xyXG4gICAgICAgIHRhcmdldDogdGFyZ2V0LFxyXG4gICAgICAgIGNhbGxiYWNrOiAodGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgICB0YXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcclxuICAgICAgICAgIGlmKHRhcmdldC5oZWFsdGggPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5wcm9jZXNzUmV3YXJkKHRhcmdldC5raWxsUmV3YXJkKTtcclxuXHJcbiAgICAgICAgICAgIHRhcmdldC5hdHRhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGFyZ2V0LmRlc3Ryb3kgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRhcmdldCh0YXJnZXQuY29sbGlkZXIuaWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmluaXRpYXRlQXR0YWNrID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdEF0dGFjayA9IHRpbWVzdGFtcDtcclxuICB9XHJcblxyXG5cclxuICBzcGF3bkFycm93KHRhcmdldCwgdGltZXN0YW1wLCBjYWxsYmFjaykge1xyXG4gICAgbGV0IGFycm93RyA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgxLCAxMCwgMTApO1xyXG4gICAgbGV0IGFycm93TWF0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgY29sb3I6IDB4OUMzNzI0IH0pO1xyXG4gICAgbGV0IGFycm93ID0gbmV3IFRIUkVFLk1lc2goYXJyb3dHLCBhcnJvd01hdCk7XHJcbiAgICBhcnJvdy5uYW1lID0gXCJBcnJvd1wiO1xyXG4gICAgdGhpcy5zY2VuZS5hZGQoYXJyb3cpO1xyXG5cclxuICAgIGFycm93LnBvc2l0aW9uLnNldCh0aGlzLnN0YXJ0aW5nWCwgdGhpcy5zdGFydGluZ1kgKyAyLCB0aGlzLnN0YXJ0aW5nWik7XHJcblxyXG4gICAgbGV0IGlkID0gdGhpcy5hcnJvd0lkKys7XHJcblxyXG4gICAgbGV0IHN0YXJ0aW5nWSA9IGFycm93LnBvc2l0aW9uLnk7XHJcbiAgICBsZXQgbWF4ID0gc3RhcnRpbmdZICsgNTtcclxuICAgIGxldCBlbmRpbmdZID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueTtcclxuXHJcbiAgICBsZXQgeF8xID0gMDtcclxuICAgIGxldCB5XzEgPSBzdGFydGluZ1k7XHJcblxyXG4gICAgbGV0IHhfMiA9IDAuNTtcclxuICAgIGxldCB5XzIgPSBtYXg7XHJcblxyXG4gICAgbGV0IHhfMyA9IDE7XHJcbiAgICBsZXQgeV8zID0gZW5kaW5nWTtcclxuXHJcbiAgICBsZXQgYSA9IHlfMS8oKHhfMS14XzIpKih4XzEteF8zKSkgKyB5XzIvKCh4XzIteF8xKSooeF8yLXhfMykpICsgeV8zLygoeF8zLXhfMSkqKHhfMy14XzIpKVxyXG5cclxuICAgIGxldCBiID0gLXlfMSooeF8yK3hfMykvKCh4XzEteF8yKSooeF8xLXhfMykpXHJcbiAgICAgICAgLXlfMiooeF8xK3hfMykvKCh4XzIteF8xKSooeF8yLXhfMykpXHJcbiAgICAgICAgLXlfMyooeF8xK3hfMikvKCh4XzMteF8xKSooeF8zLXhfMikpXHJcblxyXG4gICAgbGV0IGMgPSB5XzEqeF8yKnhfMy8oKHhfMS14XzIpKih4XzEteF8zKSlcclxuICAgICAgKyB5XzIqeF8xKnhfMy8oKHhfMi14XzEpKih4XzIteF8zKSlcclxuICAgICAgKyB5XzMqeF8xKnhfMi8oKHhfMy14XzEpKih4XzMteF8yKSlcclxuXHJcblxyXG5cclxuICAgIGxldCB5RnVuY3Rpb24gPSAoZGVsdGEpID0+IHtcclxuICAgICAgcmV0dXJuIChhICogKGRlbHRhICogZGVsdGEpKSArIChiICogZGVsdGEpICsgYztcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbV94ID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueCAtIGFycm93LnBvc2l0aW9uLng7XHJcbiAgICBsZXQgY194ID0gYXJyb3cucG9zaXRpb24ueDtcclxuXHJcbiAgICBsZXQgeEZ1bmN0aW9uID0gKGRlbHRhKSA9PiB7XHJcbiAgICAgIHJldHVybiAobV94ICogZGVsdGEpICsgY194O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtX3ogPSB0YXJnZXQudmlld09iai5wb3NpdGlvbi56IC0gYXJyb3cucG9zaXRpb24uejtcclxuICAgIGxldCBjX3ogPSBhcnJvdy5wb3NpdGlvbi56O1xyXG5cclxuICAgIGxldCB6RnVuY3Rpb24gPSAoZGVsdGEpID0+IHtcclxuICAgICAgcmV0dXJuIChtX3ogKiBkZWx0YSkgKyBjX3o7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRoaXMuYXJyb3dzLnB1c2goe1xyXG4gICAgICBpZDogaWQsXHJcbiAgICAgIG9iajogYXJyb3csXHJcbiAgICAgIHRhcmdldDogdGFyZ2V0LFxyXG4gICAgICBzdGFydGluZ1RpbWU6IHRpbWVzdGFtcCxcclxuICAgICAgeUZ1bmN0aW9uOiB5RnVuY3Rpb24sXHJcbiAgICAgIHhGdW5jdGlvbjogeEZ1bmN0aW9uLFxyXG4gICAgICB6RnVuY3Rpb246IHpGdW5jdGlvblxyXG4gICAgfSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGNhbGxiYWNrKHRhcmdldCk7XHJcbiAgICAgIHRoaXMuYXJyb3dzID0gdGhpcy5hcnJvd3MuZmlsdGVyKChhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGEgIT09IGlkO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUoYXJyb3cpO1xyXG4gICAgfSwgdGhpcy5hcnJvd1NwZWVkKTtcclxuXHJcbiAgfVxyXG5cclxuICBhbmltYXRlQXJyb3dzKHRpbWVzdGFtcCkge1xyXG4gICAgdGhpcy5hcnJvd3MuZm9yRWFjaCgoYXJyb3cpID0+IHtcclxuICAgICAgbGV0IGRlbHRhID0gKHRpbWVzdGFtcCAtIGFycm93LnN0YXJ0aW5nVGltZSkgLyB0aGlzLmFycm93U3BlZWQ7XHJcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi55ID0gYXJyb3cueUZ1bmN0aW9uKGRlbHRhKTtcclxuICAgICAgYXJyb3cub2JqLnBvc2l0aW9uLnggPSBhcnJvdy54RnVuY3Rpb24oZGVsdGEpO1xyXG4gICAgICBhcnJvdy5vYmoucG9zaXRpb24ueiA9IGFycm93LnpGdW5jdGlvbihkZWx0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFuaW1hdGVBdHRhY2sodGltZXN0YW1wKSB7XHJcbiAgICBpZih0aGlzLnJpZ2h0QXJtICYmIHRoaXMuaW5pdGlhdGVBdHRhY2spIHtcclxuICAgICAgaWYodGhpcy5yaWdodEFybS5yb3RhdGlvbi56ID4gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5lbmRpbmdBbmdsZSkge1xyXG4gICAgICAgIGlmKHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPT09IG51bGwpIHtcclxuICAgICAgICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlO1xyXG4gICAgICAgIGxldCB0aW1lUmF0aW8gPSBkZWx0YSAvIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uc3BlZWREb3duO1xyXG4gICAgICAgIGxldCBkZWdyZWVDaGFuZ2UgPSB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmFuZ2xlRGlmZmVyZW5jZSAqIHRpbWVSYXRpbztcclxuXHJcblxyXG4gICAgICAgIHRoaXMucmlnaHRBcm0ucm90YXRpb24ueiAtPSBkZWdyZWVDaGFuZ2U7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IHRpbWVzdGFtcDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNwYXduQXJyb3coXHJcbiAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldC50YXJnZXQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGFyZ2V0LmNhbGxiYWNrICk7XHJcblxyXG4gICAgICAgIHRoaXMucmVzZXRBdHRhY2tBbmltYXRpb24oKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLnJpZ2h0QXJtICYmIHRoaXMucmVjaGFyZ2luZykge1xyXG4gICAgICBpZih0aGlzLnJpZ2h0QXJtLnJvdGF0aW9uLnogPCB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLnN0YXJ0aW5nQW5nbGUpIHtcclxuICAgICAgICBpZih0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gdGltZXN0YW1wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZTtcclxuICAgICAgICBsZXQgdGltZVJhdGlvID0gZGVsdGEgLyB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLnNwZWVkVXA7XHJcbiAgICAgICAgbGV0IGRlZ3JlZUNoYW5nZSA9IHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uYW5nbGVEaWZmZXJlbmNlICogdGltZVJhdGlvO1xyXG5cclxuICAgICAgICB0aGlzLnJpZ2h0QXJtLnJvdGF0aW9uLnogKz0gZGVncmVlQ2hhbmdlO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPSB0aW1lc3RhbXA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZWNoYXJnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLm5leHRUYXJnZXQgJiYgdGhpcy5uZXh0VGFyZ2V0LnRhcmdldCkge1xyXG4gICAgICBsZXQgYW5nbGVUb3dhcmRzVGFyZ2V0ID0gdGhpcy5jYWxjdWxhdGVBbmdsZVRvVGFyZ2V0KHRoaXMubmV4dFRhcmdldC50YXJnZXQpO1xyXG4gICAgICB0aGlzLmJvZHlNb2RlbC5yb3RhdGlvbi55ID0gYW5nbGVUb3dhcmRzVGFyZ2V0ICsgdGhpcy5zdGFydGluZ1JvdGF0aW9uO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRBdHRhY2tBbmltYXRpb24oKSB7XHJcbiAgICB0aGlzLmluaXRpYXRlQXR0YWNrID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlY2hhcmdpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBjYWxjdWxhdGVBbmdsZVRvVGFyZ2V0KHRhcmdldCkge1xyXG4gICAgbGV0IHhEaWZmID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueCAtIHRoaXMudmlld09iai5wb3NpdGlvbi54O1xyXG4gICAgbGV0IHpEaWZmID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueiAtIHRoaXMudmlld09iai5wb3NpdGlvbi56O1xyXG4gICAgbGV0IGRpZmZSYXRpbyA9IHpEaWZmIC8geERpZmY7XHJcbiAgICByZXR1cm4gKE1hdGguUEkgKiAtdGhpcy5kaXJlY3Rpb24pIC0gTWF0aC5hdGFuKGRpZmZSYXRpbykgKyBNYXRoLlBJO1xyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIHRoaXMuYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCk7XHJcbiAgICB0aGlzLmFuaW1hdGVBcnJvd3ModGltZXN0YW1wKTtcclxuICAgIHRoaXMuYW5pbWF0ZUF0dGFjayh0aW1lc3RhbXApO1xyXG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcclxuICAgIHRoaXMucGxheWVySWQgPSB0aGlzLnBsYXllci5pZDtcclxuXHJcbiAgICB0aGlzLmJhc2VXaWR0aCA9IGdyaWRXaWR0aDtcclxuICAgIHRoaXMuYmFzZUhlaWdodCA9IDIwO1xyXG4gICAgdGhpcy5iYXNlRGVwdGggPSAxMDtcclxuXHJcbiAgICB0aGlzLm1heEhlYWx0aCA9IDI1MDtcclxuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XHJcblxyXG4gICAgdGhpcy5oaXRCb3hCdWZmZXIgPSAyO1xyXG5cclxuICAgIHRoaXMua2lsbFJld2FyZCA9IHtcclxuICAgICAgbW9uZXk6IDU1MCxcclxuICAgICAgc2NvcmU6IDEwMDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuZGlyZWN0aW9uKTtcclxuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVWaWV3KGRpcmVjdGlvbiwgaGl0Qm94T3BhY2l0eT0wKSB7XHJcbiAgICB0aGlzLnZpZXdPYmogPSBuZXcgVEhSRUUuR3JvdXAoKTtcclxuXHJcbiAgICBsZXQgc2hhcGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcclxuICAgICAgdGhpcy5iYXNlRGVwdGgsXHJcbiAgICAgIHRoaXMuYmFzZUhlaWdodCxcclxuICAgICAgdGhpcy5iYXNlV2lkdGhcclxuICAgICk7XHJcblxyXG5cclxuICAgIGxldCB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTtcclxuICAgIGxldCBub3JtYWxNYXAgPSB0ZXh0dXJlTG9hZGVyLmxvYWQoJ3RleHR1cmVzL3JvY2stbm9ybWFsLW1hcC5qcGcnKTtcclxuICAgIGxldCBsb25nVGV4dHVyZSA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvYnJpY2std2FsbC5qcGcnKTtcclxuICAgIGxldCBza2lubnlUZXh0dXJlID0gdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9icmljay13YWxsLmpwZycpO1xyXG4gICAgbGV0IHNpZGVUZXh0dXJlID0gdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9icmljay13YWxsLmpwZycpO1xyXG4gICAgbGV0IGJhc2VDb2xvciA9IDB4NTU1NTU1O1xyXG5cclxuICAgIGxvbmdUZXh0dXJlLndyYXBTID0gbG9uZ1RleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgIGxvbmdUZXh0dXJlLnJlcGVhdC5zZXQoMywgMSk7XHJcblxyXG4gICAgc2tpbm55VGV4dHVyZS53cmFwUyA9IHNraW5ueVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgIHNraW5ueVRleHR1cmUucmVwZWF0LnNldCgxLCAzKTtcclxuXHJcbiAgICBzaWRlVGV4dHVyZS53cmFwUyA9IHNpZGVUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICBzaWRlVGV4dHVyZS5yZXBlYXQuc2V0KDEsIDEpO1xyXG5cclxuICAgIGxldCBza2lubnlNYXQgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiAweDMzMzMzMywgc3BlY3VsYXI6IDB4MzMzMzMzLCBzaGluaW5lc3M6IDE1LCBub3JtYWxNYXA6IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvcm9jay1ub3JtYWwtbWFwLmpwZycpLCBub3JtYWxTY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoIDAuMDUsIDEgKSwgbWFwOiBza2lubnlUZXh0dXJlIH0pO1xyXG5cclxuXHJcbiAgICBsZXQgbG9uZ01hdCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IGJhc2VDb2xvciwgc3BlY3VsYXI6IDB4MzMzMzMzLCBzaGluaW5lc3M6IDE1LCBub3JtYWxNYXA6IG5vcm1hbE1hcCwgbm9ybWFsU2NhbGU6IG5ldyBUSFJFRS5WZWN0b3IyKCAxLCAxICksIG1hcDogbG9uZ1RleHR1cmUgfSk7XHJcblxyXG4gICAgbGV0IHNpZGVNYXQgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBiYXNlQ29sb3IsIHNwZWN1bGFyOiAweDMzMzMzMywgc2hpbmluZXNzOiAxNSwgbm9ybWFsTWFwOiBub3JtYWxNYXAsIG5vcm1hbFNjYWxlOiBuZXcgVEhSRUUuVmVjdG9yMiggMSwgMSApLCBtYXA6IHNpZGVUZXh0dXJlIH0pO1xyXG5cclxuICAgIGxldCBzaGFwZU1hdGVyaWFscyA9IFtcclxuICAgICAgbG9uZ01hdCwgLy8gUmlnaHRcclxuICAgICAgbG9uZ01hdCwgLy8gTGVmdFxyXG4gICAgICBza2lubnlNYXQsIC8vIFRvcFxyXG4gICAgICBzaWRlTWF0LCAvLyBCYWNrXHJcbiAgICAgIHNpZGVNYXQsIC8vIEZyb250XHJcbiAgICAgIHNraW5ueU1hdCwgLy8gQm90dG9tXHJcblxyXG4gICAgXVxyXG5cclxuICAgIGxldCBzaGFwZU1lc2ggPSBuZXcgVEhSRUUuTWVzaChzaGFwZUdlb21ldHJ5LCBuZXcgVEhSRUUuTXVsdGlNYXRlcmlhbChzaGFwZU1hdGVyaWFscykpO1xyXG5cclxuXHJcbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoXHJcbiAgICAgIHRoaXMuYmFzZURlcHRoICsgdGhpcy5oaXRCb3hCdWZmZXIsXHJcbiAgICAgIHRoaXMuYmFzZUhlaWdodCArIHRoaXMuaGl0Qm94QnVmZmVyLFxyXG4gICAgICB0aGlzLmJhc2VXaWR0aCArIHRoaXMuaGl0Qm94QnVmZmVyIFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHksIGRlcHRoV3JpdGU6IGZhbHNlIH0pO1xyXG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xyXG5cclxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XHJcbiAgICB0aGlzLmhpdEJveCA9IGhpdE1lc2g7XHJcblxyXG4gICAgdGhpcy52aWV3T2JqLmFkZChzaGFwZU1lc2gpO1xyXG4gICAgdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcclxuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG5cclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gKCgtZ3JpZFdpZHRoLzIpIC0gKHRoaXMuYmFzZURlcHRoIC8gMikpICogdGhpcy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodC8yO1xyXG5cclxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcclxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLmltbXVuZVRvUmFuZ2UgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUhlYWx0aEJhcigpIHtcclxuICAgIHRoaXMuX2hlYWx0aEJhckxlbmd0aCA9IGdyaWRXaWR0aCAvIDEwO1xyXG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSBncmlkV2lkdGggLyAxNTA7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhckxlbmd0aCwgdGhpcy5faGVhbHRoQmFyV2lkdGgsIHRoaXMuX2hlYWx0aEJhcldpZHRoKTtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMH0pO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xyXG4gICAgZnVsbEhlYWx0aEJhck1lc2gubmFtZSA9IFwiRnVsbEhlYWx0aEJhclwiO1xyXG5cclxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhckxlbmd0aCAqIDAuOTksIHRoaXMuX2hlYWx0aEJhcldpZHRoICogMC45LCB0aGlzLl9oZWFsdGhCYXJXaWR0aCAqIDAuOSk7XHJcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwfSk7XHJcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSwgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCk7XHJcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcclxuXHJcbiAgICBsZXQgaGVhbHRoQmFyR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcclxuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XHJcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZW1wdHlIZWFsdGhCYXJNZXNoKTtcclxuXHJcbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gdGhpcy5iYXNlSGVpZ2h0ICsgNTtcclxuXHJcbiAgICByZXR1cm4gaGVhbHRoQmFyR3JvdXA7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVIZWFsdGhCYXIoKSB7XHJcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xyXG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhckxlbmd0aCAvIDI7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xyXG5cclxuICAgIGZ1bGxIZWFsdGhCYXIuc2NhbGUueCA9IGhlYWx0aFBlcmNlbnQ7XHJcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcclxuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXHJcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AoKSB7XHJcbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xyXG4gICAgdGhpcy51cGRhdGVIZWFsdGhCYXIoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHhQb3NpdGl2ZSA9IDE7XHJcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcclxuZXhwb3J0IGNvbnN0IGdyaWRXaWR0aCA9IDY0O1xyXG5leHBvcnQgY29uc3QgZ3JpZFN1YkRpdiA9IDE2O1xyXG5cclxubGV0IG1pbmlvbiA9IHtcclxuXHRiYXNlSGVhbHRoOiAxMCxcclxuXHRiYXNlQXR0YWNrOiAzLFxyXG5cdGJhc2VBdHRhY2tTcGVlZDogMTAwMCxcclxuXHR1cGdyYWRlczoge1xyXG5cdFx0aGVhbHRoOiB7XHJcblx0XHRcdGNvc3Q6IDUwLFxyXG5cdFx0XHRhbW91bnQ6IDVcclxuXHRcdH0sXHJcblx0XHRhdHRhY2s6IHtcclxuXHRcdFx0Y29zdDogNzUsXHJcblx0XHRcdGFtb3VudDogMlxyXG5cdFx0fSxcclxuXHRcdGF0dGFja1NwZWVkOiB7XHJcblx0XHRcdGNvc3Q6IDEwMCxcclxuXHRcdFx0YW1vdW50OiAyNVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmxldCBiYXNlID0ge1xyXG5cdGJhc2VIZWFsdGg6IDI1MCxcclxuXHR1cGdyYWRlczoge1xyXG5cdFx0aGVhbHRoOiB7XHJcblx0XHRcdGNvc3Q6IDE1MCxcclxuXHRcdFx0YW1vdW50OiAyNTAsXHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxubGV0IGFyY2hlciA9IHtcclxuXHRiYXNlQXR0YWNrOiA1LFxyXG5cdGJhc2VBdHRhY2tTcGVlZDogMTAwMCxcclxuXHRiYXNlQXJyb3dTcGVlZDogMTAwMCxcclxuXHR1cGdyYWRlczoge1xyXG5cdFx0YXR0YWNrOiB7XHJcblx0XHRcdGNvc3Q6IDUwLFxyXG5cdFx0XHRhbW91bnQ6IDQsXHJcblx0XHR9LFxyXG5cdFx0YXR0YWNrU3BlZWQ6IHtcclxuXHRcdFx0Y29zdDogMTAwLFxyXG5cdFx0XHRhbW91bnQ6IDUwLFxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxubGV0IHBsYXllciA9IHtcclxuXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7bWluaW9uLCBiYXNlLCBhcmNoZXIsIHBsYXllcn07XHJcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xyXG5pbXBvcnQgQUkgZnJvbSAnLi9haS1wbGF5ZXInO1xyXG5pbXBvcnQgeyBhY3RpdmF0ZU1lbnUgfSBmcm9tICcuL21lbnUtc2NyZWVuJztcclxuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lRW5naW5lIHtcclxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XHJcbiAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcclxuICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5jYW1lcmEgPSBhcmdzLmNhbWVyYTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtID0gbmV3IFRIUkVFeC5Db2xsaWRlclN5c3RlbSgpO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXTtcclxuXHJcbiAgICB0aGlzLnBsYXllcklkID0gMDtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVQbGF5ZXJzKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplUGxheWVycygpIHtcclxuICAgIHRoaXMubXlQbGF5ZXIgPSBuZXcgUGxheWVyKHtcclxuICAgICAgdHlwZTogJ2h1bWFuJyxcclxuICAgICAgZGlyZWN0aW9uOiB4UG9zaXRpdmUsXHJcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgIGNvbGxpZGVyU3lzdGVtOiB0aGlzLmNvbGxpZGVyU3lzdGVtLFxyXG4gICAgICBzY2VuZTp0aGlzLnNjZW5lLFxyXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XHJcbiAgICAgIHR5cGU6ICdjb21wdXRlcicsXHJcbiAgICAgIGRpcmVjdGlvbjogeE5lZ2F0aXZlLFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICBjb2xsaWRlclN5c3RlbTogdGhpcy5jb2xsaWRlclN5c3RlbSxcclxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXHJcbiAgICAgIGlkOiB0aGlzLnBsYXllcklkKytcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuQUkgPSBuZXcgQUkoe1xyXG4gICAgICBwbGF5ZXI6IHRoaXMuY29tcHV0ZXIsXHJcbiAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGxheWVyQUkgPSBuZXcgQUkoe1xyXG4gICAgICBwbGF5ZXI6IHRoaXMubXlQbGF5ZXIsXHJcbiAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB0aGlzLnN0YXRlLnBsYXllcnMgPSBbIHRoaXMubXlQbGF5ZXIsIHRoaXMuY29tcHV0ZXIgXTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVHYW1lT3Zlcih7IHdpbm5lciwgc2NvcmUgfSkge1xyXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocCA9PiBwLnNldEdhbWVPdmVyKCkpO1xyXG4gICAgYWN0aXZhdGVNZW51KHtcclxuICAgICAgd2lubmVyOiB3aW5uZXIsXHJcbiAgICAgIHNjb3JlOiBzY29yZVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJlc3RhcnQoKSB7XHJcbiAgICB3aGlsZSh0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuY29sbGlkZXJMaXN0LnBvcCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcclxuICAgICAgcGxheWVyLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5nYW1lT3Zlcikge1xyXG5cclxuICAgIH1cclxuICAgIGlmKHRoaXMuQUkpIHtcclxuICAgICAgdGhpcy5BSS5ydW5Mb29wKHRpbWVzdGFtcCwgdGhpcy5teVBsYXllci5taW5pb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLnBsYXllckFJKSB7XHJcbiAgICAgIHRoaXMucGxheWVyQUkucnVuTG9vcCh0aW1lc3RhbXAsIHRoaXMuY29tcHV0ZXIubWluaW9ucyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXRlLnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xyXG4gICAgICBwbGF5ZXIucnVuTG9vcCh0aW1lc3RhbXApO1xyXG4gICAgICBpZihwbGF5ZXIubG9zdCAmJiAhdGhpcy5nYW1lT3Zlcikge1xyXG4gICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgICAgIGxldCB3aW5uZXIgPSB0aGlzLnN0YXRlLnBsYXllcnMuZmluZChwID0+IHAuaWQgIT09IHBsYXllci5pZCk7XHJcbiAgICAgICAgbGV0IHNjb3JlID0gd2lubmVyLnNjb3JlO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUdhbWVPdmVyKHsgd2lubmVyLCBzY29yZSB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsXHJcbiAgICAgICAgIGdyaWRMZW5ndGgsXHJcbiAgICAgICAgIGdyaWRTdWJEaXYsXHJcbiAgICAgICAgIG1pbmlvbkJhc2VIZWFsdGgsXHJcbiAgICAgICAgIG1pbmlvbkJhc2VBdHRhY2ssXHJcbiAgICAgICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZCxcclxuICAgICAgICAgYXJjaGVyQmFzZUF0dGFjayxcclxuICAgICAgICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkLFxyXG4gICAgICAgICBiYXNlSGVhbHRoVXBncmFkZUFtb3VudFxyXG4gICAgICAgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgYmluZEJ1dHRvbnMgfSBmcm9tICcuL21lbnUtc2NyZWVuJztcclxuXHJcbi8vIFVJIEVsZW1lbnRzXHJcbmxldCBzY29yZVRleHQsIG1vbmV5VGV4dCwgcG9wcHVsYXRpb25UZXh0LCBiYXNlSGVhbHRoVGV4dCwgbWluaW9uQmFzZUhlYWx0aFRleHQgLG1pbmlvbkJhc2VBdHRhY2tUZXh0ICxtaW5pb25CYXNlQXR0YWNrU3BlZWRUZXh0ICxhcmNoZXJCYXNlQXR0YWNrVGV4dCAsYXJjaGVyQmFzZUF0dGFja1NwZWVkVGV4dDtcclxubGV0IGJhc2VIZWFsdGhVcGdyYWRlLCBtaW5pb25CYXNlSGVhbHRoVXBncmFkZSAsbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUgLG1pbmlvbkJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUgLGFyY2hlckJhc2VBdHRhY2tVcGdyYWRlICxhcmNoZXJCYXNlQXR0YWNrU3BlZWRVcGdyYWRlO1xyXG5cclxuXHJcbi8vIFRleHR1cmVcclxuY29uc3QgcGxhbmVUZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKS5sb2FkKFwidGV4dHVyZXMvc3RvbmUuanBnXCIpO1xyXG5wbGFuZVRleHR1cmUucmVwZWF0LnNldCgxMCwxMCk7XHJcbnBsYW5lVGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG5wbGFuZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XHJcbiAgY29uc3RydWN0b3IoZ2xvYmFscywgZ2FtZUVuZ2luZSkge1xyXG4gICAgdGhpcy5zY2VuZSA9IGdsb2JhbHMuc2NlbmU7XHJcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IGdsb2JhbHMucmVuZGVyZXI7XHJcblxyXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcclxuXHJcbiAgICB0aGlzLnNldHVwR3JpZCgpO1xyXG4gICAgdGhpcy5zZXR1cEdyYXNzRmllbGQoKTtcclxuICAgIHRoaXMuc2V0dXBMaWdodCgpO1xyXG5cclxuICAgIHRoaXMubW91c2UgPSB7IHg6IC0xMDAwMCwgeTogMCB9O1xyXG5cclxuICAgIGxldCBwb3NpdGlvblNjYWxlID0gZ3JpZFdpZHRoIC8gMjtcclxuXHJcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gMiAqIHBvc2l0aW9uU2NhbGU7XHJcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gMS41ICogcG9zaXRpb25TY2FsZTtcclxuICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnNjZW5lLnBvc2l0aW9uKTtcclxuXHJcbiAgICB0aGlzLmh1ZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodWQnKTtcclxuICAgIHRoaXMuaHVkVXBncmFkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodWQtdXBncmFkZScpO1xyXG4gICAgdGhpcy5sYXN0VGltZVN0YW1wID0gMDtcclxuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnNldHVwTW91c2VFdmVudCgpO1xyXG4gICAgYmluZEJ1dHRvbnModGhpcywgdGhpcy5nYW1lRW5naW5lKTtcclxuICB9XHJcblxyXG4gIHNldHVwTGlnaHQoKSB7XHJcbiAgICBsZXQgbGlnaHRBbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDY2NjY2NiwgMyk7XHJcbiAgICBsZXQgbGlnaHRTb3VyY2UgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDg4ODg4OCwgMSk7XHJcblxyXG4gICAgbGlnaHRTb3VyY2UucG9zaXRpb24uc2V0KDAsIDMwLCAwKTtcclxuICAgIGxpZ2h0QW1iaWVudC5wb3NpdGlvbi5zZXQoMCwgMzAsIDApO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0QW1iaWVudCk7XHJcbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodFNvdXJjZSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cEdyaWQoKSB7XHJcbiAgICAgLy9sZXQgdGV4dHVyZWRTdXJmYWNlR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIGdyaWRXaWR0aCk7XHJcbiAgICAgLy9sZXQgdGV4dHVyZWRTdXJmYWNlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogcGxhbmVUZXh0dXJlfSk7XHJcbiAgICAgLy9sZXQgdGV4dHVyZWRTdXJmYWNlID0gbmV3IFRIUkVFLk1lc2godGV4dHVyZWRTdXJmYWNlR2VvbWV0cnksIHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsKTtcclxuICAgICAvL3RleHR1cmVkU3VyZmFjZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XHJcbiAgICAgLy90ZXh0dXJlZFN1cmZhY2UucG9zaXRpb24ueSA9IC0wLjM7XHJcbiAgICAgLy90aGlzLnNjZW5lLmFkZCh0ZXh0dXJlZFN1cmZhY2UpO1xyXG5cclxuICAgIGxldCBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkU3ViRGl2KTtcclxuICAgIGdyaWQucG9zaXRpb24ueSA9IC0uNFxyXG4gICAgdGhpcy5zY2VuZS5hZGQoZ3JpZCk7XHJcblxyXG4gICAgdGhpcy5ncmlkUGFuZWxzID0ge307XHJcblxyXG4gICAgbGV0IHBhbmVsTGVuZ3RoID0gZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdjtcclxuICAgIGxldCB6UG9zID0gKChncmlkV2lkdGggLyAyKSAtIHBhbmVsTGVuZ3RoIC8gMikgKiAtMTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7XHJcbiAgICAgIGxldCBwbGFuZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZ3JpZFdpZHRoLCBwYW5lbExlbmd0aCk7XHJcbiAgICAgIGxldCBwbGFuZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHt0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogMH0pO1xyXG4gICAgICBsZXQgcGxhbmUgPSBuZXcgVEhSRUUuTWVzaChwbGFuZUdlb21ldHJ5LCBwbGFuZU1hdGVyaWFsKTtcclxuICAgICAgcGxhbmUucm90YXRpb24ueCA9IC0wLjUgKiBNYXRoLlBJO1xyXG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gelBvcztcclxuICAgICAgcGxhbmUucG9zaXRpb24ueSA9IDA7XHJcbiAgICAgIHRoaXMuc2NlbmUuYWRkKHBsYW5lKTtcclxuICAgICAgdGhpcy5ncmlkUGFuZWxzW2ldID0gcGxhbmU7XHJcblxyXG4gICAgICB6UG9zICs9IHBhbmVsTGVuZ3RoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0dXBHcmFzc0ZpZWxkKCkge1xyXG4gICAgbGV0IHRleHR1cmVVcmwgID0gJ3RleHR1cmVzL2dyYXNzbGlnaHQtc21hbGwuanBnJ1xyXG4gICAgbGV0IHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQodGV4dHVyZVVybCk7XHJcbiAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICB0ZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbiAgICB0ZXh0dXJlLnJlcGVhdC55PSBncmlkU3ViRGl2O1xyXG4gICAgdGV4dHVyZS5yZXBlYXQueD0gZ3JpZFN1YkRpdjtcclxuICAgIHRleHR1cmUuYW5pc290cm9weSA9IHRoaXMucmVuZGVyZXIuZ2V0TWF4QW5pc290cm9weSgpXHJcbiAgICAvLyBidWlsZCBvYmplY3QzZFxyXG4gICAgbGV0IGdlb21ldHJ5ICA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCAqIDEwLCBncmlkV2lkdGggKiAxMClcclxuICAgIGxldCBtYXRlcmlhbCAgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe1xyXG4gICAgICBtYXAgOiB0ZXh0dXJlLFxyXG4gICAgICBzaGluaW5lc3M6IDEwXHJcbiAgICB9KVxyXG4gICAgbGV0IHBsYW5lICA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcclxuICAgIHBsYW5lLnJvdGF0ZVgoLU1hdGguUEkvMik7XHJcbiAgICBwbGFuZS5wb3NpdGlvbi55ID0gLTAuMjtcclxuICAgIHRoaXMuc2NlbmUuYWRkKHBsYW5lKTtcclxuXHJcbiAgICAgLy8gbGV0IG5UdWZ0cyAgPSAyMDAwO1xyXG4gICAgIC8vIGxldCBwb3NpdGlvbnMgPSBuZXcgQXJyYXkoblR1ZnRzKTtcclxuICAgICAvLyBmb3IobGV0IGkgPSAwOyBpIDwgblR1ZnRzOyBpKyspe1xyXG4gICAgIC8vICAgbGV0IHBvc2l0aW9uICA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgLy8gICBwb3NpdGlvbi54ICA9IChNYXRoLnJhbmRvbSgpLTAuNSkqZ3JpZFdpZHRoO1xyXG4gICAgIC8vICAgcG9zaXRpb24ueiAgPSAoTWF0aC5yYW5kb20oKS0wLjUpKmdyaWRXaWR0aDtcclxuICAgICAvLyAgIHBvc2l0aW9uc1tpXSAgPSBwb3NpdGlvbjtcclxuICAgICAvLyB9XHJcbiAgICAgLy8gbGV0IG1lc2ggID0gVEhSRUV4LmNyZWF0ZUdyYXNzVHVmdHMocG9zaXRpb25zKTtcclxuICAgICAvLyB0aGlzLnNjZW5lLmFkZChtZXNoKTtcclxuICB9XHJcblxyXG4gIGNoZWNrR3JpZEludGVyc2VjdGlvbnMoKSB7XHJcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcbiAgICBsZXQgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMocGxhbmVzKTtcclxuXHJcbiAgICBwbGFuZXMuZm9yRWFjaCgocGFuZWwpID0+IHtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4NjY2NjY2KTtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwub3BhY2l0eSA9IDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZihpbnRlcnNlY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGV0IG9iaiA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xyXG5cclxuICAgICAgb2JqLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweGZmMDAwMCk7XHJcbiAgICAgIG9iai5tYXRlcmlhbC5vcGFjaXR5ID0gLjU7XHJcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG9iajtcclxuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xyXG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFBhbmVsSW5kZXgoKSB7XHJcbiAgICBpZighdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKSB7IHJldHVybjsgfVxyXG5cclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPT09IHBsYW5lc1tpXSkge1xyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0dXBNb3VzZUV2ZW50KCkge1xyXG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcclxuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcclxuICAgICAgbW91c2UueSA9IC0gKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhcnRGaXJzdEdhbWUoKSB7XHJcbiAgICB0aGlzLmdhbWVFbmdpbmUucmVzdGFydCgpO1xyXG5cclxuICAgIHRoaXMuaHVkLmNsYXNzTGlzdC5yZW1vdmUoJ2h1ZC0taGlkZGVuJyk7XHJcbiAgICB0aGlzLmh1ZFVwZ3JhZGUuY2xhc3NMaXN0LnJlbW92ZSgnaHVkLS1oaWRkZW4nKTtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVVcGdyYWRlQnV0dG9ucygpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplSHVkVGV4dHMoKTtcclxuXHJcbiAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRDdXJyZW50UGFuZWxJbmRleCgpO1xyXG4gICAgICBpZihpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnNwYXduTWluaW9uKGluZGV4KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKCkgPT4ge1xyXG4gICAgICBsZXQgaW5kZXggPSB0aGlzLmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XHJcbiAgICAgIGlmKGluZGV4ID49IDApIHtcclxuICAgICAgICB0aGlzLmdhbWVFbmdpbmUuY29tcHV0ZXIuc3Bhd25NaW5pb24oaW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNhbGN1bGF0ZUZQUyh0aW1lc3RhbXApIHtcclxuICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMubGFzdFRpbWVTdGFtcDtcclxuICAgIGRlbHRhID0gZGVsdGEgLyAxMDAwO1xyXG4gICAgdGhpcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQoMSAvIGRlbHRhKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVJKHRpbWVzdGFtcCkge1xyXG4gICAgc2NvcmVUZXh0LnRleHRDb250ZW50ID0gdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnNjb3JlO1xyXG4gICAgbW9uZXlUZXh0LnRleHRDb250ZW50ID0gdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLm1vbmV5O1xyXG4gICAgcG9wcHVsYXRpb25UZXh0LnRleHRDb250ZW50ID0gdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLm1pbmlvbnMubGVuZ3RoICsgXCIvXCIgKyB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIucG9wcHVsYXRpb25DYXA7XHJcbiAgICBcclxuICAgIGlmKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5iYXNlICE9PSBudWxsKSB7XHJcbiAgICAgIGJhc2VIZWFsdGhUZXh0LnRleHRDb250ZW50ID0gTWF0aC5tYXgodGhpcy5nYW1lRW5naW5lLm15UGxheWVyLmJhc2UuaGVhbHRoLCAwKS50b0ZpeGVkKDIpICsgXCIgLyBcIiArIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5iYXNlLm1heEhlYWx0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJhc2VIZWFsdGhUZXh0LnRleHRDb250ZW50ID0gXCIwXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1pbmlvbkJhc2VIZWFsdGhUZXh0LnRleHRDb250ZW50ID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlSGVhbHRoICsgKENvbnN0YW50cy5taW5pb24udXBncmFkZXMuaGVhbHRoLmFtb3VudCAqIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5taW5pb25CYXNlSGVhbHRoKTtcclxuICAgIG1pbmlvbkJhc2VBdHRhY2tUZXh0LnRleHRDb250ZW50ID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlQXR0YWNrICsgKENvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrLmFtb3VudCAqIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrKTtcclxuICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZFRleHQudGV4dENvbnRlbnQgPSAoKENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFja1NwZWVkICsgKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQgKiAtQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2tTcGVlZC5hbW91bnQpKSAvIDEwMDApLnRvRml4ZWQoMikgKyAncyc7XHJcbiAgICBcclxuICAgIGFyY2hlckJhc2VBdHRhY2tUZXh0LnRleHRDb250ZW50ID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrICsgKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrICogQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2suYW1vdW50KTtcclxuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFRleHQudGV4dENvbnRlbnQgPSAoKENvbnN0YW50cy5hcmNoZXIuYmFzZUF0dGFja1NwZWVkIC0gKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrU3BlZWQgKiBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudCkpIC8gMTAwMCkudG9GaXhlZCgyKSArIFwic1wiO1xyXG4gIH0gICAgIFxyXG5cclxuICByZW5kZXJMb29wKHRpbWVzdGFtcCkge1xyXG4gICAgdGhpcy5jaGVja0dyaWRJbnRlcnNlY3Rpb25zKCk7XHJcbiAgICB0aGlzLmdhbWVFbmdpbmUuZ2FtZUxvb3AodGltZXN0YW1wKTtcclxuXHJcbiAgICBpZih0aGlzLnN0YXJ0ZWQpIHtcclxuICAgICAgdGhpcy51cGRhdGVVSSh0aW1lc3RhbXApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUh1ZFRleHRzKCkge1xyXG4gICAgc2NvcmVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XHJcbiAgICBtb25leVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9uZXknKTtcclxuICAgIHBvcHB1bGF0aW9uVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3BwdWxhdGlvbicpO1xyXG4gICAgYmFzZUhlYWx0aFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFzZUhlYWx0aCcpO1xyXG4gICAgbWluaW9uQmFzZUhlYWx0aFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUhlYWx0aCcpO1xyXG4gICAgbWluaW9uQmFzZUF0dGFja1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFjaycpO1xyXG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlQXR0YWNrU3BlZWQnKTtcclxuICAgIGFyY2hlckJhc2VBdHRhY2tUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2snKTtcclxuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGVyQmFzZUF0dGFja1NwZWVkJyk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplVXBncmFkZUJ1dHRvbnMoKSB7XHJcbiAgICBsZXQgZ2FtZVZpZXcgPSB0aGlzO1xyXG4gICAgXHJcbiAgICBiYXNlSGVhbHRoVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFzZUhlYWx0aFVwZ3JhZGUnKTtcclxuICAgIGJhc2VIZWFsdGhVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZUJhc2VIZWFsdGgoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG1pbmlvbkJhc2VIZWFsdGhVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlSGVhbHRoVXBncmFkZScpO1xyXG4gICAgbWluaW9uQmFzZUhlYWx0aFVwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlTWluaW9uSGVhbHRoKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBtaW5pb25CYXNlQXR0YWNrVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUnKTtcclxuICAgIG1pbmlvbkJhc2VBdHRhY2tVcGdyYWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZU1pbmlvbkF0dGFjaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZScpO1xyXG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVNaW5pb25BdHRhY2tTcGVlZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXJjaGVyQmFzZUF0dGFja1VwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2tVcGdyYWRlJyk7XHJcbiAgICBhcmNoZXJCYXNlQXR0YWNrVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBnYW1lVmlldy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVXaXphcmRBdHRhY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUnKTtcclxuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlV2l6YXJkQXR0YWNrU3BlZWQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSBcclxuIiwibGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsJyk7XHJcbmxldCBzdGFydFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRNb2RhbCcpO1xyXG5sZXQgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRCdXR0b24nKTtcclxubGV0IHJlc3RhcnRTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhcnRNb2RhbCcpO1xyXG5sZXQgcmVzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXJ0QnV0dG9uJyk7XHJcbmxldCByZXN0YXJ0TW9kYWxNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhcnRNb2RhbE1lc3NhZ2UnKTtcclxuXHJcbmZ1bmN0aW9uIGFjdGl2YXRlU3RhcnRTY3JlZW4oKSB7XHJcbiAgc3RhcnRTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS12aXNpYmxlJyk7XHJcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXZpc2libGUnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWN0aXZhdGVSZXN0YXJ0U2NyZWVuKHdpbm5lciwgc2NvcmUpIHtcclxuXHJcbiAgbGV0IHRleHQgPSBgUGxheWVyICR7d2lubmVyLmlkICsgMX0gd2lucyB3aXRoIGEgc2NvcmUgb2YgJHtzY29yZX0hYDtcclxuICByZXN0YXJ0TW9kYWxNZXNzYWdlLnRleHRDb250ZW50ID0gdGV4dDtcclxuXHJcbiAgc3RhcnRTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XHJcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlTWVudShhcmdzKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxuXHJcbiAgaWYoYXJncy53aW5uZXIgIT09IG51bGwpIHtcclxuICAgIGFjdGl2YXRlUmVzdGFydFNjcmVlbihhcmdzLndpbm5lciwgYXJncy5zY29yZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFjdGl2YXRlU3RhcnRTY3JlZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU1lbnUoYXJncykge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kQnV0dG9ucyhnYW1lVmlldywgZ2FtZUVuZ2luZSkge1xyXG4gIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZ2FtZVZpZXcuc3RhcnRGaXJzdEdhbWUoKTtcclxuICAgIGNsb3NlTWVudSgpO1xyXG4gIH0pO1xyXG5cclxuICByZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgZ2FtZUVuZ2luZS5yZXN0YXJ0KCk7XHJcbiAgICBjbG9zZU1lbnUoKTtcclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnLi9jb25zdGFudHMnOyBcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pbmlvbiB7XHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcclxuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcclxuICAgIHRoaXMuc3RhcnRpbmdaID0gYXJncy5zdGFydGluZ1o7XHJcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcclxuXHJcbiAgICB0aGlzLm1heEhlYWx0aCA9IENvbnN0YW50cy5taW5pb24uYmFzZUhlYWx0aCArIChhcmdzLmhlYWx0aFVwZ3JhZGUgKiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmhlYWx0aC5hbW91bnQpO1xyXG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFjayArIChhcmdzLmF0dGFja1VwZ3JhZGUgKiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQpO1xyXG4gICAgdGhpcy5hdHRhY2tTcGVlZCA9IENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFja1NwZWVkICsgKGFyZ3MuYXR0YWNrU3BlZWRVcGdyYWRlICogLUNvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50KTtcclxuICAgIHRoaXMuZGVmYXVsdFNwZWVkID0gLjM7XHJcblxyXG4gICAgdGhpcy5oZWFsdGggPSB0aGlzLm1heEhlYWx0aDtcclxuICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcclxuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcclxuICAgICAgYXR0YWNrVGltZTogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmF0dGFja0FuaW1hdGlvblByb3BlcnRpZXMgPSB7XHJcbiAgICAgIGRpcmVjdGlvbjogMSxcclxuICAgICAgc3BlZWQ6IHRoaXMuYXR0YWNrU3BlZWQgLyAyLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzID0ge1xyXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxyXG4gICAgICBzcGVlZDogNTAgLyB0aGlzLmRlZmF1bHRTcGVlZCwgLy8gVGhpcyBzaG91bGQgbm90IGNoYW5nZSBvbmx5IGNoYW5nZSB0aGUgc3BlZWQgb2YgdGhlIG1pbmlvbiBhbmQgdGhlIGFuaW1hdGlvbiB3aWxsIHVwZGF0ZSBhY2NvcmRpbmdseVxyXG4gICAgICBsYXN0VGltZVN0YW1wOiBudWxsLFxyXG4gICAgICB0aW1lOiAwXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMua2lsbFJld2FyZCA9IHtcclxuICAgICAgbW9uZXk6IDc1LFxyXG4gICAgICBzY29yZTogMjVcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZXN0cm95ID0gZmFsc2U7XHJcbiAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMucm90T2JqZWN0TWF0cml4ID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuc3RhcnRpbmdaKTtcclxuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVWaWV3KHN0YXJ0aW5nWiwgaGl0Qm94T3BhY2l0eT0wKSB7XHJcbiAgICB0aGlzLnZpZXdPYmogPSBuZXcgVEhSRUUuR3JvdXAoKTtcclxuXHJcbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMyw4LDMpO1xyXG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5IH0pO1xyXG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xyXG5cclxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XHJcblxyXG4gICAgaGl0TWVzaC5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG4gICAgdGhpcy52aWV3T2JqID0gaGl0TWVzaDtcclxuICAgIHRoaXMuaGl0Qm94ID0gdGhpcy52aWV3T2JqO1xyXG5cclxuICAgIGxldCB6ID0gKChzdGFydGluZ1ogKiAoZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdikpIC0gKGdyaWRXaWR0aCAvIDIpKSArIChncmlkV2lkdGggLyBncmlkU3ViRGl2IC8gMik7XHJcbiAgICBsZXQgeCA9IChncmlkV2lkdGggLyAyKSAqIC10aGlzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi56ID0gejtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0geDtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi55ID0gNDtcclxuXHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xyXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XHJcbiAgICBoaXRHZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICBoaXRNYXRlcmlhbC5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnZpZXdPYmoucG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xyXG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSAyO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4zLCAwLjMpO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XHJcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XHJcblxyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMiwgMC4yKTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcclxuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xyXG5cclxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcclxuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xyXG5cclxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSA0O1xyXG5cclxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcclxuICB9XHJcblxyXG4gIGlzT2JqZWN0TG9hZGVkKG9iaikge1xyXG4gICAgcmV0dXJuIChvYmoucG9zaXRpb24ueCA9PT0gMCAmJiBvYmoucG9zaXRpb24ueSA9PT0gMCAmJiBvYmoucG9zaXRpb24ueiA9PT0gMCk7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcclxuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXHJcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xyXG5cclxuICAgICAgaWYodXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxyXG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICB0aGlzLnNwZWVkID0gMDtcclxuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSB1c2VyRGF0YS5vYmplY3Q7XHJcbiAgICAgIHRoaXMucmVzZXRXYWxrQW5pbWF0aW9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RTdGF5JywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgbGV0IHVzZXJEYXRhID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YTtcclxuXHJcbiAgICAgIGlmKHVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cclxuICAgICAgaWYodXNlckRhdGEucmFuZ2VkKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IHVzZXJEYXRhLm9iamVjdDtcclxuICAgICAgICB0aGlzLnJlc2V0V2Fsa0FuaW1hdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xyXG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RXhpdCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XHJcbiAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcclxuICAgICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QXR0YWNrVmFsdWUoKSB7XHJcbiAgICBsZXQgY3JpdFByb2MgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgcmV0dXJuIGNyaXRQcm9jID49IC45ID8gdGhpcy5hdHRhY2tTdHJlbmd0aCAqIChNYXRoLnJhbmRvbSgpICsgMSkgOiB0aGlzLmF0dGFja1N0cmVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xyXG4gICAgbGV0IGhlYWx0aFBlcmNlbnQgPSB0aGlzLmhlYWx0aC90aGlzLm1heEhlYWx0aDtcclxuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJXaWR0aCAvIDI7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xyXG5cclxuICAgIGZ1bGxIZWFsdGhCYXIuc2NhbGUueCA9IGhlYWx0aFBlcmNlbnQ7XHJcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XHJcbiAgfVxyXG5cclxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xyXG4gICAgdGhpcy5hdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKTtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ICs9ICh0aGlzLnNwZWVkICogdGhpcy5kaXJlY3Rpb24pO1xyXG4gICAgdGhpcy53YWxrUHJvY2VkdXJlKHRpbWVzdGFtcCk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcclxuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XHJcbiAgfVxyXG5cclxuICBhdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKSB7XHJcbiAgICBpZih0aGlzLmhlYWx0aCA8PSAwKSB7IHJldHVybjsgfVxyXG5cclxuXHJcbiAgICBpZih0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCAhPSBudWxsICYmIHRoaXMuYXR0YWNrKSB7XHJcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wO1xyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lICsgZGVsdGE7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgICB0aGlzLmF0dGFja0xvb3AoZGVsdGEpO1xyXG4gICAgfSBlbHNlIGlmKHRoaXMuYXR0YWNrKSB7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID0gMDtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICAgIHRoaXMuYXR0YWNrTG9vcCgwKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcclxuICB9XHJcblxyXG4gIGF0dGFja0xvb3AoZGVsdGEpIHtcclxuICAgIGlmKHRoaXMuY3VycmVudFRhcmdldCA9PT0gbnVsbCB8fCB0aGlzLmN1cnJlbnRUYXJnZXQucGxheWVySWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XHJcbiAgICB0aGlzLmFuaW1hdGVBdHRhY2soZGVsdGEpO1xyXG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPD0gdGhpcy5hdHRhY2tTcGVlZCkgeyByZXR1cm47IH1cclxuXHJcbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcclxuXHJcbiAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIDw9IDApIHtcclxuICAgICAgdGhpcy5wbGF5ZXIucHJvY2Vzc1Jld2FyZCh0aGlzLmN1cnJlbnRUYXJnZXQua2lsbFJld2FyZCk7XHJcblxyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuYXR0YWNrID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5kZXN0cm95ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBhbmltYXRlQXR0YWNrKGRlbHRhKSB7XHJcbiAgICBpZih0aGlzLnZpZXdPYmouY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xyXG4gICAgICBsZXQgcmlnaHRBcm0gPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV07XHJcbiAgICAgIGxldCBjdXJyZW50QXR0YWNrVGltZSA9IHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lO1xyXG4gICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbjtcclxuICAgICAgbGV0IGFuaW1hdGlvblNwZWVkID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLnNwZWVkO1xyXG4gICAgICBsZXQgbWF4Um90YXRpb24gPSAxMzU7XHJcblxyXG4gICAgICBsZXQgcm90YXRpb24gPSBkaXJlY3Rpb24gKiAoKG1heFJvdGF0aW9uICogKE1hdGguUEkgLyAxODApKSAqIChkZWx0YSAvIGFuaW1hdGlvblNwZWVkKSk7XHJcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5taW4ocmlnaHRBcm0ucm90YXRpb24ueiArIHJvdGF0aW9uLCBtYXhSb3RhdGlvbik7XHJcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5tYXgocm90YXRpb24sIDApO1xyXG5cclxuICAgICAgcmlnaHRBcm0ucm90YXRpb24ueiA9IHJvdGF0aW9uO1xyXG4gICAgICBpZihjdXJyZW50QXR0YWNrVGltZSA+IGFuaW1hdGlvblNwZWVkKSB7XHJcbiAgICAgICAgdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbiA9IC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldEF0dGFja0FuaW1hdGlvbigpIHtcclxuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGxldCByaWdodEFybSA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblsxXTtcclxuICAgICAgcmlnaHRBcm0ucm90YXRpb24ueiA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB3YWxrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xyXG4gICAgaWYoIXRoaXMuYXR0YWNrICYmIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMubGFzdFRpbWVTdGFtcCAhPT0gbnVsbCkge1xyXG4gICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXA7XHJcbiAgICAgIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSArIGRlbHRhO1xyXG4gICAgICB0aGlzLndhbGtMb29wKGRlbHRhKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMud2Fsa0xvb3AoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gIH07XHJcblxyXG4gIHdhbGtMb29wKGRlbHRhKSB7XHJcbiAgICB0aGlzLmFuaW1hdGVXYWxrKGRlbHRhKTtcclxuICAgIGlmKHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMudGltZSA8PSB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLnNwZWVkKSB7IHJldHVybjsgfVxyXG4gICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lID0gMDtcclxuICB9XHJcblxyXG4gIGFuaW1hdGVXYWxrKGRlbHRhKSB7XHJcbiAgICBpZih0aGlzLnZpZXdPYmouY2hpbGRyZW4ubGVuZ3RoID4gMSAmJiAhdGhpcy5hdHRhY2spIHtcclxuICAgICAgbGV0IGxlZ3MgPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV0uY2hpbGRyZW5bM107XHJcbiAgICAgIGxldCBsZWZ0TGVnID0gbGVncy5jaGlsZHJlblswXTtcclxuICAgICAgbGV0IHJpZ2h0TGVnID0gbGVncy5jaGlsZHJlblsxXTtcclxuICAgICAgbGV0IGFuaW1hdGlvblRpbWUgPSB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLnRpbWU7XHJcbiAgICAgIGxldCBhbmltYXRpb25TcGVlZCA9IHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuc3BlZWQ7XHJcbiAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbjtcclxuICAgICAgbGV0IG1heFJvdGF0aW9uID0gNDU7IFxyXG5cclxuICAgICAgbGV0IHJvdGF0aW9uID0gKG1heFJvdGF0aW9uICogKGRlbHRhIC8gYW5pbWF0aW9uU3BlZWQpKTtcclxuXHJcbiAgICAgIGlmKGRpcmVjdGlvbikge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0ZUxlZ0ZvcndhcmQobGVmdExlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlTGVnQmFjayhyaWdodExlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlTGVnRm9yd2FyZChyaWdodExlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRlTGVnQmFjayhsZWZ0TGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYodGhpcy50b0RlZ3JlZXMobGVmdExlZy5yb3RhdGlvbi56KSA+PSBtYXhSb3RhdGlvbiB8fCB0aGlzLnRvRGVncmVlcyhsZWZ0TGVnLnJvdGF0aW9uLnopIDw9IC1tYXhSb3RhdGlvbikge1xyXG4gICAgICAgIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uID0gIXRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhbmltYXRlTGVnQmFjayhsZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpIHtcclxuICAgIGxldCBtYXggPSB0aGlzLnRvUmFkaWFucygtbWF4Um90YXRpb24pO1xyXG5cclxuICAgIGlmKGxlZy5yb3RhdGlvbi56ICsgdGhpcy50b1JhZGlhbnMoLXJvdGF0aW9uKSA8IG1heCkge1xyXG4gICAgICBsZWcucm90YXRpb24ueiA9IG1heDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxlZy5yb3RhdGlvbi56ICs9IHRoaXMudG9SYWRpYW5zKC1yb3RhdGlvbik7XHJcbiAgICB9XHJcbiAgfSBcclxuXHJcbiAgYW5pbWF0ZUxlZ0ZvcndhcmQobGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKSB7XHJcbiAgICBsZXQgbWF4ID0gdGhpcy50b1JhZGlhbnMobWF4Um90YXRpb24pO1xyXG4gICAgaWYobGVnLnJvdGF0aW9uLnogKyB0aGlzLnRvUmFkaWFucyggcm90YXRpb24pID4gbWF4KSB7XHJcbiAgICAgIGxlZy5yb3RhdGlvbi56ID0gbWF4O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGVnLnJvdGF0aW9uLnogKz0gdGhpcy50b1JhZGlhbnMocm90YXRpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRXYWxrQW5pbWF0aW9uKCkge1xyXG4gICAgaWYodGhpcy52aWV3T2JqLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcclxuICAgICAgbGV0IGxlZ3MgPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV0uY2hpbGRyZW5bM107XHJcbiAgICAgIGxldCBsZWZ0TGVnID0gbGVncy5jaGlsZHJlblswXTtcclxuICAgICAgbGV0IHJpZ2h0TGVnID0gbGVncy5jaGlsZHJlblsxXTtcclxuXHJcbiAgICAgIGxlZnRMZWcucm90YXRpb24ueiA9IDA7XHJcbiAgICAgIHJpZ2h0TGVnLnJvdGF0aW9uLnogPSAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9EZWdyZWVzKGFuZ2xlUmFkaWFucykge1xyXG4gICAgcmV0dXJuIChhbmdsZVJhZGlhbnMgKiAxODApIC8gTWF0aC5QSTtcclxuICB9XHJcblxyXG4gIHRvUmFkaWFucyhhbmdsZURlZ3JlZXMpIHtcclxuICAgIHJldHVybiAoYW5nbGVEZWdyZWVzIC8gMTgwKSAqIE1hdGguUEk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xyXG5pbXBvcnQgQXJjaGVyIGZyb20gJy4vYXJjaGVyJztcclxuaW1wb3J0IEJhc2UgZnJvbSAnLi9iYXNlJztcclxuaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMudHlwZSA9IGFyZ3MudHlwZTtcclxuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtID0gYXJncy5jb2xsaWRlclN5c3RlbTtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5taW5pb25JZCA9IDA7XHJcbiAgICB0aGlzLnNwYXduUG9zID0gLWdyaWRXaWR0aCAvIDIgKiB0aGlzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMucG9wcHVsYXRpb25DYXAgPSAzMDtcclxuXHJcbiAgICB0aGlzLnNldFVwZ3JhZGVWYWx1ZXMoKTtcclxuICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLk9iamVjdExvYWRlcigpO1xyXG5cclxuICAgIHRoaXMuc2V0dXBHYW1lU3RhdGUoKTtcclxuICAgIHRoaXMuc3Bhd25CYXNlKCk7XHJcbiAgICB0aGlzLnNwYXduQXJjaGVycygpO1xyXG4gIH1cclxuXHJcbiAgc3Bhd25BcmNoZXJzKCkge1xyXG4gICAgbGV0IGFyY2hlciA9IG5ldyBBcmNoZXIoeyBcclxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsIFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LCBcclxuICAgICAgc3RhcnRpbmdaOiAyLCBcclxuICAgICAgc3RhcnRpbmdZOiAyMCwgXHJcbiAgICAgIHN0YXJ0aW5nWDogdGhpcy5zcGF3blBvcywgXHJcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIFxyXG4gICAgICBwbGF5ZXI6IHRoaXMgXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFyY2hlcnMucHVzaChhcmNoZXIpO1xyXG5cclxuICAgIHRoaXMubG9hZGVyLmxvYWQoJy4vZ2VvbWV0cnkvd2l6YXJkLmpzb24nLCAob2JqKSA9PiB7XHJcbiAgICAgIG9iai5wb3NpdGlvbi55ID0gLTQ7XHJcbiAgICAgIGFyY2hlci52aWV3T2JqLmFkZChvYmopO1xyXG5cclxuICAgICAgYXJjaGVyLmJvZHlNb2RlbCA9IGFyY2hlci52aWV3T2JqLmNoaWxkcmVuWzJdO1xyXG4gICAgICBhcmNoZXIucmlnaHRBcm0gPSBhcmNoZXIuYm9keU1vZGVsLmNoaWxkcmVuWzFdO1xyXG4gICAgICBhcmNoZXIucmlnaHRBcm0ucm90YXRpb24ueiA9ICgxMzUgLyAxODApICogTWF0aC5QSTtcclxuICAgICAgaWYoYXJjaGVyLmRpcmVjdGlvbiA9PT0gLTEpIHtcclxuICAgICAgICBhcmNoZXIudmlld09iai5jaGlsZHJlblsyXS5yb3RhdGlvbi55ID0gTWF0aC5QSTtcclxuICAgICAgICBhcmNoZXIuc3RhcnRpbmdSb3RhdGlvbiA9IE1hdGguUEk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc2NlbmUuYWRkKGFyY2hlci52aWV3T2JqKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3Bhd25CYXNlKCkge1xyXG4gICAgdGhpcy5iYXNlID0gbmV3IEJhc2Uoe1xyXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICBwbGF5ZXI6IHRoaXNcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuYmFzZS52aWV3T2JqKTtcclxuICB9XHJcblxyXG4gIHNwYXduTWluaW9uKGluZGV4KSB7XHJcbiAgICBpZih0aGlzLm1pbmlvbnMubGVuZ3RoIDwgdGhpcy5wb3BwdWxhdGlvbkNhcCkge1xyXG4gICAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmdhbWVPdmVyKSB7XHJcbiAgICAgICAgICB0aGlzLm1vbmV5IC09IHRoaXMubWluaW9uQ29zdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtaW5pb24gPSBuZXcgTWluaW9uKHtcclxuICAgICAgICAgIGlkOiB0aGlzLm1pbmlvbklkKyssXHJcbiAgICAgICAgICBoZWFsdGhVcGdyYWRlOiB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGgsXHJcbiAgICAgICAgICBhdHRhY2tVcGdyYWRlOiB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2ssXHJcbiAgICAgICAgICBhdHRhY2tTcGVlZFVwZ3JhZGU6IHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkLFxyXG4gICAgICAgICAgcGxheWVySWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxyXG4gICAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcclxuICAgICAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgICAgICBwbGF5ZXI6IHRoaXNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5taW5pb25zLnB1c2gobWluaW9uKTtcclxuICAgICAgICB0aGlzLmxvYWRlci5sb2FkKCcuL2dlb21ldHJ5L21vZGVsLmpzb24nLCAob2JqKSA9PiB7XHJcbiAgICAgICAgICBvYmoucG9zaXRpb24ueSA9IC00O1xyXG4gICAgICAgICAgbWluaW9uLnZpZXdPYmouYWRkKG9iaik7XHJcblxyXG4gICAgICAgICAgaWYobWluaW9uLmRpcmVjdGlvbiA9PT0gLTEpIHtcclxuICAgICAgICAgICAgbWluaW9uLnZpZXdPYmouY2hpbGRyZW5bMV0ucm90YXRpb24ueSA9IE1hdGguUEk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5zY2VuZS5hZGQobWluaW9uLnZpZXdPYmopO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm9jZXNzUmV3YXJkKHJld2FyZCkge1xyXG4gICAgaWYodGhpcy5nYW1lT3ZlcikgeyByZXR1cm47IH1cclxuICAgIGxldCB0ID0gdGhpcztcclxuICAgIE9iamVjdC5rZXlzKHJld2FyZCkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgIHRba2V5XSArPSByZXdhcmRba2V5XTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIGlmKHRoaXMuYmFzZSAhPT0gbnVsbCkgeyBcclxuICAgICAgdGhpcy5iYXNlLnJ1bkxvb3AoKTtcclxuICAgICAgaWYodGhpcy5iYXNlLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95QmFzZSgpOyB9IFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXJjaGVycy5mb3JFYWNoKChhcmNoZXIpID0+IHtcclxuICAgICAgYXJjaGVyLnJ1bkxvb3AodGltZXN0YW1wKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKChtaW5pb24sIGluZGV4KSA9PiB7XHJcbiAgICAgIG1pbmlvbi5ydW5Mb29wKHRpbWVzdGFtcCk7XHJcbiAgICAgIGlmKCFtaW5pb24uYXR0YWNrKSB7IG1pbmlvbi5yZXNldEF0dGFja0FuaW1hdGlvbigpOyB9XHJcbiAgICAgIGlmKG1pbmlvbi5kZXN0cm95KSB7IHRoaXMuZGVzdHJveU1pbmlvbihtaW5pb24sIGluZGV4KTsgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbS5jb21wdXRlQW5kTm90aWZ5KHRoaXMuY29sbGlkZXJMaXN0KTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3lNaW5pb24obWluaW9uLCBpbmRleCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG1pbmlvbi5jb2xsaWRlci5pZCksIDEpO1xyXG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicpO1xyXG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RTdGF5Jyk7XHJcbiAgICBtaW5pb24uY29sbGlkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGFjdEV4aXQnKTtcclxuICAgIG1pbmlvbi5jb2xsaWRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcpO1xyXG4gICAgdGhpcy5taW5pb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95QmFzZSgpIHtcclxuICAgIHRoaXMuYXJjaGVycy5mb3JFYWNoKGFyY2hlciA9PiB7XHJcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGFyY2hlci52aWV3T2JqKTtcclxuICAgICAgdGhpcy5jb2xsaWRlckxpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgoYXJjaGVyLmNvbGxpZGVyLmlkKSwgMSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuYXJjaGVycy5sZW5ndGggPSAwO1xyXG4gICAgXHJcbiAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmJhc2Uudmlld09iaik7XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleCh0aGlzLmJhc2UuY29sbGlkZXIuaWQpLCAxKTtcclxuICAgIHRoaXMuYmFzZSA9IG51bGw7XHJcbiAgICB0aGlzLmxvc3QgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYodGhpcy5jb2xsaWRlckxpc3RbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgc2V0R2FtZU92ZXIoKSB7XHJcbiAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5taW5pb25zLmZvckVhY2gobWluaW9uID0+IHtcclxuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYodGhpcy5iYXNlKSB7XHJcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuYmFzZS52aWV3T2JqKTtcclxuICAgICAgdGhpcy5iYXNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFyY2hlcnMuZm9yRWFjaChhcmNoZXJzID0+IHtcclxuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUoYXJjaGVycy52aWV3T2JqKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuc2V0VXBncmFkZVZhbHVlcygpO1xyXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xyXG4gICAgdGhpcy5zcGF3bkJhc2UoKTtcclxuICAgIHRoaXMuc3Bhd25BcmNoZXJzKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0dXBHYW1lU3RhdGUoKSB7XHJcbiAgICB0aGlzLm1pbmlvbnMgPSBbXTtcclxuICAgIHRoaXMuYXJjaGVycyA9IFtdO1xyXG4gICAgdGhpcy5zY29yZSA9IDA7XHJcbiAgICB0aGlzLm1vbmV5ID0gNDAwMDtcclxuICAgIHRoaXMubWluaW9uQ29zdCA9IDUwO1xyXG4gICAgdGhpcy5sb3N0ID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBzZXRVcGdyYWRlVmFsdWVzKCkge1xyXG4gICAgdGhpcy51cGdyYWRlcyA9IHtcclxuICAgICAgYmFzZUhlYWx0aDogMCxcclxuICAgICAgbWluaW9uQmFzZUhlYWx0aDogMCxcclxuICAgICAgbWluaW9uQmFzZUF0dGFjazogMCxcclxuICAgICAgbWluaW9uQmFzZUF0dGFja1NwZWVkOiAwLFxyXG4gICAgICBhcmNoZXJCYXNlQXR0YWNrOiAwLFxyXG4gICAgICBhcmNoZXJCYXNlQXR0YWNrU3BlZWQ6IDBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEJhc2VIZWFsdGhVcGdyYWRlQ29zdCgpIHtcclxuICAgIHJldHVybiBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguY29zdCAqICh0aGlzLnVwZ3JhZGVzLmJhc2VIZWFsdGggKyAxKTtcclxuICB9XHJcblxyXG4gIGNhblVwZ3JhZGVCYXNlSGVhbHRoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldEJhc2VIZWFsdGhVcGdyYWRlQ29zdCgpO1xyXG4gIH1cclxuXHJcbiAgdXBncmFkZUJhc2VIZWFsdGgoKSB7XHJcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVCYXNlSGVhbHRoKCkpIHtcclxuICAgICAgdGhpcy51cGdyYWRlcy5iYXNlSGVhbHRoKys7XHJcbiAgICAgIHRoaXMuYmFzZS5tYXhIZWFsdGggKz0gQ29uc3RhbnRzLmJhc2UudXBncmFkZXMuaGVhbHRoLmFtb3VudDtcclxuICAgICAgdGhpcy5iYXNlLmhlYWx0aCArPSBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguYW1vdW50O1xyXG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5iYXNlLnVwZ3JhZGVzLmhlYWx0aC5jb3N0ICogdGhpcy51cGdyYWRlcy5iYXNlSGVhbHRoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TWluaW9uSGVhbHRoVXBncmFkZUNvc3QoKSB7XHJcbiAgICByZXR1cm4gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGggKyAxKTtcclxuICB9XHJcblxyXG4gIGNhblVwZ3JhZGVNaW5pb25IZWFsdGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0TWluaW9uSGVhbHRoVXBncmFkZUNvc3QoKTtcclxuICB9XHJcblxyXG4gIHVwZ3JhZGVNaW5pb25IZWFsdGgoKSB7XHJcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVNaW5pb25IZWFsdGgoKSkge1xyXG4gICAgICB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGgrKztcclxuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmhlYWx0aC5jb3N0ICogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlSGVhbHRoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TWluaW9uQXR0YWNrVXBncmFkZUNvc3QoKSB7XHJcbiAgICByZXR1cm4gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2suY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2sgKyAxKTtcclxuICB9XHJcblxyXG4gIGNhblVwZ3JhZGVNaW5pb25BdHRhY2soKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0TWluaW9uQXR0YWNrVXBncmFkZUNvc3QoKTtcclxuICB9XHJcblxyXG4gIHVwZ3JhZGVNaW5pb25BdHRhY2soKSB7XHJcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVNaW5pb25BdHRhY2soKSkge1xyXG4gICAgICB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2srKztcclxuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5jb3N0ICogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TWluaW9uQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpIHtcclxuICAgIHJldHVybiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmNvc3QgKiAodGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQgKyAxKTtcclxuICB9XHJcblxyXG4gIGNhblVwZ3JhZGVNaW5pb25BdHRhY2tTcGVlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLm1vbmV5ID4gdGhpcy5nZXRNaW5pb25BdHRhY2tTcGVlZFVwZ3JhZGVDb3N0KCk7XHJcbiAgfVxyXG5cclxuICB1cGdyYWRlTWluaW9uQXR0YWNrU3BlZWQoKSB7XHJcbiAgICBpZih0aGlzLmNhblVwZ3JhZGVNaW5pb25BdHRhY2tTcGVlZCgpKSB7XHJcbiAgICAgIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFja1NwZWVkKys7XHJcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2tTcGVlZC5jb3N0ICogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQrKztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFdpemFyZEF0dGFja1VwZ3JhZGVDb3N0KCkge1xyXG4gICAgcmV0dXJuIENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrLmNvc3QgKiAodGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrICsgMSk7XHJcbiAgfVxyXG5cclxuICBjYW5VcGdyYWRlV2l6YXJkQXR0YWNrKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldFdpemFyZEF0dGFja1VwZ3JhZGVDb3N0KCk7XHJcbiAgfVxyXG5cclxuICB1cGdyYWRlV2l6YXJkQXR0YWNrKCkge1xyXG4gICAgaWYodGhpcy5jYW5VcGdyYWRlV2l6YXJkQXR0YWNrKCkpIHtcclxuICAgICAgdGhpcy5hcmNoZXJzLmZvckVhY2goKGFyY2hlcikgPT4ge1xyXG4gICAgICAgIGFyY2hlci5hdHRhY2tTdHJlbmd0aCArPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQ7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrKys7XHJcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2suY29zdCAqIHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFjaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFdpemFyZEF0dGFja1NwZWVkVXBncmFkZUNvc3QoKSB7XHJcbiAgICByZXR1cm4gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2tTcGVlZC5jb3N0ICogKHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFja1NwZWVkICsgMSkgO1xyXG4gIH1cclxuXHJcbiAgY2FuVXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldFdpemFyZEF0dGFja1NwZWVkVXBncmFkZUNvc3QoKTtcclxuICB9XHJcblxyXG4gIHVwZ3JhZGVXaXphcmRBdHRhY2tTcGVlZCgpIHtcclxuICAgIGlmKHRoaXMuY2FuVXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkpIHtcclxuICAgICAgdGhpcy5hcmNoZXJzLmZvckVhY2goKGFyY2hlcikgPT4ge1xyXG4gICAgICAgIGFyY2hlci5hdHRhY2tTcGVlZCAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudDtcclxuICAgICAgICBhcmNoZXIuYXJyb3dTcGVlZCAtPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2tTcGVlZCsrO1xyXG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqIHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFja1NwZWVkO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJmdW5jdGlvbiBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSl7XHJcbiAgbGV0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICByZW5kZXJlci5zZXRTaXplKHcsaCk7XHJcbiAgY2FtZXJhLmFzcGVjdCA9IHcvaDtcclxuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xyXG4gIGxldCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG4gIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzAsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xyXG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XHJcbiAgcmVuZGVyZXIuc2hhZG93TWFwRW5hYmxlZCA9IHRydWU7XHJcbiAgcmVuZGVyZXIuc2hhZG93TWFwVHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXBcclxuICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gIHNldHVwUmVzaXppbmcocmVuZGVyZXIsIGNhbWVyYSk7XHJcblxyXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFBlcmZvcm1hbmNlKCkge1xyXG4gIHZhciByZW5kZXJlclN0YXRzID0gbmV3IFRIUkVFeC5SZW5kZXJlclN0YXRzKCk7XHJcbiAgcmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xyXG4gIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCdcclxuICByZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzBweCdcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCByZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQgKVxyXG4gIHJldHVybiByZW5kZXJlclN0YXRzO1xyXG59XHJcbiJdfQ==\n"]}