{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","_setupScreenView","setupScreenView","document","getElementById","window","addEventListener","index","getCurrentPanelIndex","minion","spawnMinion","add","viewObj","computer","./modules/game-engine","./modules/game-view","./modules/view","2","Object","defineProperty","value","xPositive","xNegative","gridWidth","gridSubDiv","3","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_player","_player2","_constants","GameEngine","args","this","state","colliderSystem","THREEx","ColliderSystem","colliderList","initializePlayers","type","direction","players","forEach","player","runLoop","computeAndNotify","./constants","./player","4","GameView","setupGrid","setupLight","mouse","x","y","position","z","lookAt","raycaster","THREE","Raycaster","currentHoveredPanel","setupMouseEvent","lightAmbient","AmbientLight","lightSource","PointLight","set","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","MeshBasicMaterial","color","plane","Mesh","rotation","Math","PI","setFromCamera","planes","values","intersects","intersectObjects","panel","material","setHex","object","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","5","Minion","id","health","attackStrength","speed","attackProperties","lastTimeStamp","attackTime","destroy","attack","initializeView","startingZ","registerCollision","hitBoxOpacity","arguments","undefined","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","specular","shininess","shapeMesh","hitGeometry","hitMaterial","transparent","opacity","hitMesh","hitBox","userData","_this","geometry","computeBoundingBox","box3","boundingBox","clone","collider","ColliderBox3","push","otherCollider","object3d","currentTarget","delta","attackLoop","update","console","log","6","_minion","_minion2","Player","minionId","setupGameState","minionCost","minions","remove","findColliderIndex","splice","./minion","7","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","body","appendChild","domElement"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0;\n\n// Shapes\nvar cube;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n\n      var minion = gameEngine.myPlayer.spawnMinion(index);\n      if (minion) {\n        scene.add(minion.viewObj);\n      }\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    var minion = gameEngine.computer.spawnMinion(3);\n    if (minion) {\n      scene.add(minion.viewObj);\n    }\n  });\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI();\n\n  globals.renderer.render(globals.scene, globals.camera);\n}\n\nfunction updateUI() {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n}\n\ninit();\n\n},{\"./modules/game-engine\":3,\"./modules/game-view\":4,\"./modules/view\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 70;\nvar gridSubDiv = exports.gridSubDiv = 8;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      this.state.players.forEach(function (player) {\n        return player.runLoop(timestamp);\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./constants\":2,\"./player\":6}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: 0, y: 0 };\n\n    this.camera.position.z = 50;\n    this.camera.position.y = 50;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = -30.6;\n\n      for (var i = 0; i < 8; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ color: 0x666666 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.1;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < 8; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":2}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n\n    this.health = 10;\n    this.attackStrength = 3;\n    this.speed = .5;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.initializeView(args.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: 'initializeView',\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(3, 3, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n\n      this.viewObj.position.z = startingZ * 9 - 32;\n      this.viewObj.position.x = -38 * this.direction;\n      this.viewObj.position.y = 2;\n\n      this.hitBox.userData.minion = this;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        _this.speed = 0;\n        _this.attack = true;\n        otherCollider.object3d.userData.minion.attack = true;\n        _this.currentTarget = otherCollider;\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = .5;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime += delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n    }\n  }, {\n    key: 'attackLoop',\n    value: function attackLoop() {\n      if (this.attackProperties.attackTime >= 500 && this.currentTarget !== null) {\n        this.currentTarget.object3d.userData.minion.health -= this.attackStrength;\n\n        console.log(this.id, this.health);\n        if (this.currentTarget.object3d.userData.minion.health <= 0) {\n          this.currentTarget.object3d.userData.minion.attack = false;\n          this.currentTarget.object3d.userData.minion.destroy = true;\n          this.currentTarget = null;\n        }\n\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = null;\n      }\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n\n    this.setupGameState();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList\n        });\n\n        this.minions.push(minion);\n        return minion;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this = this;\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (minion.destroy) {\n          _this.scene.remove(minion.viewObj);\n\n          console.log(index, _this.findColliderIndex(minion.collider.id));\n          _this.colliderList.splice(_this.findColliderIndex(minion.collider.id), 1);\n\n          _this.minions.splice(index, 1);\n        }\n      });\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 400;\n      this.minionCost = 20;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./minion\":5}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxjb25zdGFudHMuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxnYW1lLWVuZ2luZS5qcyIsInNyY1xcanNcXG1vZHVsZXNcXGdhbWUtdmlldy5qcyIsInNyY1xcanNcXG1vZHVsZXNcXG1pbmlvbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHBsYXllci5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0FBQ0EsSUFBSSxnQkFBSjs7QUFFQSxJQUFJLG1CQUFKO0FBQUEsSUFBZ0IsaUJBQWhCOztBQUVBO0FBQ0EsSUFBSSxrQkFBSjtBQUFBLElBQWUsa0JBQWY7O0FBRUE7QUFDQSxJQUFJLElBQUo7O0FBRUEsU0FBUyxJQUFULEdBQWdCO0FBQUEseUJBQ29CLDRCQURwQjtBQUFBLE1BQ1IsS0FEUSxvQkFDUixLQURRO0FBQUEsTUFDRCxNQURDLG9CQUNELE1BREM7QUFBQSxNQUNPLFFBRFAsb0JBQ08sUUFEUDs7QUFFZCxZQUFVLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVY7O0FBRUEsZUFBYSx5QkFBZSxPQUFmLENBQWI7QUFDQSxhQUFXLHVCQUFhLE9BQWIsRUFBc0IsVUFBdEIsQ0FBWDs7QUFFQSxjQUFZLFNBQVMsY0FBVCxDQUF3QixPQUF4QixDQUFaO0FBQ0EsY0FBWSxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWjs7QUFFQSxTQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLFlBQU07QUFDckMsUUFBSSxRQUFRLFNBQVMsb0JBQVQsRUFBWjtBQUNBLFFBQUcsU0FBUyxDQUFaLEVBQWU7O0FBRWIsVUFBSSxTQUFTLFdBQVcsUUFBWCxDQUFvQixXQUFwQixDQUFnQyxLQUFoQyxDQUFi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LFFBQXRCLEVBQWdDLE1BQWhDLEVBQXVDO0FBQ3JDLE1BQUksSUFBSSxPQUFPLFVBQWY7QUFDQSxNQUFJLElBQUksT0FBTyxXQUFmO0FBQ0EsV0FBUyxPQUFULENBQWlCLENBQWpCLEVBQW1CLENBQW5CO0FBQ0EsU0FBTyxNQUFQLEdBQWdCLElBQUUsQ0FBbEI7QUFDQSxTQUFPLHNCQUFQO0FBQ0Q7O0FBRUQsU0FBUyxhQUFULENBQXVCLFFBQXZCLEVBQWlDLE1BQWpDLEVBQXlDO0FBQ3ZDLFNBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsWUFBTTtBQUN0QyxpQkFBYSxRQUFiLEVBQXVCLE1BQXZCO0FBQ0QsR0FGRDtBQUdEOztBQUVNLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFJLFFBQVEsSUFBSSxNQUFNLEtBQVYsRUFBWjtBQUNBLE1BQUksU0FBUyxJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBNUIsRUFBZ0MsT0FBTyxVQUFQLEdBQW9CLE9BQU8sV0FBM0QsRUFBd0UsR0FBeEUsRUFBNkUsSUFBN0UsQ0FBYjtBQUNBLE1BQUksV0FBVyxJQUFJLE1BQU0sYUFBVixFQUFmOztBQUVBLFdBQVMsT0FBVCxDQUFpQixPQUFPLFVBQXhCLEVBQW9DLE9BQU8sV0FBM0M7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsVUFBbkM7O0FBRUEsZ0JBQWMsUUFBZCxFQUF3QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBzZXR1cFNjcmVlblZpZXcgfSBmcm9tICcuL21vZHVsZXMvdmlldyc7XHJcbmltcG9ydCBHYW1lRW5naW5lIGZyb20gJy4vbW9kdWxlcy9nYW1lLWVuZ2luZSc7XHJcbmltcG9ydCBHYW1lVmlldyBmcm9tICcuL21vZHVsZXMvZ2FtZS12aWV3JztcclxuXHJcbi8vIEdsb2JhbHNcclxubGV0IGdsb2JhbHM7XHJcblxyXG5sZXQgZ2FtZUVuZ2luZSwgZ2FtZVZpZXc7XHJcblxyXG4vLyBVSSBFbGVtZW50c1xyXG5sZXQgc2NvcmVUZXh0LCBtb25leVRleHQ7XHJcblxyXG4vLyBTaGFwZXNcclxudmFyIGN1YmU7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gIGxldCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSBzZXR1cFNjcmVlblZpZXcoKTtcclxuICBnbG9iYWxzID0geyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9O1xyXG5cclxuICBnYW1lRW5naW5lID0gbmV3IEdhbWVFbmdpbmUoZ2xvYmFscyk7XHJcbiAgZ2FtZVZpZXcgPSBuZXcgR2FtZVZpZXcoZ2xvYmFscywgZ2FtZUVuZ2luZSk7XHJcblxyXG4gIHNjb3JlVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xyXG4gIG1vbmV5VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb25leScpO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBsZXQgaW5kZXggPSBnYW1lVmlldy5nZXRDdXJyZW50UGFuZWxJbmRleCgpO1xyXG4gICAgaWYoaW5kZXggPj0gMCkge1xyXG5cclxuICAgICAgbGV0IG1pbmlvbiA9IGdhbWVFbmdpbmUubXlQbGF5ZXIuc3Bhd25NaW5pb24oaW5kZXgpO1xyXG4gICAgICBpZihtaW5pb24pIHtcclxuICAgICAgICBzY2VuZS5hZGQobWluaW9uLnZpZXdPYmopO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsICgpID0+IHtcclxuICAgIGxldCBtaW5pb24gPSBnYW1lRW5naW5lLmNvbXB1dGVyLnNwYXduTWluaW9uKDMpO1xyXG4gICAgaWYobWluaW9uKSB7XHJcbiAgICAgIHNjZW5lLmFkZChtaW5pb24udmlld09iaik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJlbmRlcigpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKHRpbWVzdGFtcCkge1xyXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xyXG4gIGdhbWVWaWV3LnJlbmRlckxvb3AodGltZXN0YW1wKTtcclxuXHJcbiAgdXBkYXRlVUkoKTtcclxuXHJcbiAgZ2xvYmFscy5yZW5kZXJlci5yZW5kZXIoZ2xvYmFscy5zY2VuZSwgZ2xvYmFscy5jYW1lcmEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVVSSgpIHtcclxuICBzY29yZVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLnNjb3JlO1xyXG4gIG1vbmV5VGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIubW9uZXk7XHJcbn1cclxuXHJcbmluaXQoKTtcclxuIiwiZXhwb3J0IGNvbnN0IHhQb3NpdGl2ZSA9IDE7XHJcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcclxuZXhwb3J0IGNvbnN0IGdyaWRXaWR0aCA9IDcwO1xyXG5leHBvcnQgY29uc3QgZ3JpZFN1YkRpdiA9IDg7XHJcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xyXG5pbXBvcnQgeyB4UG9zaXRpdmUsIHhOZWdhdGl2ZSB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbSA9IG5ldyBUSFJFRXguQ29sbGlkZXJTeXN0ZW0oKTtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gW11cclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVQbGF5ZXJzKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplUGxheWVycygpIHtcclxuICAgIHRoaXMubXlQbGF5ZXIgPSBuZXcgUGxheWVyKHtcclxuICAgICAgdHlwZTogJ2h1bWFuJyxcclxuICAgICAgZGlyZWN0aW9uOiB4UG9zaXRpdmUsXHJcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmVcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY29tcHV0ZXIgPSBuZXcgUGxheWVyKHtcclxuICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcclxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXHJcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnN0YXRlLnBsYXllcnMgPSBbIHRoaXMubXlQbGF5ZXIsIHRoaXMuY29tcHV0ZXIgXTtcclxuICB9XHJcblxyXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xyXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHBsYXllci5ydW5Mb29wKHRpbWVzdGFtcCkpO1xyXG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbS5jb21wdXRlQW5kTm90aWZ5KHRoaXMuY29sbGlkZXJMaXN0KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XHJcbiAgY29uc3RydWN0b3IoZ2xvYmFscywgZ2FtZUVuZ2luZSkge1xyXG4gICAgdGhpcy5zY2VuZSA9IGdsb2JhbHMuc2NlbmU7XHJcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IGdsb2JhbHMucmVuZGVyZXI7XHJcblxyXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcclxuXHJcbiAgICB0aGlzLnNldHVwR3JpZCgpO1xyXG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XHJcblxyXG4gICAgdGhpcy5tb3VzZSA9IHsgeDogMCwgeTogMCB9O1xyXG5cclxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1MDtcclxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSA1MDtcclxuICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnNjZW5lLnBvc2l0aW9uKTtcclxuXHJcblxyXG4gICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XHJcbiAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuc2V0dXBNb3VzZUV2ZW50KCk7XHJcbiAgfVxyXG5cclxuICBzZXR1cExpZ2h0KCkge1xyXG4gICAgbGV0IGxpZ2h0QW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg2NjY2NjYpO1xyXG4gICAgbGV0IGxpZ2h0U291cmNlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHg4ODg4ODgpO1xyXG5cclxuICAgIGxpZ2h0U291cmNlLnBvc2l0aW9uLnNldCgzLCAzLCAzKTtcclxuXHJcbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodEFtYmllbnQpO1xyXG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHRTb3VyY2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBHcmlkKCkge1xyXG4gICAgdmFyIGdyaWQgPSBuZXcgVEhSRUUuR3JpZEhlbHBlcihncmlkV2lkdGgsIGdyaWRTdWJEaXYpO1xyXG4gICAgdGhpcy5zY2VuZS5hZGQoZ3JpZCk7XHJcblxyXG4gICAgdGhpcy5ncmlkUGFuZWxzID0ge307XHJcblxyXG4gICAgbGV0IHBhbmVsTGVuZ3RoID0gZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdjtcclxuICAgIGxldCB6UG9zID0gLTMwLjY7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xyXG4gICAgICB2YXIgcGxhbmVHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCwgcGFuZWxMZW5ndGgpO1xyXG4gICAgICB2YXIgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4NjY2NjY2fSk7XHJcbiAgICAgIHZhciBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnkscGxhbmVNYXRlcmlhbCk7XHJcbiAgICAgIHBsYW5lLnJvdGF0aW9uLnggPSAtMC41ICogTWF0aC5QSTtcclxuICAgICAgcGxhbmUucG9zaXRpb24ueiA9IHpQb3M7XHJcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4xO1xyXG4gICAgICB0aGlzLnNjZW5lLmFkZChwbGFuZSk7XHJcbiAgICAgIHRoaXMuZ3JpZFBhbmVsc1tpXSA9IHBsYW5lO1xyXG5cclxuICAgICAgelBvcyArPSBwYW5lbExlbmd0aDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrR3JpZEludGVyc2VjdGlvbnMoKSB7XHJcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcbiAgICB2YXIgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMocGxhbmVzKTtcclxuXHJcbiAgICBwbGFuZXMuZm9yRWFjaCgocGFuZWwpID0+IHtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4NjY2NjY2KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmKGludGVyc2VjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBsZXQgb2JqID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7XHJcblxyXG4gICAgICBvYmoubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4ZmYwMDAwKTtcclxuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gb2JqO1xyXG4gICAgfSBlbHNlIGlmKHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCl7XHJcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFBhbmVsSW5kZXgoKSB7XHJcbiAgICBpZighdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKSB7IHJldHVybjsgfVxyXG5cclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xyXG4gICAgICBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPT09IHBsYW5lc1tpXSkge1xyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0dXBNb3VzZUV2ZW50KCkge1xyXG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcclxuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcclxuICAgICAgbW91c2UueSA9IC0gKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xyXG4gICAgdGhpcy5nYW1lRW5naW5lLmdhbWVMb29wKHRpbWVzdGFtcCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pbmlvbiB7XHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcclxuXHJcbiAgICB0aGlzLmhlYWx0aCA9IDEwO1xyXG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IDM7XHJcbiAgICB0aGlzLnNwZWVkID0gLjU7XHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMgPSB7XHJcbiAgICAgIGxhc3RUaW1lU3RhbXA6IG51bGwsXHJcbiAgICAgIGF0dGFja1RpbWU6IDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZXN0cm95ID0gZmFsc2U7XHJcbiAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcoYXJncy5zdGFydGluZ1opO1xyXG4gICAgdGhpcy5yZWdpc3RlckNvbGxpc2lvbigpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZVZpZXcoc3RhcnRpbmdaLCBoaXRCb3hPcGFjaXR5PS4yNSkge1xyXG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcblxyXG4gICAgbGV0IHNoYXBlR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMiwyLDIpO1xyXG4gICAgbGV0IHNoYXBlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMCwgc3BlY3VsYXI6IDB4NTU1NTU1LCBzaGluaW5lc3M6IDMwIH0pO1xyXG4gICAgbGV0IHNoYXBlTWVzaCA9IG5ldyBUSFJFRS5NZXNoKHNoYXBlR2VvbWV0cnksIHNoYXBlTWF0ZXJpYWwpO1xyXG5cclxuICAgIGxldCBoaXRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgzLDMsMyk7XHJcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XHJcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XHJcblxyXG4gICAgdGhpcy5oaXRCb3ggPSBoaXRNZXNoO1xyXG5cclxuICAgIHRoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcclxuICAgIHRoaXMudmlld09iai5hZGQoaGl0TWVzaCk7XHJcblxyXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnogPSAoc3RhcnRpbmdaICogOSkgLSAzMjtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gLTM4ICogdGhpcy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IDI7XHJcblxyXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEubWluaW9uID0gdGhpcztcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xyXG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KClcclxuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTsgXHJcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICB0aGlzLnNwZWVkID0gMDtcclxuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhLm1pbmlvbi5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBvdGhlckNvbGxpZGVyO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0UmVtb3ZlZCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XHJcbiAgICAgIHRoaXMuc3BlZWQgPSAuNTtcclxuICAgICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wICE9IG51bGwgJiYgdGhpcy5hdHRhY2spIHtcclxuICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXA7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lICs9IGRlbHRhO1xyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgICAgdGhpcy5hdHRhY2tMb29wKCk7XHJcbiAgICB9IGVsc2UgaWYodGhpcy5hdHRhY2spIHtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgICAgdGhpcy5hdHRhY2tMb29wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCArPSAodGhpcy5zcGVlZCAqIHRoaXMuZGlyZWN0aW9uKTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgYXR0YWNrTG9vcCgpIHtcclxuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID49IDUwMCAmJiB0aGlzLmN1cnJlbnRUYXJnZXQgIT09IG51bGwpIHtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0Lm9iamVjdDNkLnVzZXJEYXRhLm1pbmlvbi5oZWFsdGggLT0gdGhpcy5hdHRhY2tTdHJlbmd0aDtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaWQsIHRoaXMuaGVhbHRoKTtcclxuICAgICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0Lm9iamVjdDNkLnVzZXJEYXRhLm1pbmlvbi5oZWFsdGggPD0gMCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldC5vYmplY3QzZC51c2VyRGF0YS5taW5pb24uYXR0YWNrID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0Lm9iamVjdDNkLnVzZXJEYXRhLm1pbmlvbi5kZXN0cm95ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1pbmlvbiBmcm9tICcuL21pbmlvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XHJcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5taW5pb25JZCA9IDA7XHJcblxyXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3Bhd25NaW5pb24oaW5kZXgpIHsgXHJcbiAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xyXG4gICAgICB0aGlzLm1vbmV5IC09IHRoaXMubWluaW9uQ29zdDtcclxuXHJcbiAgICAgIGxldCBtaW5pb24gPSBuZXcgTWluaW9uKHtcclxuICAgICAgICBpZDogdGhpcy5taW5pb25JZCsrLFxyXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcclxuICAgICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5taW5pb25zLnB1c2gobWluaW9uKTtcclxuICAgICAgcmV0dXJuIG1pbmlvbjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKChtaW5pb24sIGluZGV4KSA9PiB7XHJcbiAgICAgIG1pbmlvbi5ydW5Mb29wKHRpbWVzdGFtcCk7XHJcbiAgICAgIGlmKG1pbmlvbi5kZXN0cm95KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhpbmRleCwgdGhpcy5maW5kQ29sbGlkZXJJbmRleChtaW5pb24uY29sbGlkZXIuaWQpKTtcclxuICAgICAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleChtaW5pb24uY29sbGlkZXIuaWQpLCAxKTtcclxuXHJcbiAgICAgICAgdGhpcy5taW5pb25zLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH0pOyBcclxuICB9XHJcblxyXG4gIGZpbmRDb2xsaWRlckluZGV4KGlkKSB7XHJcbiAgICBsZXQgaW5kZXggPSAtMTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sbGlkZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKHRoaXMuY29sbGlkZXJMaXN0W2ldLmlkID09PSBpZCkge1xyXG4gICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIHNldHVwR2FtZVN0YXRlKCkge1xyXG4gICAgdGhpcy5taW5pb25zID0gW107XHJcbiAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIHRoaXMubW9uZXkgPSA0MDA7XHJcbiAgICB0aGlzLm1pbmlvbkNvc3QgPSAyMDtcclxuICB9XHJcbn1cclxuIiwiZnVuY3Rpb24gaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpe1xyXG4gIGxldCB3ID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgbGV0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3LGgpO1xyXG4gIGNhbWVyYS5hc3BlY3QgPSB3L2g7XHJcbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgIGhhbmRsZVJlc2l6ZShyZW5kZXJlciwgY2FtZXJhKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2NyZWVuVmlldygpIHtcclxuICBsZXQgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuICBsZXQgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwKTtcclxuICBsZXQgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xyXG5cclxuICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gIHNldHVwUmVzaXppbmcocmVuZGVyZXIsIGNhbWVyYSk7XHJcblxyXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XHJcbn1cclxuIl19\n"]}