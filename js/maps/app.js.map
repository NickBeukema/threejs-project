{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","_setupScreenView","setupScreenView","document","getElementById","window","addEventListener","index","getCurrentPanelIndex","minion","spawnMinion","add","viewObj","computer","./modules/game-engine","./modules/game-view","./modules/view","2","Object","defineProperty","value","xPositive","xNegative","3","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_player","_player2","_constants","GameEngine","this","state","initializePlayers","type","direction","players","forEach","player","runLoop","./constants","./player","4","GameView","setupGrid","setupLight","mouse","x","y","position","z","lookAt","raycaster","THREE","Raycaster","currentHoveredPanel","setupMouseEvent","lightAmbient","AmbientLight","lightSource","PointLight","set","grid","GridHelper","gridPanels","zPos","planeGeometry","PlaneGeometry","gridWidth","planeMaterial","MeshBasicMaterial","color","plane","Mesh","rotation","Math","PI","setFromCamera","planes","values","intersects","intersectObjects","panel","material","setHex","object","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","5","Minion","args","health","attackStrength","initializeView","startingZ","speed","geometry","BoxGeometry","MeshPhongMaterial","specular","shininess","6","_minion","_minion2","Player","setupGameState","minionCost","minions","push","./minion","7","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","body","appendChild","domElement"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0;\n\n// Shapes\nvar cube;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default();\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n\n      var minion = gameEngine.myPlayer.spawnMinion(index);\n      if (minion) {\n        scene.add(minion.viewObj);\n      }\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    var minion = gameEngine.computer.spawnMinion(3);\n    if (minion) {\n      scene.add(minion.viewObj);\n    }\n  });\n\n  render();\n}\n\nfunction render() {\n  requestAnimationFrame(render);\n  gameView.renderLoop();\n\n  updateUI();\n\n  globals.renderer.render(globals.scene, globals.camera);\n}\n\nfunction updateUI() {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n}\n\ninit();\n\n},{\"./modules/game-engine\":3,\"./modules/game-view\":4,\"./modules/view\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine() {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({ type: 'human', direction: _constants.xPositive });\n      this.computer = new _player2.default({ type: 'computer', direction: _constants.xNegative });\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop() {\n      this.state.players.forEach(function (player) {\n        return player.runLoop();\n      });\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./constants\":2,\"./player\":6}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: 0, y: 0 };\n\n    this.camera.position.z = 50;\n    this.camera.position.y = 50;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var gridWidth = 70;\n      var gridSubDiv = 8;\n      var grid = new THREE.GridHelper(gridWidth, gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = gridWidth / gridSubDiv;\n      var zPos = -30.6;\n\n      for (var i = 0; i < 8; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ color: 0x666666 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.1;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < 8; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop() {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop();\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.health = 20;\n    this.attackStrength = 3;\n    this.direction = args.direction;\n    this.initializeView(args.startingZ);\n    this.speed = 0.08;\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var geometry = new THREE.BoxGeometry(1, 1, 1);\n      var material = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      this.viewObj = new THREE.Mesh(geometry, material);\n\n      this.viewObj.position.z = startingZ * 9 - 32;\n      this.viewObj.position.x = -38 * this.direction;\n      //this.viewObj.position.z = 0;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop() {\n      this.viewObj.position.x += this.speed * this.direction;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.direction = args.direction;\n\n    this.setupGameState();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n        var minion = new _minion2.default({ direction: this.direction, startingZ: index });\n\n        this.minions.push(minion);\n        return minion;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop() {\n      this.minions.forEach(function (minion) {\n        return minion.runLoop();\n      });\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 200;\n      this.minionCost = 20;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./minion\":5}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL21vZHVsZXMvY29uc3RhbnRzLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS1lbmdpbmUuanMiLCJzcmMvanMvbW9kdWxlcy9nYW1lLXZpZXcuanMiLCJzcmMvanMvbW9kdWxlcy9taW5pb24uanMiLCJzcmMvanMvbW9kdWxlcy9wbGF5ZXIuanMiLCJzcmMvanMvbW9kdWxlcy92aWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTtBQUNBLElBQUksZ0JBQUo7O0FBRUEsSUFBSSxtQkFBSjtBQUFBLElBQWdCLGlCQUFoQjs7QUFFQTtBQUNBLElBQUksa0JBQUo7QUFBQSxJQUFlLGtCQUFmOztBQUVBO0FBQ0EsSUFBSSxJQUFKOztBQUVBLFNBQVMsSUFBVCxHQUFnQjtBQUFBLHlCQUNvQiw0QkFEcEI7QUFBQSxNQUNSLEtBRFEsb0JBQ1IsS0FEUTtBQUFBLE1BQ0QsTUFEQyxvQkFDRCxNQURDO0FBQUEsTUFDTyxRQURQLG9CQUNPLFFBRFA7O0FBRWQsWUFBVSxFQUFFLFlBQUYsRUFBUyxjQUFULEVBQWlCLGtCQUFqQixFQUFWOztBQUVBLGVBQWEsMEJBQWI7QUFDQSxhQUFXLHVCQUFhLE9BQWIsRUFBc0IsVUFBdEIsQ0FBWDs7QUFFQSxjQUFZLFNBQVMsY0FBVCxDQUF3QixPQUF4QixDQUFaO0FBQ0EsY0FBWSxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWjs7QUFFQSxTQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLFlBQU07QUFDckMsUUFBSSxRQUFRLFNBQVMsb0JBQVQsRUFBWjtBQUNBLFFBQUcsU0FBUyxDQUFaLEVBQWU7O0FBRWIsVUFBSSxTQUFTLFdBQVcsUUFBWCxDQUFvQixXQUFwQixDQUFnQyxLQUFoQyxDQUFiO0FBQ0EsVUFBRyxNQUFILEVBQVc7QUFDVCxjQUFN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QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBzZXR1cFNjcmVlblZpZXcgfSBmcm9tICcuL21vZHVsZXMvdmlldyc7XG5pbXBvcnQgR2FtZUVuZ2luZSBmcm9tICcuL21vZHVsZXMvZ2FtZS1lbmdpbmUnO1xuaW1wb3J0IEdhbWVWaWV3IGZyb20gJy4vbW9kdWxlcy9nYW1lLXZpZXcnO1xuXG4vLyBHbG9iYWxzXG5sZXQgZ2xvYmFscztcblxubGV0IGdhbWVFbmdpbmUsIGdhbWVWaWV3O1xuXG4vLyBVSSBFbGVtZW50c1xubGV0IHNjb3JlVGV4dCwgbW9uZXlUZXh0O1xuXG4vLyBTaGFwZXNcbnZhciBjdWJlO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICBsZXQgeyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9ID0gc2V0dXBTY3JlZW5WaWV3KCk7XG4gIGdsb2JhbHMgPSB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG5cbiAgZ2FtZUVuZ2luZSA9IG5ldyBHYW1lRW5naW5lKCk7XG4gIGdhbWVWaWV3ID0gbmV3IEdhbWVWaWV3KGdsb2JhbHMsIGdhbWVFbmdpbmUpO1xuXG4gIHNjb3JlVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xuICBtb25leVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9uZXknKTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbGV0IGluZGV4ID0gZ2FtZVZpZXcuZ2V0Q3VycmVudFBhbmVsSW5kZXgoKTtcbiAgICBpZihpbmRleCA+PSAwKSB7XG5cbiAgICAgIGxldCBtaW5pb24gPSBnYW1lRW5naW5lLm15UGxheWVyLnNwYXduTWluaW9uKGluZGV4KTtcbiAgICAgIGlmKG1pbmlvbikge1xuICAgICAgICBzY2VuZS5hZGQobWluaW9uLnZpZXdPYmopO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKCkgPT4ge1xuICAgIGxldCBtaW5pb24gPSBnYW1lRW5naW5lLmNvbXB1dGVyLnNwYXduTWluaW9uKDMpO1xuICAgIGlmKG1pbmlvbikge1xuICAgICAgc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJlbmRlcigpO1xufVxuXG5cbmZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gIGdhbWVWaWV3LnJlbmRlckxvb3AoKTtcblxuICB1cGRhdGVVSSgpO1xuXG4gIGdsb2JhbHMucmVuZGVyZXIucmVuZGVyKGdsb2JhbHMuc2NlbmUsIGdsb2JhbHMuY2FtZXJhKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlVUkoKSB7XG4gIHNjb3JlVGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIuc2NvcmU7XG4gIG1vbmV5VGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIubW9uZXk7XG59XG5cbmluaXQoKTtcbiIsImV4cG9ydCBjb25zdCB4UG9zaXRpdmUgPSAxO1xuZXhwb3J0IGNvbnN0IHhOZWdhdGl2ZSA9IC0xO1xuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgeyB4UG9zaXRpdmUsIHhOZWdhdGl2ZSB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUVuZ2luZSB7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemVQbGF5ZXJzKCkge1xuICAgIHRoaXMubXlQbGF5ZXIgPSBuZXcgUGxheWVyKHt0eXBlOiAnaHVtYW4nLCBkaXJlY3Rpb246IHhQb3NpdGl2ZX0pO1xuICAgIHRoaXMuY29tcHV0ZXIgPSBuZXcgUGxheWVyKHt0eXBlOiAnY29tcHV0ZXInLCBkaXJlY3Rpb246IHhOZWdhdGl2ZX0pO1xuICAgIHRoaXMuc3RhdGUucGxheWVycyA9IFsgdGhpcy5teVBsYXllciwgdGhpcy5jb21wdXRlciBdO1xuICB9XG5cbiAgZ2FtZUxvb3AoKSB7XG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHBsYXllci5ydW5Mb29wKCkpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbHMsIGdhbWVFbmdpbmUpIHtcbiAgICB0aGlzLnNjZW5lID0gZ2xvYmFscy5zY2VuZTtcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xuICAgIHRoaXMucmVuZGVyZXIgPSBnbG9iYWxzLnJlbmRlcmVyO1xuXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcblxuICAgIHRoaXMuc2V0dXBHcmlkKCk7XG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XG5cbiAgICB0aGlzLm1vdXNlID0geyB4OiAwLCB5OiAwIH07XG5cbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gNTA7XG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDUwO1xuICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnNjZW5lLnBvc2l0aW9uKTtcblxuXG4gICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcblxuICAgIHRoaXMuc2V0dXBNb3VzZUV2ZW50KCk7XG4gIH1cblxuICBzZXR1cExpZ2h0KCkge1xuICAgIGxldCBsaWdodEFtYmllbnQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NjY2NjY2KTtcbiAgICBsZXQgbGlnaHRTb3VyY2UgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDg4ODg4OCk7XG5cbiAgICBsaWdodFNvdXJjZS5wb3NpdGlvbi5zZXQoMywgMywgMyk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodEFtYmllbnQpO1xuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0U291cmNlKTtcbiAgfVxuXG4gIHNldHVwR3JpZCgpIHtcbiAgICBsZXQgZ3JpZFdpZHRoID0gNzA7XG4gICAgbGV0IGdyaWRTdWJEaXYgPSA4O1xuICAgIHZhciBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkU3ViRGl2KTtcbiAgICB0aGlzLnNjZW5lLmFkZChncmlkKTtcblxuICAgIHRoaXMuZ3JpZFBhbmVscyA9IHt9O1xuXG4gICAgbGV0IHBhbmVsTGVuZ3RoID0gZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdjtcbiAgICBsZXQgelBvcyA9IC0zMC42O1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgdmFyIHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIHBhbmVsTGVuZ3RoKTtcbiAgICAgIHZhciBwbGFuZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHg2NjY2NjZ9KTtcbiAgICAgIHZhciBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnkscGxhbmVNYXRlcmlhbCk7XG4gICAgICBwbGFuZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gelBvcztcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4xO1xuICAgICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuICAgICAgdGhpcy5ncmlkUGFuZWxzW2ldID0gcGxhbmU7XG5cbiAgICAgIHpQb3MgKz0gcGFuZWxMZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpIHtcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuICAgIHZhciBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhwbGFuZXMpO1xuXG4gICAgcGxhbmVzLmZvckVhY2goKHBhbmVsKSA9PiB7XG4gICAgICBwYW5lbC5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHg2NjY2NjYpO1xuICAgIH0pO1xuXG4gICAgaWYoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgb2JqID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7XG5cbiAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHhmZjAwMDApO1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gb2JqO1xuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcbiAgICB9XG5cbiAgfVxuXG4gIGdldEN1cnJlbnRQYW5lbEluZGV4KCkge1xuICAgIGlmKCF0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID09PSBwbGFuZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBzZXR1cE1vdXNlRXZlbnQoKSB7XG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldnQgPT4ge1xuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcbiAgICAgIG1vdXNlLnkgPSAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDE7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJMb29wKCkge1xuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xuICAgIHRoaXMuZ2FtZUVuZ2luZS5nYW1lTG9vcCgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5oZWFsdGggPSAyMDtcbiAgICB0aGlzLmF0dGFja1N0cmVuZ3RoID0gMztcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcoYXJncy5zdGFydGluZ1opO1xuICAgIHRoaXMuc3BlZWQgPSAwLjA4O1xuICB9XG5cbiAgaW5pdGlhbGl6ZVZpZXcoc3RhcnRpbmdaKSB7XG4gICAgbGV0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEsMSwxKTtcbiAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMCwgc3BlY3VsYXI6IDB4NTU1NTU1LCBzaGluaW5lc3M6IDMwIH0pO1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueiA9IChzdGFydGluZ1ogKiA5KSAtIDMyO1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gLTM4ICogdGhpcy5kaXJlY3Rpb247XG4gICAgLy90aGlzLnZpZXdPYmoucG9zaXRpb24ueiA9IDA7XG5cbiAgfVxuXG4gIHJ1bkxvb3AoKSB7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggKz0gKHRoaXMuc3BlZWQgKiB0aGlzLmRpcmVjdGlvbik7XG4gIH1cbn1cbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcblxuICAgIHRoaXMuc2V0dXBHYW1lU3RhdGUoKTtcbiAgfVxuXG4gIHNwYXduTWluaW9uKGluZGV4KSB7XG4gICAgaWYodGhpcy5tb25leSA+PSB0aGlzLm1pbmlvbkNvc3QpIHtcbiAgICAgIHRoaXMubW9uZXkgLT0gdGhpcy5taW5pb25Db3N0O1xuICAgICAgbGV0IG1pbmlvbiA9IG5ldyBNaW5pb24oe2RpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sIHN0YXJ0aW5nWjogaW5kZXh9KTtcblxuICAgICAgdGhpcy5taW5pb25zLnB1c2gobWluaW9uKTtcbiAgICAgIHJldHVybiBtaW5pb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHJ1bkxvb3AoKSB7XG4gICAgdGhpcy5taW5pb25zLmZvckVhY2gobWluaW9uID0+IG1pbmlvbi5ydW5Mb29wKCkpO1xuICB9XG5cbiAgc2V0dXBHYW1lU3RhdGUoKSB7XG4gICAgdGhpcy5taW5pb25zID0gW107XG4gICAgdGhpcy5zY29yZSA9IDA7XG4gICAgdGhpcy5tb25leSA9IDIwMDtcbiAgICB0aGlzLm1pbmlvbkNvc3QgPSAyMDtcbiAgfVxufVxuIiwiZnVuY3Rpb24gaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpe1xuICBsZXQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3LGgpO1xuICBjYW1lcmEuYXNwZWN0ID0gdy9oO1xuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xufVxuXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xuICBsZXQgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgbGV0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG5cbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpO1xuXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG59XG4iXX0=\n"]}