{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","delta","lastTimeStamp","fps","Math","round","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","rendererStats","update","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","fpsText","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","THREEx","RendererStats","domElement","style","position","left","bottom","document","body","appendChild","_setupScreenView","setupScreenView","getElementById","window","addEventListener","index","getCurrentPanelIndex","spawnMinion","computer","./modules/game-engine","./modules/game-view","./modules/view","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_constants","Array","unique","this","filter","self","indexOf","AI","args","determineAIFunction","personality","player","spawnInterval","lastSpawn","poppulationLimit","opponents","canSpawn","spawnIndex","AIFunction","minions","floor","random","gridSubDiv","friendlies","startingPos","spawnPos","friendlyMap","map","m","row","startingZ","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","forEach","val","idx","fullIdxArr","slice","gaps","arrayToUse","gridWidth","enemy","minion","spawnValue","values","./constants","3","Base","direction","colliderList","playerId","id","baseWidth","baseHeight","baseDepth","maxHealth","health","hitBoxBuffer","killReward","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","THREE","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","color","specular","shininess","shapeMesh","Mesh","hitGeometry","hitMaterial","MeshBasicMaterial","transparent","opacity","hitMesh","healthBar","initializeHealthBar","hitBox","add","y","userData","object","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","name","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","geometry","computeBoundingBox","box3","boundingBox","clone","collider","ColliderBox3","updateHealthBar","4","xPositive","xNegative","5","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","state","colliderSystem","ColliderSystem","initializePlayers","type","playerAI","players","activateMenu","winner","pop","reset","gameOver","_this","runLoop","lost","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","6","planeTexture","TextureLoader","load","repeat","set","wrapS","RepeatWrapping","wrapT","GameView","setupGrid","setupLight","mouse","positionScale","z","lookAt","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","texturedSurfaceGeometry","PlaneGeometry","texturedSurfaceMaterial","texturedSurface","rotation","PI","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","planeMaterial","plane","setFromCamera","planes","intersects","intersectObjects","panel","material","setHex","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","7","activateStartScreen","startSection","classList","restartSection","remove","activateRestartScreen","modal","closeMenu","restart","8","Minion","attackStrength","attackSpeed","defaultSpeed","speed","attackProperties","attackTime","attackAnimationProperties","destroy","attack","rotObjectMatrix","otherCollider","object3d","currentTarget","attackProcedure","min","attackLoop","animateAttack","getAttackValue","processReward","children","rightArm","currentAttackTime","animationSpeed","max","9","_minion","_minion2","_base","_base2","Player","minionId","setupGameState","spawnBase","base","minionCost","ObjectLoader","reward","keys","_this2","destroyBase","resetAttackAnimation","destroyMinion","splice","findColliderIndex","_this3","./base","./minion","10","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    fpsText = void 0;\n\n// Shapes\nvar cube;\n\n// performance\nvar rendererStats = new THREEx.RendererStats();\nrendererStats.domElement.style.position = 'absolute';\nrendererStats.domElement.style.left = '0px';\nrendererStats.domElement.style.bottom = '0px';\ndocument.body.appendChild(rendererStats.domElement);\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n  fpsText = document.getElementById('fps');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n      gameEngine.myPlayer.spawnMinion(index);\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    gameEngine.computer.spawnMinion(3);\n  });\n\n  render();\n}\n\nvar lastTimeStamp = 0;\nfunction render(timestamp) {\n  var delta = timestamp - lastTimeStamp;\n  delta = delta / 1000;\n  lastTimeStamp = timestamp;\n  var fps = Math.round(1 / delta);\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI(fps);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  rendererStats.update(globals.renderer);\n}\n\nfunction updateUI(fps) {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n  fpsText.textContent = fps;\n}\n\ninit();\n\n},{\"./modules/game-engine\":5,\"./modules/game-view\":6,\"./modules/view\":10}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 100;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 10;\n  }\n\n  _createClass(AI, [{\n    key: \"canSpawn\",\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp, opponents) {\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions);\n\n      if (spawnIndex >= 0 && this.player.minions.length < this.poppulationLimit) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: \"randomAI\",\n    value: function randomAI(opponents) {\n      return Math.floor(Math.random() * _constants.gridSubDiv);\n    }\n  }, {\n    key: \"nicksAI\",\n    value: function nicksAI(opponents, friendlies) {\n      var startingPos = this.player.spawnPos;\n\n      var friendlyMap = friendlies.map(function (m) {\n        return {\n          row: m.startingZ,\n          distance: m.getPosition().x - startingPos\n        };\n      });\n\n      var opponentMap = opponents.map(function (m) {\n\n        var distance = startingPos - m.getPosition().x;\n        return {\n          row: m.startingZ,\n          distance: distance\n        };\n      });\n\n      var rowArray = [];\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        rowArray.push(i);\n      }\n\n      var decision = {\n        hasFriendlies: [],\n        closestIndex: -1,\n        closestVal: 99999,\n        distanceTies: []\n\n      };\n\n      friendlyMap.forEach(function (val, idx) {\n        decision.hasFriendlies.push(val.row);\n      });\n\n      opponentMap.forEach(function (val, idx) {\n        if (val.distance < decision.closestVal) {\n          decision.closestIndex = val.row;\n          decision.closestVal = val.distance;\n\n          if (decision.distanceTies.length > 0) {\n            decision.distanceTies.length = 0;\n          }\n        } else if (val.distance === decision.closestVal) {\n          decision.distanceTies.push(val.row);\n        }\n      });\n\n      decision.distanceTies.push(decision.closestIndex);\n      decision.hasFriendlies = decision.hasFriendlies.unique();\n\n      var fullIdxArr = rowArray.slice(0);\n\n      decision.gaps = fullIdxArr.filter(function (x) {\n        return decision.hasFriendlies.indexOf(x) < 0;\n      });\n\n      //if(friendlies.length > 3) {\n      //friendlies[2].viewObj.position.z += 1;\n      //}\n\n\n      var arrayToUse = void 0;\n      if (decision.closestVal < _constants.gridWidth / 2) {\n        arrayToUse = decision.distanceTies;\n      } else {\n        arrayToUse = decision.gaps;\n      }\n\n      var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n      return arrayToUse[arrIdx];\n    }\n  }, {\n    key: \"defensiveAI\",\n    value: function defensiveAI(opponents) {\n      var map = {};\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        map[i] = 0;\n      }\n\n      opponents.forEach(function (enemy) {\n        map[enemy.startingZ]--;\n      });\n\n      this.player.minions.forEach(function (minion) {\n        map[minion.startingZ]++;\n      });\n\n      var spawnIndex = -1;\n      var spawnValue = 100000;\n      Object.values(map).forEach(function (val, index) {\n        if (val < spawnValue) {\n          spawnValue = val;\n          spawnIndex = index;\n        }\n      });\n\n      return spawnIndex;\n    }\n  }, {\n    key: \"determineAIFunction\",\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"./constants\":4}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n    function Base(args) {\n        _classCallCheck(this, Base);\n\n        this.direction = args.direction;\n        this.colliderList = args.colliderList;\n        this.player = args.player;\n        this.playerId = this.player.id;\n\n        this.baseWidth = _constants.gridWidth;\n        this.baseHeight = 20;\n        this.baseDepth = 10;\n\n        this.maxHealth = 5000;\n        this.health = this.maxHealth;\n\n        this.hitBoxBuffer = 2;\n\n        this.killReward = {\n            money: 550,\n            score: 1000\n        };\n\n        this.initializeView(this.direction);\n        this.registerCollision();\n    }\n\n    _createClass(Base, [{\n        key: \"initializeView\",\n        value: function initializeView(direction) {\n            var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n            this.viewObj = new THREE.Group();\n\n            var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n            var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x008800, specular: 0x555555, shininess: 30 });\n            var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n            var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n            var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n            var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n            this.healthBar = this.initializeHealthBar();\n            this.hitBox = hitMesh;\n\n            this.viewObj.add(shapeMesh);\n            this.viewObj.add(hitMesh);\n            this.viewObj.add(this.healthBar);\n\n            this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n            this.viewObj.position.y = this.baseHeight / 2;\n\n            this.hitBox.userData.object = this;\n            this.hitBox.userData.player = this.player;\n        }\n    }, {\n        key: \"initializeHealthBar\",\n        value: function initializeHealthBar() {\n            this._healthBarLength = _constants.gridWidth / 10;\n            this._healthBarWidth = _constants.gridWidth / 150;\n            var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n            var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n            var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n            fullHealthBarMesh.name = \"FullHealthBar\";\n\n            var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n            var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n            var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n            emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n            var healthBarGroup = new THREE.Group();\n            healthBarGroup.add(fullHealthBarMesh);\n            healthBarGroup.add(emptyHealthBarMesh);\n\n            healthBarGroup.position.y = this.baseHeight + 5;\n\n            return healthBarGroup;\n        }\n    }, {\n        key: \"updateHealthBar\",\n        value: function updateHealthBar() {\n            var healthPercent = this.health / this.maxHealth;\n            var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n            var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n            fullHealthBar.scale.x = healthPercent;\n            fullHealthBar.position.x = healthBarOffset;\n        }\n    }, {\n        key: \"registerCollision\",\n        value: function registerCollision() {\n            this.hitBox.geometry.computeBoundingBox();\n            var box3 = this.hitBox.geometry.boundingBox.clone();\n            this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n            this.colliderList.push(this.collider);\n        }\n    }, {\n        key: \"runLoop\",\n        value: function runLoop() {\n            this.collider.update();\n            this.updateHealthBar();\n        }\n    }]);\n\n    return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":4}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 64;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"nicksAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"nicksAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver() {\n      (0, _menuScreen.activateMenu)({\n        winner: this.winner\n      });\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          _this.winner = player.id !== _this.myPlayer.id;\n          _this.initializeGameOver();\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":2,\"./constants\":4,\"./menu-screen\":7,\"./player\":9}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var texturedSurfaceGeometry = new THREE.PlaneGeometry(_constants.gridWidth, _constants.gridWidth);\n      var texturedSurfaceMaterial = new THREE.MeshBasicMaterial({ map: planeTexture });\n      var texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      texturedSurface.rotation.x = -0.5 * Math.PI;\n      texturedSurface.position.y = -0.3;\n      this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.2;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":4,\"./menu-screen\":7}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar restartSection = document.getElementById('restartModal');\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner) {\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameEngine) {\n  startSection.addEventListener('click', function () {});\n\n  restartSection.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = 10;\n    this.health = this.maxHealth;\n    this.attackStrength = 5;\n    this.attackSpeed = 250;\n\n    this.defaultSpeed = 0.3;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.attackAnimationProperties = {\n      direction: this.direction,\n      speed: this.attackSpeed / 2\n    };\n\n    this.killReward = {\n      money: 75,\n      score: 25\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.rotObjectMatrix = null;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      //this.viewObj.add(shapeMesh);\n      //this.viewObj.add(hitMesh);\n      //this.viewObj.add(this.healthBar);\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"isObjectLoaded\",\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = otherCollider.object3d.userData.object;\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = otherCollider.object3d.userData.object;\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: \"getAttackValue\",\n    value: function getAttackValue() {\n      var critProc = Math.random();\n      return critProc >= .9 ? this.attackStrength * (Math.random() + 1) : this.attackStrength;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: \"attackProcedure\",\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime = Math.min(this.attackProperties.attackTime + delta, this.attackSpeed);\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(delta);\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(0);\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: \"attackLoop\",\n    value: function attackLoop(delta) {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      this.animateAttack(delta);\n      if (this.attackProperties.attackTime < this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: \"animateAttack\",\n    value: function animateAttack(delta) {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n\n        var currentAttackTime = this.attackProperties.attackTime;\n        var direction = this.attackAnimationProperties.direction;\n        var animationSpeed = this.attackAnimationProperties.speed;\n\n        var rotation = direction * (135 * (Math.PI / 180) * (delta / animationSpeed));\n        rotation = Math.min(rightArm.rotation.z + rotation, 135);\n        rotation = Math.max(rotation, 0);\n\n        rightArm.rotation.z = rotation;\n        if (currentAttackTime > animationSpeed) {\n          this.attackAnimationProperties.direction = -1;\n        } else {\n          this.attackAnimationProperties.direction = 1;\n        }\n      }\n    }\n  }, {\n    key: \"resetAttackAnimation\",\n    value: function resetAttackAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        rightArm.rotation.z = 0;\n      }\n    }\n  }, {\n    key: \"animateWalk\",\n    value: function animateWalk() {}\n  }, {\n    key: \"resetWalkAnimation\",\n    value: function resetWalkAnimation() {}\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":4}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n\n    this.setupGameState();\n    this.spawnBase();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this = this;\n\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          playerId: this.id,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList,\n          player: this\n        });\n\n        this.minions.push(minion);\n        var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n        var loader = new THREE.ObjectLoader();\n        loader.load('./geometry/model.json', function (obj) {\n          obj.position.y = -4;\n          minion.viewObj.add(obj);\n\n          if (minion.direction === -1) {\n            minion.viewObj.rotation.y = Math.PI;\n          }\n\n          _this.scene.add(minion.viewObj);\n        });\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this2 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (!minion.attack) {\n          minion.resetAttackAnimation();\n        }\n        if (minion.destroy) {\n          _this2.destroyMinion(minion, index);\n        }\n      });\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this3 = this;\n\n      this.minions.forEach(function (minion) {\n        _this3.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.spawnBase();\n      this.setupGameState();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 50;\n      this.lost = false;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./base\":3,\"./constants\":4,\"./minion\":8}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxhaS1wbGF5ZXIuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxiYXNlLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcY29uc3RhbnRzLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcZ2FtZS1lbmdpbmUuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxnYW1lLXZpZXcuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxtZW51LXNjcmVlbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXG1pbmlvbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHBsYXllci5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0FBQ0EsSUFBSSxnQkFBSjs7QUFFQSxJQUFJLG1CQUFKO0FBQUEsSUFBZ0IsaUJBQWhCOztBQUVBO0FBQ0EsSUFBSSxrQkFBSjtBQUFBLElBQWUsa0JBQWY7QUFBQSxJQUEwQixnQkFBMUI7O0FBRUE7QUFDQSxJQUFJLElBQUo7O0FBRUE7QUFDQSxJQUFJLGdCQUFnQixJQUFJLE9BQU8sYUFBWCxFQUFwQjtBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixRQUEvQixHQUEwQyxVQUExQztBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixJQUEvQixHQUFzQyxLQUF0QztBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixNQUEvQixHQUF3QyxLQUF4QztBQUNBLFNBQVMsSUFBVCxDQUFjLFdBQWQsQ0FBMkIsY0FBYyxVQUF6Qzs7QUFFQSxTQUFTLElBQVQsR0FBZ0I7QUFBQSx5QkFDb0IsNEJBRHBCO0FBQUEsTUFDUixLQURRLG9CQUNSLEtBRFE7QUFBQSxNQUNELE1BREMsb0JBQ0QsTUFEQztBQUFBLE1BQ08sUUFE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QU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsWUFBTTtBQUN0QyxpQkFBYSxRQUFiLEVBQXVCLE1BQXZCO0FBQ0QsR0FGRDtBQUdEOztBQUVNLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFJLFFBQVEsSUFBSSxNQUFNLEtBQVYsRUFBWjtBQUNBLE1BQUksU0FBUyxJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBNUIsRUFBZ0MsT0FBTyxVQUFQLEdBQW9CLE9BQU8sV0FBM0QsRUFBd0UsR0FBeEUsRUFBNkUsSUFBN0UsQ0FBYjtBQUNBLE1BQUksV0FBVyxJQUFJLE1BQU0sYUFBVixFQUFmOztBQUVBLFdBQVMsT0FBVCxDQUFpQixPQUFPLFVBQXhCLEVBQW9DLE9BQU8sV0FBM0M7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsVUFBbkM7O0FBRUEsZ0JBQWMsUUFBZCxFQUF3QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBzZXR1cFNjcmVlblZpZXcgfSBmcm9tICcuL21vZHVsZXMvdmlldyc7XHJcbmltcG9ydCBHYW1lRW5naW5lIGZyb20gJy4vbW9kdWxlcy9nYW1lLWVuZ2luZSc7XHJcbmltcG9ydCBHYW1lVmlldyBmcm9tICcuL21vZHVsZXMvZ2FtZS12aWV3JztcclxuXHJcbi8vIEdsb2JhbHNcclxubGV0IGdsb2JhbHM7XHJcblxyXG5sZXQgZ2FtZUVuZ2luZSwgZ2FtZVZpZXc7XHJcblxyXG4vLyBVSSBFbGVtZW50c1xyXG5sZXQgc2NvcmVUZXh0LCBtb25leVRleHQsIGZwc1RleHQ7XHJcblxyXG4vLyBTaGFwZXNcclxudmFyIGN1YmU7XHJcblxyXG4vLyBwZXJmb3JtYW5jZVxyXG52YXIgcmVuZGVyZXJTdGF0cyA9IG5ldyBUSFJFRXguUmVuZGVyZXJTdGF0cygpO1xyXG5yZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXHJcbnJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCdcclxucmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLmJvdHRvbSA9ICcwcHgnXHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudCApXHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gIGxldCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSBzZXR1cFNjcmVlblZpZXcoKTtcclxuICBnbG9iYWxzID0geyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9O1xyXG5cclxuICBnYW1lRW5naW5lID0gbmV3IEdhbWVFbmdpbmUoZ2xvYmFscyk7XHJcbiAgZ2FtZVZpZXcgPSBuZXcgR2FtZVZpZXcoZ2xvYmFscywgZ2FtZUVuZ2luZSk7XHJcblxyXG4gIHNjb3JlVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xyXG4gIG1vbmV5VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb25leScpO1xyXG4gIGZwc1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnBzJyk7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGxldCBpbmRleCA9IGdhbWVWaWV3LmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XHJcbiAgICBpZihpbmRleCA+PSAwKSB7XHJcbiAgICAgIGdhbWVFbmdpbmUubXlQbGF5ZXIuc3Bhd25NaW5pb24oaW5kZXgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoKSA9PiB7XHJcbiAgICBnYW1lRW5naW5lLmNvbXB1dGVyLnNwYXduTWluaW9uKDMpO1xyXG4gIH0pO1xyXG5cclxuICByZW5kZXIoKTtcclxufVxyXG5cclxubGV0IGxhc3RUaW1lU3RhbXAgPSAwO1xyXG5mdW5jdGlvbiByZW5kZXIodGltZXN0YW1wKSB7XHJcbiAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gbGFzdFRpbWVTdGFtcDtcclxuICBkZWx0YSA9IGRlbHRhIC8gMTAwMDtcclxuICBsYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gIGxldCBmcHMgPSBNYXRoLnJvdW5kKDEgLyBkZWx0YSk7XHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XHJcbiAgZ2FtZVZpZXcucmVuZGVyTG9vcCh0aW1lc3RhbXApO1xyXG5cclxuICB1cGRhdGVVSShmcHMpO1xyXG5cclxuICBnbG9iYWxzLnJlbmRlcmVyLnJlbmRlcihnbG9iYWxzLnNjZW5lLCBnbG9iYWxzLmNhbWVyYSk7XHJcbiAgcmVuZGVyZXJTdGF0cy51cGRhdGUoZ2xvYmFscy5yZW5kZXJlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVVJKGZwcykge1xyXG4gIHNjb3JlVGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIuc2NvcmU7XHJcbiAgbW9uZXlUZXh0LnRleHRDb250ZW50ID0gZ2FtZUVuZ2luZS5teVBsYXllci5tb25leTtcclxuICBmcHNUZXh0LnRleHRDb250ZW50ID0gZnBzO1xyXG59XHJcblxyXG5pbml0KCk7XHJcbiIsIkFycmF5LnByb3RvdHlwZS51bmlxdWUgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgc2VsZikgeyBcclxuICAgIHJldHVybiBzZWxmLmluZGV4T2YodmFsdWUpID09PSBpbmRleDtcclxuICB9KTtcclxufVxyXG5cclxuaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQUkge1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XHJcbiAgICB0aGlzLmRldGVybWluZUFJRnVuY3Rpb24oYXJncy5wZXJzb25hbGl0eSk7XHJcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xyXG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gMTAwO1xyXG4gICAgdGhpcy5sYXN0U3Bhd24gPSAwO1xyXG4gICAgdGhpcy5wb3BwdWxhdGlvbkxpbWl0ID0gMTA7XHJcbiAgfVxyXG5cclxuICBjYW5TcGF3bih0aW1lc3RhbXApIHtcclxuICAgIHJldHVybiB0aW1lc3RhbXAgLSB0aGlzLmxhc3RTcGF3biA+IHRoaXMuc3Bhd25JbnRlcnZhbDtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AodGltZXN0YW1wLCBvcHBvbmVudHMpIHtcclxuICAgIGlmKCF0aGlzLmNhblNwYXduKHRpbWVzdGFtcCkpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IHNwYXduSW5kZXggPSB0aGlzLkFJRnVuY3Rpb24ob3Bwb25lbnRzLCB0aGlzLnBsYXllci5taW5pb25zKTtcclxuXHJcbiAgICBpZihzcGF3bkluZGV4ID49IDAgJiYgdGhpcy5wbGF5ZXIubWluaW9ucy5sZW5ndGggPCB0aGlzLnBvcHB1bGF0aW9uTGltaXQpIHtcclxuICAgICAgdGhpcy5wbGF5ZXIuc3Bhd25NaW5pb24oc3Bhd25JbmRleCk7XHJcbiAgICAgIHRoaXMubGFzdFNwYXduID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmFuZG9tQUkob3Bwb25lbnRzKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XHJcbiAgfVxyXG5cclxuICBuaWNrc0FJKG9wcG9uZW50cywgZnJpZW5kbGllcykge1xyXG4gICAgbGV0IHN0YXJ0aW5nUG9zID0gdGhpcy5wbGF5ZXIuc3Bhd25Qb3M7XHJcblxyXG4gICAgbGV0IGZyaWVuZGx5TWFwID0gZnJpZW5kbGllcy5tYXAobSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcm93OiBtLnN0YXJ0aW5nWixcclxuICAgICAgICBkaXN0YW5jZTogbS5nZXRQb3NpdGlvbigpLnggLSBzdGFydGluZ1Bvc1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgb3Bwb25lbnRNYXAgPSBvcHBvbmVudHMubWFwKG0gPT4ge1xyXG5cclxuICAgICAgbGV0IGRpc3RhbmNlID0gc3RhcnRpbmdQb3MgLSBtLmdldFBvc2l0aW9uKCkueDtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICByb3c6IG0uc3RhcnRpbmdaLFxyXG4gICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJvd0FycmF5ID0gW107XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7IHJvd0FycmF5LnB1c2goaSk7IH1cclxuXHJcbiAgICBsZXQgZGVjaXNpb24gPSB7XHJcbiAgICAgIGhhc0ZyaWVuZGxpZXM6IFtdLFxyXG4gICAgICBjbG9zZXN0SW5kZXg6IC0xLFxyXG4gICAgICBjbG9zZXN0VmFsOiA5OTk5OSxcclxuICAgICAgZGlzdGFuY2VUaWVzOiBbXVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgZnJpZW5kbHlNYXAuZm9yRWFjaCgodmFsLCBpZHgpID0+IHtcclxuICAgICAgZGVjaXNpb24uaGFzRnJpZW5kbGllcy5wdXNoKHZhbC5yb3cpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG9wcG9uZW50TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XHJcbiAgICAgIGlmKHZhbC5kaXN0YW5jZSA8IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcclxuICAgICAgICBkZWNpc2lvbi5jbG9zZXN0SW5kZXggPSB2YWwucm93O1xyXG4gICAgICAgIGRlY2lzaW9uLmNsb3Nlc3RWYWwgPSB2YWwuZGlzdGFuY2U7XHJcblxyXG4gICAgICAgIGlmKGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZih2YWwuZGlzdGFuY2UgPT09IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcclxuICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMucHVzaCh2YWwucm93KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcclxuICAgIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMgPSBkZWNpc2lvbi5oYXNGcmllbmRsaWVzLnVuaXF1ZSgpO1xyXG5cclxuICAgIGxldCBmdWxsSWR4QXJyID0gcm93QXJyYXkuc2xpY2UoMCk7XHJcblxyXG4gICAgZGVjaXNpb24uZ2FwcyA9IGZ1bGxJZHhBcnIuZmlsdGVyKHggPT4ge1xyXG4gICAgICByZXR1cm4gZGVjaXNpb24uaGFzRnJpZW5kbGllcy5pbmRleE9mKHgpIDwgMDtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL2lmKGZyaWVuZGxpZXMubGVuZ3RoID4gMykge1xyXG4gICAgICAvL2ZyaWVuZGxpZXNbMl0udmlld09iai5wb3NpdGlvbi56ICs9IDE7XHJcbiAgICAvL31cclxuXHJcblxyXG4gICAgbGV0IGFycmF5VG9Vc2U7XHJcbiAgICBpZihkZWNpc2lvbi5jbG9zZXN0VmFsIDwgZ3JpZFdpZHRoLzIpIHtcclxuICAgICAgYXJyYXlUb1VzZSA9IGRlY2lzaW9uLmRpc3RhbmNlVGllcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFycmF5VG9Vc2UgPSBkZWNpc2lvbi5nYXBzO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBhcnJJZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheVRvVXNlLmxlbmd0aCk7XHJcbiAgICByZXR1cm4gYXJyYXlUb1VzZVthcnJJZHhdO1xyXG5cclxuICB9XHJcblxyXG4gIGRlZmVuc2l2ZUFJKG9wcG9uZW50cykge1xyXG4gICAgbGV0IG1hcCA9IHt9O1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBtYXBbaV0gPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIG9wcG9uZW50cy5mb3JFYWNoKChlbmVteSkgPT4ge1xyXG4gICAgICBtYXBbZW5lbXkuc3RhcnRpbmdaXS0tO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXIubWluaW9ucy5mb3JFYWNoKChtaW5pb24pID0+IHtcclxuICAgICAgbWFwW21pbmlvbi5zdGFydGluZ1pdKytcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBzcGF3bkluZGV4ID0gLTE7XHJcbiAgICBsZXQgc3Bhd25WYWx1ZSA9IDEwMDAwMDtcclxuICAgIE9iamVjdC52YWx1ZXMobWFwKS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmKHZhbCA8IHNwYXduVmFsdWUpIHtcclxuICAgICAgICBzcGF3blZhbHVlID0gdmFsO1xyXG4gICAgICAgIHNwYXduSW5kZXggPSBpbmRleFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc3Bhd25JbmRleDtcclxuICB9XHJcblxyXG4gIGRldGVybWluZUFJRnVuY3Rpb24ocGVyc29uYWxpdHkpIHtcclxuICAgIGlmKHBlcnNvbmFsaXR5KSB7XHJcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbcGVyc29uYWxpdHldO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5BSUZ1bmN0aW9uID0gdGhpc1tcInJhbmRvbUFJXCJdO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xyXG4gICAgdGhpcy5wbGF5ZXJJZCA9IHRoaXMucGxheWVyLmlkO1xyXG5cclxuICAgIHRoaXMuYmFzZVdpZHRoID0gZ3JpZFdpZHRoO1xyXG4gICAgdGhpcy5iYXNlSGVpZ2h0ID0gMjA7XHJcbiAgICB0aGlzLmJhc2VEZXB0aCA9IDEwO1xyXG5cclxuICAgIHRoaXMubWF4SGVhbHRoID0gNTAwMDtcclxuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XHJcblxyXG4gICAgdGhpcy5oaXRCb3hCdWZmZXIgPSAyO1xyXG5cclxuICAgIHRoaXMua2lsbFJld2FyZCA9IHtcclxuICAgICAgbW9uZXk6IDU1MCxcclxuICAgICAgc2NvcmU6IDEwMDBcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuZGlyZWN0aW9uKTtcclxuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVWaWV3KGRpcmVjdGlvbiwgaGl0Qm94T3BhY2l0eT0uMjUpIHtcclxuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG5cclxuICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxyXG4gICAgICB0aGlzLmJhc2VEZXB0aCxcclxuICAgICAgdGhpcy5iYXNlSGVpZ2h0LFxyXG4gICAgICB0aGlzLmJhc2VXaWR0aFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgc2hhcGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IDB4MDA4ODAwLCBzcGVjdWxhcjogMHg1NTU1NTUsIHNoaW5pbmVzczogMzAgfSk7XHJcbiAgICBsZXQgc2hhcGVNZXNoID0gbmV3IFRIUkVFLk1lc2goc2hhcGVHZW9tZXRyeSwgc2hhcGVNYXRlcmlhbCk7XHJcblxyXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxyXG4gICAgICB0aGlzLmJhc2VEZXB0aCArIHRoaXMuaGl0Qm94QnVmZmVyLFxyXG4gICAgICB0aGlzLmJhc2VIZWlnaHQgKyB0aGlzLmhpdEJveEJ1ZmZlcixcclxuICAgICAgdGhpcy5iYXNlV2lkdGggKyB0aGlzLmhpdEJveEJ1ZmZlciBcclxuICAgICk7XHJcblxyXG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5IH0pO1xyXG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xyXG5cclxuICAgIHRoaXMuaGVhbHRoQmFyID0gdGhpcy5pbml0aWFsaXplSGVhbHRoQmFyKCk7XHJcbiAgICB0aGlzLmhpdEJveCA9IGhpdE1lc2g7XHJcblxyXG4gICAgdGhpcy52aWV3T2JqLmFkZChzaGFwZU1lc2gpO1xyXG4gICAgdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcclxuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG5cclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gKCgtZ3JpZFdpZHRoLzIpIC0gKHRoaXMuYmFzZURlcHRoIC8gMikpICogdGhpcy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodC8yO1xyXG5cclxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVIZWFsdGhCYXIoKSB7XHJcbiAgICB0aGlzLl9oZWFsdGhCYXJMZW5ndGggPSBncmlkV2lkdGggLyAxMDtcclxuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gZ3JpZFdpZHRoIC8gMTUwO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGgsIHRoaXMuX2hlYWx0aEJhcldpZHRoLCB0aGlzLl9oZWFsdGhCYXJXaWR0aCk7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDB9KTtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSwgZnVsbEhlYWx0aEJhck1hdGVyaWFsKTtcclxuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcclxuXHJcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGggKiAwLjk5LCB0aGlzLl9oZWFsdGhCYXJXaWR0aCAqIDAuOSwgdGhpcy5faGVhbHRoQmFyV2lkdGggKiAwLjkpO1xyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGVtcHR5SGVhbHRoQmFyR2VvbWV0cnksIGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwpO1xyXG4gICAgZW1wdHlIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkVtcHR5SGVhbHRoQmFyXCI7XHJcblxyXG4gICAgbGV0IGhlYWx0aEJhckdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XHJcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZnVsbEhlYWx0aEJhck1lc2gpO1xyXG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XHJcblxyXG4gICAgaGVhbHRoQmFyR3JvdXAucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodCArIDU7XHJcblxyXG4gICAgcmV0dXJuIGhlYWx0aEJhckdyb3VwO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xyXG4gICAgbGV0IGhlYWx0aFBlcmNlbnQgPSB0aGlzLmhlYWx0aC90aGlzLm1heEhlYWx0aDtcclxuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJMZW5ndGggLyAyO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcclxuXHJcbiAgICBmdWxsSGVhbHRoQmFyLnNjYWxlLnggPSBoZWFsdGhQZXJjZW50O1xyXG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJDb2xsaXNpb24oKSB7XHJcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxyXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xyXG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBUSFJFRXguQ29sbGlkZXJCb3gzKHRoaXMuaGl0Qm94LCBib3gzKTtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XHJcbiAgfVxyXG5cclxuICBydW5Mb29wKCkge1xyXG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcclxuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCB4UG9zaXRpdmUgPSAxO1xyXG5leHBvcnQgY29uc3QgeE5lZ2F0aXZlID0gLTE7XHJcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSA2NDtcclxuZXhwb3J0IGNvbnN0IGdyaWRTdWJEaXYgPSAxNjtcclxuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XHJcbmltcG9ydCBBSSBmcm9tICcuL2FpLXBsYXllcic7XHJcbmltcG9ydCB7IGFjdGl2YXRlTWVudSB9IGZyb20gJy4vbWVudS1zY3JlZW4nO1xyXG5pbXBvcnQgeyB4UG9zaXRpdmUsIHhOZWdhdGl2ZSwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5jYW1lcmEgPSBhcmdzLmNhbWVyYTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtID0gbmV3IFRIUkVFeC5Db2xsaWRlclN5c3RlbSgpO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXTtcclxuXHJcbiAgICB0aGlzLnBsYXllcklkID0gMDtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVQbGF5ZXJzKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplUGxheWVycygpIHtcclxuICAgIHRoaXMubXlQbGF5ZXIgPSBuZXcgUGxheWVyKHtcclxuICAgICAgdHlwZTogJ2h1bWFuJyxcclxuICAgICAgZGlyZWN0aW9uOiB4UG9zaXRpdmUsXHJcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmUsXHJcbiAgICAgIGlkOiB0aGlzLnBsYXllcklkKytcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY29tcHV0ZXIgPSBuZXcgUGxheWVyKHtcclxuICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcclxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXHJcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxyXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLkFJID0gbmV3IEFJKHtcclxuICAgICAgcGxheWVyOiB0aGlzLmNvbXB1dGVyLFxyXG4gICAgICBwZXJzb25hbGl0eTogXCJuaWNrc0FJXCJcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGxheWVyQUkgPSBuZXcgQUkoe1xyXG4gICAgICBwbGF5ZXI6IHRoaXMubXlQbGF5ZXIsXHJcbiAgICAgIHBlcnNvbmFsaXR5OiBcIm5pY2tzQUlcIlxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHRoaXMuc3RhdGUucGxheWVycyA9IFsgdGhpcy5teVBsYXllciwgdGhpcy5jb21wdXRlciBdO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUdhbWVPdmVyKCkge1xyXG4gICAgYWN0aXZhdGVNZW51KHtcclxuICAgICAgd2lubmVyOiB0aGlzLndpbm5lclxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJlc3RhcnQoKSB7XHJcbiAgICB3aGlsZSh0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuY29sbGlkZXJMaXN0LnBvcCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcclxuICAgICAgcGxheWVyLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5nYW1lT3Zlcikge1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5BSSkge1xyXG4gICAgICB0aGlzLkFJLnJ1bkxvb3AodGltZXN0YW1wLCB0aGlzLm15UGxheWVyLm1pbmlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMucGxheWVyQUkpIHtcclxuICAgICAgdGhpcy5wbGF5ZXJBSS5ydW5Mb29wKHRpbWVzdGFtcCwgdGhpcy5jb21wdXRlci5taW5pb25zKTtcclxuICAgIH1cclxuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7XHJcbiAgICAgIHBsYXllci5ydW5Mb29wKHRpbWVzdGFtcCk7XHJcbiAgICAgIGlmKHBsYXllci5sb3N0ICYmICF0aGlzLmdhbWVPdmVyKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy53aW5uZXIgPSBwbGF5ZXIuaWQgIT09IHRoaXMubXlQbGF5ZXIuaWQ7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplR2FtZU92ZXIoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IGJpbmRCdXR0b25zIH0gZnJvbSAnLi9tZW51LXNjcmVlbic7XHJcblxyXG5jb25zdCBwbGFuZVRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQoXCJ0ZXh0dXJlcy9zdG9uZS5qcGdcIik7XHJcbnBsYW5lVGV4dHVyZS5yZXBlYXQuc2V0KDEwLDEwKTtcclxucGxhbmVUZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbnBsYW5lVGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVWaWV3IHtcclxuICBjb25zdHJ1Y3RvcihnbG9iYWxzLCBnYW1lRW5naW5lKSB7XHJcbiAgICB0aGlzLnNjZW5lID0gZ2xvYmFscy5zY2VuZTtcclxuICAgIHRoaXMuY2FtZXJhID0gZ2xvYmFscy5jYW1lcmE7XHJcbiAgICB0aGlzLnJlbmRlcmVyID0gZ2xvYmFscy5yZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLmdhbWVFbmdpbmUgPSBnYW1lRW5naW5lO1xyXG5cclxuICAgIHRoaXMuc2V0dXBHcmlkKCk7XHJcbiAgICB0aGlzLnNldHVwTGlnaHQoKTtcclxuXHJcbiAgICB0aGlzLm1vdXNlID0geyB4OiAtMTAwMDAsIHk6IDAgfTtcclxuXHJcbiAgICBsZXQgcG9zaXRpb25TY2FsZSA9IGdyaWRXaWR0aCAvIDI7XHJcblxyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IDIgKiBwb3NpdGlvblNjYWxlO1xyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDEuNSAqIHBvc2l0aW9uU2NhbGU7XHJcbiAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5zY2VuZS5wb3NpdGlvbik7XHJcblxyXG5cclxuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnNldHVwTW91c2VFdmVudCgpO1xyXG4gICAgYmluZEJ1dHRvbnModGhpcy5nYW1lRW5naW5lKTtcclxuICB9XHJcblxyXG4gIHNldHVwTGlnaHQoKSB7XHJcbiAgICBsZXQgbGlnaHRBbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDY2NjY2NiwgMyk7XHJcbiAgICBsZXQgbGlnaHRTb3VyY2UgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDg4ODg4OCk7XHJcblxyXG4gICAgbGlnaHRTb3VyY2UucG9zaXRpb24uc2V0KDMsIDMsIDMpO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0QW1iaWVudCk7XHJcbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodFNvdXJjZSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cEdyaWQoKSB7XHJcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIGdyaWRXaWR0aCk7XHJcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogcGxhbmVUZXh0dXJlfSk7XHJcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlID0gbmV3IFRIUkVFLk1lc2godGV4dHVyZWRTdXJmYWNlR2VvbWV0cnksIHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsKTtcclxuICAgIHRleHR1cmVkU3VyZmFjZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XHJcbiAgICB0ZXh0dXJlZFN1cmZhY2UucG9zaXRpb24ueSA9IC0wLjM7XHJcbiAgICB0aGlzLnNjZW5lLmFkZCh0ZXh0dXJlZFN1cmZhY2UpO1xyXG5cclxuICAgIGxldCBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkU3ViRGl2KTtcclxuICAgIHRoaXMuc2NlbmUuYWRkKGdyaWQpO1xyXG5cclxuICAgIHRoaXMuZ3JpZFBhbmVscyA9IHt9O1xyXG5cclxuICAgIGxldCBwYW5lbExlbmd0aCA9IGdyaWRXaWR0aCAvIGdyaWRTdWJEaXY7XHJcbiAgICBsZXQgelBvcyA9ICgoZ3JpZFdpZHRoIC8gMikgLSBwYW5lbExlbmd0aCAvIDIpICogLTE7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBsZXQgcGxhbmVHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCwgcGFuZWxMZW5ndGgpO1xyXG4gICAgICBsZXQgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7dHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDB9KTtcclxuICAgICAgbGV0IHBsYW5lID0gbmV3IFRIUkVFLk1lc2gocGxhbmVHZW9tZXRyeSwgcGxhbmVNYXRlcmlhbCk7XHJcbiAgICAgIHBsYW5lLnJvdGF0aW9uLnggPSAtMC41ICogTWF0aC5QSTtcclxuICAgICAgcGxhbmUucG9zaXRpb24ueiA9IHpQb3M7XHJcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4yO1xyXG4gICAgICB0aGlzLnNjZW5lLmFkZChwbGFuZSk7XHJcbiAgICAgIHRoaXMuZ3JpZFBhbmVsc1tpXSA9IHBsYW5lO1xyXG5cclxuICAgICAgelBvcyArPSBwYW5lbExlbmd0aDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrR3JpZEludGVyc2VjdGlvbnMoKSB7XHJcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcbiAgICBsZXQgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMocGxhbmVzKTtcclxuXHJcbiAgICBwbGFuZXMuZm9yRWFjaCgocGFuZWwpID0+IHtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4NjY2NjY2KTtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwub3BhY2l0eSA9IDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZihpbnRlcnNlY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGV0IG9iaiA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xyXG5cclxuICAgICAgb2JqLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweGZmMDAwMCk7ICAgICAgXHJcbiAgICAgIG9iai5tYXRlcmlhbC5vcGFjaXR5ID0gLjU7XHJcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG9iajtcclxuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xyXG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFBhbmVsSW5kZXgoKSB7XHJcbiAgICBpZighdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKSB7IHJldHVybjsgfVxyXG5cclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPT09IHBsYW5lc1tpXSkge1xyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0dXBNb3VzZUV2ZW50KCkge1xyXG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcclxuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcclxuICAgICAgbW91c2UueSA9IC0gKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xyXG4gICAgdGhpcy5nYW1lRW5naW5lLmdhbWVMb29wKHRpbWVzdGFtcCk7XHJcbiAgfVxyXG59IFxyXG4iLCJsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcclxubGV0IHN0YXJ0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydE1vZGFsJyk7XHJcbmxldCByZXN0YXJ0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXJ0TW9kYWwnKTtcclxuZnVuY3Rpb24gYWN0aXZhdGVTdGFydFNjcmVlbigpIHtcclxuICBzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxuICByZXN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3RpdmF0ZVJlc3RhcnRTY3JlZW4od2lubmVyKSB7XHJcbiAgc3RhcnRTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XHJcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlTWVudShhcmdzKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxuXHJcbiAgaWYoYXJncy53aW5uZXIgIT09IG51bGwpIHtcclxuICAgIGFjdGl2YXRlUmVzdGFydFNjcmVlbihhcmdzLndpbm5lcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFjdGl2YXRlU3RhcnRTY3JlZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU1lbnUoYXJncykge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kQnV0dG9ucyhnYW1lRW5naW5lKSB7XHJcbiAgc3RhcnRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cclxuICB9KTtcclxuXHJcbiAgcmVzdGFydFNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBnYW1lRW5naW5lLnJlc3RhcnQoKTtcclxuICAgIGNsb3NlTWVudSgpO1xyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pbmlvbiB7XHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcclxuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcclxuICAgIHRoaXMuc3RhcnRpbmdaID0gYXJncy5zdGFydGluZ1o7XHJcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcclxuXHJcbiAgICB0aGlzLm1heEhlYWx0aCA9IDEwO1xyXG4gICAgdGhpcy5oZWFsdGggPSB0aGlzLm1heEhlYWx0aDtcclxuICAgIHRoaXMuYXR0YWNrU3RyZW5ndGggPSA1O1xyXG4gICAgdGhpcy5hdHRhY2tTcGVlZCA9IDI1MDtcclxuXHJcbiAgICB0aGlzLmRlZmF1bHRTcGVlZCA9IDAuMztcclxuICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcclxuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcclxuICAgICAgYXR0YWNrVGltZTogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmF0dGFja0FuaW1hdGlvblByb3BlcnRpZXMgPSB7XHJcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgIHNwZWVkOiB0aGlzLmF0dGFja1NwZWVkIC8gMixcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xyXG4gICAgICBtb25leTogNzUsXHJcbiAgICAgIHNjb3JlOiAyNVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRlc3Ryb3kgPSBmYWxzZTtcclxuICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5yb3RPYmplY3RNYXRyaXggPSBudWxsO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcodGhpcy5zdGFydGluZ1opO1xyXG4gICAgdGhpcy5yZWdpc3RlckNvbGxpc2lvbigpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZVZpZXcoc3RhcnRpbmdaLCBoaXRCb3hPcGFjaXR5PS4yNSkge1xyXG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7ICAgIFxyXG5cclxuICAgIGxldCBoaXRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgzLDgsMyk7XHJcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XHJcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XHJcblxyXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcclxuXHJcbiAgICAvL3RoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcclxuICAgIC8vdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcclxuICAgIC8vdGhpcy52aWV3T2JqLmFkZCh0aGlzLmhlYWx0aEJhcik7XHJcblxyXG4gICAgaGl0TWVzaC5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG4gICAgdGhpcy52aWV3T2JqID0gaGl0TWVzaDtcclxuICAgIHRoaXMuaGl0Qm94ID0gdGhpcy52aWV3T2JqO1xyXG5cclxuICAgIGxldCB6ID0gKChzdGFydGluZ1ogKiAoZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdikpIC0gKGdyaWRXaWR0aCAvIDIpKSArIChncmlkV2lkdGggLyBncmlkU3ViRGl2IC8gMik7XHJcbiAgICBsZXQgeCA9IChncmlkV2lkdGggLyAyKSAqIC10aGlzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi56ID0gejtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0geDtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi55ID0gNDtcclxuXHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xyXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnZpZXdPYmoucG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xyXG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSAyO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4zLCAwLjMpO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XHJcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XHJcblxyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMiwgMC4yKTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcclxuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xyXG5cclxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcclxuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xyXG5cclxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSA0O1xyXG5cclxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcclxuICB9XHJcblxyXG4gIGlzT2JqZWN0TG9hZGVkKG9iaikge1xyXG4gICAgcmV0dXJuIChvYmoucG9zaXRpb24ueCA9PT0gMCAmJiBvYmoucG9zaXRpb24ueSA9PT0gMCAmJiBvYmoucG9zaXRpb24ueiA9PT0gMCk7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcclxuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXHJcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICBpZihvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgIHRoaXMuc3BlZWQgPSAwO1xyXG4gICAgICB0aGlzLmF0dGFjayA9IHRydWU7XHJcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEub2JqZWN0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0U3RheScsIChvdGhlckNvbGxpZGVyKSA9PiB7XHJcbiAgICAgIGlmKG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEub2JqZWN0O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xyXG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRBdHRhY2tWYWx1ZSgpIHtcclxuICAgIGxldCBjcml0UHJvYyA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICByZXR1cm4gY3JpdFByb2MgPj0gLjkgPyB0aGlzLmF0dGFja1N0cmVuZ3RoICogKE1hdGgucmFuZG9tKCkgKyAxKSA6IHRoaXMuYXR0YWNrU3RyZW5ndGg7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVIZWFsdGhCYXIoKSB7XHJcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xyXG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhcldpZHRoIC8gMjtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyID0gdGhpcy5oZWFsdGhCYXIuZ2V0T2JqZWN0QnlOYW1lKCdGdWxsSGVhbHRoQmFyJyk7XHJcblxyXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcclxuICAgIGZ1bGxIZWFsdGhCYXIucG9zaXRpb24ueCA9IGhlYWx0aEJhck9mZnNldDtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XHJcblxyXG4gICAgdGhpcy5hdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKTtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ICs9ICh0aGlzLnNwZWVkICogdGhpcy5kaXJlY3Rpb24pO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXIudXBkYXRlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xyXG4gIH1cclxuXHJcbiAgYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5oZWFsdGggPD0gMCkgeyByZXR1cm47IH1cclxuXHJcblxyXG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgIT0gbnVsbCAmJiB0aGlzLmF0dGFjaykge1xyXG4gICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcDtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSBNYXRoLm1pbih0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSArIGRlbHRhLCB0aGlzLmF0dGFja1NwZWVkKTtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICAgIHRoaXMuYXR0YWNrTG9vcChkZWx0YSk7XHJcbiAgICB9IGVsc2UgaWYodGhpcy5hdHRhY2spIHtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgICAgdGhpcy5hdHRhY2tMb29wKDApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gIH1cclxuXHJcbiAgYXR0YWNrTG9vcChkZWx0YSkge1xyXG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsIHx8IHRoaXMuY3VycmVudFRhcmdldC5wbGF5ZXJJZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cclxuICAgIHRoaXMuYW5pbWF0ZUF0dGFjayhkZWx0YSk7XHJcbiAgICBpZih0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA8IHRoaXMuYXR0YWNrU3BlZWQpIHsgcmV0dXJuOyB9XHJcbiAgICBcclxuICAgIHRoaXMuY3VycmVudFRhcmdldC5oZWFsdGggLT0gdGhpcy5nZXRBdHRhY2tWYWx1ZSgpO1xyXG5cclxuICAgIGlmKHRoaXMuY3VycmVudFRhcmdldC5oZWFsdGggPD0gMCkge1xyXG4gICAgICB0aGlzLnBsYXllci5wcm9jZXNzUmV3YXJkKHRoaXMuY3VycmVudFRhcmdldC5raWxsUmV3YXJkKTtcclxuXHJcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5hdHRhY2sgPSBmYWxzZTtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0LmRlc3Ryb3kgPSB0cnVlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID0gMDtcclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGFuaW1hdGVBdHRhY2soZGVsdGEpIHtcclxuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGxldCByaWdodEFybSA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblsxXTtcclxuXHJcbiAgICAgIGxldCBjdXJyZW50QXR0YWNrVGltZSA9IHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lO1xyXG4gICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbjtcclxuICAgICAgbGV0IGFuaW1hdGlvblNwZWVkID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLnNwZWVkO1xyXG5cclxuICAgICAgbGV0IHJvdGF0aW9uID0gZGlyZWN0aW9uICogKCgxMzUgKiAoTWF0aC5QSSAvIDE4MCkpICogKGRlbHRhIC8gYW5pbWF0aW9uU3BlZWQpKTtcclxuICAgICAgcm90YXRpb24gPSBNYXRoLm1pbihyaWdodEFybS5yb3RhdGlvbi56ICsgcm90YXRpb24sIDEzNSk7XHJcbiAgICAgIHJvdGF0aW9uID0gTWF0aC5tYXgocm90YXRpb24sIDApO1xyXG5cclxuICAgICAgcmlnaHRBcm0ucm90YXRpb24ueiA9IHJvdGF0aW9uO1xyXG4gICAgICBpZihjdXJyZW50QXR0YWNrVGltZSA+IGFuaW1hdGlvblNwZWVkKSB7XHJcbiAgICAgICAgdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbiA9IC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYXR0YWNrQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldEF0dGFja0FuaW1hdGlvbigpIHtcclxuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGxldCByaWdodEFybSA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblsxXTtcclxuICAgICAgcmlnaHRBcm0ucm90YXRpb24ueiA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhbmltYXRlV2FsaygpIHtcclxuXHJcbiAgfVxyXG5cclxuICByZXNldFdhbGtBbmltYXRpb24oKSB7XHJcblxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTWluaW9uIGZyb20gJy4vbWluaW9uJztcclxuaW1wb3J0IEJhc2UgZnJvbSAnLi9iYXNlJztcclxuaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy50eXBlID0gYXJncy50eXBlO1xyXG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XHJcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcclxuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xyXG4gICAgdGhpcy5taW5pb25JZCA9IDA7XHJcbiAgICB0aGlzLnNwYXduUG9zID0gLWdyaWRXaWR0aCAvIDIgKiB0aGlzLmRpcmVjdGlvbjtcclxuXHJcbiAgICB0aGlzLnNldHVwR2FtZVN0YXRlKCk7XHJcbiAgICB0aGlzLnNwYXduQmFzZSgpO1xyXG4gIH1cclxuXHJcbiAgc3Bhd25CYXNlKCkge1xyXG4gICAgdGhpcy5iYXNlID0gbmV3IEJhc2Uoe1xyXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxyXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICBwbGF5ZXI6IHRoaXNcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuYmFzZS52aWV3T2JqKTtcclxuICB9XHJcblxyXG4gIHNwYXduTWluaW9uKGluZGV4KSB7XHJcbiAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xyXG4gICAgICB0aGlzLm1vbmV5IC09IHRoaXMubWluaW9uQ29zdDtcclxuXHJcbiAgICAgIGxldCBtaW5pb24gPSBuZXcgTWluaW9uKHtcclxuICAgICAgICBpZDogdGhpcy5taW5pb25JZCsrLFxyXG4gICAgICAgIHBsYXllcklkOiB0aGlzLmlkLFxyXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcclxuICAgICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxyXG4gICAgICAgIHBsYXllcjogdGhpc1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMubWluaW9ucy5wdXNoKG1pbmlvbik7XHJcbiAgICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDIsMiwyKTtcclxuICAgICAgbGV0IGxvYWRlciA9IG5ldyBUSFJFRS5PYmplY3RMb2FkZXIoKTtcclxuICAgICAgbG9hZGVyLmxvYWQoJy4vZ2VvbWV0cnkvbW9kZWwuanNvbicsIChvYmopID0+IHtcclxuICAgICAgICBvYmoucG9zaXRpb24ueSA9IC00O1xyXG4gICAgICAgIG1pbmlvbi52aWV3T2JqLmFkZChvYmopO1xyXG5cclxuICAgICAgICBpZihtaW5pb24uZGlyZWN0aW9uID09PSAtMSkge1xyXG4gICAgICAgICAgbWluaW9uLnZpZXdPYmoucm90YXRpb24ueSA9IE1hdGguUEk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChtaW5pb24udmlld09iaik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvY2Vzc1Jld2FyZChyZXdhcmQpIHtcclxuICAgIGxldCB0ID0gdGhpcztcclxuICAgIE9iamVjdC5rZXlzKHJld2FyZCkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgIHRba2V5XSArPSByZXdhcmRba2V5XTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIGlmKHRoaXMuYmFzZSAhPT0gbnVsbCkgeyBcclxuICAgICAgdGhpcy5iYXNlLnJ1bkxvb3AoKTtcclxuICAgICAgaWYodGhpcy5iYXNlLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95QmFzZSgpOyB9IFxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKChtaW5pb24sIGluZGV4KSA9PiB7XHJcbiAgICAgIG1pbmlvbi5ydW5Mb29wKHRpbWVzdGFtcCk7XHJcbiAgICAgIGlmKCFtaW5pb24uYXR0YWNrKSB7IG1pbmlvbi5yZXNldEF0dGFja0FuaW1hdGlvbigpOyB9XHJcbiAgICAgIGlmKG1pbmlvbi5kZXN0cm95KSB7IHRoaXMuZGVzdHJveU1pbmlvbihtaW5pb24sIGluZGV4KTsgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpIHtcclxuICAgIHRoaXMuc2NlbmUucmVtb3ZlKG1pbmlvbi52aWV3T2JqKTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleChtaW5pb24uY29sbGlkZXIuaWQpLCAxKTtcclxuXHJcbiAgICB0aGlzLm1pbmlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3lCYXNlKCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgodGhpcy5iYXNlLmNvbGxpZGVyLmlkKSwgMSk7XHJcbiAgICB0aGlzLmJhc2UgPSBudWxsO1xyXG4gICAgdGhpcy5sb3N0ID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGZpbmRDb2xsaWRlckluZGV4KGlkKSB7XHJcbiAgICBsZXQgaW5kZXggPSAtMTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sbGlkZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKHRoaXMuY29sbGlkZXJMaXN0W2ldLmlkID09PSBpZCkge1xyXG4gICAgICAgIGluZGV4ID0gaTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbmRleDtcclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5taW5pb25zLmZvckVhY2gobWluaW9uID0+IHtcclxuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYodGhpcy5iYXNlKSB7XHJcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMuYmFzZS52aWV3T2JqKTtcclxuICAgICAgdGhpcy5iYXNlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNwYXduQmFzZSgpO1xyXG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIHNldHVwR2FtZVN0YXRlKCkge1xyXG4gICAgdGhpcy5taW5pb25zID0gW107XHJcbiAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgIHRoaXMubW9uZXkgPSA0MDAwO1xyXG4gICAgdGhpcy5taW5pb25Db3N0ID0gNTA7XHJcbiAgICB0aGlzLmxvc3QgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuIiwiZnVuY3Rpb24gaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpe1xyXG4gIGxldCB3ID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgbGV0IGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3LGgpO1xyXG4gIGNhbWVyYS5hc3BlY3QgPSB3L2g7XHJcbiAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKSB7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgIGhhbmRsZVJlc2l6ZShyZW5kZXJlciwgY2FtZXJhKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU2NyZWVuVmlldygpIHtcclxuICBsZXQgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuICBsZXQgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwKTtcclxuICBsZXQgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcigpO1xyXG5cclxuICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gIHNldHVwUmVzaXppbmcocmVuZGVyZXIsIGNhbWVyYSk7XHJcblxyXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XHJcbn1cclxuIl19\n"]}