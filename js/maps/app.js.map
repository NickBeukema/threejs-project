{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","default","opponents","map","_constants","gridSubDiv","forEach","enemy","startingZ","this","player","minions","minion","spawnIndex","spawnValue","values","val","index","../modules/constants","2","Math","floor","random","3","friendlies","spawnPos","startingPos","friendlyMap","m","row","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","idx","unique","fullIdxArr","slice","gaps","filter","indexOf","arrayToUse","gridWidth","Array","prototype","self","4","_interopRequireDefault","obj","__esModule","render","timestamp","requestAnimationFrame","gameView","renderLoop","globals","renderer","scene","camera","performance","rendererStats","update","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","gameEngine","_setupScreenView","setupScreenView","setupPerformance","./modules/game-engine","./modules/game-view","./modules/view","5","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_smartAi","_smartAi2","_defensiveAi","_defensiveAi2","_randomAi","_randomAi2","AI","args","smartAI","defensiveAI","randomAI","determineAIFunction","personality","spawnInterval","lastUpgrade","upgradeInterval","lastSpawn","poppulationLimit","difficulty","setupEasy","setupHard","canUpgrade","applyUpgrades","checkUpgrades","canSpawn","AIFunction","spawnMinion","upgrades","canUpgradeBaseHealth","name","cost","getBaseHealthUpgradeCost","canUpgradeMinionHealth","getMinionHealthUpgradeCost","canUpgradeMinionAttack","getMinionAttackUpgradeCost","canUpgradeMinionAttackSpeed","getMinionAttackSpeedUpgradeCost","canUpgradeWizardAttack","getWizardAttackUpgradeCost","canUpgradeWizardAttackSpeed","getWizardAttackSpeedUpgradeCost","_this","upgrade","money","apply","../ai/defensive-ai","../ai/random-ai","../ai/smart-ai","./constants","6","_constants2","Archer","playerId","id","colliderList","direction","startingY","startingX","targetList","arrows","startingRotation","_90deg","PI","_135deg","animationProperties","arm","startingAngle","endingAngle","angleDifference","speedDown","speedUp","lastAnimate","arrowSpeed","attackProperties","lastAttack","textureLoader","THREE","TextureLoader","attackSpeed","archer","baseAttackSpeed","baseArrowSpeed","attackStrength","baseAttack","arrowId","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","Group","bodyG","BoxGeometry","bodyMat","MeshBasicMaterial","color","body","Mesh","hitBoxG","material","transparent","opacity","depthWrite","hitBox","userData","object","ranged","add","position","set","geometry","computeBoundingBox","box3","boundingBox","clone","collider","THREEx","ColliderBox3","addEventListener","otherCollider","object3d","immuneToRange","findColliderIndex","splice","determineTarget","removeTarget","initiateAttack","recharging","_this2","canAttack","nextTarget","callback","health","getAttackValue","processReward","killReward","attack","destroy","_this3","texture","load","SphericalRefractionMapping","arrowG","SphereGeometry","arrowMat","MeshPhongMaterial","emissive","faceVertexUvs","uvs","face","faces","j","vertexNormals","y","arrow","max","endingY","y_1","y_2","y_3","b","c","yFunction","delta","initialDistanceX","distanceTargetWillTravelX","speed","m_x","console","log","c_x","xFunction","m_z","z","c_z","zFunction","startingTime","setTimeout","remove","_this4","rotation","rightArm","timeRatio","degreeChange","spawnArrow","resetAttackAnimation","_delta","_timeRatio","_degreeChange","angleTowardsTarget","calculateAngleToTarget","bodyModel","xDiff","zDiff","diffRatio","atan","attackProcedure","animateArrows","animateAttack","7","Base","baseWidth","baseHeight","baseDepth","maxHealth","hitBoxBuffer","score","shapeGeometry","normalMap","longTexture","skinnyTexture","sideTexture","wrapS","wrapT","RepeatWrapping","repeat","skinnyMat","specular","shininess","normalScale","Vector2","longMat","sideMat","shapeMaterials","shapeMesh","MultiMaterial","hitGeometry","hitMaterial","hitMesh","healthBar","initializeHealthBar","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","updateHealthBar","8","xPositive","xNegative","gridHeight","baseHealth","amount","base","9","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","gameOver","state","colliderSystem","ColliderSystem","initializePlayers","myPlayer","type","computer","playerAI","players","_ref","winner","p","setGameOver","activateMenu","computers","pop","setDifficulty","reset","runLoop","lost","find","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","10","scoreText","moneyText","poppulationText","baseHealthText","minionBaseHealthText","minionBaseAttackText","minionBaseAttackSpeedText","archerBaseAttackText","archerBaseAttackSpeedText","baseHealthUpgrade","minionBaseHealthUpgrade","minionBaseAttackUpgrade","minionBaseAttackSpeedUpgrade","archerBaseAttackUpgrade","archerBaseAttackSpeedUpgrade","planeTexture","GameView","setupGrid","setupGrassField","setupLight","mouse","positionScale","lookAt","hud","document","getElementById","hudUpgrade","lastTimeStamp","started","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","plane","anisotropy","getMaxAnisotropy","rotateX","setFromCamera","planes","intersects","intersectObjects","panel","setHex","window","evt","event","clientX","innerWidth","clientY","innerHeight","restart","classList","initializeUpgradeButtons","initializeHudTexts","getCurrentPanelIndex","round","textContent","poppulationCap","toFixed","minionBaseHealth","minionBaseAttack","minionBaseAttackSpeed","archerBaseAttack","archerBaseAttackSpeed","checkGridIntersections","gameLoop","updateUI","upgradeBaseHealth","upgradeMinionHealth","upgradeMinionAttack","upgradeMinionAttackSpeed","upgradeWizardAttack","upgradeWizardAttackSpeed","11","activateStartScreen","startSection","restartSection","activateRestartScreen","text","restartModalMessage","modal","closeMenu","startButton","startFirstGame","restartButton","demoButton1","demoButton2","hardButton","12","Minion","healthUpgrade","attackUpgrade","attackSpeedUpgrade","defaultSpeed","attackTime","attackAnimationProperties","walkingAnimationProperties","time","rotObjectMatrix","dispose","currentTarget","resetWalkAnimation","walkProcedure","attackLoop","children","currentAttackTime","animationSpeed","min","walkLoop","animateWalk","legs","leftLeg","rightLeg","animateLegForward","animateLegBack","toDegrees","leg","maxRotation","toRadians","angleRadians","angleDegrees","13","_minion","_minion2","_archer","_archer2","_base","_base2","Player","minionId","setUpgradeValues","loader","ObjectLoader","setupGameState","spawnBase","spawnArchers","archers","minionCost","reward","keys","destroyBase","destroyMinion","removeEventListener","_this5","./archer","./base","./minion","14","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","shadowMapEnabled","shadowMapType","PCFSoftShadowMap","appendChild","domElement","RendererStats","style","left","bottom"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents) {\n  var map = {};\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    map[i] = 0;\n  }\n\n  opponents.forEach(function (enemy) {\n    map[enemy.startingZ]--;\n  });\n\n  this.player.minions.forEach(function (minion) {\n    map[minion.startingZ]++;\n  });\n\n  var spawnIndex = -1;\n  var spawnValue = 100000;\n  Object.values(map).forEach(function (val, index) {\n    if (val < spawnValue) {\n      spawnValue = val;\n      spawnIndex = index;\n    }\n  });\n\n  return spawnIndex;\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (opponents) {\n    return Math.floor(Math.random() * _constants.gridSubDiv);\n};\n\nvar _constants = require('../modules/constants');\n\n},{\"../modules/constants\":8}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (opponents, friendlies, spawnPos) {\n  var startingPos = spawnPos;\n\n  var friendlyMap = friendlies.map(function (m) {\n    return {\n      row: m.startingZ,\n      distance: m.getPosition().x - startingPos\n    };\n  });\n\n  var opponentMap = opponents.map(function (m) {\n\n    var distance = startingPos - m.getPosition().x;\n    return {\n      row: m.startingZ,\n      distance: distance\n    };\n  });\n\n  var rowArray = [];\n  for (var i = 0; i < _constants.gridSubDiv; i++) {\n    rowArray.push(i);\n  }\n\n  var decision = {\n    hasFriendlies: [],\n    closestIndex: -1,\n    closestVal: 99999,\n    distanceTies: []\n\n  };\n\n  friendlyMap.forEach(function (val, idx) {\n    decision.hasFriendlies.push(val.row);\n  });\n\n  opponentMap.forEach(function (val, idx) {\n    if (val.distance < decision.closestVal) {\n      decision.closestIndex = val.row;\n      decision.closestVal = val.distance;\n\n      if (decision.distanceTies.length > 0) {\n        decision.distanceTies.length = 0;\n      }\n    } else if (val.distance === decision.closestVal) {\n      decision.distanceTies.push(val.row);\n    }\n  });\n\n  decision.distanceTies.push(decision.closestIndex);\n  decision.hasFriendlies = decision.hasFriendlies.unique();\n\n  var fullIdxArr = rowArray.slice(0);\n\n  decision.gaps = fullIdxArr.filter(function (x) {\n    return decision.hasFriendlies.indexOf(x) < 0;\n  });\n\n  //if(friendlies.length > 3) {\n  //friendlies[2].viewObj.position.z += 1;\n  //}\n\n\n  var arrayToUse = void 0;\n  if (decision.closestVal < _constants.gridWidth / 2) {\n    arrayToUse = decision.distanceTies;\n  } else {\n    arrayToUse = decision.gaps;\n  }\n\n  var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n  return arrayToUse[arrIdx];\n};\n\nvar _constants = require('../modules/constants');\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\n},{\"../modules/constants\":8}],4:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\nvar rendererStats = void 0;\nvar performance = true;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  if (performance) {\n    rendererStats = (0, _view.setupPerformance)();\n  }\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  if (performance) {\n    rendererStats.update(globals.renderer);\n  }\n}\n\ninit();\n\n},{\"./modules/game-engine\":9,\"./modules/game-view\":10,\"./modules/view\":14}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _smartAi = require('../ai/smart-ai');\n\nvar _smartAi2 = _interopRequireDefault(_smartAi);\n\nvar _defensiveAi = require('../ai/defensive-ai');\n\nvar _defensiveAi2 = _interopRequireDefault(_defensiveAi);\n\nvar _randomAi = require('../ai/random-ai');\n\nvar _randomAi2 = _interopRequireDefault(_randomAi);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.smartAI = _smartAi2.default;\n    this.defensiveAI = _defensiveAi2.default;\n    this.randomAI = _randomAi2.default;\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 325;\n    this.lastUpgrade = 0;\n    this.upgradeInterval = 1500;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 30;\n  }\n\n  _createClass(AI, [{\n    key: 'canSpawn',\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval && this.player.minions.length < this.poppulationLimit;\n    }\n  }, {\n    key: 'canUpgrade',\n    value: function canUpgrade(timestamp) {\n      return timestamp - this.lastUpgrade > this.upgradeInterval;\n    }\n  }, {\n    key: 'setDifficulty',\n    value: function setDifficulty(difficulty) {\n      if (difficulty === 1) {\n        this.setupEasy();\n      } else if (difficulty === 2) {\n        this.setupHard();\n      }\n    }\n  }, {\n    key: 'setupEasy',\n    value: function setupEasy() {\n      this.spawnInterval = 1500;\n      this.upgradeInterval = 3000;\n    }\n  }, {\n    key: 'setupHard',\n    value: function setupHard() {\n      this.spawnInterval = 325;\n      this.upgradeInterval = 1500;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp, opponents) {\n      if (this.canUpgrade(timestamp)) {\n        this.applyUpgrades(this.checkUpgrades());\n        this.lastUpgrade = timestamp;\n      }\n\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions, this.player.spawnPos);\n\n      if (spawnIndex >= 0) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: 'determineAIFunction',\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n\n    //check all upgradeCosts to see if any can be upgrades returns a list of what can be upgraded and their cost\n\n  }, {\n    key: 'checkUpgrades',\n    value: function checkUpgrades() {\n      var upgrades = [];\n\n      if (this.player.canUpgradeBaseHealth()) {\n        upgrades.push({ name: \"upgradeBaseHealth\", cost: this.player.getBaseHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionHealth()) {\n        upgrades.push({ name: \"upgradeMinionHealth\", cost: this.player.getMinionHealthUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttack()) {\n        upgrades.push({ name: \"upgradeMinionAttack\", cost: this.player.getMinionAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeMinionAttackSpeed()) {\n        upgrades.push({ name: \"upgradeMinionAttackSpeed\", cost: this.player.getMinionAttackSpeedUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttack()) {\n        upgrades.push({ name: \"upgradeWizardAttack\", cost: this.player.getWizardAttackUpgradeCost() });\n      }\n\n      if (this.player.canUpgradeWizardAttackSpeed()) {\n        upgrades.push({ name: \"upgradeWizardAttackSpeed\", cost: this.player.getWizardAttackSpeedUpgradeCost() });\n      }\n\n      return upgrades;\n    }\n  }, {\n    key: 'applyUpgrades',\n    value: function applyUpgrades(upgrades) {\n      var _this = this;\n\n      upgrades.forEach(function (upgrade) {\n        if (_this.player.money / 1.5 > upgrade.cost && _this.player.money > 750) {\n          var fn = _this.player[upgrade.name];\n          fn.apply(_this.player);\n        }\n      });\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"../ai/defensive-ai\":1,\"../ai/random-ai\":2,\"../ai/smart-ai\":3,\"./constants\":8}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Archer = function () {\n  function Archer(args) {\n    _classCallCheck(this, Archer);\n\n    this.scene = args.scene;\n    this.player = args.player;\n    this.playerId = this.player.id;\n    this.colliderList = args.colliderList;\n\n    this.direction = args.direction;\n    this.startingZ = args.startingZ;\n    this.startingY = args.startingY + 4;\n    this.startingX = args.startingX - 4 * this.direction;\n\n    this.targetList = [];\n    this.arrows = [];\n\n    this.startingRotation = 0;\n    var _90deg = 90 / 180 * Math.PI;\n    var _135deg = 135 / 180 * Math.PI;\n\n    this.animationProperties = {\n      arm: {\n        startingAngle: _135deg,\n        endingAngle: _90deg,\n        angleDifference: _135deg - _90deg,\n        speedDown: 200,\n        speedUp: 150,\n        lastAnimate: null\n      },\n      arrowSpeed: 500\n    };\n\n    this.attackProperties = {\n      lastAttack: 0\n    };\n    this.textureLoader = new THREE.TextureLoader();\n\n    this.attackSpeed = _constants2.default.archer.baseAttackSpeed;\n    this.arrowSpeed = _constants2.default.archer.baseArrowSpeed;\n    this.attackStrength = _constants2.default.archer.baseAttack;\n    this.arrowId = 0;\n    this.initializeView();\n    this.registerCollision();\n  }\n\n  _createClass(Archer, [{\n    key: 'initializeView',\n    value: function initializeView() {\n      var hitBoxOpacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var bodyG = new THREE.BoxGeometry(0.01, 0.013, 0.013);\n      var bodyMat = new THREE.MeshBasicMaterial({ color: 0x00FF00 });\n      this.body = new THREE.Mesh(bodyG, bodyMat);\n\n      var hitBoxG = new THREE.BoxGeometry(60, 60, 60);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffff00, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      this.hitBox = new THREE.Mesh(hitBoxG, material);\n\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.ranged = true;\n\n      this.viewObj.add(this.body);\n      this.viewObj.add(this.hitBox);\n\n      this.viewObj.position.set(this.startingX, this.startingY, this.startingZ);\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        _this.targetList.push(userData.object);\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged || userData.immuneToRange) {\n          return;\n        }\n\n        if (_this.findColliderIndex(otherCollider.id) === -1) {\n          _this.targetList.push(userData.object);\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.targetList.splice(_this.findColliderIndex(otherCollider), 1);\n        _this.determineTarget();\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.removeTarget(otherCollider);\n        _this.determineTarget();\n      });\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.targetList.length; i++) {\n        if (this.targetList[i].collider.id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'removeTarget',\n    value: function removeTarget(id) {\n      this.targetList.splice(this.findColliderIndex(id), 1);\n    }\n  }, {\n    key: 'canAttack',\n    value: function canAttack(timestamp) {\n      if (this.targetList.length === 0) {\n        return false;\n      }\n      if (this.initiateAttack || this.recharging) {\n        return false;\n      }\n\n      var delta = timestamp - this.attackProperties.lastAttack;\n      return delta >= this.attackSpeed;\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      return this.attackStrength;\n    }\n  }, {\n    key: 'determineTarget',\n    value: function determineTarget() {\n      if (this.targetList.length > 0) {\n        return this.targetList[0];\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      var _this2 = this;\n\n      if (!this.canAttack(timestamp)) {\n        return;\n      }\n\n      var target = this.determineTarget();\n      if (target !== null && target.viewObj) {\n        this.nextTarget = {\n          target: target,\n          callback: function callback(target) {\n            target.health -= _this2.getAttackValue();\n            if (target.health <= 0) {\n              _this2.player.processReward(target.killReward);\n\n              target.attack = false;\n              target.destroy = true;\n              _this2.removeTarget(target.collider.id);\n            }\n          }\n        };\n        this.initiateAttack = true;\n      }\n\n      this.attackProperties.lastAttack = timestamp;\n    }\n  }, {\n    key: 'spawnArrow',\n    value: function spawnArrow(target, timestamp, callback) {\n      var _this3 = this;\n\n      var texture = this.textureLoader.load('textures/fireball.jpg', THREE.SphericalRefractionMapping);\n      var arrowG = new THREE.SphereGeometry(1, 32, 16);\n      var arrowMat = new THREE.MeshPhongMaterial({ color: 0xFFFFFF, map: texture, emissive: 0x440000 });\n\n      var faceVertexUvs = arrowG.faceVertexUvs[0];\n      for (var i = 0; i < faceVertexUvs.length; i++) {\n\n        var uvs = faceVertexUvs[i];\n        var face = arrowG.faces[i];\n\n        for (var j = 0; j < 3; j++) {\n\n          uvs[j].x = face.vertexNormals[j].x * 0.5 + 0.5;\n          uvs[j].y = face.vertexNormals[j].y * 0.5 + 0.5;\n        }\n      }\n\n      var arrow = new THREE.Mesh(arrowG, arrowMat);\n      arrow.name = \"Arrow\";\n      this.scene.add(arrow);\n\n      arrow.position.set(this.startingX, this.startingY + 2, this.startingZ);\n\n      var id = this.arrowId++;\n\n      var startingY = arrow.position.y;\n      var max = startingY + 5;\n      var endingY = target.viewObj.position.y;\n\n      var x_1 = 0;\n      var y_1 = startingY;\n\n      var x_2 = 0.5;\n      var y_2 = max;\n\n      var x_3 = 1;\n      var y_3 = endingY;\n\n      var a = y_1 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var b = -y_1 * (x_2 + x_3) / ((x_1 - x_2) * (x_1 - x_3)) - y_2 * (x_1 + x_3) / ((x_2 - x_1) * (x_2 - x_3)) - y_3 * (x_1 + x_2) / ((x_3 - x_1) * (x_3 - x_2));\n\n      var c = y_1 * x_2 * x_3 / ((x_1 - x_2) * (x_1 - x_3)) + y_2 * x_1 * x_3 / ((x_2 - x_1) * (x_2 - x_3)) + y_3 * x_1 * x_2 / ((x_3 - x_1) * (x_3 - x_2));\n\n      var yFunction = function yFunction(delta) {\n        return a * (delta * delta) + b * delta + c;\n      };\n\n      var initialDistanceX = target.viewObj.position.x - arrow.position.x;\n      var distanceTargetWillTravelX = target.speed / 16 * this.arrowSpeed * -this.direction;\n      var m_x = initialDistanceX + distanceTargetWillTravelX;\n\n      console.log(m_x, arrow.position.x);\n      if (m_x * -this.direction > 0) {\n        m_x = this.direction * 5;\n      }\n      var c_x = arrow.position.x;\n\n      var xFunction = function xFunction(delta) {\n        return m_x * delta + c_x;\n      };\n\n      var m_z = target.viewObj.position.z - arrow.position.z;\n      var c_z = arrow.position.z;\n\n      var zFunction = function zFunction(delta) {\n        return m_z * delta + c_z;\n      };\n\n      this.arrows.push({\n        id: id,\n        obj: arrow,\n        target: target,\n        startingTime: timestamp,\n        yFunction: yFunction,\n        xFunction: xFunction,\n        zFunction: zFunction\n      });\n\n      setTimeout(function () {\n        callback(target);\n        _this3.arrows = _this3.arrows.filter(function (a) {\n          return a !== id;\n        });\n        _this3.scene.remove(arrow);\n      }, this.arrowSpeed);\n    }\n  }, {\n    key: 'animateArrows',\n    value: function animateArrows(timestamp) {\n      var _this4 = this;\n\n      this.arrows.forEach(function (arrow) {\n        var delta = (timestamp - arrow.startingTime) / _this4.arrowSpeed;\n        arrow.obj.position.y = arrow.yFunction(delta);\n        arrow.obj.position.x = arrow.xFunction(delta);\n        arrow.obj.position.z = arrow.zFunction(delta);\n        arrow.obj.rotation.y += 0.1;\n        arrow.obj.rotation.x += 0.1;\n      });\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(timestamp) {\n      if (this.rightArm && this.initiateAttack) {\n        if (this.rightArm.rotation.z > this.animationProperties.arm.endingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var timeRatio = delta / this.animationProperties.arm.speedDown;\n          var degreeChange = this.animationProperties.arm.angleDifference * timeRatio;\n\n          this.rightArm.rotation.z -= degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.spawnArrow(this.nextTarget.target, timestamp, this.nextTarget.callback);\n\n          this.resetAttackAnimation();\n        }\n      }\n\n      if (this.rightArm && this.recharging) {\n        if (this.rightArm.rotation.z < this.animationProperties.arm.startingAngle) {\n          if (this.animationProperties.arm.lastAnimate === null) {\n            this.animationProperties.arm.lastAnimate = timestamp;\n          }\n\n          var _delta = timestamp - this.animationProperties.arm.lastAnimate;\n          var _timeRatio = _delta / this.animationProperties.arm.speedUp;\n          var _degreeChange = this.animationProperties.arm.angleDifference * _timeRatio;\n\n          this.rightArm.rotation.z += _degreeChange;\n          this.animationProperties.arm.lastAnimate = timestamp;\n        } else {\n          this.recharging = false;\n          this.animationProperties.arm.lastAnimate = null;\n        }\n      }\n\n      if (this.nextTarget && this.nextTarget.target) {\n        var angleTowardsTarget = this.calculateAngleToTarget(this.nextTarget.target);\n        this.bodyModel.rotation.y = angleTowardsTarget + this.startingRotation;\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      this.initiateAttack = false;\n      this.recharging = true;\n      this.animationProperties.arm.lastAnimate = null;\n    }\n  }, {\n    key: 'calculateAngleToTarget',\n    value: function calculateAngleToTarget(target) {\n      var xDiff = target.viewObj.position.x - this.viewObj.position.x;\n      var zDiff = target.viewObj.position.z - this.viewObj.position.z;\n      var diffRatio = zDiff / xDiff;\n      return Math.PI * -this.direction - Math.atan(diffRatio) + Math.PI;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.animateArrows(timestamp);\n      this.animateAttack(timestamp);\n      this.collider.update();\n    }\n  }]);\n\n  return Archer;\n}();\n\nexports.default = Archer;\n\n},{\"./constants\":8}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n  function Base(args) {\n    _classCallCheck(this, Base);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.player = args.player;\n    this.playerId = this.player.id;\n\n    this.baseWidth = _constants.gridWidth;\n    this.baseHeight = 20;\n    this.baseDepth = 10;\n\n    this.maxHealth = 250;\n    this.health = this.maxHealth;\n\n    this.hitBoxBuffer = 2;\n\n    this.killReward = {\n      money: 550,\n      score: 1000\n    };\n\n    this.initializeView(this.direction);\n    this.registerCollision();\n  }\n\n  _createClass(Base, [{\n    key: 'initializeView',\n    value: function initializeView(direction) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n      var textureLoader = new THREE.TextureLoader();\n      var normalMap = textureLoader.load('textures/rock-normal-map.jpg');\n      var longTexture = textureLoader.load('textures/brick-wall.jpg');\n      var skinnyTexture = textureLoader.load('textures/brick-wall.jpg');\n      var sideTexture = textureLoader.load('textures/brick-wall.jpg');\n      var baseColor = 0x555555;\n\n      longTexture.wrapS = longTexture.wrapT = THREE.RepeatWrapping;\n      longTexture.repeat.set(3, 1);\n\n      skinnyTexture.wrapS = skinnyTexture.wrapT = THREE.RepeatWrapping;\n      skinnyTexture.repeat.set(1, 3);\n\n      sideTexture.wrapS = sideTexture.wrapT = THREE.RepeatWrapping;\n      sideTexture.repeat.set(1, 1);\n\n      var skinnyMat = new THREE.MeshPhongMaterial({ color: 0x333333, specular: 0x333333, shininess: 15, normalMap: textureLoader.load('textures/rock-normal-map.jpg'), normalScale: new THREE.Vector2(0.05, 1), map: skinnyTexture });\n\n      var longMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: longTexture });\n\n      var sideMat = new THREE.MeshPhongMaterial({ color: baseColor, specular: 0x333333, shininess: 15, normalMap: normalMap, normalScale: new THREE.Vector2(1, 1), map: sideTexture });\n\n      var shapeMaterials = [longMat, // Right\n      longMat, // Left\n      skinnyMat, // Top\n      sideMat, // Back\n      sideMat, // Front\n      skinnyMat];\n\n      var shapeMesh = new THREE.Mesh(shapeGeometry, new THREE.MultiMaterial(shapeMaterials));\n\n      var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity, depthWrite: false });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n      this.viewObj.position.y = this.baseHeight / 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      this.hitBox.userData.immuneToRange = true;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarLength = _constants.gridWidth / 10;\n      this._healthBarWidth = _constants.gridWidth / 150;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = this.baseHeight + 5;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n      this.colliderList.push(this.collider);\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop() {\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }]);\n\n  return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":8}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 128;\nvar gridHeight = exports.gridHeight = 16;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\nvar minion = {\n\tbaseHealth: 10,\n\tbaseAttack: 3,\n\tbaseAttackSpeed: 1000,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 50,\n\t\t\tamount: 5\n\t\t},\n\t\tattack: {\n\t\t\tcost: 75,\n\t\t\tamount: 2\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 25\n\t\t}\n\t}\n};\n\nvar base = {\n\tbaseHealth: 250,\n\tupgrades: {\n\t\thealth: {\n\t\t\tcost: 150,\n\t\t\tamount: 250\n\t\t}\n\t}\n};\n\nvar archer = {\n\tbaseAttack: 5,\n\tbaseAttackSpeed: 1000,\n\tbaseArrowSpeed: 1000,\n\tupgrades: {\n\t\tattack: {\n\t\t\tcost: 50,\n\t\t\tamount: 4\n\t\t},\n\t\tattackSpeed: {\n\t\t\tcost: 100,\n\t\t\tamount: 50\n\t\t}\n\t}\n};\n\nvar player = {};\n\nexports.default = { minion: minion, base: base, archer: archer, player: player };\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.gameOver = true;\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        colliderSystem: this.colliderSystem,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"randomAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"randomAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver(_ref) {\n      var winner = _ref.winner,\n          score = _ref.score;\n\n      this.state.players.forEach(function (p) {\n        return p.setGameOver();\n      });\n      (0, _menuScreen.activateMenu)({\n        winner: winner,\n        score: score\n      });\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      var difficulty = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var computers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n      if (computers === 0) {\n        this.AI = null;\n        this.playerAI = null;\n      } else if (computers === 1) {\n        this.AI = new _aiPlayer2.default({\n          player: this.computer,\n          personality: \"randomAI\"\n        });\n        this.playerAI = null;\n      } else if (computers === 2) {\n        this.AI = new _aiPlayer2.default({\n          player: this.computer,\n          personality: \"randomAI\"\n        });\n\n        this.playerAI = new _aiPlayer2.default({\n          player: this.myPlayer,\n          personality: \"randomAI\"\n        });\n      }\n\n      if (this.AI) {\n        this.AI.setDifficulty(difficulty);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.setDifficulty(difficulty);\n      }\n\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          var winner = _this.state.players.find(function (p) {\n            return p.id !== player.id;\n          });\n          var score = winner.score;\n          _this.initializeGameOver({ winner: winner, score: score });\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":5,\"./constants\":8,\"./menu-screen\":11,\"./player\":13}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    poppulationText = void 0,\n    baseHealthText = void 0,\n    minionBaseHealthText = void 0,\n    minionBaseAttackText = void 0,\n    minionBaseAttackSpeedText = void 0,\n    archerBaseAttackText = void 0,\n    archerBaseAttackSpeedText = void 0;\nvar baseHealthUpgrade = void 0,\n    minionBaseHealthUpgrade = void 0,\n    minionBaseAttackUpgrade = void 0,\n    minionBaseAttackSpeedUpgrade = void 0,\n    archerBaseAttackUpgrade = void 0,\n    archerBaseAttackSpeedUpgrade = void 0;\n\n// Texture\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupGrassField();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.hud = document.getElementById('hud');\n    this.hudUpgrade = document.getElementById('hud-upgrade');\n    this.lastTimeStamp = 0;\n    this.started = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this, this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888, 1);\n\n      lightSource.position.set(0, 30, 0);\n      lightAmbient.position.set(0, 30, 0);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      //let texturedSurfaceGeometry = new THREE.PlaneGeometry(gridWidth, gridWidth);\n      //let texturedSurfaceMaterial = new THREE.MeshBasicMaterial({map: planeTexture});\n      //let texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      //texturedSurface.rotation.x = -0.5 * Math.PI;\n      //texturedSurface.position.y = -0.3;\n      //this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridHeight);\n      grid.position.y = -.4;\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridHeight;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridHeight; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = 0;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'setupGrassField',\n    value: function setupGrassField() {\n      var textureUrl = 'textures/grasslight-small.jpg';\n      var texture = new THREE.TextureLoader().load(textureUrl);\n      texture.wrapS = THREE.RepeatWrapping;\n      texture.wrapT = THREE.RepeatWrapping;\n      texture.repeat.y = _constants.gridSubDiv;\n      texture.repeat.x = _constants.gridSubDiv;\n      texture.anisotropy = this.renderer.getMaxAnisotropy();\n      // build object3d\n      var geometry = new THREE.PlaneGeometry(_constants.gridWidth * 10, _constants.gridWidth * 10);\n      var material = new THREE.MeshPhongMaterial({\n        map: texture,\n        shininess: 10\n      });\n      var plane = new THREE.Mesh(geometry, material);\n      plane.rotateX(-Math.PI / 2);\n      plane.position.y = -0.2;\n      this.scene.add(plane);\n\n      // let nTufts  = 2000;\n      // let positions = new Array(nTufts);\n      // for(let i = 0; i < nTufts; i++){\n      //   let position  = new THREE.Vector3();\n      //   position.x  = (Math.random()-0.5)*gridWidth;\n      //   position.z  = (Math.random()-0.5)*gridWidth;\n      //   positions[i]  = position;\n      // }\n      // let mesh  = THREEx.createGrassTufts(positions);\n      // this.scene.add(mesh);\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'startFirstGame',\n    value: function startFirstGame() {\n      var _this = this;\n\n      this.gameEngine.restart();\n      this.gameEngine.playerAI = null;\n\n      this.hud.classList.remove('hud--hidden');\n      this.hudUpgrade.classList.remove('hud--hidden');\n\n      this.initializeUpgradeButtons();\n      this.initializeHudTexts();\n\n      this.started = true;\n\n      window.addEventListener('click', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.myPlayer.spawnMinion(index);\n        }\n      });\n\n      window.addEventListener('keypress', function () {\n        var index = _this.getCurrentPanelIndex();\n        if (index >= 0) {\n          _this.gameEngine.computer.spawnMinion(index);\n        }\n      });\n    }\n  }, {\n    key: 'calculateFPS',\n    value: function calculateFPS(timestamp) {\n      var delta = timestamp - this.lastTimeStamp;\n      delta = delta / 1000;\n      this.lastTimeStamp = timestamp;\n      return Math.round(1 / delta);\n    }\n  }, {\n    key: 'updateUI',\n    value: function updateUI(timestamp) {\n      scoreText.textContent = this.gameEngine.myPlayer.score;\n      moneyText.textContent = this.gameEngine.myPlayer.money;\n      poppulationText.textContent = this.gameEngine.myPlayer.minions.length + \"/\" + this.gameEngine.myPlayer.poppulationCap;\n\n      if (this.gameEngine.myPlayer.base !== null) {\n        baseHealthText.textContent = Math.max(this.gameEngine.myPlayer.base.health, 0).toFixed(2) + \" / \" + this.gameEngine.myPlayer.base.maxHealth;\n      } else {\n        baseHealthText.textContent = \"0\";\n      }\n\n      minionBaseHealthText.textContent = _constants2.default.minion.baseHealth + _constants2.default.minion.upgrades.health.amount * this.gameEngine.myPlayer.upgrades.minionBaseHealth;\n      minionBaseAttackText.textContent = _constants2.default.minion.baseAttack + _constants2.default.minion.upgrades.attack.amount * this.gameEngine.myPlayer.upgrades.minionBaseAttack;\n      minionBaseAttackSpeedText.textContent = ((_constants2.default.minion.baseAttackSpeed + this.gameEngine.myPlayer.upgrades.minionBaseAttackSpeed * -_constants2.default.minion.upgrades.attackSpeed.amount) / 1000).toFixed(2) + 's';\n\n      archerBaseAttackText.textContent = _constants2.default.archer.baseAttack + this.gameEngine.myPlayer.upgrades.archerBaseAttack * _constants2.default.archer.upgrades.attack.amount;\n      archerBaseAttackSpeedText.textContent = ((_constants2.default.archer.baseAttackSpeed - this.gameEngine.myPlayer.upgrades.archerBaseAttackSpeed * _constants2.default.archer.upgrades.attackSpeed.amount) / 1000).toFixed(2) + \"s\";\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n\n      if (this.started) {\n        this.updateUI(timestamp);\n      }\n    }\n  }, {\n    key: 'initializeHudTexts',\n    value: function initializeHudTexts() {\n      scoreText = document.getElementById('score');\n      moneyText = document.getElementById('money');\n      poppulationText = document.getElementById('poppulation');\n      baseHealthText = document.getElementById('baseHealth');\n      minionBaseHealthText = document.getElementById('minionBaseHealth');\n      minionBaseAttackText = document.getElementById('minionBaseAttack');\n      minionBaseAttackSpeedText = document.getElementById('minionBaseAttackSpeed');\n      archerBaseAttackText = document.getElementById('archerBaseAttack');\n      archerBaseAttackSpeedText = document.getElementById('archerBaseAttackSpeed');\n    }\n  }, {\n    key: 'initializeUpgradeButtons',\n    value: function initializeUpgradeButtons() {\n      var gameView = this;\n\n      baseHealthUpgrade = document.getElementById('baseHealthUpgrade');\n      baseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeBaseHealth();\n      });\n\n      minionBaseHealthUpgrade = document.getElementById('minionBaseHealthUpgrade');\n      minionBaseHealthUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionHealth();\n      });\n\n      minionBaseAttackUpgrade = document.getElementById('minionBaseAttackUpgrade');\n      minionBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttack();\n      });\n\n      minionBaseAttackSpeedUpgrade = document.getElementById('minionBaseAttackSpeedUpgrade');\n      minionBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeMinionAttackSpeed();\n      });\n\n      archerBaseAttackUpgrade = document.getElementById('archerBaseAttackUpgrade');\n      archerBaseAttackUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttack();\n      });\n\n      archerBaseAttackSpeedUpgrade = document.getElementById('archerBaseAttackSpeedUpgrade');\n      archerBaseAttackSpeedUpgrade.addEventListener('click', function () {\n        gameView.gameEngine.myPlayer.upgradeWizardAttackSpeed();\n      });\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":8,\"./menu-screen\":11}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar startButton = document.getElementById('startButton');\nvar restartSection = document.getElementById('restartModal');\nvar restartButton = document.getElementById('restartButton');\nvar demoButton1 = document.getElementById('demoButton1');\nvar demoButton2 = document.getElementById('demoButton2');\nvar hardButton = document.getElementById('hardButton');\nvar restartModalMessage = document.getElementById('restartModalMessage');\n\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner, score) {\n\n  var text = 'Player ' + (winner.id + 1) + ' wins with a score of ' + score + '!';\n  restartModalMessage.textContent = text;\n\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner, args.score);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameView, gameEngine) {\n  startButton.addEventListener('click', function () {\n    gameView.startFirstGame();\n    closeMenu();\n  });\n\n  restartButton.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n\n  demoButton1.addEventListener('click', function () {\n    gameView.startFirstGame();\n    gameEngine.restart(1, 0);\n    closeMenu();\n  });\n\n  demoButton2.addEventListener('click', function () {\n    gameEngine.restart(1, 0);\n    closeMenu();\n  });\n\n  hardButton.addEventListener('click', function () {\n    gameEngine.restart(2, 1);\n    closeMenu();\n  });\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = _constants2.default.minion.baseHealth + args.healthUpgrade * _constants2.default.minion.upgrades.health.amount;\n    this.attackStrength = _constants2.default.minion.baseAttack + args.attackUpgrade * _constants2.default.minion.upgrades.attack.amount;\n    this.attackSpeed = _constants2.default.minion.baseAttackSpeed + args.attackSpeedUpgrade * -_constants2.default.minion.upgrades.attackSpeed.amount;\n    this.defaultSpeed = .3;\n\n    this.health = this.maxHealth;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.attackAnimationProperties = {\n      direction: 1,\n      speed: this.attackSpeed / 2\n    };\n\n    this.walkingAnimationProperties = {\n      direction: this.direction,\n      speed: 50 / this.defaultSpeed, // This should not change only change the speed of the minion and the animation will update accordingly\n      lastTimeStamp: null,\n      time: 0\n    };\n\n    this.killReward = {\n      money: 75,\n      score: 25\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.rotObjectMatrix = null;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: 'initializeView',\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n      hitGeometry.dispose();\n      hitMaterial.dispose();\n    }\n  }, {\n    key: 'getPosition',\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: 'initializeHealthBar',\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: 'isObjectLoaded',\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: 'registerCollision',\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = userData.object;\n        _this.resetWalkAnimation();\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        var userData = otherCollider.object3d.userData;\n\n        if (userData.player.id === _this.playerId) {\n          return;\n        }\n        if (userData.ranged) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = userData.object;\n          _this.resetWalkAnimation();\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n\n      this.collider.addEventListener('contactExit', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: 'getAttackValue',\n    value: function getAttackValue() {\n      var critProc = Math.random();\n      return critProc >= .9 ? this.attackStrength * (Math.random() + 1) : this.attackStrength;\n    }\n  }, {\n    key: 'updateHealthBar',\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n      this.walkProcedure(timestamp);\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: 'attackProcedure',\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime = this.attackProperties.attackTime + delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(delta);\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop(0);\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'attackLoop',\n    value: function attackLoop(delta) {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      this.animateAttack(delta);\n      if (this.attackProperties.attackTime <= this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: 'animateAttack',\n    value: function animateAttack(delta) {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        var currentAttackTime = this.attackProperties.attackTime;\n        var direction = this.attackAnimationProperties.direction;\n        var animationSpeed = this.attackAnimationProperties.speed;\n        var maxRotation = 135;\n\n        var rotation = direction * (maxRotation * (Math.PI / 180) * (delta / animationSpeed));\n        rotation = Math.min(rightArm.rotation.z + rotation, maxRotation);\n        rotation = Math.max(rotation, 0);\n\n        rightArm.rotation.z = rotation;\n        if (currentAttackTime > animationSpeed) {\n          this.attackAnimationProperties.direction = -1;\n        } else {\n          this.attackAnimationProperties.direction = 1;\n        }\n      }\n    }\n  }, {\n    key: 'resetAttackAnimation',\n    value: function resetAttackAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var rightArm = this.viewObj.children[1].children[1];\n        rightArm.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'walkProcedure',\n    value: function walkProcedure(timestamp) {\n      if (!this.attack && this.walkingAnimationProperties.lastTimeStamp !== null) {\n        var delta = timestamp - this.walkingAnimationProperties.lastTimeStamp;\n        this.walkingAnimationProperties.time = this.walkingAnimationProperties.time + delta;\n        this.walkLoop(delta);\n      } else {\n        this.walkLoop(0);\n      }\n\n      this.walkingAnimationProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: 'walkLoop',\n    value: function walkLoop(delta) {\n      this.animateWalk(delta);\n      if (this.walkingAnimationProperties.time <= this.walkingAnimationProperties.speed) {\n        return;\n      }\n      this.walkingAnimationProperties.time = 0;\n    }\n  }, {\n    key: 'animateWalk',\n    value: function animateWalk(delta) {\n      if (this.viewObj.children.length > 1 && !this.attack) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n        var animationTime = this.walkingAnimationProperties.time;\n        var animationSpeed = this.walkingAnimationProperties.speed;\n        var direction = this.walkingAnimationProperties.direction;\n        var maxRotation = 45;\n\n        var rotation = maxRotation * (delta / animationSpeed);\n\n        if (direction) {\n          this.animateLegForward(leftLeg, rotation, maxRotation, delta);\n          this.animateLegBack(rightLeg, rotation, maxRotation, delta);\n        } else {\n          this.animateLegForward(rightLeg, rotation, maxRotation, delta);\n          this.animateLegBack(leftLeg, rotation, maxRotation, delta);\n        }\n\n        if (this.toDegrees(leftLeg.rotation.z) >= maxRotation || this.toDegrees(leftLeg.rotation.z) <= -maxRotation) {\n          this.walkingAnimationProperties.direction = !this.walkingAnimationProperties.direction;\n        }\n      }\n    }\n  }, {\n    key: 'animateLegBack',\n    value: function animateLegBack(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(-maxRotation);\n\n      if (leg.rotation.z + this.toRadians(-rotation) < max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(-rotation);\n      }\n    }\n  }, {\n    key: 'animateLegForward',\n    value: function animateLegForward(leg, rotation, maxRotation, delta) {\n      var max = this.toRadians(maxRotation);\n      if (leg.rotation.z + this.toRadians(rotation) > max) {\n        leg.rotation.z = max;\n      } else {\n        leg.rotation.z += this.toRadians(rotation);\n      }\n    }\n  }, {\n    key: 'resetWalkAnimation',\n    value: function resetWalkAnimation() {\n      if (this.viewObj.children.length > 1) {\n        var legs = this.viewObj.children[1].children[3];\n        var leftLeg = legs.children[0];\n        var rightLeg = legs.children[1];\n\n        leftLeg.rotation.z = 0;\n        rightLeg.rotation.z = 0;\n      }\n    }\n  }, {\n    key: 'toDegrees',\n    value: function toDegrees(angleRadians) {\n      return angleRadians * 180 / Math.PI;\n    }\n  }, {\n    key: 'toRadians',\n    value: function toRadians(angleDegrees) {\n      return angleDegrees / 180 * Math.PI;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":8}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _archer = require('./archer');\n\nvar _archer2 = _interopRequireDefault(_archer);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.colliderSystem = args.colliderSystem;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n    this.poppulationCap = 30;\n\n    this.setUpgradeValues();\n    this.loader = new THREE.ObjectLoader();\n\n    this.setupGameState();\n    this.spawnBase();\n    this.spawnArchers();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnArchers',\n    value: function spawnArchers() {\n      var _this = this;\n\n      var archer = new _archer2.default({\n        scene: this.scene,\n        colliderList: this.colliderList,\n        startingZ: 2,\n        startingY: 20,\n        startingX: this.spawnPos,\n        direction: this.direction,\n        player: this\n      });\n\n      this.archers.push(archer);\n\n      this.loader.load('./geometry/wizard.json', function (obj) {\n        obj.position.y = -4;\n        archer.viewObj.add(obj);\n\n        archer.bodyModel = archer.viewObj.children[2];\n        archer.rightArm = archer.bodyModel.children[1];\n        archer.rightArm.rotation.z = 135 / 180 * Math.PI;\n        if (archer.direction === -1) {\n          archer.viewObj.children[2].rotation.y = Math.PI;\n          archer.startingRotation = Math.PI;\n        }\n\n        _this.scene.add(archer.viewObj);\n      });\n    }\n  }, {\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this2 = this;\n\n      if (this.minions.length < this.poppulationCap) {\n        if (this.money >= this.minionCost) {\n          if (!this.gameOver) {\n            this.money -= this.minionCost;\n          }\n\n          var minion = new _minion2.default({\n            id: this.minionId++,\n            healthUpgrade: this.upgrades.minionBaseHealth,\n            attackUpgrade: this.upgrades.minionBaseAttack,\n            attackSpeedUpgrade: this.upgrades.minionBaseAttackSpeed,\n            playerId: this.id,\n            direction: this.direction,\n            startingZ: index,\n            colliderList: this.colliderList,\n            player: this\n          });\n\n          this.minions.push(minion);\n          this.loader.load('./geometry/model.json', function (obj) {\n            obj.position.y = -4;\n            minion.viewObj.add(obj);\n\n            if (minion.direction === -1) {\n              minion.viewObj.children[1].rotation.y = Math.PI;\n            }\n\n            _this2.scene.add(minion.viewObj);\n          });\n        }\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      if (this.gameOver) {\n        return;\n      }\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this3 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.archers.forEach(function (archer) {\n        archer.runLoop(timestamp);\n      });\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (!minion.attack) {\n          minion.resetAttackAnimation();\n        }\n        if (minion.destroy) {\n          _this3.destroyMinion(minion, index);\n        }\n      });\n\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n      minion.collider.removeEventListener('contactEnter');\n      minion.collider.removeEventListener('contactStay');\n      minion.collider.removeEventListener('contactExit');\n      minion.collider.removeEventListener('contactRemoved');\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      var _this4 = this;\n\n      this.archers.forEach(function (archer) {\n        _this4.scene.remove(archer.viewObj);\n        _this4.colliderList.splice(_this4.findColliderIndex(archer.collider.id), 1);\n      });\n      this.archers.length = 0;\n\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setGameOver',\n    value: function setGameOver() {\n      this.gameOver = true;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this5 = this;\n\n      this.minions.forEach(function (minion) {\n        _this5.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.archers.forEach(function (archers) {\n        _this5.scene.remove(archers.viewObj);\n      });\n\n      this.gameOver = false;\n      this.setUpgradeValues();\n      this.setupGameState();\n      this.spawnBase();\n      this.spawnArchers();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.archers = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 50;\n      this.lost = false;\n    }\n  }, {\n    key: 'setUpgradeValues',\n    value: function setUpgradeValues() {\n      this.upgrades = {\n        baseHealth: 0,\n        minionBaseHealth: 0,\n        minionBaseAttack: 0,\n        minionBaseAttackSpeed: 0,\n        archerBaseAttack: 0,\n        archerBaseAttackSpeed: 0\n      };\n    }\n  }, {\n    key: 'getBaseHealthUpgradeCost',\n    value: function getBaseHealthUpgradeCost() {\n      return _constants2.default.base.upgrades.health.cost * (this.upgrades.baseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeBaseHealth',\n    value: function canUpgradeBaseHealth() {\n      return this.money > this.getBaseHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeBaseHealth',\n    value: function upgradeBaseHealth() {\n      if (this.canUpgradeBaseHealth()) {\n        this.upgrades.baseHealth++;\n        this.base.maxHealth += _constants2.default.base.upgrades.health.amount;\n        this.base.health += _constants2.default.base.upgrades.health.amount;\n        this.money -= _constants2.default.base.upgrades.health.cost * this.upgrades.baseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionHealthUpgradeCost',\n    value: function getMinionHealthUpgradeCost() {\n      return _constants2.default.minion.upgrades.health.cost * (this.upgrades.minionBaseHealth + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionHealth',\n    value: function canUpgradeMinionHealth() {\n      return this.money > this.getMinionHealthUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionHealth',\n    value: function upgradeMinionHealth() {\n      if (this.canUpgradeMinionHealth()) {\n        this.upgrades.minionBaseHealth++;\n        this.money -= _constants2.default.minion.upgrades.health.cost * this.upgrades.minionBaseHealth;\n      }\n    }\n  }, {\n    key: 'getMinionAttackUpgradeCost',\n    value: function getMinionAttackUpgradeCost() {\n      return _constants2.default.minion.upgrades.attack.cost * (this.upgrades.minionBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttack',\n    value: function canUpgradeMinionAttack() {\n      return this.money > this.getMinionAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttack',\n    value: function upgradeMinionAttack() {\n      if (this.canUpgradeMinionAttack()) {\n        this.upgrades.minionBaseAttack++;\n        this.money -= _constants2.default.minion.upgrades.attack.cost * this.upgrades.minionBaseAttack;\n      }\n    }\n  }, {\n    key: 'getMinionAttackSpeedUpgradeCost',\n    value: function getMinionAttackSpeedUpgradeCost() {\n      return _constants2.default.minion.upgrades.attackSpeed.cost * (this.upgrades.minionBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeMinionAttackSpeed',\n    value: function canUpgradeMinionAttackSpeed() {\n      return this.money > this.getMinionAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeMinionAttackSpeed',\n    value: function upgradeMinionAttackSpeed() {\n      if (this.canUpgradeMinionAttackSpeed()) {\n        this.upgrades.minionBaseAttackSpeed++;\n        this.money -= _constants2.default.minion.upgrades.attackSpeed.cost * this.upgrades.minionBaseAttackSpeed++;\n      }\n    }\n  }, {\n    key: 'getWizardAttackUpgradeCost',\n    value: function getWizardAttackUpgradeCost() {\n      return _constants2.default.archer.upgrades.attack.cost * (this.upgrades.archerBaseAttack + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttack',\n    value: function canUpgradeWizardAttack() {\n      return this.money > this.getWizardAttackUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttack',\n    value: function upgradeWizardAttack() {\n      if (this.canUpgradeWizardAttack()) {\n        this.archers.forEach(function (archer) {\n          archer.attackStrength += _constants2.default.archer.upgrades.attack.amount;\n        });\n\n        this.upgrades.archerBaseAttack++;\n        this.money -= _constants2.default.archer.upgrades.attack.cost * this.upgrades.archerBaseAttack;\n      }\n    }\n  }, {\n    key: 'getWizardAttackSpeedUpgradeCost',\n    value: function getWizardAttackSpeedUpgradeCost() {\n      return _constants2.default.archer.upgrades.attackSpeed.cost * (this.upgrades.archerBaseAttackSpeed + 1);\n    }\n  }, {\n    key: 'canUpgradeWizardAttackSpeed',\n    value: function canUpgradeWizardAttackSpeed() {\n      return this.money > this.getWizardAttackSpeedUpgradeCost();\n    }\n  }, {\n    key: 'upgradeWizardAttackSpeed',\n    value: function upgradeWizardAttackSpeed() {\n      if (this.canUpgradeWizardAttackSpeed()) {\n        this.archers.forEach(function (archer) {\n          archer.attackSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n          archer.arrowSpeed -= _constants2.default.archer.upgrades.attackSpeed.amount;\n        });\n\n        this.upgrades.archerBaseAttackSpeed++;\n        this.money -= _constants2.default.archer.upgrades.attackSpeed.cost * this.upgrades.archerBaseAttackSpeed;\n      }\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./archer\":6,\"./base\":7,\"./constants\":8,\"./minion\":12}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nexports.setupPerformance = setupPerformance;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n  renderer.shadowMapEnabled = true;\n  renderer.shadowMapType = THREE.PCFSoftShadowMap;\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\nfunction setupPerformance() {\n  var rendererStats = new THREEx.RendererStats();\n  rendererStats.domElement.style.position = 'absolute';\n  rendererStats.domElement.style.left = '0px';\n  rendererStats.domElement.style.bottom = '0px';\n  document.body.appendChild(rendererStats.domElement);\n  return rendererStats;\n}\n\n},{}]},{},[4])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYWkvZGVmZW5zaXZlLWFpLmpzIiwic3JjL2pzL2FpL3JhbmRvbS1haS5qcyIsInNyYy9qcy9haS9zbWFydC1haS5qcyIsInNyYy9qcy9hcHAuanMiLCJzcmMvanMvbW9kdWxlcy9haS1wbGF5ZXIuanMiLCJzcmMvanMvbW9kdWxlcy9hcmNoZXIuanMiLCJzcmMvanMvbW9kdWxlcy9iYXNlLmpzIiwic3JjL2pzL21vZHVsZXMvY29uc3RhbnRzLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS1lbmdpbmUuanMiLCJzcmMvanMvbW9kdWxlcy9nYW1lLXZpZXcuanMiLCJzcmMvanMvbW9kdWxlcy9tZW51LXNjcmVlbi5qcyIsInNyYy9qcy9tb2R1bGVzL21pbmlvbi5qcyIsInNyYy9qcy9tb2R1bGVzL3BsYXllci5qcyIsInNyYy9qcy9tb2R1bGVzL3ZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7a0JDRWUsVUFBUyxTQUFULEVBQW9CO0FBQ2pDLE1BQUksTUFBTSxFQUFWO0FBQ0EsT0FBSSxJQUFJLElBQUksQ0FBWixFQUFlLHlCQUFmLEVBQStCLEdBQS9CLEVBQW9DO0FBQ2xDLFFBQUksQ0FBSixJQUFTLENBQVQ7QUFDRDs7QUFFRCxZQUFVLE9BQVYsQ0FBa0IsVUFBQyxLQUFELEVBQVc7QUFDM0IsUUFBSSxNQUFNLFNBQVY7QUFDRCxHQUZEOztBQUlBLE9BQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBcEIsQ0FBNEIsVUFBQyxNQUFELEVBQVk7QUFDdEMsUUFBSSxPQUFPLFNBQVg7QUFDRCxHQUZEOztBQUlBLE1BQUksYUFBYSxDQUFDLENBQWxCO0FBQ0EsTUFBSSxhQUFhLE1BQWpCO0FBQ0EsU0FBTyxNQUFQLENBQWMsR0FBZCxFQUFtQixPQUFuQixDQUEyQixVQUFDLEdBQUQsRUFBTSxLQUFOLEVBQWdCO0FBQ3pDLFFBQUcsTUFBTSxVQUFU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aUJBQVYsQ0FBNEIsRUFBNUIsRUFBZ0MsT0FBTyxVQUFQLEdBQW9CLE9BQU8sV0FBM0QsRUFBd0UsR0FBeEUsRUFBNkUsSUFBN0UsQ0FBYjtBQUNBLE1BQUksV0FBVyxJQUFJLE1BQU0sYUFBVixFQUFmO0FBQ0EsV0FBUyxnQkFBVCxHQUE0QixJQUE1QjtBQUNBLFdBQVMsYUFBVCxHQUF5QixNQUFNLGdCQUEvQjtBQUNBLFdBQVMsT0FBVCxDQUFpQixPQUFPLFVBQXhCLEVBQW9DLE9BQU8sV0FBM0M7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsVUFBbkM7O0FBRUEsZ0JBQWMsUUFBZCxFQUF3QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRDs7QUFFTSxTQUFTLGdCQUFULEdBQTRCO0FBQ2pDLE1BQUksZ0JBQWdCLElBQUksT0FBTyxhQUFYLEVBQXBCO0FBQ0EsZ0JBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixRQUEvQixHQUEwQyxVQUExQztBQUNBLGdCQUFjLFVBQWQsQ0FBeUIsS0FBekIsQ0FBK0IsSUFBL0IsR0FBc0MsS0FBdEM7QUFDQSxnQkFBYyxVQUFkLENBQXlCLEtBQXpCLENBQStCLE1BQS9CLEdBQXdDLEtBQXhDO0FBQ0EsV0FBUyxJQUFULENBQWMsV0FBZCxDQUEyQixjQUFjLFVBQXpDO0FBQ0EsU0FBTyxhQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcbiAgbGV0IG1hcCA9IHt9O1xuICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7XG4gICAgbWFwW2ldID0gMDtcbiAgfVxuXG4gIG9wcG9uZW50cy5mb3JFYWNoKChlbmVteSkgPT4ge1xuICAgIG1hcFtlbmVteS5zdGFydGluZ1pdLS07XG4gIH0pO1xuXG4gIHRoaXMucGxheWVyLm1pbmlvbnMuZm9yRWFjaCgobWluaW9uKSA9PiB7XG4gICAgbWFwW21pbmlvbi5zdGFydGluZ1pdKytcbiAgfSk7XG5cbiAgbGV0IHNwYXduSW5kZXggPSAtMTtcbiAgbGV0IHNwYXduVmFsdWUgPSAxMDAwMDA7XG4gIE9iamVjdC52YWx1ZXMobWFwKS5mb3JFYWNoKCh2YWwsIGluZGV4KSA9PiB7XG4gICAgaWYodmFsIDwgc3Bhd25WYWx1ZSkge1xuICAgICAgc3Bhd25WYWx1ZSA9IHZhbDtcbiAgICAgIHNwYXduSW5kZXggPSBpbmRleFxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHNwYXduSW5kZXg7XG59IiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi4vbW9kdWxlcy9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XG4gfSIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4uL21vZHVsZXMvY29uc3RhbnRzJztcblxuQXJyYXkucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgc2VsZikgeyBcbiAgICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvcHBvbmVudHMsIGZyaWVuZGxpZXMsIHNwYXduUG9zKSB7XG4gIGxldCBzdGFydGluZ1BvcyA9IHNwYXduUG9zO1xuXG4gIGxldCBmcmllbmRseU1hcCA9IGZyaWVuZGxpZXMubWFwKG0gPT4ge1xuICAgIHJldHVybiB7XG4gICAgICByb3c6IG0uc3RhcnRpbmdaLFxuICAgICAgZGlzdGFuY2U6IG0uZ2V0UG9zaXRpb24oKS54IC0gc3RhcnRpbmdQb3NcbiAgICB9XG4gIH0pO1xuXG4gIGxldCBvcHBvbmVudE1hcCA9IG9wcG9uZW50cy5tYXAobSA9PiB7XG5cbiAgICBsZXQgZGlzdGFuY2UgPSBzdGFydGluZ1BvcyAtIG0uZ2V0UG9zaXRpb24oKS54O1xuICAgIHJldHVybiB7XG4gICAgICByb3c6IG0uc3RhcnRpbmdaLFxuICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlXG4gICAgfTtcbiAgfSk7XG5cbiAgbGV0IHJvd0FycmF5ID0gW107XG4gIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHsgcm93QXJyYXkucHVzaChpKTsgfVxuXG4gIGxldCBkZWNpc2lvbiA9IHtcbiAgICBoYXNGcmllbmRsaWVzOiBbXSxcbiAgICBjbG9zZXN0SW5kZXg6IC0xLFxuICAgIGNsb3Nlc3RWYWw6IDk5OTk5LFxuICAgIGRpc3RhbmNlVGllczogW11cblxuICB9O1xuXG4gIGZyaWVuZGx5TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XG4gICAgZGVjaXNpb24uaGFzRnJpZW5kbGllcy5wdXNoKHZhbC5yb3cpO1xuICB9KTtcblxuXG4gIG9wcG9uZW50TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XG4gICAgaWYodmFsLmRpc3RhbmNlIDwgZGVjaXNpb24uY2xvc2VzdFZhbCkge1xuICAgICAgZGVjaXNpb24uY2xvc2VzdEluZGV4ID0gdmFsLnJvdztcbiAgICAgIGRlY2lzaW9uLmNsb3Nlc3RWYWwgPSB2YWwuZGlzdGFuY2U7XG5cbiAgICAgIGlmKGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih2YWwuZGlzdGFuY2UgPT09IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcbiAgICAgIGRlY2lzaW9uLmRpc3RhbmNlVGllcy5wdXNoKHZhbC5yb3cpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcbiAgZGVjaXNpb24uaGFzRnJpZW5kbGllcyA9IGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMudW5pcXVlKCk7XG5cbiAgbGV0IGZ1bGxJZHhBcnIgPSByb3dBcnJheS5zbGljZSgwKTtcblxuICBkZWNpc2lvbi5nYXBzID0gZnVsbElkeEFyci5maWx0ZXIoeCA9PiB7XG4gICAgcmV0dXJuIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMuaW5kZXhPZih4KSA8IDA7XG4gIH0pO1xuXG5cbiAgLy9pZihmcmllbmRsaWVzLmxlbmd0aCA+IDMpIHtcbiAgICAvL2ZyaWVuZGxpZXNbMl0udmlld09iai5wb3NpdGlvbi56ICs9IDE7XG4gIC8vfVxuXG5cbiAgbGV0IGFycmF5VG9Vc2U7XG4gIGlmKGRlY2lzaW9uLmNsb3Nlc3RWYWwgPCBncmlkV2lkdGgvMikge1xuICAgIGFycmF5VG9Vc2UgPSBkZWNpc2lvbi5kaXN0YW5jZVRpZXM7XG4gIH0gZWxzZSB7XG4gICAgYXJyYXlUb1VzZSA9IGRlY2lzaW9uLmdhcHM7XG4gIH1cblxuICBsZXQgYXJySWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXlUb1VzZS5sZW5ndGgpO1xuICByZXR1cm4gYXJyYXlUb1VzZVthcnJJZHhdO1xufSIsImltcG9ydCB7XG4gIHNldHVwU2NyZWVuVmlldywgc2V0dXBQZXJmb3JtYW5jZVxufSBmcm9tICcuL21vZHVsZXMvdmlldyc7XG5cbmltcG9ydCBHYW1lRW5naW5lIGZyb20gJy4vbW9kdWxlcy9nYW1lLWVuZ2luZSc7XG5pbXBvcnQgR2FtZVZpZXcgZnJvbSAnLi9tb2R1bGVzL2dhbWUtdmlldyc7XG5cbi8vIEdsb2JhbHNcbmxldCBnbG9iYWxzO1xuXG5sZXQgZ2FtZUVuZ2luZSwgZ2FtZVZpZXc7XG5sZXQgcmVuZGVyZXJTdGF0cztcbmxldCBwZXJmb3JtYW5jZSA9IHRydWU7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGxldCB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH0gPSBzZXR1cFNjcmVlblZpZXcoKTtcbiAgZ2xvYmFscyA9IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcblxuICBpZihwZXJmb3JtYW5jZSkge1xuICAgIHJlbmRlcmVyU3RhdHMgPSBzZXR1cFBlcmZvcm1hbmNlKCk7XG4gIH1cblxuICBnYW1lRW5naW5lID0gbmV3IEdhbWVFbmdpbmUoZ2xvYmFscyk7XG4gIGdhbWVWaWV3ID0gbmV3IEdhbWVWaWV3KGdsb2JhbHMsIGdhbWVFbmdpbmUpO1xuXG4gIHJlbmRlcigpO1xufVxuXG5mdW5jdGlvbiByZW5kZXIodGltZXN0YW1wKSB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICBnYW1lVmlldy5yZW5kZXJMb29wKHRpbWVzdGFtcCk7XG5cbiAgZ2xvYmFscy5yZW5kZXJlci5yZW5kZXIoZ2xvYmFscy5zY2VuZSwgZ2xvYmFscy5jYW1lcmEpO1xuICBpZihwZXJmb3JtYW5jZSkge1xuICAgIHJlbmRlcmVyU3RhdHMudXBkYXRlKGdsb2JhbHMucmVuZGVyZXIpO1xuICB9XG59XG5cbmluaXQoKTtcbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCBzbWFydEFJIGZyb20gJy4uL2FpL3NtYXJ0LWFpJztcbmltcG9ydCBkZWZlbnNpdmVBSSBmcm9tICcuLi9haS9kZWZlbnNpdmUtYWknO1xuaW1wb3J0IHJhbmRvbUFJIGZyb20gJy4uL2FpL3JhbmRvbS1haSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFJIHtcblxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zbWFydEFJID0gc21hcnRBSTtcbiAgICB0aGlzLmRlZmVuc2l2ZUFJID0gZGVmZW5zaXZlQUk7XG4gICAgdGhpcy5yYW5kb21BSSA9IHJhbmRvbUFJO1xuICAgIHRoaXMuZGV0ZXJtaW5lQUlGdW5jdGlvbihhcmdzLnBlcnNvbmFsaXR5KTtcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xuICAgIHRoaXMuc3Bhd25JbnRlcnZhbCA9IDMyNTtcbiAgICB0aGlzLmxhc3RVcGdyYWRlID0gMDtcbiAgICB0aGlzLnVwZ3JhZGVJbnRlcnZhbCA9IDE1MDA7XG4gICAgdGhpcy5sYXN0U3Bhd24gPSAwO1xuICAgIHRoaXMucG9wcHVsYXRpb25MaW1pdCA9IDMwO1xuICB9XG5cbiAgY2FuU3Bhd24odGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRpbWVzdGFtcCAtIHRoaXMubGFzdFNwYXduID4gdGhpcy5zcGF3bkludGVydmFsICYmIHRoaXMucGxheWVyLm1pbmlvbnMubGVuZ3RoIDwgdGhpcy5wb3BwdWxhdGlvbkxpbWl0O1xuICB9XG5cbiAgY2FuVXBncmFkZSh0aW1lc3RhbXApIHtcbiAgICByZXR1cm4gdGltZXN0YW1wIC0gdGhpcy5sYXN0VXBncmFkZSA+IHRoaXMudXBncmFkZUludGVydmFsO1xuICB9XG5cbiAgc2V0RGlmZmljdWx0eShkaWZmaWN1bHR5KSB7XG4gICAgaWYoZGlmZmljdWx0eSA9PT0gMSkge1xuICAgICAgdGhpcy5zZXR1cEVhc3koKTtcbiAgICB9IGVsc2UgaWYoZGlmZmljdWx0eSA9PT0gMikge1xuICAgICAgdGhpcy5zZXR1cEhhcmQoKTtcbiAgICB9XG4gIH1cblxuICBzZXR1cEVhc3koKSB7XG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gMTUwMDtcbiAgICB0aGlzLnVwZ3JhZGVJbnRlcnZhbCA9IDMwMDA7XG4gIH1cblxuICBzZXR1cEhhcmQoKSB7XG4gICAgdGhpcy5zcGF3bkludGVydmFsID0gMzI1O1xuICAgIHRoaXMudXBncmFkZUludGVydmFsID0gMTUwMDtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wLCBvcHBvbmVudHMpIHtcbiAgICBpZih0aGlzLmNhblVwZ3JhZGUodGltZXN0YW1wKSkge1xuICAgICAgdGhpcy5hcHBseVVwZ3JhZGVzKHRoaXMuY2hlY2tVcGdyYWRlcygpKTtcbiAgICAgIHRoaXMubGFzdFVwZ3JhZGUgPSB0aW1lc3RhbXA7XG4gICAgfVxuXG4gICAgaWYoIXRoaXMuY2FuU3Bhd24odGltZXN0YW1wKSkgeyByZXR1cm47IH1cblxuICAgIGxldCBzcGF3bkluZGV4ID0gdGhpcy5BSUZ1bmN0aW9uKG9wcG9uZW50cywgdGhpcy5wbGF5ZXIubWluaW9ucywgdGhpcy5wbGF5ZXIuc3Bhd25Qb3MpO1xuXG4gICAgaWYoc3Bhd25JbmRleCA+PSAwKSB7XG4gICAgICB0aGlzLnBsYXllci5zcGF3bk1pbmlvbihzcGF3bkluZGV4KTtcbiAgICAgIHRoaXMubGFzdFNwYXduID0gdGltZXN0YW1wO1xuICAgIH1cbiAgfVxuXG4gIGRldGVybWluZUFJRnVuY3Rpb24ocGVyc29uYWxpdHkpIHtcbiAgICBpZihwZXJzb25hbGl0eSkge1xuICAgICAgdGhpcy5BSUZ1bmN0aW9uID0gdGhpc1twZXJzb25hbGl0eV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbXCJyYW5kb21BSVwiXTtcbiAgICB9XG4gIH1cblxuICAvL2NoZWNrIGFsbCB1cGdyYWRlQ29zdHMgdG8gc2VlIGlmIGFueSBjYW4gYmUgdXBncmFkZXMgcmV0dXJucyBhIGxpc3Qgb2Ygd2hhdCBjYW4gYmUgdXBncmFkZWQgYW5kIHRoZWlyIGNvc3RcbiAgY2hlY2tVcGdyYWRlcygpIHtcbiAgICBsZXQgdXBncmFkZXMgPSBbXTtcblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVCYXNlSGVhbHRoKCkpIHtcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZUJhc2VIZWFsdGhcIiwgY29zdDp0aGlzLnBsYXllci5nZXRCYXNlSGVhbHRoVXBncmFkZUNvc3QoKX0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVNaW5pb25IZWFsdGgoKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlTWluaW9uSGVhbHRoXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldE1pbmlvbkhlYWx0aFVwZ3JhZGVDb3N0KCl9KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllci5jYW5VcGdyYWRlTWluaW9uQXR0YWNrKCkpIHtcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZU1pbmlvbkF0dGFja1wiLCBjb3N0OiB0aGlzLnBsYXllci5nZXRNaW5pb25BdHRhY2tVcGdyYWRlQ29zdCgpfSk7XG4gICAgfVxuXG4gICAgaWYodGhpcy5wbGF5ZXIuY2FuVXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkpIHtcbiAgICAgIHVwZ3JhZGVzLnB1c2goe25hbWU6IFwidXBncmFkZU1pbmlvbkF0dGFja1NwZWVkXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldE1pbmlvbkF0dGFja1NwZWVkVXBncmFkZUNvc3QoKX0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyLmNhblVwZ3JhZGVXaXphcmRBdHRhY2soKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlV2l6YXJkQXR0YWNrXCIsIGNvc3Q6IHRoaXMucGxheWVyLmdldFdpemFyZEF0dGFja1VwZ3JhZGVDb3N0KCl9KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllci5jYW5VcGdyYWRlV2l6YXJkQXR0YWNrU3BlZWQoKSkge1xuICAgICAgdXBncmFkZXMucHVzaCh7bmFtZTogXCJ1cGdyYWRlV2l6YXJkQXR0YWNrU3BlZWRcIiwgY29zdDogdGhpcy5wbGF5ZXIuZ2V0V2l6YXJkQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB1cGdyYWRlcztcbiAgfVxuXG4gIGFwcGx5VXBncmFkZXModXBncmFkZXMpIHtcbiAgICB1cGdyYWRlcy5mb3JFYWNoKCh1cGdyYWRlKSA9PiB7XG4gICAgICBpZigodGhpcy5wbGF5ZXIubW9uZXkgLyAxLjUpID4gdXBncmFkZS5jb3N0ICYmIHRoaXMucGxheWVyLm1vbmV5ID4gNzUwKSB7XG4gICAgICAgIGxldCBmbiA9IHRoaXMucGxheWVyW3VwZ3JhZGUubmFtZV07XG4gICAgICAgIGZuLmFwcGx5KHRoaXMucGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFyY2hlciB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XG4gICAgdGhpcy5wbGF5ZXJJZCA9IHRoaXMucGxheWVyLmlkO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG5cbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuc3RhcnRpbmdaID0gYXJncy5zdGFydGluZ1o7XG4gICAgdGhpcy5zdGFydGluZ1kgPSBhcmdzLnN0YXJ0aW5nWSArIDQ7XG4gICAgdGhpcy5zdGFydGluZ1ggPSBhcmdzLnN0YXJ0aW5nWCAtICg0ICogdGhpcy5kaXJlY3Rpb24pO1xuXG4gICAgdGhpcy50YXJnZXRMaXN0ID0gW107XG4gICAgdGhpcy5hcnJvd3MgPSBbXTtcblxuICAgIHRoaXMuc3RhcnRpbmdSb3RhdGlvbiA9IDA7XG4gICAgbGV0IF85MGRlZyA9ICg5MC8xODApICogTWF0aC5QSTtcbiAgICBsZXQgXzEzNWRlZyA9ICgxMzUvMTgwKSAqIE1hdGguUEk7XG5cbiAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMgPSB7XG4gICAgICBhcm06IHtcbiAgICAgICAgc3RhcnRpbmdBbmdsZTogXzEzNWRlZyxcbiAgICAgICAgZW5kaW5nQW5nbGU6IF85MGRlZyxcbiAgICAgICAgYW5nbGVEaWZmZXJlbmNlOiBfMTM1ZGVnIC0gXzkwZGVnLFxuICAgICAgICBzcGVlZERvd246IDIwMCxcbiAgICAgICAgc3BlZWRVcDogMTUwLFxuICAgICAgICBsYXN0QW5pbWF0ZTogbnVsbFxuICAgICAgfSxcbiAgICAgIGFycm93U3BlZWQ6IDUwMFxuICAgIH1cblxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcbiAgICAgIGxhc3RBdHRhY2s6IDBcbiAgICB9O1xuICAgIHRoaXMudGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG5cbiAgICB0aGlzLmF0dGFja1NwZWVkID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrU3BlZWQ7XG4gICAgdGhpcy5hcnJvd1NwZWVkID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXJyb3dTcGVlZDtcbiAgICB0aGlzLmF0dGFja1N0cmVuZ3RoID0gQ29uc3RhbnRzLmFyY2hlci5iYXNlQXR0YWNrO1xuICAgIHRoaXMuYXJyb3dJZCA9IDA7XG4gICAgdGhpcy5pbml0aWFsaXplVmlldygpO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KGhpdEJveE9wYWNpdHk9MCkge1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgbGV0IGJvZHlHID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMDEsIDAuMDEzLCAwLjAxMyk7XG4gICAgbGV0IGJvZHlNYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHgwMEZGMDAgfSk7XG4gICAgdGhpcy5ib2R5ID0gbmV3IFRIUkVFLk1lc2goYm9keUcsIGJvZHlNYXQpO1xuXG4gICAgbGV0IGhpdEJveEcgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoIDYwLCA2MCwgNjAgKTtcbiAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHtjb2xvcjogMHhmZmZmMDAsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5LCBkZXB0aFdyaXRlOiBmYWxzZX0gKTtcbiAgICB0aGlzLmhpdEJveCA9IG5ldyBUSFJFRS5NZXNoKCBoaXRCb3hHLCBtYXRlcmlhbCApO1xuXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEub2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5yYW5nZWQgPSB0cnVlO1xuXG4gICAgdGhpcy52aWV3T2JqLmFkZCh0aGlzLmJvZHkpO1xuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oaXRCb3gpO1xuXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnNldCh0aGlzLnN0YXJ0aW5nWCwgdGhpcy5zdGFydGluZ1ksIHRoaXMuc3RhcnRpbmdaKTtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTtcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFbnRlcicsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xuXG4gICAgICBpZih1c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQgfHwgdXNlckRhdGEuaW1tdW5lVG9SYW5nZSkgeyByZXR1cm47IH1cblxuICAgICAgdGhpcy50YXJnZXRMaXN0LnB1c2godXNlckRhdGEub2JqZWN0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFN0YXknLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgbGV0IHVzZXJEYXRhID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YTtcblxuICAgICAgaWYodXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuICAgICAgaWYodXNlckRhdGEucmFuZ2VkIHx8IHVzZXJEYXRhLmltbXVuZVRvUmFuZ2UpIHsgcmV0dXJuOyB9XG5cbiAgICAgIGlmKHRoaXMuZmluZENvbGxpZGVySW5kZXgob3RoZXJDb2xsaWRlci5pZCkgPT09IC0xKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0TGlzdC5wdXNoKHVzZXJEYXRhLm9iamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG5cblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdFJlbW92ZWQnLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgdGhpcy50YXJnZXRMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG90aGVyQ29sbGlkZXIpLCAxKTtcbiAgICAgIHRoaXMuZGV0ZXJtaW5lVGFyZ2V0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFeGl0JywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlVGFyZ2V0KG90aGVyQ29sbGlkZXIpO1xuICAgICAgdGhpcy5kZXRlcm1pbmVUYXJnZXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZpbmRDb2xsaWRlckluZGV4KGlkKSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudGFyZ2V0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy50YXJnZXRMaXN0W2ldLmNvbGxpZGVyLmlkID09PSBpZCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgcmVtb3ZlVGFyZ2V0KGlkKSB7XG4gICAgdGhpcy50YXJnZXRMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KGlkKSwgMSk7XG4gIH1cblxuICBjYW5BdHRhY2sodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy50YXJnZXRMaXN0Lmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZih0aGlzLmluaXRpYXRlQXR0YWNrIHx8IHRoaXMucmVjaGFyZ2luZykgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0QXR0YWNrO1xuICAgIHJldHVybiBkZWx0YSA+PSB0aGlzLmF0dGFja1NwZWVkO1xuICB9XG5cbiAgZ2V0QXR0YWNrVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0YWNrU3RyZW5ndGg7XG4gIH1cblxuICBkZXRlcm1pbmVUYXJnZXQoKSB7XG4gICAgaWYodGhpcy50YXJnZXRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldExpc3RbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApIHtcbiAgICBpZighdGhpcy5jYW5BdHRhY2sodGltZXN0YW1wKSkgeyByZXR1cm47IH1cblxuICAgIGxldCB0YXJnZXQgPSB0aGlzLmRldGVybWluZVRhcmdldCgpO1xuICAgIGlmKHRhcmdldCAhPT0gbnVsbCAmJiB0YXJnZXQudmlld09iaikge1xuICAgICAgdGhpcy5uZXh0VGFyZ2V0ID0ge1xuICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgY2FsbGJhY2s6ICh0YXJnZXQpID0+IHtcbiAgICAgICAgICB0YXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcbiAgICAgICAgICBpZih0YXJnZXQuaGVhbHRoIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnByb2Nlc3NSZXdhcmQodGFyZ2V0LmtpbGxSZXdhcmQpO1xuXG4gICAgICAgICAgICB0YXJnZXQuYXR0YWNrID0gZmFsc2U7XG4gICAgICAgICAgICB0YXJnZXQuZGVzdHJveSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRhcmdldCh0YXJnZXQuY29sbGlkZXIuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5pbml0aWF0ZUF0dGFjayA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RBdHRhY2sgPSB0aW1lc3RhbXA7XG4gIH1cblxuXG4gIHNwYXduQXJyb3codGFyZ2V0LCB0aW1lc3RhbXAsIGNhbGxiYWNrKSB7XG4gICAgbGV0IHRleHR1cmUgPSB0aGlzLnRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvZmlyZWJhbGwuanBnJywgVEhSRUUuU3BoZXJpY2FsUmVmcmFjdGlvbk1hcHBpbmcpO1xuICAgIGxldCBhcnJvd0cgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMSwgMzIsIDE2KTtcbiAgICBsZXQgYXJyb3dNYXQgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoeyBjb2xvcjogMHhGRkZGRkYgLCBtYXA6IHRleHR1cmUsIGVtaXNzaXZlOiAweDQ0MDAwMCB9KTtcblxuXG4gICAgbGV0IGZhY2VWZXJ0ZXhVdnMgPSBhcnJvd0cuZmFjZVZlcnRleFV2c1sgMCBdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmFjZVZlcnRleFV2cy5sZW5ndGg7IGkgKyspIHtcblxuICAgICAgbGV0IHV2cyA9IGZhY2VWZXJ0ZXhVdnNbIGkgXTtcbiAgICAgIGxldCBmYWNlID0gYXJyb3dHLmZhY2VzWyBpIF07XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaiArKykge1xuXG4gICAgICAgIHV2c1sgaiBdLnggPSBmYWNlLnZlcnRleE5vcm1hbHNbIGogXS54ICogMC41ICsgMC41O1xuICAgICAgICB1dnNbIGogXS55ID0gZmFjZS52ZXJ0ZXhOb3JtYWxzWyBqIF0ueSAqIDAuNSArIDAuNTtcblxuICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBsZXQgYXJyb3cgPSBuZXcgVEhSRUUuTWVzaChhcnJvd0csIGFycm93TWF0KTtcbiAgICBhcnJvdy5uYW1lID0gXCJBcnJvd1wiO1xuICAgIHRoaXMuc2NlbmUuYWRkKGFycm93KTtcblxuICAgIGFycm93LnBvc2l0aW9uLnNldCh0aGlzLnN0YXJ0aW5nWCwgdGhpcy5zdGFydGluZ1kgKyAyLCB0aGlzLnN0YXJ0aW5nWik7XG5cbiAgICBsZXQgaWQgPSB0aGlzLmFycm93SWQrKztcblxuICAgIGxldCBzdGFydGluZ1kgPSBhcnJvdy5wb3NpdGlvbi55O1xuICAgIGxldCBtYXggPSBzdGFydGluZ1kgKyA1O1xuICAgIGxldCBlbmRpbmdZID0gdGFyZ2V0LnZpZXdPYmoucG9zaXRpb24ueTtcblxuICAgIGxldCB4XzEgPSAwO1xuICAgIGxldCB5XzEgPSBzdGFydGluZ1k7XG5cbiAgICBsZXQgeF8yID0gMC41O1xuICAgIGxldCB5XzIgPSBtYXg7XG5cbiAgICBsZXQgeF8zID0gMTtcbiAgICBsZXQgeV8zID0gZW5kaW5nWTtcblxuICAgIGxldCBhID0geV8xLygoeF8xLXhfMikqKHhfMS14XzMpKSArIHlfMi8oKHhfMi14XzEpKih4XzIteF8zKSkgKyB5XzMvKCh4XzMteF8xKSooeF8zLXhfMikpXG5cbiAgICBsZXQgYiA9IC15XzEqKHhfMit4XzMpLygoeF8xLXhfMikqKHhfMS14XzMpKVxuICAgICAgICAteV8yKih4XzEreF8zKS8oKHhfMi14XzEpKih4XzIteF8zKSlcbiAgICAgICAgLXlfMyooeF8xK3hfMikvKCh4XzMteF8xKSooeF8zLXhfMikpXG5cbiAgICBsZXQgYyA9IHlfMSp4XzIqeF8zLygoeF8xLXhfMikqKHhfMS14XzMpKVxuICAgICAgKyB5XzIqeF8xKnhfMy8oKHhfMi14XzEpKih4XzIteF8zKSlcbiAgICAgICsgeV8zKnhfMSp4XzIvKCh4XzMteF8xKSooeF8zLXhfMikpXG5cblxuXG4gICAgbGV0IHlGdW5jdGlvbiA9IChkZWx0YSkgPT4ge1xuICAgICAgcmV0dXJuIChhICogKGRlbHRhICogZGVsdGEpKSArIChiICogZGVsdGEpICsgYztcbiAgICB9XG5cbiAgICBsZXQgaW5pdGlhbERpc3RhbmNlWCA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnggLSBhcnJvdy5wb3NpdGlvbi54O1xuICAgIGxldCBkaXN0YW5jZVRhcmdldFdpbGxUcmF2ZWxYID0gKHRhcmdldC5zcGVlZC8xNikgKiB0aGlzLmFycm93U3BlZWQgKiAtdGhpcy5kaXJlY3Rpb247XG4gICAgbGV0IG1feCA9IGluaXRpYWxEaXN0YW5jZVggKyBkaXN0YW5jZVRhcmdldFdpbGxUcmF2ZWxYO1xuXG4gICAgY29uc29sZS5sb2cobV94LCBhcnJvdy5wb3NpdGlvbi54KTtcbiAgICBpZihtX3ggKiAtdGhpcy5kaXJlY3Rpb24gPiAwKSB7XG4gICAgICBtX3ggPSB0aGlzLmRpcmVjdGlvbiAqIDU7XG4gICAgfVxuICAgIGxldCBjX3ggPSBhcnJvdy5wb3NpdGlvbi54O1xuXG4gICAgbGV0IHhGdW5jdGlvbiA9IChkZWx0YSkgPT4ge1xuICAgICAgcmV0dXJuIChtX3ggKiBkZWx0YSkgKyBjX3g7XG4gICAgfVxuXG4gICAgbGV0IG1feiA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnogLSBhcnJvdy5wb3NpdGlvbi56O1xuICAgIGxldCBjX3ogPSBhcnJvdy5wb3NpdGlvbi56O1xuXG4gICAgbGV0IHpGdW5jdGlvbiA9IChkZWx0YSkgPT4ge1xuICAgICAgcmV0dXJuIChtX3ogKiBkZWx0YSkgKyBjX3o7XG4gICAgfVxuXG5cbiAgICB0aGlzLmFycm93cy5wdXNoKHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIG9iajogYXJyb3csXG4gICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgIHN0YXJ0aW5nVGltZTogdGltZXN0YW1wLFxuICAgICAgeUZ1bmN0aW9uOiB5RnVuY3Rpb24sXG4gICAgICB4RnVuY3Rpb246IHhGdW5jdGlvbixcbiAgICAgIHpGdW5jdGlvbjogekZ1bmN0aW9uXG4gICAgfSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKHRhcmdldCk7XG4gICAgICB0aGlzLmFycm93cyA9IHRoaXMuYXJyb3dzLmZpbHRlcigoYSkgPT4ge1xuICAgICAgICByZXR1cm4gYSAhPT0gaWQ7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGFycm93KTtcbiAgICB9LCB0aGlzLmFycm93U3BlZWQpO1xuXG4gIH1cblxuICBhbmltYXRlQXJyb3dzKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuYXJyb3dzLmZvckVhY2goKGFycm93KSA9PiB7XG4gICAgICBsZXQgZGVsdGEgPSAodGltZXN0YW1wIC0gYXJyb3cuc3RhcnRpbmdUaW1lKSAvIHRoaXMuYXJyb3dTcGVlZDtcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi55ID0gYXJyb3cueUZ1bmN0aW9uKGRlbHRhKTtcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi54ID0gYXJyb3cueEZ1bmN0aW9uKGRlbHRhKTtcbiAgICAgIGFycm93Lm9iai5wb3NpdGlvbi56ID0gYXJyb3cuekZ1bmN0aW9uKGRlbHRhKTtcbiAgICAgIGFycm93Lm9iai5yb3RhdGlvbi55ICs9IDAuMTtcbiAgICAgIGFycm93Lm9iai5yb3RhdGlvbi54ICs9IDAuMTtcblxuICAgIH0pO1xuICB9XG5cbiAgYW5pbWF0ZUF0dGFjayh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLnJpZ2h0QXJtICYmIHRoaXMuaW5pdGlhdGVBdHRhY2spIHtcbiAgICAgIGlmKHRoaXMucmlnaHRBcm0ucm90YXRpb24ueiA+IHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uZW5kaW5nQW5nbGUpIHtcbiAgICAgICAgaWYodGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPSB0aW1lc3RhbXA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGVsdGEgPSB0aW1lc3RhbXAgLSB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlO1xuICAgICAgICBsZXQgdGltZVJhdGlvID0gZGVsdGEgLyB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLnNwZWVkRG93bjtcbiAgICAgICAgbGV0IGRlZ3JlZUNoYW5nZSA9IHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0uYW5nbGVEaWZmZXJlbmNlICogdGltZVJhdGlvO1xuXG5cbiAgICAgICAgdGhpcy5yaWdodEFybS5yb3RhdGlvbi56IC09IGRlZ3JlZUNoYW5nZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3Bhd25BcnJvdyhcbiAgICAgICAgICAgIHRoaXMubmV4dFRhcmdldC50YXJnZXQsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICB0aGlzLm5leHRUYXJnZXQuY2FsbGJhY2sgKTtcblxuICAgICAgICB0aGlzLnJlc2V0QXR0YWNrQW5pbWF0aW9uKCk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBpZih0aGlzLnJpZ2h0QXJtICYmIHRoaXMucmVjaGFyZ2luZykge1xuICAgICAgaWYodGhpcy5yaWdodEFybS5yb3RhdGlvbi56IDwgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5zdGFydGluZ0FuZ2xlKSB7XG4gICAgICAgIGlmKHRoaXMuYW5pbWF0aW9uUHJvcGVydGllcy5hcm0ubGFzdEFuaW1hdGUgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gdGltZXN0YW1wO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZTtcbiAgICAgICAgbGV0IHRpbWVSYXRpbyA9IGRlbHRhIC8gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5zcGVlZFVwO1xuICAgICAgICBsZXQgZGVncmVlQ2hhbmdlID0gdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5hbmdsZURpZmZlcmVuY2UgKiB0aW1lUmF0aW87XG5cbiAgICAgICAgdGhpcy5yaWdodEFybS5yb3RhdGlvbi56ICs9IGRlZ3JlZUNoYW5nZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVjaGFyZ2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvblByb3BlcnRpZXMuYXJtLmxhc3RBbmltYXRlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih0aGlzLm5leHRUYXJnZXQgJiYgdGhpcy5uZXh0VGFyZ2V0LnRhcmdldCkge1xuICAgICAgbGV0IGFuZ2xlVG93YXJkc1RhcmdldCA9IHRoaXMuY2FsY3VsYXRlQW5nbGVUb1RhcmdldCh0aGlzLm5leHRUYXJnZXQudGFyZ2V0KTtcbiAgICAgIHRoaXMuYm9keU1vZGVsLnJvdGF0aW9uLnkgPSBhbmdsZVRvd2FyZHNUYXJnZXQgKyB0aGlzLnN0YXJ0aW5nUm90YXRpb247XG4gICAgfVxuICB9XG5cbiAgcmVzZXRBdHRhY2tBbmltYXRpb24oKSB7XG4gICAgdGhpcy5pbml0aWF0ZUF0dGFjayA9IGZhbHNlO1xuICAgIHRoaXMucmVjaGFyZ2luZyA9IHRydWU7XG4gICAgdGhpcy5hbmltYXRpb25Qcm9wZXJ0aWVzLmFybS5sYXN0QW5pbWF0ZSA9IG51bGw7XG4gIH1cblxuICBjYWxjdWxhdGVBbmdsZVRvVGFyZ2V0KHRhcmdldCkge1xuICAgIGxldCB4RGlmZiA9IHRhcmdldC52aWV3T2JqLnBvc2l0aW9uLnggLSB0aGlzLnZpZXdPYmoucG9zaXRpb24ueDtcbiAgICBsZXQgekRpZmYgPSB0YXJnZXQudmlld09iai5wb3NpdGlvbi56IC0gdGhpcy52aWV3T2JqLnBvc2l0aW9uLno7XG4gICAgbGV0IGRpZmZSYXRpbyA9IHpEaWZmIC8geERpZmY7XG4gICAgcmV0dXJuIChNYXRoLlBJICogLXRoaXMuZGlyZWN0aW9uKSAtIE1hdGguYXRhbihkaWZmUmF0aW8pICsgTWF0aC5QSTtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XG4gICAgdGhpcy5hdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKTtcbiAgICB0aGlzLmFuaW1hdGVBcnJvd3ModGltZXN0YW1wKTtcbiAgICB0aGlzLmFuaW1hdGVBdHRhY2sodGltZXN0YW1wKTtcbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcbiAgICB0aGlzLnBsYXllcklkID0gdGhpcy5wbGF5ZXIuaWQ7XG5cbiAgICB0aGlzLmJhc2VXaWR0aCA9IGdyaWRXaWR0aDtcbiAgICB0aGlzLmJhc2VIZWlnaHQgPSAyMDtcbiAgICB0aGlzLmJhc2VEZXB0aCA9IDEwO1xuXG4gICAgdGhpcy5tYXhIZWFsdGggPSAyNTA7XG4gICAgdGhpcy5oZWFsdGggPSB0aGlzLm1heEhlYWx0aDtcblxuICAgIHRoaXMuaGl0Qm94QnVmZmVyID0gMjtcblxuICAgIHRoaXMua2lsbFJld2FyZCA9IHtcbiAgICAgIG1vbmV5OiA1NTAsXG4gICAgICBzY29yZTogMTAwMFxuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcodGhpcy5kaXJlY3Rpb24pO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KGRpcmVjdGlvbiwgaGl0Qm94T3BhY2l0eT0wKSB7XG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICBsZXQgc2hhcGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcbiAgICAgIHRoaXMuYmFzZURlcHRoLFxuICAgICAgdGhpcy5iYXNlSGVpZ2h0LFxuICAgICAgdGhpcy5iYXNlV2lkdGhcbiAgICApO1xuXG5cbiAgICBsZXQgdGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG4gICAgbGV0IG5vcm1hbE1hcCA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvcm9jay1ub3JtYWwtbWFwLmpwZycpO1xuICAgIGxldCBsb25nVGV4dHVyZSA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvYnJpY2std2FsbC5qcGcnKTtcbiAgICBsZXQgc2tpbm55VGV4dHVyZSA9IHRleHR1cmVMb2FkZXIubG9hZCgndGV4dHVyZXMvYnJpY2std2FsbC5qcGcnKTtcbiAgICBsZXQgc2lkZVRleHR1cmUgPSB0ZXh0dXJlTG9hZGVyLmxvYWQoJ3RleHR1cmVzL2JyaWNrLXdhbGwuanBnJyk7XG4gICAgbGV0IGJhc2VDb2xvciA9IDB4NTU1NTU1O1xuXG4gICAgbG9uZ1RleHR1cmUud3JhcFMgPSBsb25nVGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIGxvbmdUZXh0dXJlLnJlcGVhdC5zZXQoMywgMSk7XG5cbiAgICBza2lubnlUZXh0dXJlLndyYXBTID0gc2tpbm55VGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIHNraW5ueVRleHR1cmUucmVwZWF0LnNldCgxLCAzKTtcblxuICAgIHNpZGVUZXh0dXJlLndyYXBTID0gc2lkZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICBzaWRlVGV4dHVyZS5yZXBlYXQuc2V0KDEsIDEpO1xuXG4gICAgbGV0IHNraW5ueU1hdCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IDB4MzMzMzMzLCBzcGVjdWxhcjogMHgzMzMzMzMsIHNoaW5pbmVzczogMTUsIG5vcm1hbE1hcDogdGV4dHVyZUxvYWRlci5sb2FkKCd0ZXh0dXJlcy9yb2NrLW5vcm1hbC1tYXAuanBnJyksIG5vcm1hbFNjYWxlOiBuZXcgVEhSRUUuVmVjdG9yMiggMC4wNSwgMSApLCBtYXA6IHNraW5ueVRleHR1cmUgfSk7XG5cblxuICAgIGxldCBsb25nTWF0ID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogYmFzZUNvbG9yLCBzcGVjdWxhcjogMHgzMzMzMzMsIHNoaW5pbmVzczogMTUsIG5vcm1hbE1hcDogbm9ybWFsTWFwLCBub3JtYWxTY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoIDEsIDEgKSwgbWFwOiBsb25nVGV4dHVyZSB9KTtcblxuICAgIGxldCBzaWRlTWF0ID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogYmFzZUNvbG9yLCBzcGVjdWxhcjogMHgzMzMzMzMsIHNoaW5pbmVzczogMTUsIG5vcm1hbE1hcDogbm9ybWFsTWFwLCBub3JtYWxTY2FsZTogbmV3IFRIUkVFLlZlY3RvcjIoIDEsIDEgKSwgbWFwOiBzaWRlVGV4dHVyZSB9KTtcblxuICAgIGxldCBzaGFwZU1hdGVyaWFscyA9IFtcbiAgICAgIGxvbmdNYXQsIC8vIFJpZ2h0XG4gICAgICBsb25nTWF0LCAvLyBMZWZ0XG4gICAgICBza2lubnlNYXQsIC8vIFRvcFxuICAgICAgc2lkZU1hdCwgLy8gQmFja1xuICAgICAgc2lkZU1hdCwgLy8gRnJvbnRcbiAgICAgIHNraW5ueU1hdCwgLy8gQm90dG9tXG5cbiAgICBdXG5cbiAgICBsZXQgc2hhcGVNZXNoID0gbmV3IFRIUkVFLk1lc2goc2hhcGVHZW9tZXRyeSwgbmV3IFRIUkVFLk11bHRpTWF0ZXJpYWwoc2hhcGVNYXRlcmlhbHMpKTtcblxuXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KFxuICAgICAgdGhpcy5iYXNlRGVwdGggKyB0aGlzLmhpdEJveEJ1ZmZlcixcbiAgICAgIHRoaXMuYmFzZUhlaWdodCArIHRoaXMuaGl0Qm94QnVmZmVyLFxuICAgICAgdGhpcy5iYXNlV2lkdGggKyB0aGlzLmhpdEJveEJ1ZmZlciBcbiAgICApO1xuXG4gICAgbGV0IGhpdE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmYsIHRyYW5zcGFyZW50OiB0cnVlLCBvcGFjaXR5OiBoaXRCb3hPcGFjaXR5LCBkZXB0aFdyaXRlOiBmYWxzZSB9KTtcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XG5cbiAgICB0aGlzLmhlYWx0aEJhciA9IHRoaXMuaW5pdGlhbGl6ZUhlYWx0aEJhcigpO1xuICAgIHRoaXMuaGl0Qm94ID0gaGl0TWVzaDtcblxuICAgIHRoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcbiAgICB0aGlzLnZpZXdPYmouYWRkKGhpdE1lc2gpO1xuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xuXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSAoKC1ncmlkV2lkdGgvMikgLSAodGhpcy5iYXNlRGVwdGggLyAyKSkgKiB0aGlzLmRpcmVjdGlvbjtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodC8yO1xuXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEub2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5pbW11bmVUb1JhbmdlID0gdHJ1ZTtcbiAgfVxuXG4gIGluaXRpYWxpemVIZWFsdGhCYXIoKSB7XG4gICAgdGhpcy5faGVhbHRoQmFyTGVuZ3RoID0gZ3JpZFdpZHRoIC8gMTA7XG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSBncmlkV2lkdGggLyAxNTA7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGgsIHRoaXMuX2hlYWx0aEJhcldpZHRoLCB0aGlzLl9oZWFsdGhCYXJXaWR0aCk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcblxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhckxlbmd0aCAqIDAuOTksIHRoaXMuX2hlYWx0aEJhcldpZHRoICogMC45LCB0aGlzLl9oZWFsdGhCYXJXaWR0aCAqIDAuOSk7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcblxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XG5cbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gdGhpcy5iYXNlSGVpZ2h0ICsgNTtcblxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcbiAgfVxuXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcbiAgICBsZXQgaGVhbHRoUGVyY2VudCA9IHRoaXMuaGVhbHRoL3RoaXMubWF4SGVhbHRoO1xuICAgIGxldCBoZWFsdGhCYXJPZmZzZXQgPSAtKDEtaGVhbHRoUGVyY2VudCkgKiB0aGlzLl9oZWFsdGhCYXJMZW5ndGggLyAyO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyID0gdGhpcy5oZWFsdGhCYXIuZ2V0T2JqZWN0QnlOYW1lKCdGdWxsSGVhbHRoQmFyJyk7XG5cbiAgICBmdWxsSGVhbHRoQmFyLnNjYWxlLnggPSBoZWFsdGhQZXJjZW50O1xuICAgIGZ1bGxIZWFsdGhCYXIucG9zaXRpb24ueCA9IGhlYWx0aEJhck9mZnNldDtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcbiAgfVxuXG4gIHJ1bkxvb3AoKSB7XG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSAxMjg7XG5leHBvcnQgY29uc3QgZ3JpZEhlaWdodCA9IDE2O1xuZXhwb3J0IGNvbnN0IGdyaWRTdWJEaXYgPSAxNjtcblxubGV0IG1pbmlvbiA9IHtcblx0YmFzZUhlYWx0aDogMTAsXG5cdGJhc2VBdHRhY2s6IDMsXG5cdGJhc2VBdHRhY2tTcGVlZDogMTAwMCxcblx0dXBncmFkZXM6IHtcblx0XHRoZWFsdGg6IHtcblx0XHRcdGNvc3Q6IDUwLFxuXHRcdFx0YW1vdW50OiA1XG5cdFx0fSxcblx0XHRhdHRhY2s6IHtcblx0XHRcdGNvc3Q6IDc1LFxuXHRcdFx0YW1vdW50OiAyXG5cdFx0fSxcblx0XHRhdHRhY2tTcGVlZDoge1xuXHRcdFx0Y29zdDogMTAwLFxuXHRcdFx0YW1vdW50OiAyNVxuXHRcdH1cblx0fVxufTtcblxubGV0IGJhc2UgPSB7XG5cdGJhc2VIZWFsdGg6IDI1MCxcblx0dXBncmFkZXM6IHtcblx0XHRoZWFsdGg6IHtcblx0XHRcdGNvc3Q6IDE1MCxcblx0XHRcdGFtb3VudDogMjUwLFxuXHRcdH1cblx0fVxufTtcblxubGV0IGFyY2hlciA9IHtcblx0YmFzZUF0dGFjazogNSxcblx0YmFzZUF0dGFja1NwZWVkOiAxMDAwLFxuXHRiYXNlQXJyb3dTcGVlZDogMTAwMCxcblx0dXBncmFkZXM6IHtcblx0XHRhdHRhY2s6IHtcblx0XHRcdGNvc3Q6IDUwLFxuXHRcdFx0YW1vdW50OiA0LFxuXHRcdH0sXG5cdFx0YXR0YWNrU3BlZWQ6IHtcblx0XHRcdGNvc3Q6IDEwMCxcblx0XHRcdGFtb3VudDogNTAsXG5cdFx0fVxuXHR9XG59XG5cbmxldCBwbGF5ZXIgPSB7XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHttaW5pb24sIGJhc2UsIGFyY2hlciwgcGxheWVyfTtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IEFJIGZyb20gJy4vYWktcGxheWVyJztcbmltcG9ydCB7IGFjdGl2YXRlTWVudSB9IGZyb20gJy4vbWVudS1zY3JlZW4nO1xuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMuY2FtZXJhID0gYXJncy5jYW1lcmE7XG5cbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtID0gbmV3IFRIUkVFeC5Db2xsaWRlclN5c3RlbSgpO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gW107XG5cbiAgICB0aGlzLnBsYXllcklkID0gMDtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemVQbGF5ZXJzKCkge1xuICAgIHRoaXMubXlQbGF5ZXIgPSBuZXcgUGxheWVyKHtcbiAgICAgIHR5cGU6ICdodW1hbicsXG4gICAgICBkaXJlY3Rpb246IHhQb3NpdGl2ZSxcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXG4gICAgICBjb2xsaWRlclN5c3RlbTogdGhpcy5jb2xsaWRlclN5c3RlbSxcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XG4gICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgY29sbGlkZXJTeXN0ZW06IHRoaXMuY29sbGlkZXJTeXN0ZW0sXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgIGlkOiB0aGlzLnBsYXllcklkKytcbiAgICB9KTtcblxuICAgIHRoaXMuQUkgPSBuZXcgQUkoe1xuICAgICAgcGxheWVyOiB0aGlzLmNvbXB1dGVyLFxuICAgICAgcGVyc29uYWxpdHk6IFwicmFuZG9tQUlcIlxuICAgIH0pO1xuXG4gICAgdGhpcy5wbGF5ZXJBSSA9IG5ldyBBSSh7XG4gICAgICBwbGF5ZXI6IHRoaXMubXlQbGF5ZXIsXG4gICAgICBwZXJzb25hbGl0eTogXCJyYW5kb21BSVwiXG4gICAgfSk7XG5cblxuICAgIHRoaXMuc3RhdGUucGxheWVycyA9IFsgdGhpcy5teVBsYXllciwgdGhpcy5jb21wdXRlciBdO1xuICB9XG5cbiAgaW5pdGlhbGl6ZUdhbWVPdmVyKHsgd2lubmVyLCBzY29yZSB9KSB7XG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocCA9PiBwLnNldEdhbWVPdmVyKCkpO1xuICAgIGFjdGl2YXRlTWVudSh7XG4gICAgICB3aW5uZXI6IHdpbm5lcixcbiAgICAgIHNjb3JlOiBzY29yZVxuICAgIH0pXG4gIH1cblxuICByZXN0YXJ0KGRpZmZpY3VsdHk9MSwgY29tcHV0ZXJzPTEpIHtcbiAgICB3aGlsZSh0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmNvbGxpZGVyTGlzdC5wb3AoKTtcbiAgICB9XG4gICAgaWYoY29tcHV0ZXJzID09PSAwKSB7XG4gICAgICB0aGlzLkFJID0gbnVsbDtcbiAgICAgIHRoaXMucGxheWVyQUkgPSBudWxsO1xuICAgIH0gZWxzZSBpZihjb21wdXRlcnMgPT09IDEpIHtcbiAgICAgIHRoaXMuQUkgPSBuZXcgQUkoe1xuICAgICAgICBwbGF5ZXI6IHRoaXMuY29tcHV0ZXIsXG4gICAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5wbGF5ZXJBSSA9IG51bGw7XG4gICAgfSBlbHNlIGlmKGNvbXB1dGVycyA9PT0gMikge1xuICAgICAgdGhpcy5BSSA9IG5ldyBBSSh7XG4gICAgICAgIHBsYXllcjogdGhpcy5jb21wdXRlcixcbiAgICAgICAgcGVyc29uYWxpdHk6IFwicmFuZG9tQUlcIlxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMucGxheWVyQUkgPSBuZXcgQUkoe1xuICAgICAgICBwbGF5ZXI6IHRoaXMubXlQbGF5ZXIsXG4gICAgICAgIHBlcnNvbmFsaXR5OiBcInJhbmRvbUFJXCJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmKHRoaXMuQUkpIHtcbiAgICAgIHRoaXMuQUkuc2V0RGlmZmljdWx0eShkaWZmaWN1bHR5KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllckFJKSB7XG4gICAgICB0aGlzLnBsYXllckFJLnNldERpZmZpY3VsdHkoZGlmZmljdWx0eSk7XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcbiAgICAgIHBsYXllci5yZXNldCgpO1xuICAgIH0pO1xuICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcbiAgfVxuXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xuICAgIGlmKHRoaXMuZ2FtZU92ZXIpIHtcblxuICAgIH1cbiAgICBpZih0aGlzLkFJKSB7XG4gICAgICB0aGlzLkFJLnJ1bkxvb3AodGltZXN0YW1wLCB0aGlzLm15UGxheWVyLm1pbmlvbnMpO1xuICAgIH1cblxuICAgIGlmKHRoaXMucGxheWVyQUkpIHtcbiAgICAgIHRoaXMucGxheWVyQUkucnVuTG9vcCh0aW1lc3RhbXAsIHRoaXMuY29tcHV0ZXIubWluaW9ucyk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7XG4gICAgICBwbGF5ZXIucnVuTG9vcCh0aW1lc3RhbXApO1xuICAgICAgaWYocGxheWVyLmxvc3QgJiYgIXRoaXMuZ2FtZU92ZXIpIHtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIGxldCB3aW5uZXIgPSB0aGlzLnN0YXRlLnBsYXllcnMuZmluZChwID0+IHAuaWQgIT09IHBsYXllci5pZCk7XG4gICAgICAgIGxldCBzY29yZSA9IHdpbm5lci5zY29yZTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplR2FtZU92ZXIoeyB3aW5uZXIsIHNjb3JlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0uY29tcHV0ZUFuZE5vdGlmeSh0aGlzLmNvbGxpZGVyTGlzdCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGdyaWRXaWR0aCxcbiAgICAgICAgIGdyaWRIZWlnaHQsXG4gICAgICAgICBncmlkU3ViRGl2LFxuICAgICAgICAgbWluaW9uQmFzZUhlYWx0aCxcbiAgICAgICAgIG1pbmlvbkJhc2VBdHRhY2ssXG4gICAgICAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWQsXG4gICAgICAgICBhcmNoZXJCYXNlQXR0YWNrLFxuICAgICAgICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkLFxuICAgICAgICAgYmFzZUhlYWx0aFVwZ3JhZGVBbW91bnRcbiAgICAgICB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBiaW5kQnV0dG9ucyB9IGZyb20gJy4vbWVudS1zY3JlZW4nO1xuXG4vLyBVSSBFbGVtZW50c1xubGV0IHNjb3JlVGV4dCwgbW9uZXlUZXh0LCBwb3BwdWxhdGlvblRleHQsIGJhc2VIZWFsdGhUZXh0LCBtaW5pb25CYXNlSGVhbHRoVGV4dCAsbWluaW9uQmFzZUF0dGFja1RleHQgLG1pbmlvbkJhc2VBdHRhY2tTcGVlZFRleHQgLGFyY2hlckJhc2VBdHRhY2tUZXh0ICxhcmNoZXJCYXNlQXR0YWNrU3BlZWRUZXh0O1xubGV0IGJhc2VIZWFsdGhVcGdyYWRlLCBtaW5pb25CYXNlSGVhbHRoVXBncmFkZSAsbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUgLG1pbmlvbkJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUgLGFyY2hlckJhc2VBdHRhY2tVcGdyYWRlICxhcmNoZXJCYXNlQXR0YWNrU3BlZWRVcGdyYWRlO1xuXG5cbi8vIFRleHR1cmVcbmNvbnN0IHBsYW5lVGV4dHVyZSA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCkubG9hZChcInRleHR1cmVzL3N0b25lLmpwZ1wiKTtcbnBsYW5lVGV4dHVyZS5yZXBlYXQuc2V0KDEwLDEwKTtcbnBsYW5lVGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xucGxhbmVUZXh0dXJlLndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVZpZXcge1xuICBjb25zdHJ1Y3RvcihnbG9iYWxzLCBnYW1lRW5naW5lKSB7XG4gICAgdGhpcy5zY2VuZSA9IGdsb2JhbHMuc2NlbmU7XG4gICAgdGhpcy5jYW1lcmEgPSBnbG9iYWxzLmNhbWVyYTtcbiAgICB0aGlzLnJlbmRlcmVyID0gZ2xvYmFscy5yZW5kZXJlcjtcblxuICAgIHRoaXMuZ2FtZUVuZ2luZSA9IGdhbWVFbmdpbmU7XG5cbiAgICB0aGlzLnNldHVwR3JpZCgpO1xuICAgIHRoaXMuc2V0dXBHcmFzc0ZpZWxkKCk7XG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XG5cbiAgICB0aGlzLm1vdXNlID0geyB4OiAtMTAwMDAsIHk6IDAgfTtcblxuICAgIGxldCBwb3NpdGlvblNjYWxlID0gZ3JpZFdpZHRoIC8gMjtcblxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSAyICogcG9zaXRpb25TY2FsZTtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gMS41ICogcG9zaXRpb25TY2FsZTtcbiAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5zY2VuZS5wb3NpdGlvbik7XG5cbiAgICB0aGlzLmh1ZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdodWQnKTtcbiAgICB0aGlzLmh1ZFVwZ3JhZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHVkLXVwZ3JhZGUnKTtcbiAgICB0aGlzLmxhc3RUaW1lU3RhbXAgPSAwO1xuICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKCk7XG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcblxuICAgIHRoaXMuc2V0dXBNb3VzZUV2ZW50KCk7XG4gICAgYmluZEJ1dHRvbnModGhpcywgdGhpcy5nYW1lRW5naW5lKTtcbiAgfVxuXG4gIHNldHVwTGlnaHQoKSB7XG4gICAgbGV0IGxpZ2h0QW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg2NjY2NjYsIDMpO1xuICAgIGxldCBsaWdodFNvdXJjZSA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ODg4ODg4LCAxKTtcblxuICAgIGxpZ2h0U291cmNlLnBvc2l0aW9uLnNldCgwLCAzMCwgMCk7XG4gICAgbGlnaHRBbWJpZW50LnBvc2l0aW9uLnNldCgwLCAzMCwgMCk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodEFtYmllbnQpO1xuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0U291cmNlKTtcbiAgfVxuXG4gIHNldHVwR3JpZCgpIHtcbiAgICAgLy9sZXQgdGV4dHVyZWRTdXJmYWNlR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIGdyaWRXaWR0aCk7XG4gICAgIC8vbGV0IHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHttYXA6IHBsYW5lVGV4dHVyZX0pO1xuICAgICAvL2xldCB0ZXh0dXJlZFN1cmZhY2UgPSBuZXcgVEhSRUUuTWVzaCh0ZXh0dXJlZFN1cmZhY2VHZW9tZXRyeSwgdGV4dHVyZWRTdXJmYWNlTWF0ZXJpYWwpO1xuICAgICAvL3RleHR1cmVkU3VyZmFjZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgIC8vdGV4dHVyZWRTdXJmYWNlLnBvc2l0aW9uLnkgPSAtMC4zO1xuICAgICAvL3RoaXMuc2NlbmUuYWRkKHRleHR1cmVkU3VyZmFjZSk7XG5cbiAgICBsZXQgZ3JpZCA9IG5ldyBUSFJFRS5HcmlkSGVscGVyKGdyaWRXaWR0aCwgZ3JpZEhlaWdodCk7XG4gICAgZ3JpZC5wb3NpdGlvbi55ID0gLS40XG4gICAgdGhpcy5zY2VuZS5hZGQoZ3JpZCk7XG5cbiAgICB0aGlzLmdyaWRQYW5lbHMgPSB7fTtcblxuICAgIGxldCBwYW5lbExlbmd0aCA9IGdyaWRXaWR0aC9ncmlkSGVpZ2h0O1xuICAgIGxldCB6UG9zID0gKChncmlkV2lkdGggLyAyKSAtIHBhbmVsTGVuZ3RoIC8gMikgKiAtMTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkSGVpZ2h0OyBpKyspIHtcbiAgICAgIGxldCBwbGFuZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZ3JpZFdpZHRoLCBwYW5lbExlbmd0aCk7XG4gICAgICBsZXQgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7dHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDB9KTtcbiAgICAgIGxldCBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnksIHBsYW5lTWF0ZXJpYWwpO1xuICAgICAgcGxhbmUucm90YXRpb24ueCA9IC0wLjUgKiBNYXRoLlBJO1xuICAgICAgcGxhbmUucG9zaXRpb24ueiA9IHpQb3M7XG4gICAgICBwbGFuZS5wb3NpdGlvbi55ID0gMDtcbiAgICAgIHRoaXMuc2NlbmUuYWRkKHBsYW5lKTtcbiAgICAgIHRoaXMuZ3JpZFBhbmVsc1tpXSA9IHBsYW5lO1xuXG4gICAgICB6UG9zICs9IHBhbmVsTGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHNldHVwR3Jhc3NGaWVsZCgpIHtcbiAgICBsZXQgdGV4dHVyZVVybCAgPSAndGV4dHVyZXMvZ3Jhc3NsaWdodC1zbWFsbC5qcGcnXG4gICAgbGV0IHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQodGV4dHVyZVVybCk7XG4gICAgdGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xuICAgIHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcbiAgICB0ZXh0dXJlLnJlcGVhdC55PSBncmlkU3ViRGl2O1xuICAgIHRleHR1cmUucmVwZWF0Lng9IGdyaWRTdWJEaXY7XG4gICAgdGV4dHVyZS5hbmlzb3Ryb3B5ID0gdGhpcy5yZW5kZXJlci5nZXRNYXhBbmlzb3Ryb3B5KClcbiAgICAvLyBidWlsZCBvYmplY3QzZFxuICAgIGxldCBnZW9tZXRyeSAgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGggKiAxMCwgZ3JpZFdpZHRoICogMTApXG4gICAgbGV0IG1hdGVyaWFsICA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7XG4gICAgICBtYXAgOiB0ZXh0dXJlLFxuICAgICAgc2hpbmluZXNzOiAxMFxuICAgIH0pXG4gICAgbGV0IHBsYW5lICA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcbiAgICBwbGFuZS5yb3RhdGVYKC1NYXRoLlBJLzIpO1xuICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4yO1xuICAgIHRoaXMuc2NlbmUuYWRkKHBsYW5lKTtcblxuICAgICAvLyBsZXQgblR1ZnRzICA9IDIwMDA7XG4gICAgIC8vIGxldCBwb3NpdGlvbnMgPSBuZXcgQXJyYXkoblR1ZnRzKTtcbiAgICAgLy8gZm9yKGxldCBpID0gMDsgaSA8IG5UdWZ0czsgaSsrKXtcbiAgICAgLy8gICBsZXQgcG9zaXRpb24gID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgLy8gICBwb3NpdGlvbi54ICA9IChNYXRoLnJhbmRvbSgpLTAuNSkqZ3JpZFdpZHRoO1xuICAgICAvLyAgIHBvc2l0aW9uLnogID0gKE1hdGgucmFuZG9tKCktMC41KSpncmlkV2lkdGg7XG4gICAgIC8vICAgcG9zaXRpb25zW2ldICA9IHBvc2l0aW9uO1xuICAgICAvLyB9XG4gICAgIC8vIGxldCBtZXNoICA9IFRIUkVFeC5jcmVhdGVHcmFzc1R1ZnRzKHBvc2l0aW9ucyk7XG4gICAgIC8vIHRoaXMuc2NlbmUuYWRkKG1lc2gpO1xuICB9XG5cbiAgY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpIHtcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuICAgIGxldCBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhwbGFuZXMpO1xuXG4gICAgcGxhbmVzLmZvckVhY2goKHBhbmVsKSA9PiB7XG4gICAgICBwYW5lbC5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHg2NjY2NjYpO1xuICAgICAgcGFuZWwubWF0ZXJpYWwub3BhY2l0eSA9IDA7XG4gICAgfSk7XG5cbiAgICBpZihpbnRlcnNlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBvYmogPSBpbnRlcnNlY3RzWzBdLm9iamVjdDtcblxuICAgICAgb2JqLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweGZmMDAwMCk7XG4gICAgICBvYmoubWF0ZXJpYWwub3BhY2l0eSA9IC41O1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gb2JqO1xuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBnZXRDdXJyZW50UGFuZWxJbmRleCgpIHtcbiAgICBpZighdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IHBsYW5lcyA9IE9iamVjdC52YWx1ZXModGhpcy5ncmlkUGFuZWxzKTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHtcbiAgICAgIGlmKHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9PT0gcGxhbmVzW2ldKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgc2V0dXBNb3VzZUV2ZW50KCkge1xuICAgIGxldCBtb3VzZSA9IHRoaXMubW91c2U7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcbiAgICAgIG1vdXNlLnggPSAoIGV2ZW50LmNsaWVudFggLyB3aW5kb3cuaW5uZXJXaWR0aCApICogMiAtIDE7XG4gICAgICBtb3VzZS55ID0gLSAoIGV2ZW50LmNsaWVudFkgLyB3aW5kb3cuaW5uZXJIZWlnaHQgKSAqIDIgKyAxO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhcnRGaXJzdEdhbWUoKSB7XG4gICAgdGhpcy5nYW1lRW5naW5lLnJlc3RhcnQoKTtcbiAgICB0aGlzLmdhbWVFbmdpbmUucGxheWVyQUkgPSBudWxsO1xuXG4gICAgdGhpcy5odWQuY2xhc3NMaXN0LnJlbW92ZSgnaHVkLS1oaWRkZW4nKTtcbiAgICB0aGlzLmh1ZFVwZ3JhZGUuY2xhc3NMaXN0LnJlbW92ZSgnaHVkLS1oaWRkZW4nKTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVVwZ3JhZGVCdXR0b25zKCk7XG4gICAgdGhpcy5pbml0aWFsaXplSHVkVGV4dHMoKTtcblxuICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBsZXQgaW5kZXggPSB0aGlzLmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XG4gICAgICBpZihpbmRleCA+PSAwKSB7XG4gICAgICAgIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5zcGF3bk1pbmlvbihpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoKSA9PiB7XG4gICAgICBsZXQgaW5kZXggPSB0aGlzLmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XG4gICAgICBpZihpbmRleCA+PSAwKSB7XG4gICAgICAgIHRoaXMuZ2FtZUVuZ2luZS5jb21wdXRlci5zcGF3bk1pbmlvbihpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjYWxjdWxhdGVGUFModGltZXN0YW1wKSB7XG4gICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5sYXN0VGltZVN0YW1wO1xuICAgIGRlbHRhID0gZGVsdGEgLyAxMDAwO1xuICAgIHRoaXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgxIC8gZGVsdGEpO1xuICB9XG5cbiAgdXBkYXRlVUkodGltZXN0YW1wKSB7XG4gICAgc2NvcmVUZXh0LnRleHRDb250ZW50ID0gdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnNjb3JlO1xuICAgIG1vbmV5VGV4dC50ZXh0Q29udGVudCA9IHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5tb25leTtcbiAgICBwb3BwdWxhdGlvblRleHQudGV4dENvbnRlbnQgPSB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIubWluaW9ucy5sZW5ndGggKyBcIi9cIiArIHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci5wb3BwdWxhdGlvbkNhcDtcbiAgICBcbiAgICBpZih0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIuYmFzZSAhPT0gbnVsbCkge1xuICAgICAgYmFzZUhlYWx0aFRleHQudGV4dENvbnRlbnQgPSBNYXRoLm1heCh0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIuYmFzZS5oZWFsdGgsIDApLnRvRml4ZWQoMikgKyBcIiAvIFwiICsgdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLmJhc2UubWF4SGVhbHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlSGVhbHRoVGV4dC50ZXh0Q29udGVudCA9IFwiMFwiO1xuICAgIH1cbiAgICBcbiAgICBtaW5pb25CYXNlSGVhbHRoVGV4dC50ZXh0Q29udGVudCA9IENvbnN0YW50cy5taW5pb24uYmFzZUhlYWx0aCArIChDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmhlYWx0aC5hbW91bnQgKiB0aGlzLmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZXMubWluaW9uQmFzZUhlYWx0aCk7XG4gICAgbWluaW9uQmFzZUF0dGFja1RleHQudGV4dENvbnRlbnQgPSBDb25zdGFudHMubWluaW9uLmJhc2VBdHRhY2sgKyAoQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2suYW1vdW50ICogdGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2spO1xuICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZFRleHQudGV4dENvbnRlbnQgPSAoKENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFja1NwZWVkICsgKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQgKiAtQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2tTcGVlZC5hbW91bnQpKSAvIDEwMDApLnRvRml4ZWQoMikgKyAncyc7XG4gICAgXG4gICAgYXJjaGVyQmFzZUF0dGFja1RleHQudGV4dENvbnRlbnQgPSBDb25zdGFudHMuYXJjaGVyLmJhc2VBdHRhY2sgKyAodGhpcy5nYW1lRW5naW5lLm15UGxheWVyLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2sgKiBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQpO1xuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFRleHQudGV4dENvbnRlbnQgPSAoKENvbnN0YW50cy5hcmNoZXIuYmFzZUF0dGFja1NwZWVkIC0gKHRoaXMuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrU3BlZWQgKiBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFja1NwZWVkLmFtb3VudCkpIC8gMTAwMCkudG9GaXhlZCgyKSArIFwic1wiO1xuICB9ICAgICBcblxuICByZW5kZXJMb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xuICAgIHRoaXMuZ2FtZUVuZ2luZS5nYW1lTG9vcCh0aW1lc3RhbXApO1xuXG4gICAgaWYodGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnVwZGF0ZVVJKHRpbWVzdGFtcCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdGlhbGl6ZUh1ZFRleHRzKCkge1xuICAgIHNjb3JlVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY29yZScpO1xuICAgIG1vbmV5VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb25leScpO1xuICAgIHBvcHB1bGF0aW9uVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3BwdWxhdGlvbicpO1xuICAgIGJhc2VIZWFsdGhUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhc2VIZWFsdGgnKTtcbiAgICBtaW5pb25CYXNlSGVhbHRoVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pb25CYXNlSGVhbHRoJyk7XG4gICAgbWluaW9uQmFzZUF0dGFja1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFjaycpO1xuICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFja1NwZWVkJyk7XG4gICAgYXJjaGVyQmFzZUF0dGFja1RleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGVyQmFzZUF0dGFjaycpO1xuICAgIGFyY2hlckJhc2VBdHRhY2tTcGVlZFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGVyQmFzZUF0dGFja1NwZWVkJyk7XG4gIH1cblxuICBpbml0aWFsaXplVXBncmFkZUJ1dHRvbnMoKSB7XG4gICAgbGV0IGdhbWVWaWV3ID0gdGhpcztcbiAgICBcbiAgICBiYXNlSGVhbHRoVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFzZUhlYWx0aFVwZ3JhZGUnKTtcbiAgICBiYXNlSGVhbHRoVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlQmFzZUhlYWx0aCgpO1xuICAgIH0pO1xuXG4gICAgbWluaW9uQmFzZUhlYWx0aFVwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmlvbkJhc2VIZWFsdGhVcGdyYWRlJyk7XG4gICAgbWluaW9uQmFzZUhlYWx0aFVwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZU1pbmlvbkhlYWx0aCgpO1xuICAgIH0pO1xuXG4gICAgbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmlvbkJhc2VBdHRhY2tVcGdyYWRlJyk7XG4gICAgbWluaW9uQmFzZUF0dGFja1VwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZU1pbmlvbkF0dGFjaygpO1xuICAgIH0pO1xuXG4gICAgbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaW9uQmFzZUF0dGFja1NwZWVkVXBncmFkZScpO1xuICAgIG1pbmlvbkJhc2VBdHRhY2tTcGVlZFVwZ3JhZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGdhbWVWaWV3LmdhbWVFbmdpbmUubXlQbGF5ZXIudXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCk7XG4gICAgfSk7XG5cbiAgICBhcmNoZXJCYXNlQXR0YWNrVXBncmFkZSA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGVyQmFzZUF0dGFja1VwZ3JhZGUnKTtcbiAgICBhcmNoZXJCYXNlQXR0YWNrVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlV2l6YXJkQXR0YWNrKCk7XG4gICAgfSk7XG5cbiAgICBhcmNoZXJCYXNlQXR0YWNrU3BlZWRVcGdyYWRlID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoZXJCYXNlQXR0YWNrU3BlZWRVcGdyYWRlJyk7XG4gICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkVXBncmFkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgZ2FtZVZpZXcuZ2FtZUVuZ2luZS5teVBsYXllci51cGdyYWRlV2l6YXJkQXR0YWNrU3BlZWQoKTtcbiAgICB9KTtcbiAgfVxufSBcbiIsImxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpO1xubGV0IHN0YXJ0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydE1vZGFsJyk7XG5sZXQgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRCdXR0b24nKTtcbmxldCByZXN0YXJ0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXJ0TW9kYWwnKTtcbmxldCByZXN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhcnRCdXR0b24nKTtcbmxldCBkZW1vQnV0dG9uMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZW1vQnV0dG9uMScpO1xubGV0IGRlbW9CdXR0b24yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbW9CdXR0b24yJyk7XG5sZXQgaGFyZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoYXJkQnV0dG9uJyk7XG5sZXQgcmVzdGFydE1vZGFsTWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXJ0TW9kYWxNZXNzYWdlJyk7XG5cbmZ1bmN0aW9uIGFjdGl2YXRlU3RhcnRTY3JlZW4oKSB7XG4gIHN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tdmlzaWJsZScpO1xuICByZXN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZVJlc3RhcnRTY3JlZW4od2lubmVyLCBzY29yZSkge1xuXG4gIGxldCB0ZXh0ID0gYFBsYXllciAke3dpbm5lci5pZCArIDF9IHdpbnMgd2l0aCBhIHNjb3JlIG9mICR7c2NvcmV9IWA7XG4gIHJlc3RhcnRNb2RhbE1lc3NhZ2UudGV4dENvbnRlbnQgPSB0ZXh0O1xuXG4gIHN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xuICByZXN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tdmlzaWJsZScpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGVNZW51KGFyZ3MpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcblxuICBpZihhcmdzLndpbm5lciAhPT0gbnVsbCkge1xuICAgIGFjdGl2YXRlUmVzdGFydFNjcmVlbihhcmdzLndpbm5lciwgYXJncy5zY29yZSk7XG4gIH0gZWxzZSB7XG4gICAgYWN0aXZhdGVTdGFydFNjcmVlbigpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU1lbnUoYXJncykge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZEJ1dHRvbnMoZ2FtZVZpZXcsIGdhbWVFbmdpbmUpIHtcbiAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZ2FtZVZpZXcuc3RhcnRGaXJzdEdhbWUoKTtcbiAgICBjbG9zZU1lbnUoKTtcbiAgfSk7XG5cbiAgcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBnYW1lRW5naW5lLnJlc3RhcnQoKTtcbiAgICBjbG9zZU1lbnUoKTtcbiAgfSk7XG5cbiAgZGVtb0J1dHRvbjEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZ2FtZVZpZXcuc3RhcnRGaXJzdEdhbWUoKTtcbiAgICBnYW1lRW5naW5lLnJlc3RhcnQoMSwgMCk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xuXG4gIGRlbW9CdXR0b24yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGdhbWVFbmdpbmUucmVzdGFydCgxLCAwKTtcbiAgICBjbG9zZU1lbnUoKTtcbiAgfSk7XG5cbiAgaGFyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBnYW1lRW5naW5lLnJlc3RhcnQoMiwgMSk7XG4gICAgY2xvc2VNZW51KCk7XG4gIH0pO1xuXG59XG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJy4vY29uc3RhbnRzJzsgXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pbmlvbiB7XG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5pZCA9IGFyZ3MuaWQ7XG4gICAgdGhpcy5wbGF5ZXJJZCA9IGFyZ3MucGxheWVySWQ7XG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcbiAgICB0aGlzLnN0YXJ0aW5nWiA9IGFyZ3Muc3RhcnRpbmdaO1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuXG4gICAgdGhpcy5tYXhIZWFsdGggPSBDb25zdGFudHMubWluaW9uLmJhc2VIZWFsdGggKyAoYXJncy5oZWFsdGhVcGdyYWRlICogQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5oZWFsdGguYW1vdW50KTtcbiAgICB0aGlzLmF0dGFja1N0cmVuZ3RoID0gQ29uc3RhbnRzLm1pbmlvbi5iYXNlQXR0YWNrICsgKGFyZ3MuYXR0YWNrVXBncmFkZSAqIENvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrLmFtb3VudCk7XG4gICAgdGhpcy5hdHRhY2tTcGVlZCA9IENvbnN0YW50cy5taW5pb24uYmFzZUF0dGFja1NwZWVkICsgKGFyZ3MuYXR0YWNrU3BlZWRVcGdyYWRlICogLUNvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50KTtcbiAgICB0aGlzLmRlZmF1bHRTcGVlZCA9IC4zO1xuXG4gICAgdGhpcy5oZWFsdGggPSB0aGlzLm1heEhlYWx0aDtcbiAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzID0ge1xuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcbiAgICAgIGF0dGFja1RpbWU6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzID0ge1xuICAgICAgZGlyZWN0aW9uOiAxLFxuICAgICAgc3BlZWQ6IHRoaXMuYXR0YWNrU3BlZWQgLyAyLFxuICAgIH07XG5cbiAgICB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzID0ge1xuICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbixcbiAgICAgIHNwZWVkOiA1MCAvIHRoaXMuZGVmYXVsdFNwZWVkLCAvLyBUaGlzIHNob3VsZCBub3QgY2hhbmdlIG9ubHkgY2hhbmdlIHRoZSBzcGVlZCBvZiB0aGUgbWluaW9uIGFuZCB0aGUgYW5pbWF0aW9uIHdpbGwgdXBkYXRlIGFjY29yZGluZ2x5XG4gICAgICBsYXN0VGltZVN0YW1wOiBudWxsLFxuICAgICAgdGltZTogMFxuICAgIH07XG5cbiAgICB0aGlzLmtpbGxSZXdhcmQgPSB7XG4gICAgICBtb25leTogNzUsXG4gICAgICBzY29yZTogMjVcbiAgICB9O1xuXG4gICAgdGhpcy5kZXN0cm95ID0gZmFsc2U7XG4gICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcblxuICAgIHRoaXMucm90T2JqZWN0TWF0cml4ID0gbnVsbDtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcodGhpcy5zdGFydGluZ1opO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KHN0YXJ0aW5nWiwgaGl0Qm94T3BhY2l0eT0wKSB7XG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMyw4LDMpO1xuICAgIGxldCBoaXRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZmZmLCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogaGl0Qm94T3BhY2l0eSB9KTtcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XG5cbiAgICB0aGlzLmhlYWx0aEJhciA9IHRoaXMuaW5pdGlhbGl6ZUhlYWx0aEJhcigpO1xuXG4gICAgaGl0TWVzaC5hZGQodGhpcy5oZWFsdGhCYXIpO1xuICAgIHRoaXMudmlld09iaiA9IGhpdE1lc2g7XG4gICAgdGhpcy5oaXRCb3ggPSB0aGlzLnZpZXdPYmo7XG5cbiAgICBsZXQgeiA9ICgoc3RhcnRpbmdaICogKGdyaWRXaWR0aCAvIGdyaWRTdWJEaXYpKSAtIChncmlkV2lkdGggLyAyKSkgKyAoZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdiAvIDIpO1xuICAgIGxldCB4ID0gKGdyaWRXaWR0aCAvIDIpICogLXRoaXMuZGlyZWN0aW9uO1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi56ID0gejtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCA9IHg7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnkgPSA0O1xuXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEub2JqZWN0ID0gdGhpcztcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5wbGF5ZXIgPSB0aGlzLnBsYXllcjtcbiAgICBoaXRHZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgaGl0TWF0ZXJpYWwuZGlzcG9zZSgpO1xuICB9XG5cbiAgZ2V0UG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmlld09iai5wb3NpdGlvbjtcbiAgfVxuXG4gIGluaXRpYWxpemVIZWFsdGhCYXIoKSB7XG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSAyO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMywgMC4zKTtcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmMDB9KTtcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XG4gICAgZnVsbEhlYWx0aEJhck1lc2gubmFtZSA9IFwiRnVsbEhlYWx0aEJhclwiO1xuXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMiwgMC4yKTtcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwfSk7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGVtcHR5SGVhbHRoQmFyR2VvbWV0cnksIGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xuXG4gICAgbGV0IGhlYWx0aEJhckdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZW1wdHlIZWFsdGhCYXJNZXNoKTtcblxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSA0O1xuXG4gICAgcmV0dXJuIGhlYWx0aEJhckdyb3VwO1xuICB9XG5cbiAgaXNPYmplY3RMb2FkZWQob2JqKSB7XG4gICAgcmV0dXJuIChvYmoucG9zaXRpb24ueCA9PT0gMCAmJiBvYmoucG9zaXRpb24ueSA9PT0gMCAmJiBvYmoucG9zaXRpb24ueiA9PT0gMCk7XG4gIH1cblxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTtcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xuXG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcblxuICAgIHRoaXMuY29sbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udGFjdEVudGVyJywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIGxldCB1c2VyRGF0YSA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGE7XG5cbiAgICAgIGlmKHVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cbiAgICAgIGlmKHVzZXJEYXRhLnJhbmdlZCkgeyByZXR1cm47IH1cblxuICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICB0aGlzLmF0dGFjayA9IHRydWU7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSB1c2VyRGF0YS5vYmplY3Q7XG4gICAgICB0aGlzLnJlc2V0V2Fsa0FuaW1hdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0U3RheScsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICBsZXQgdXNlckRhdGEgPSBvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhO1xuXG4gICAgICBpZih1c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZih1c2VyRGF0YS5yYW5nZWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgIGlmKHRoaXMuY3VycmVudFRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNwZWVkID0gMDtcbiAgICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xuICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSB1c2VyRGF0YS5vYmplY3Q7XG4gICAgICAgIHRoaXMucmVzZXRXYWxrQW5pbWF0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcbiAgICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RXhpdCcsIChvdGhlckNvbGxpZGVyKSA9PiB7XG4gICAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEF0dGFja1ZhbHVlKCkge1xuICAgIGxldCBjcml0UHJvYyA9IE1hdGgucmFuZG9tKCk7XG4gICAgcmV0dXJuIGNyaXRQcm9jID49IC45ID8gdGhpcy5hdHRhY2tTdHJlbmd0aCAqIChNYXRoLnJhbmRvbSgpICsgMSkgOiB0aGlzLmF0dGFja1N0cmVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhcldpZHRoIC8gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xuXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XG4gIH1cblxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCk7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggKz0gKHRoaXMuc3BlZWQgKiB0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy53YWxrUHJvY2VkdXJlKHRpbWVzdGFtcCk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XG4gIH1cblxuICBhdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy5oZWFsdGggPD0gMCkgeyByZXR1cm47IH1cblxuXG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgIT0gbnVsbCAmJiB0aGlzLmF0dGFjaykge1xuICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXA7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lICsgZGVsdGE7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgIHRoaXMuYXR0YWNrTG9vcChkZWx0YSk7XG4gICAgfSBlbHNlIGlmKHRoaXMuYXR0YWNrKSB7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgIHRoaXMuYXR0YWNrTG9vcCgwKTtcbiAgICB9XG5cbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgfVxuXG4gIGF0dGFja0xvb3AoZGVsdGEpIHtcbiAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQgPT09IG51bGwgfHwgdGhpcy5jdXJyZW50VGFyZ2V0LnBsYXllcklkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuICAgIHRoaXMuYW5pbWF0ZUF0dGFjayhkZWx0YSk7XG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPD0gdGhpcy5hdHRhY2tTcGVlZCkgeyByZXR1cm47IH1cblxuICAgIHRoaXMuY3VycmVudFRhcmdldC5oZWFsdGggLT0gdGhpcy5nZXRBdHRhY2tWYWx1ZSgpO1xuXG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0LmhlYWx0aCA8PSAwKSB7XG4gICAgICB0aGlzLnBsYXllci5wcm9jZXNzUmV3YXJkKHRoaXMuY3VycmVudFRhcmdldC5raWxsUmV3YXJkKTtcblxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0LmF0dGFjayA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0LmRlc3Ryb3kgPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSBudWxsO1xuICB9XG5cbiAgYW5pbWF0ZUF0dGFjayhkZWx0YSkge1xuICAgIGlmKHRoaXMudmlld09iai5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgcmlnaHRBcm0gPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV0uY2hpbGRyZW5bMV07XG4gICAgICBsZXQgY3VycmVudEF0dGFja1RpbWUgPSB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZTtcbiAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLmF0dGFja0FuaW1hdGlvblByb3BlcnRpZXMuZGlyZWN0aW9uO1xuICAgICAgbGV0IGFuaW1hdGlvblNwZWVkID0gdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLnNwZWVkO1xuICAgICAgbGV0IG1heFJvdGF0aW9uID0gMTM1O1xuXG4gICAgICBsZXQgcm90YXRpb24gPSBkaXJlY3Rpb24gKiAoKG1heFJvdGF0aW9uICogKE1hdGguUEkgLyAxODApKSAqIChkZWx0YSAvIGFuaW1hdGlvblNwZWVkKSk7XG4gICAgICByb3RhdGlvbiA9IE1hdGgubWluKHJpZ2h0QXJtLnJvdGF0aW9uLnogKyByb3RhdGlvbiwgbWF4Um90YXRpb24pO1xuICAgICAgcm90YXRpb24gPSBNYXRoLm1heChyb3RhdGlvbiwgMCk7XG5cbiAgICAgIHJpZ2h0QXJtLnJvdGF0aW9uLnogPSByb3RhdGlvbjtcbiAgICAgIGlmKGN1cnJlbnRBdHRhY2tUaW1lID4gYW5pbWF0aW9uU3BlZWQpIHtcbiAgICAgICAgdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbiA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hdHRhY2tBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbiA9IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVzZXRBdHRhY2tBbmltYXRpb24oKSB7XG4gICAgaWYodGhpcy52aWV3T2JqLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgIGxldCByaWdodEFybSA9IHRoaXMudmlld09iai5jaGlsZHJlblsxXS5jaGlsZHJlblsxXTtcbiAgICAgIHJpZ2h0QXJtLnJvdGF0aW9uLnogPSAwO1xuICAgIH1cbiAgfVxuXG4gIHdhbGtQcm9jZWR1cmUodGltZXN0YW1wKSB7XG4gICAgaWYoIXRoaXMuYXR0YWNrICYmIHRoaXMud2Fsa2luZ0FuaW1hdGlvblByb3BlcnRpZXMubGFzdFRpbWVTdGFtcCAhPT0gbnVsbCkge1xuICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5sYXN0VGltZVN0YW1wO1xuICAgICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lID0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lICsgZGVsdGE7XG4gICAgICB0aGlzLndhbGtMb29wKGRlbHRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53YWxrTG9vcCgwKTtcbiAgICB9XG5cbiAgICB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gIH07XG5cbiAgd2Fsa0xvb3AoZGVsdGEpIHtcbiAgICB0aGlzLmFuaW1hdGVXYWxrKGRlbHRhKTtcbiAgICBpZih0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLnRpbWUgPD0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5zcGVlZCkgeyByZXR1cm47IH1cbiAgICB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLnRpbWUgPSAwO1xuICB9XG5cbiAgYW5pbWF0ZVdhbGsoZGVsdGEpIHtcbiAgICBpZih0aGlzLnZpZXdPYmouY2hpbGRyZW4ubGVuZ3RoID4gMSAmJiAhdGhpcy5hdHRhY2spIHtcbiAgICAgIGxldCBsZWdzID0gdGhpcy52aWV3T2JqLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzNdO1xuICAgICAgbGV0IGxlZnRMZWcgPSBsZWdzLmNoaWxkcmVuWzBdO1xuICAgICAgbGV0IHJpZ2h0TGVnID0gbGVncy5jaGlsZHJlblsxXTtcbiAgICAgIGxldCBhbmltYXRpb25UaW1lID0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy50aW1lO1xuICAgICAgbGV0IGFuaW1hdGlvblNwZWVkID0gdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5zcGVlZDtcbiAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLndhbGtpbmdBbmltYXRpb25Qcm9wZXJ0aWVzLmRpcmVjdGlvbjtcbiAgICAgIGxldCBtYXhSb3RhdGlvbiA9IDQ1OyBcblxuICAgICAgbGV0IHJvdGF0aW9uID0gKG1heFJvdGF0aW9uICogKGRlbHRhIC8gYW5pbWF0aW9uU3BlZWQpKTtcblxuICAgICAgaWYoZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZUxlZ0ZvcndhcmQobGVmdExlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSk7XG4gICAgICAgIHRoaXMuYW5pbWF0ZUxlZ0JhY2socmlnaHRMZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hbmltYXRlTGVnRm9yd2FyZChyaWdodExlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSk7XG4gICAgICAgIHRoaXMuYW5pbWF0ZUxlZ0JhY2sobGVmdExlZywgcm90YXRpb24sIG1heFJvdGF0aW9uLCBkZWx0YSk7XG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMudG9EZWdyZWVzKGxlZnRMZWcucm90YXRpb24ueikgPj0gbWF4Um90YXRpb24gfHwgdGhpcy50b0RlZ3JlZXMobGVmdExlZy5yb3RhdGlvbi56KSA8PSAtbWF4Um90YXRpb24pIHtcbiAgICAgICAgdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb24gPSAhdGhpcy53YWxraW5nQW5pbWF0aW9uUHJvcGVydGllcy5kaXJlY3Rpb247XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYW5pbWF0ZUxlZ0JhY2sobGVnLCByb3RhdGlvbiwgbWF4Um90YXRpb24sIGRlbHRhKSB7XG4gICAgbGV0IG1heCA9IHRoaXMudG9SYWRpYW5zKC1tYXhSb3RhdGlvbik7XG5cbiAgICBpZihsZWcucm90YXRpb24ueiArIHRoaXMudG9SYWRpYW5zKC1yb3RhdGlvbikgPCBtYXgpIHtcbiAgICAgIGxlZy5yb3RhdGlvbi56ID0gbWF4O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWcucm90YXRpb24ueiArPSB0aGlzLnRvUmFkaWFucygtcm90YXRpb24pO1xuICAgIH1cbiAgfSBcblxuICBhbmltYXRlTGVnRm9yd2FyZChsZWcsIHJvdGF0aW9uLCBtYXhSb3RhdGlvbiwgZGVsdGEpIHtcbiAgICBsZXQgbWF4ID0gdGhpcy50b1JhZGlhbnMobWF4Um90YXRpb24pO1xuICAgIGlmKGxlZy5yb3RhdGlvbi56ICsgdGhpcy50b1JhZGlhbnMoIHJvdGF0aW9uKSA+IG1heCkge1xuICAgICAgbGVnLnJvdGF0aW9uLnogPSBtYXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlZy5yb3RhdGlvbi56ICs9IHRoaXMudG9SYWRpYW5zKHJvdGF0aW9uKTtcbiAgICB9XG4gIH1cblxuICByZXNldFdhbGtBbmltYXRpb24oKSB7XG4gICAgaWYodGhpcy52aWV3T2JqLmNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgIGxldCBsZWdzID0gdGhpcy52aWV3T2JqLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzNdO1xuICAgICAgbGV0IGxlZnRMZWcgPSBsZWdzLmNoaWxkcmVuWzBdO1xuICAgICAgbGV0IHJpZ2h0TGVnID0gbGVncy5jaGlsZHJlblsxXTtcblxuICAgICAgbGVmdExlZy5yb3RhdGlvbi56ID0gMDtcbiAgICAgIHJpZ2h0TGVnLnJvdGF0aW9uLnogPSAwO1xuICAgIH1cbiAgfVxuXG4gIHRvRGVncmVlcyhhbmdsZVJhZGlhbnMpIHtcbiAgICByZXR1cm4gKGFuZ2xlUmFkaWFucyAqIDE4MCkgLyBNYXRoLlBJO1xuICB9XG5cbiAgdG9SYWRpYW5zKGFuZ2xlRGVncmVlcykge1xuICAgIHJldHVybiAoYW5nbGVEZWdyZWVzIC8gMTgwKSAqIE1hdGguUEk7XG4gIH1cbn1cbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xuaW1wb3J0IEFyY2hlciBmcm9tICcuL2FyY2hlcic7XG5pbXBvcnQgQmFzZSBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMudHlwZSA9IGFyZ3MudHlwZTtcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5jb2xsaWRlclN5c3RlbSA9IGFyZ3MuY29sbGlkZXJTeXN0ZW07XG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XG4gICAgdGhpcy5taW5pb25JZCA9IDA7XG4gICAgdGhpcy5zcGF3blBvcyA9IC1ncmlkV2lkdGggLyAyICogdGhpcy5kaXJlY3Rpb247XG4gICAgdGhpcy5wb3BwdWxhdGlvbkNhcCA9IDMwO1xuXG4gICAgdGhpcy5zZXRVcGdyYWRlVmFsdWVzKCk7XG4gICAgdGhpcy5sb2FkZXIgPSBuZXcgVEhSRUUuT2JqZWN0TG9hZGVyKCk7XG5cbiAgICB0aGlzLnNldHVwR2FtZVN0YXRlKCk7XG4gICAgdGhpcy5zcGF3bkJhc2UoKTtcbiAgICB0aGlzLnNwYXduQXJjaGVycygpO1xuICB9XG5cbiAgc3Bhd25BcmNoZXJzKCkge1xuICAgIGxldCBhcmNoZXIgPSBuZXcgQXJjaGVyKHsgXG4gICAgICBzY2VuZTogdGhpcy5zY2VuZSwgXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LCBcbiAgICAgIHN0YXJ0aW5nWjogMiwgXG4gICAgICBzdGFydGluZ1k6IDIwLCBcbiAgICAgIHN0YXJ0aW5nWDogdGhpcy5zcGF3blBvcywgXG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCBcbiAgICAgIHBsYXllcjogdGhpcyBcbiAgICB9KTtcblxuICAgIHRoaXMuYXJjaGVycy5wdXNoKGFyY2hlcik7XG5cbiAgICB0aGlzLmxvYWRlci5sb2FkKCcuL2dlb21ldHJ5L3dpemFyZC5qc29uJywgKG9iaikgPT4ge1xuICAgICAgb2JqLnBvc2l0aW9uLnkgPSAtNDtcbiAgICAgIGFyY2hlci52aWV3T2JqLmFkZChvYmopO1xuXG4gICAgICBhcmNoZXIuYm9keU1vZGVsID0gYXJjaGVyLnZpZXdPYmouY2hpbGRyZW5bMl07XG4gICAgICBhcmNoZXIucmlnaHRBcm0gPSBhcmNoZXIuYm9keU1vZGVsLmNoaWxkcmVuWzFdO1xuICAgICAgYXJjaGVyLnJpZ2h0QXJtLnJvdGF0aW9uLnogPSAoMTM1IC8gMTgwKSAqIE1hdGguUEk7XG4gICAgICBpZihhcmNoZXIuZGlyZWN0aW9uID09PSAtMSkge1xuICAgICAgICBhcmNoZXIudmlld09iai5jaGlsZHJlblsyXS5yb3RhdGlvbi55ID0gTWF0aC5QSTtcbiAgICAgICAgYXJjaGVyLnN0YXJ0aW5nUm90YXRpb24gPSBNYXRoLlBJO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNjZW5lLmFkZChhcmNoZXIudmlld09iaik7XG4gICAgfSk7XG4gIH1cblxuICBzcGF3bkJhc2UoKSB7XG4gICAgdGhpcy5iYXNlID0gbmV3IEJhc2Uoe1xuICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbixcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXG4gICAgICBwbGF5ZXI6IHRoaXNcbiAgICB9KTtcblxuICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuYmFzZS52aWV3T2JqKTtcbiAgfVxuXG4gIHNwYXduTWluaW9uKGluZGV4KSB7XG4gICAgaWYodGhpcy5taW5pb25zLmxlbmd0aCA8IHRoaXMucG9wcHVsYXRpb25DYXApIHtcbiAgICAgIGlmKHRoaXMubW9uZXkgPj0gdGhpcy5taW5pb25Db3N0KSB7XG4gICAgICAgIGlmKCF0aGlzLmdhbWVPdmVyKSB7XG4gICAgICAgICAgdGhpcy5tb25leSAtPSB0aGlzLm1pbmlvbkNvc3Q7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWluaW9uID0gbmV3IE1pbmlvbih7XG4gICAgICAgICAgaWQ6IHRoaXMubWluaW9uSWQrKyxcbiAgICAgICAgICBoZWFsdGhVcGdyYWRlOiB0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VIZWFsdGgsXG4gICAgICAgICAgYXR0YWNrVXBncmFkZTogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrLFxuICAgICAgICAgIGF0dGFja1NwZWVkVXBncmFkZTogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQsXG4gICAgICAgICAgcGxheWVySWQ6IHRoaXMuaWQsXG4gICAgICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbixcbiAgICAgICAgICBzdGFydGluZ1o6IGluZGV4LFxuICAgICAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXG4gICAgICAgICAgcGxheWVyOiB0aGlzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubWluaW9ucy5wdXNoKG1pbmlvbik7XG4gICAgICAgIHRoaXMubG9hZGVyLmxvYWQoJy4vZ2VvbWV0cnkvbW9kZWwuanNvbicsIChvYmopID0+IHtcbiAgICAgICAgICBvYmoucG9zaXRpb24ueSA9IC00O1xuICAgICAgICAgIG1pbmlvbi52aWV3T2JqLmFkZChvYmopO1xuXG4gICAgICAgICAgaWYobWluaW9uLmRpcmVjdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgICAgIG1pbmlvbi52aWV3T2JqLmNoaWxkcmVuWzFdLnJvdGF0aW9uLnkgPSBNYXRoLlBJO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzc1Jld2FyZChyZXdhcmQpIHtcbiAgICBpZih0aGlzLmdhbWVPdmVyKSB7IHJldHVybjsgfVxuICAgIGxldCB0ID0gdGhpcztcbiAgICBPYmplY3Qua2V5cyhyZXdhcmQpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgdFtrZXldICs9IHJld2FyZFtrZXldO1xuICAgIH0pO1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLmJhc2UgIT09IG51bGwpIHsgXG4gICAgICB0aGlzLmJhc2UucnVuTG9vcCgpO1xuICAgICAgaWYodGhpcy5iYXNlLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95QmFzZSgpOyB9IFxuICAgIH1cblxuICAgIHRoaXMuYXJjaGVycy5mb3JFYWNoKChhcmNoZXIpID0+IHtcbiAgICAgIGFyY2hlci5ydW5Mb29wKHRpbWVzdGFtcCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm1pbmlvbnMuZm9yRWFjaCgobWluaW9uLCBpbmRleCkgPT4ge1xuICAgICAgbWluaW9uLnJ1bkxvb3AodGltZXN0YW1wKTtcbiAgICAgIGlmKCFtaW5pb24uYXR0YWNrKSB7IG1pbmlvbi5yZXNldEF0dGFja0FuaW1hdGlvbigpOyB9XG4gICAgICBpZihtaW5pb24uZGVzdHJveSkgeyB0aGlzLmRlc3Ryb3lNaW5pb24obWluaW9uLCBpbmRleCk7IH1cbiAgICB9KTtcblxuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0uY29tcHV0ZUFuZE5vdGlmeSh0aGlzLmNvbGxpZGVyTGlzdCk7XG4gIH1cblxuICBkZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XG5cbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleChtaW5pb24uY29sbGlkZXIuaWQpLCAxKTtcbiAgICBtaW5pb24uY29sbGlkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGFjdEVudGVyJyk7XG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RTdGF5Jyk7XG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RFeGl0Jyk7XG4gICAgbWluaW9uLmNvbGxpZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJyk7XG4gICAgdGhpcy5taW5pb25zLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBkZXN0cm95QmFzZSgpIHtcbiAgICB0aGlzLmFyY2hlcnMuZm9yRWFjaChhcmNoZXIgPT4ge1xuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUoYXJjaGVyLnZpZXdPYmopO1xuICAgICAgdGhpcy5jb2xsaWRlckxpc3Quc3BsaWNlKHRoaXMuZmluZENvbGxpZGVySW5kZXgoYXJjaGVyLmNvbGxpZGVyLmlkKSwgMSk7XG4gICAgfSk7XG4gICAgdGhpcy5hcmNoZXJzLmxlbmd0aCA9IDA7XG4gICAgXG4gICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KHRoaXMuYmFzZS5jb2xsaWRlci5pZCksIDEpO1xuICAgIHRoaXMuYmFzZSA9IG51bGw7XG4gICAgdGhpcy5sb3N0ID0gdHJ1ZTtcbiAgfVxuXG4gIGZpbmRDb2xsaWRlckluZGV4KGlkKSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29sbGlkZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZih0aGlzLmNvbGxpZGVyTGlzdFtpXS5pZCA9PT0gaWQpIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIHNldEdhbWVPdmVyKCkge1xuICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5taW5pb25zLmZvckVhY2gobWluaW9uID0+IHtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKG1pbmlvbi52aWV3T2JqKTtcbiAgICB9KTtcblxuICAgIGlmKHRoaXMuYmFzZSkge1xuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xuICAgICAgdGhpcy5iYXNlID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmFyY2hlcnMuZm9yRWFjaChhcmNoZXJzID0+IHtcbiAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKGFyY2hlcnMudmlld09iaik7XG4gICAgfSk7XG5cbiAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XG4gICAgdGhpcy5zZXRVcGdyYWRlVmFsdWVzKCk7XG4gICAgdGhpcy5zZXR1cEdhbWVTdGF0ZSgpO1xuICAgIHRoaXMuc3Bhd25CYXNlKCk7XG4gICAgdGhpcy5zcGF3bkFyY2hlcnMoKTtcbiAgfVxuXG5cbiAgc2V0dXBHYW1lU3RhdGUoKSB7XG4gICAgdGhpcy5taW5pb25zID0gW107XG4gICAgdGhpcy5hcmNoZXJzID0gW107XG4gICAgdGhpcy5zY29yZSA9IDA7XG4gICAgdGhpcy5tb25leSA9IDQwMDA7XG4gICAgdGhpcy5taW5pb25Db3N0ID0gNTA7XG4gICAgdGhpcy5sb3N0ID0gZmFsc2U7XG4gIH1cblxuICBzZXRVcGdyYWRlVmFsdWVzKCkge1xuICAgIHRoaXMudXBncmFkZXMgPSB7XG4gICAgICBiYXNlSGVhbHRoOiAwLFxuICAgICAgbWluaW9uQmFzZUhlYWx0aDogMCxcbiAgICAgIG1pbmlvbkJhc2VBdHRhY2s6IDAsXG4gICAgICBtaW5pb25CYXNlQXR0YWNrU3BlZWQ6IDAsXG4gICAgICBhcmNoZXJCYXNlQXR0YWNrOiAwLFxuICAgICAgYXJjaGVyQmFzZUF0dGFja1NwZWVkOiAwXG4gICAgfVxuICB9XG5cbiAgZ2V0QmFzZUhlYWx0aFVwZ3JhZGVDb3N0KCkge1xuICAgIHJldHVybiBDb25zdGFudHMuYmFzZS51cGdyYWRlcy5oZWFsdGguY29zdCAqICh0aGlzLnVwZ3JhZGVzLmJhc2VIZWFsdGggKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVCYXNlSGVhbHRoKCkge1xuICAgIHJldHVybiB0aGlzLm1vbmV5ID4gdGhpcy5nZXRCYXNlSGVhbHRoVXBncmFkZUNvc3QoKTtcbiAgfVxuXG4gIHVwZ3JhZGVCYXNlSGVhbHRoKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZUJhc2VIZWFsdGgoKSkge1xuICAgICAgdGhpcy51cGdyYWRlcy5iYXNlSGVhbHRoKys7XG4gICAgICB0aGlzLmJhc2UubWF4SGVhbHRoICs9IENvbnN0YW50cy5iYXNlLnVwZ3JhZGVzLmhlYWx0aC5hbW91bnQ7XG4gICAgICB0aGlzLmJhc2UuaGVhbHRoICs9IENvbnN0YW50cy5iYXNlLnVwZ3JhZGVzLmhlYWx0aC5hbW91bnQ7XG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5iYXNlLnVwZ3JhZGVzLmhlYWx0aC5jb3N0ICogdGhpcy51cGdyYWRlcy5iYXNlSGVhbHRoO1xuICAgIH1cbiAgfVxuXG4gIGdldE1pbmlvbkhlYWx0aFVwZ3JhZGVDb3N0KCkge1xuICAgIHJldHVybiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmhlYWx0aC5jb3N0ICogKHRoaXMudXBncmFkZXMubWluaW9uQmFzZUhlYWx0aCArIDEpO1xuICB9XG5cbiAgY2FuVXBncmFkZU1pbmlvbkhlYWx0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0TWluaW9uSGVhbHRoVXBncmFkZUNvc3QoKTtcbiAgfVxuXG4gIHVwZ3JhZGVNaW5pb25IZWFsdGgoKSB7XG4gICAgaWYodGhpcy5jYW5VcGdyYWRlTWluaW9uSGVhbHRoKCkpIHtcbiAgICAgIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUhlYWx0aCsrO1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmhlYWx0aC5jb3N0ICogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlSGVhbHRoO1xuICAgIH1cbiAgfVxuXG4gIGdldE1pbmlvbkF0dGFja1VwZ3JhZGVDb3N0KCkge1xuICAgIHJldHVybiBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5jb3N0ICogKHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFjayArIDEpO1xuICB9XG5cbiAgY2FuVXBncmFkZU1pbmlvbkF0dGFjaygpIHtcbiAgICByZXR1cm4gdGhpcy5tb25leSA+IHRoaXMuZ2V0TWluaW9uQXR0YWNrVXBncmFkZUNvc3QoKTtcbiAgfVxuXG4gIHVwZ3JhZGVNaW5pb25BdHRhY2soKSB7XG4gICAgaWYodGhpcy5jYW5VcGdyYWRlTWluaW9uQXR0YWNrKCkpIHtcbiAgICAgIHRoaXMudXBncmFkZXMubWluaW9uQmFzZUF0dGFjaysrO1xuICAgICAgdGhpcy5tb25leSAtPSBDb25zdGFudHMubWluaW9uLnVwZ3JhZGVzLmF0dGFjay5jb3N0ICogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrO1xuICAgIH1cbiAgfVxuXG4gIGdldE1pbmlvbkF0dGFja1NwZWVkVXBncmFkZUNvc3QoKSB7XG4gICAgcmV0dXJuIENvbnN0YW50cy5taW5pb24udXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqICh0aGlzLnVwZ3JhZGVzLm1pbmlvbkJhc2VBdHRhY2tTcGVlZCArIDEpO1xuICB9XG5cbiAgY2FuVXBncmFkZU1pbmlvbkF0dGFja1NwZWVkKCkge1xuICAgIHJldHVybiB0aGlzLm1vbmV5ID4gdGhpcy5nZXRNaW5pb25BdHRhY2tTcGVlZFVwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlTWluaW9uQXR0YWNrU3BlZWQoKSB7XG4gICAgaWYodGhpcy5jYW5VcGdyYWRlTWluaW9uQXR0YWNrU3BlZWQoKSkge1xuICAgICAgdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQrKztcbiAgICAgIHRoaXMubW9uZXkgLT0gQ29uc3RhbnRzLm1pbmlvbi51cGdyYWRlcy5hdHRhY2tTcGVlZC5jb3N0ICogdGhpcy51cGdyYWRlcy5taW5pb25CYXNlQXR0YWNrU3BlZWQrKztcbiAgICB9XG4gIH1cblxuICBnZXRXaXphcmRBdHRhY2tVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2suY29zdCAqICh0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2sgKyAxKTtcbiAgfVxuXG4gIGNhblVwZ3JhZGVXaXphcmRBdHRhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMubW9uZXkgPiB0aGlzLmdldFdpemFyZEF0dGFja1VwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlV2l6YXJkQXR0YWNrKCkge1xuICAgIGlmKHRoaXMuY2FuVXBncmFkZVdpemFyZEF0dGFjaygpKSB7XG4gICAgICB0aGlzLmFyY2hlcnMuZm9yRWFjaCgoYXJjaGVyKSA9PiB7XG4gICAgICAgIGFyY2hlci5hdHRhY2tTdHJlbmd0aCArPSBDb25zdGFudHMuYXJjaGVyLnVwZ3JhZGVzLmF0dGFjay5hbW91bnQ7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51cGdyYWRlcy5hcmNoZXJCYXNlQXR0YWNrKys7XG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrLmNvc3QgKiB0aGlzLnVwZ3JhZGVzLmFyY2hlckJhc2VBdHRhY2s7XG4gICAgfVxuICB9XG5cbiAgZ2V0V2l6YXJkQXR0YWNrU3BlZWRVcGdyYWRlQ29zdCgpIHtcbiAgICByZXR1cm4gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2tTcGVlZC5jb3N0ICogKHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFja1NwZWVkICsgMSkgO1xuICB9XG5cbiAgY2FuVXBncmFkZVdpemFyZEF0dGFja1NwZWVkKCkge1xuICAgIHJldHVybiB0aGlzLm1vbmV5ID4gdGhpcy5nZXRXaXphcmRBdHRhY2tTcGVlZFVwZ3JhZGVDb3N0KCk7XG4gIH1cblxuICB1cGdyYWRlV2l6YXJkQXR0YWNrU3BlZWQoKSB7XG4gICAgaWYodGhpcy5jYW5VcGdyYWRlV2l6YXJkQXR0YWNrU3BlZWQoKSkge1xuICAgICAgdGhpcy5hcmNoZXJzLmZvckVhY2goKGFyY2hlcikgPT4ge1xuICAgICAgICBhcmNoZXIuYXR0YWNrU3BlZWQgLT0gQ29uc3RhbnRzLmFyY2hlci51cGdyYWRlcy5hdHRhY2tTcGVlZC5hbW91bnQ7XG4gICAgICAgIGFyY2hlci5hcnJvd1NwZWVkIC09IENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuYW1vdW50O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFja1NwZWVkKys7XG4gICAgICB0aGlzLm1vbmV5IC09IENvbnN0YW50cy5hcmNoZXIudXBncmFkZXMuYXR0YWNrU3BlZWQuY29zdCAqIHRoaXMudXBncmFkZXMuYXJjaGVyQmFzZUF0dGFja1NwZWVkO1xuICAgIH1cbiAgfVxufVxuIiwiZnVuY3Rpb24gaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpe1xuICBsZXQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3LGgpO1xuICBjYW1lcmEuYXNwZWN0ID0gdy9oO1xuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xufVxuXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xuICBsZXQgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgbGV0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3MCwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG4gIHJlbmRlcmVyLnNoYWRvd01hcEVuYWJsZWQgPSB0cnVlO1xuICByZW5kZXJlci5zaGFkb3dNYXBUeXBlID0gVEhSRUUuUENGU29mdFNoYWRvd01hcFxuICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gIHNldHVwUmVzaXppbmcocmVuZGVyZXIsIGNhbWVyYSk7XG5cbiAgcmV0dXJuIHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUGVyZm9ybWFuY2UoKSB7XG4gIHZhciByZW5kZXJlclN0YXRzID0gbmV3IFRIUkVFeC5SZW5kZXJlclN0YXRzKCk7XG4gIHJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcbiAgcmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLmxlZnQgPSAnMHB4J1xuICByZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzBweCdcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggcmVuZGVyZXJTdGF0cy5kb21FbGVtZW50IClcbiAgcmV0dXJuIHJlbmRlcmVyU3RhdHM7XG59XG4iXX0=\n"]}