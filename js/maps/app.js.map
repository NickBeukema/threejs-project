{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","_setupScreenView","setupScreenView","document","getElementById","window","addEventListener","index","getCurrentPanelIndex","spawnMinion","computer","./modules/game-engine","./modules/game-view","./modules/view","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_constants","AI","args","this","determineAIFunction","personality","player","spawnInterval","lastSpawn","canSpawn","spawnIndex","AIFunction","opponents","friendlies","Math","floor","random","gridSubDiv","./constants","3","Base","direction","colliderList","playerId","id","baseWidth","gridWidth","baseHeight","baseDepth","maxHealth","health","hitBoxBuffer","killReward","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","THREE","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","color","specular","shininess","shapeMesh","Mesh","hitGeometry","hitMaterial","MeshBasicMaterial","transparent","opacity","hitMesh","healthBar","initializeHealthBar","hitBox","add","position","x","y","userData","object","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","name","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","geometry","computeBoundingBox","box3","boundingBox","clone","collider","THREEx","ColliderBox3","push","update","updateHealthBar","4","xPositive","xNegative","5","_player","_player2","_aiPlayer","_aiPlayer2","GameEngine","state","colliderSystem","ColliderSystem","initializePlayers","type","playerAI","players","runLoop","forEach","computeAndNotify","./ai-player","./player","6","planeTexture","TextureLoader","load","repeat","set","wrapS","RepeatWrapping","wrapT","GameView","setupGrid","setupLight","mouse","positionScale","z","lookAt","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","lightAmbient","AmbientLight","lightSource","PointLight","texturedSurfaceGeometry","PlaneGeometry","texturedSurfaceMaterial","map","texturedSurface","rotation","PI","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","planeMaterial","plane","setFromCamera","planes","values","intersects","intersectObjects","panel","material","setHex","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","7","Minion","attackStrength","attackSpeed","defaultSpeed","speed","attackProperties","lastTimeStamp","attackTime","destroy","attack","startingZ","_this","otherCollider","object3d","currentTarget","attackProcedure","delta","attackLoop","getAttackValue","processReward","8","_minion","_minion2","_base","_base2","Player","minionId","setupGameState","spawnBase","base","minionCost","minion","minions","reward","keys","destroyBase","destroyMinion","remove","splice","findColliderIndex","./base","./minion","9","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","body","appendChild","domElement"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0;\n\n// Shapes\nvar cube;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n      gameEngine.myPlayer.spawnMinion(index);\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    gameEngine.computer.spawnMinion(3);\n  });\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI();\n\n  globals.renderer.render(globals.scene, globals.camera);\n}\n\nfunction updateUI() {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n}\n\ninit();\n\n},{\"./modules/game-engine\":5,\"./modules/game-view\":6,\"./modules/view\":9}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 1500;\n    this.lastSpawn = 0;\n  }\n\n  _createClass(AI, [{\n    key: \"canSpawn\",\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction();\n\n      if (spawnIndex >= 0) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: \"randomAI\",\n    value: function randomAI(opponents, friendlies) {\n      return Math.floor(Math.random() * _constants.gridSubDiv);\n    }\n  }, {\n    key: \"determineAIFunction\",\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"./constants\":4}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n  function Base(args) {\n    _classCallCheck(this, Base);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.player = args.player;\n    this.playerId = this.player.id;\n\n    this.baseWidth = _constants.gridWidth;\n    this.baseHeight = 20;\n    this.baseDepth = 10;\n\n    this.maxHealth = 20;\n    this.health = this.maxHealth;\n\n    this.hitBoxBuffer = 2;\n\n    this.killReward = {\n      money: 550,\n      score: 1000\n    };\n\n    this.initializeView(this.direction);\n    this.registerCollision();\n  }\n\n  _createClass(Base, [{\n    key: \"initializeView\",\n    value: function initializeView(direction) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x008800, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n      this.viewObj.position.y = this.baseHeight / 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarLength = _constants.gridWidth / 10;\n      this._healthBarWidth = _constants.gridWidth / 150;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = this.baseHeight + 5;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop() {\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }]);\n\n  return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":4}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 128;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      if (this.AI) {\n        this.AI.runLoop(timestamp);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp);\n      }\n      this.state.players.forEach(function (player) {\n        return player.runLoop(timestamp);\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":2,\"./constants\":4,\"./player\":8}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var texturedSurfaceGeometry = new THREE.PlaneGeometry(_constants.gridWidth, _constants.gridWidth);\n      var texturedSurfaceMaterial = new THREE.MeshBasicMaterial({ map: planeTexture });\n      var texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      texturedSurface.rotation.x = -0.5 * Math.PI;\n      texturedSurface.position.y = -0.3;\n      this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.2;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":4}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n\n    this.maxHealth = 10;\n    this.health = this.maxHealth;\n    this.attackStrength = 3;\n    this.attackSpeed = 500;\n    this.defaultSpeed = 0.5;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.killReward = {\n      money: 15,\n      score: 10\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.initializeView(args.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(3, 3, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      //this.viewObj.add(shapeMesh);\n      //this.viewObj.add(hitMesh);\n      //this.viewObj.add(this.healthBar);\n\n      hitMesh.add(this.healthBar);\n      hitMesh.add(shapeMesh);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"isObjectLoaded\",\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = otherCollider.object3d.userData.object;\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = otherCollider.object3d.userData.object;\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: \"getAttackValue\",\n    value: function getAttackValue() {\n      return Math.random() * this.attackStrength;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: \"attackProcedure\",\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime += delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: \"attackLoop\",\n    value: function attackLoop() {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      if (this.attackProperties.attackTime < this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":4}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n\n    this.setupGameState();\n    this.spawnBase();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          playerId: this.id,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList,\n          player: this\n        });\n\n        this.minions.push(minion);\n        this.scene.add(minion.viewObj);\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (minion.destroy) {\n          _this.destroyMinion(minion, index);\n        }\n      });\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 400;\n      this.minionCost = 20;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./base\":3,\"./minion\":7}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL21vZHVsZXMvYWktcGxheWVyLmpzIiwic3JjL2pzL21vZHVsZXMvYmFzZS5qcyIsInNyYy9qcy9tb2R1bGVzL2NvbnN0YW50cy5qcyIsInNyYy9qcy9tb2R1bGVzL2dhbWUtZW5naW5lLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS12aWV3LmpzIiwic3JjL2pzL21vZHVsZXMvbWluaW9uLmpzIiwic3JjL2pzL21vZHVsZXMvcGxheWVyLmpzIiwic3JjL2pzL21vZHVsZXMvdmlldy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUE7QUFDQSxJQUFJLGdCQUFKOztBQUVBLElBQUksbUJBQUo7QUFBQSxJQUFnQixpQkFBaEI7O0FBRUE7QUFDQSxJQUFJLGtCQUFKO0FBQUEsSUFBZSxrQkFBZjs7QUFFQTtBQUNBLElBQUksSUFBSjs7QUFFQSxTQUFTLElBQVQsR0FBZ0I7QUFBQSx5QkFDb0IsNEJBRHBCO0FBQUEsTUFDUixLQURRLG9CQUNSLEtBRFE7QUFBQSxNQUNELE1BREMsb0JBQ0QsTUFEQztBQUFBLE1BQ08sUUFEUCxvQkFDTyxRQURQOztBQUVkLFlBQVUsRUFBRSxZQUFGLEVBQVMsY0FBVCxFQUFpQixrQkFBakIsRUFBVjs7QUFFQSxlQUFhLHlCQUFlLE9BQWYsQ0FBYjtBQUNBLGFBQVcsdUJBQWEsT0FBYixFQUFzQixVQUF0QixDQUFYOztBQUVBLGNBQVksU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQVo7QUFDQSxjQUFZLFNBQVMsY0FBVCxDQUF3QixPQUF4QixDQUFaOztBQUVBLFNBQU8sZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUMsWUFBTTtBQUNyQyxRQUFJLFFBQVEsU0FBUyxvQkFBVCxFQUFaO0FBQ0EsUUFBRyxTQUFTLENBQVosRUFBZTtBQUNiLGlCQUFXLFFBQVgsQ0FB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O0FBQ3JDLE1BQUksSUFBSSxPQUFPLFVBQWY7QUFDQSxNQUFJLElBQUksT0FBTyxXQUFmO0FBQ0EsV0FBUyxPQUFULENBQWlCLENBQWpCLEVBQW1CLENBQW5CO0FBQ0EsU0FBTyxNQUFQLEdBQWdCLElBQUUsQ0FBbEI7QUFDQSxTQUFPLHNCQUFQO0FBQ0Q7O0FBRUQsU0FBUyxhQUFULENBQXVCLFFBQXZCLEVBQWlDLE1BQWpDLEVBQXlDO0FBQ3ZDLFNBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsWUFBTTtBQUN0QyxpQkFBYSxRQUFiLEVBQXVCLE1BQXZCO0FBQ0QsR0FGRDtBQUdEOztBQUVNLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFJLFFBQVEsSUFBSSxNQUFNLEtBQVYsRUFBWjtBQUNBLE1BQUksU0FBUyxJQUFJLE1BQU0saUJBQVYsQ0FBNEIsRUFBNUIsRUFBZ0MsT0FBTyxVQUFQLEdBQW9CLE9BQU8sV0FBM0QsRUFBd0UsR0FBeEUsRUFBNkUsSUFBN0UsQ0FBYjtBQUNBLE1BQUksV0FBVyxJQUFJLE1BQU0sYUFBVixFQUFmOztBQUVBLFdBQVMsT0FBVCxDQUFpQixPQUFPLFVBQXhCLEVBQW9DLE9BQU8sV0FBM0M7QUFDQSxXQUFTLElBQVQsQ0FBYyxXQUFkLENBQTBCLFNBQVMsVUFBbkM7O0FBRUEsZ0JBQWMsUUFBZCxFQUF3QixNQUF4Qjs7QUFFQSxTQUFPLEVBQUUsWUFBRixFQUFTLGNBQVQsRUFBaUIsa0JBQWpCLEVBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyBzZXR1cFNjcmVlblZpZXcgfSBmcm9tICcuL21vZHVsZXMvdmlldyc7XG5pbXBvcnQgR2FtZUVuZ2luZSBmcm9tICcuL21vZHVsZXMvZ2FtZS1lbmdpbmUnO1xuaW1wb3J0IEdhbWVWaWV3IGZyb20gJy4vbW9kdWxlcy9nYW1lLXZpZXcnO1xuXG4vLyBHbG9iYWxzXG5sZXQgZ2xvYmFscztcblxubGV0IGdhbWVFbmdpbmUsIGdhbWVWaWV3O1xuXG4vLyBVSSBFbGVtZW50c1xubGV0IHNjb3JlVGV4dCwgbW9uZXlUZXh0O1xuXG4vLyBTaGFwZXNcbnZhciBjdWJlO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICBsZXQgeyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9ID0gc2V0dXBTY3JlZW5WaWV3KCk7XG4gIGdsb2JhbHMgPSB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG5cbiAgZ2FtZUVuZ2luZSA9IG5ldyBHYW1lRW5naW5lKGdsb2JhbHMpO1xuICBnYW1lVmlldyA9IG5ldyBHYW1lVmlldyhnbG9iYWxzLCBnYW1lRW5naW5lKTtcblxuICBzY29yZVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcbiAgbW9uZXlUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vbmV5Jyk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGxldCBpbmRleCA9IGdhbWVWaWV3LmdldEN1cnJlbnRQYW5lbEluZGV4KCk7XG4gICAgaWYoaW5kZXggPj0gMCkge1xuICAgICAgZ2FtZUVuZ2luZS5teVBsYXllci5zcGF3bk1pbmlvbihpbmRleCk7XG4gICAgfVxuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoKSA9PiB7XG4gICAgZ2FtZUVuZ2luZS5jb21wdXRlci5zcGF3bk1pbmlvbigzKTtcbiAgfSk7XG5cbiAgcmVuZGVyKCk7XG59XG5cblxuZnVuY3Rpb24gcmVuZGVyKHRpbWVzdGFtcCkge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgZ2FtZVZpZXcucmVuZGVyTG9vcCh0aW1lc3RhbXApO1xuXG4gIHVwZGF0ZVVJKCk7XG5cbiAgZ2xvYmFscy5yZW5kZXJlci5yZW5kZXIoZ2xvYmFscy5zY2VuZSwgZ2xvYmFscy5jYW1lcmEpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVVSSgpIHtcbiAgc2NvcmVUZXh0LnRleHRDb250ZW50ID0gZ2FtZUVuZ2luZS5teVBsYXllci5zY29yZTtcbiAgbW9uZXlUZXh0LnRleHRDb250ZW50ID0gZ2FtZUVuZ2luZS5teVBsYXllci5tb25leTtcbn1cblxuaW5pdCgpO1xuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBSSB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMuZGV0ZXJtaW5lQUlGdW5jdGlvbihhcmdzLnBlcnNvbmFsaXR5KTtcbiAgICB0aGlzLnBsYXllciA9IGFyZ3MucGxheWVyO1xuICAgIHRoaXMuc3Bhd25JbnRlcnZhbCA9IDE1MDA7XG4gICAgdGhpcy5sYXN0U3Bhd24gPSAwO1xuICB9XG5cbiAgY2FuU3Bhd24odGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRpbWVzdGFtcCAtIHRoaXMubGFzdFNwYXduID4gdGhpcy5zcGF3bkludGVydmFsO1xuICB9XG5cbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcbiAgICBpZighdGhpcy5jYW5TcGF3bih0aW1lc3RhbXApKSB7IHJldHVybjsgfVxuXG4gICAgbGV0IHNwYXduSW5kZXggPSB0aGlzLkFJRnVuY3Rpb24oKTtcblxuICAgIGlmKHNwYXduSW5kZXggPj0gMCkge1xuICAgICAgdGhpcy5wbGF5ZXIuc3Bhd25NaW5pb24oc3Bhd25JbmRleCk7XG4gICAgICB0aGlzLmxhc3RTcGF3biA9IHRpbWVzdGFtcDtcbiAgICB9XG4gIH1cblxuICByYW5kb21BSShvcHBvbmVudHMsIGZyaWVuZGxpZXMpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XG4gIH1cblxuICBkZXRlcm1pbmVBSUZ1bmN0aW9uKHBlcnNvbmFsaXR5KSB7XG4gICAgaWYocGVyc29uYWxpdHkpIHtcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbcGVyc29uYWxpdHldO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLkFJRnVuY3Rpb24gPSB0aGlzW1wicmFuZG9tQUlcIl07XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcbiAgICB0aGlzLnBsYXllcklkID0gdGhpcy5wbGF5ZXIuaWQ7XG5cbiAgICB0aGlzLmJhc2VXaWR0aCA9IGdyaWRXaWR0aDtcbiAgICB0aGlzLmJhc2VIZWlnaHQgPSAyMDtcbiAgICB0aGlzLmJhc2VEZXB0aCA9IDEwO1xuXG4gICAgdGhpcy5tYXhIZWFsdGggPSAyMDtcbiAgICB0aGlzLmhlYWx0aCA9IHRoaXMubWF4SGVhbHRoO1xuXG4gICAgdGhpcy5oaXRCb3hCdWZmZXIgPSAyO1xuXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xuICAgICAgbW9uZXk6IDU1MCxcbiAgICAgIHNjb3JlOiAxMDAwXG4gICAgfVxuXG4gICAgdGhpcy5pbml0aWFsaXplVmlldyh0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy5yZWdpc3RlckNvbGxpc2lvbigpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVZpZXcoZGlyZWN0aW9uLCBoaXRCb3hPcGFjaXR5PS4yNSkge1xuICAgIHRoaXMudmlld09iaiA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuXG4gICAgbGV0IHNoYXBlR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoXG4gICAgICB0aGlzLmJhc2VEZXB0aCxcbiAgICAgIHRoaXMuYmFzZUhlaWdodCxcbiAgICAgIHRoaXMuYmFzZVdpZHRoXG4gICAgKTtcblxuICAgIGxldCBzaGFwZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHtjb2xvcjogMHgwMDg4MDAsIHNwZWN1bGFyOiAweDU1NTU1NSwgc2hpbmluZXNzOiAzMCB9KTtcbiAgICBsZXQgc2hhcGVNZXNoID0gbmV3IFRIUkVFLk1lc2goc2hhcGVHZW9tZXRyeSwgc2hhcGVNYXRlcmlhbCk7XG5cbiAgICBsZXQgaGl0R2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoXG4gICAgICB0aGlzLmJhc2VEZXB0aCArIHRoaXMuaGl0Qm94QnVmZmVyLFxuICAgICAgdGhpcy5iYXNlSGVpZ2h0ICsgdGhpcy5oaXRCb3hCdWZmZXIsXG4gICAgICB0aGlzLmJhc2VXaWR0aCArIHRoaXMuaGl0Qm94QnVmZmVyIFxuICAgICk7XG5cbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xuXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcbiAgICB0aGlzLmhpdEJveCA9IGhpdE1lc2g7XG5cbiAgICB0aGlzLnZpZXdPYmouYWRkKHNoYXBlTWVzaCk7XG4gICAgdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcbiAgICB0aGlzLnZpZXdPYmouYWRkKHRoaXMuaGVhbHRoQmFyKTtcblxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0gKCgtZ3JpZFdpZHRoLzIpIC0gKHRoaXMuYmFzZURlcHRoIC8gMikpICogdGhpcy5kaXJlY3Rpb247XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnkgPSB0aGlzLmJhc2VIZWlnaHQvMjtcblxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gIH1cblxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xuICAgIHRoaXMuX2hlYWx0aEJhckxlbmd0aCA9IGdyaWRXaWR0aCAvIDEwO1xuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gZ3JpZFdpZHRoIC8gMTUwO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyTGVuZ3RoLCB0aGlzLl9oZWFsdGhCYXJXaWR0aCwgdGhpcy5faGVhbHRoQmFyV2lkdGgpO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMH0pO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSwgZnVsbEhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XG5cbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJMZW5ndGggKiAwLjk5LCB0aGlzLl9oZWFsdGhCYXJXaWR0aCAqIDAuOSwgdGhpcy5faGVhbHRoQmFyV2lkdGggKiAwLjkpO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSwgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCk7XG4gICAgZW1wdHlIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkVtcHR5SGVhbHRoQmFyXCI7XG5cbiAgICBsZXQgaGVhbHRoQmFyR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZnVsbEhlYWx0aEJhck1lc2gpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xuXG4gICAgaGVhbHRoQmFyR3JvdXAucG9zaXRpb24ueSA9IHRoaXMuYmFzZUhlaWdodCArIDU7XG5cbiAgICByZXR1cm4gaGVhbHRoQmFyR3JvdXA7XG4gIH1cblxuICB1cGRhdGVIZWFsdGhCYXIoKSB7XG4gICAgbGV0IGhlYWx0aFBlcmNlbnQgPSB0aGlzLmhlYWx0aC90aGlzLm1heEhlYWx0aDtcbiAgICBsZXQgaGVhbHRoQmFyT2Zmc2V0ID0gLSgxLWhlYWx0aFBlcmNlbnQpICogdGhpcy5faGVhbHRoQmFyTGVuZ3RoIC8gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xuXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XG4gIH1cblxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTtcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xuXG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcbiAgfVxuXG4gIHJ1bkxvb3AoKSB7XG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSAxMjg7XG5leHBvcnQgY29uc3QgZ3JpZFN1YkRpdiA9IDE2O1xuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgQUkgZnJvbSAnLi9haS1wbGF5ZXInO1xuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBuZXcgVEhSRUV4LkNvbGxpZGVyU3lzdGVtKCk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXTtcblxuICAgIHRoaXMucGxheWVySWQgPSAwO1xuXG4gICAgdGhpcy5pbml0aWFsaXplUGxheWVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVBsYXllcnMoKSB7XG4gICAgdGhpcy5teVBsYXllciA9IG5ldyBQbGF5ZXIoe1xuICAgICAgdHlwZTogJ2h1bWFuJyxcbiAgICAgIGRpcmVjdGlvbjogeFBvc2l0aXZlLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XG4gICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLkFJID0gbmV3IEFJKHtcbiAgICAgIHBsYXllcjogdGhpcy5jb21wdXRlclxuICAgIH0pO1xuXG4gICAgdGhpcy5wbGF5ZXJBSSA9IG5ldyBBSSh7XG4gICAgICBwbGF5ZXI6IHRoaXMubXlQbGF5ZXJcbiAgICB9KTtcblxuXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzID0gWyB0aGlzLm15UGxheWVyLCB0aGlzLmNvbXB1dGVyIF07XG4gIH1cblxuICBnYW1lTG9vcCh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLkFJKSB7XG4gICAgICB0aGlzLkFJLnJ1bkxvb3AodGltZXN0YW1wKTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnBsYXllckFJKSB7XG4gICAgICB0aGlzLnBsYXllckFJLnJ1bkxvb3AodGltZXN0YW1wKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHBsYXllci5ydW5Mb29wKHRpbWVzdGFtcCkpO1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0uY29tcHV0ZUFuZE5vdGlmeSh0aGlzLmNvbGxpZGVyTGlzdCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuY29uc3QgcGxhbmVUZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKS5sb2FkKFwidGV4dHVyZXMvc3RvbmUuanBnXCIpO1xucGxhbmVUZXh0dXJlLnJlcGVhdC5zZXQoMTAsMTApO1xucGxhbmVUZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG5wbGFuZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVmlldyB7XG4gIGNvbnN0cnVjdG9yKGdsb2JhbHMsIGdhbWVFbmdpbmUpIHtcbiAgICB0aGlzLnNjZW5lID0gZ2xvYmFscy5zY2VuZTtcbiAgICB0aGlzLmNhbWVyYSA9IGdsb2JhbHMuY2FtZXJhO1xuICAgIHRoaXMucmVuZGVyZXIgPSBnbG9iYWxzLnJlbmRlcmVyO1xuXG4gICAgdGhpcy5nYW1lRW5naW5lID0gZ2FtZUVuZ2luZTtcblxuICAgIHRoaXMuc2V0dXBHcmlkKCk7XG4gICAgdGhpcy5zZXR1cExpZ2h0KCk7XG5cbiAgICB0aGlzLm1vdXNlID0geyB4OiAtMTAwMDAsIHk6IDAgfTtcblxuICAgIGxldCBwb3NpdGlvblNjYWxlID0gZ3JpZFdpZHRoIC8gMjtcblxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSAyICogcG9zaXRpb25TY2FsZTtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gMS41ICogcG9zaXRpb25TY2FsZTtcbiAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5zY2VuZS5wb3NpdGlvbik7XG5cblxuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG51bGw7XG5cbiAgICB0aGlzLnNldHVwTW91c2VFdmVudCgpO1xuICB9XG5cbiAgc2V0dXBMaWdodCgpIHtcbiAgICBsZXQgbGlnaHRBbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDY2NjY2NiwgMyk7XG4gICAgbGV0IGxpZ2h0U291cmNlID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHg4ODg4ODgpO1xuXG4gICAgbGlnaHRTb3VyY2UucG9zaXRpb24uc2V0KDMsIDMsIDMpO1xuXG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHRBbWJpZW50KTtcbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodFNvdXJjZSk7XG4gIH1cblxuICBzZXR1cEdyaWQoKSB7XG4gICAgbGV0IHRleHR1cmVkU3VyZmFjZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZ3JpZFdpZHRoLCBncmlkV2lkdGgpO1xuICAgIGxldCB0ZXh0dXJlZFN1cmZhY2VNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7bWFwOiBwbGFuZVRleHR1cmV9KTtcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlID0gbmV3IFRIUkVFLk1lc2godGV4dHVyZWRTdXJmYWNlR2VvbWV0cnksIHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsKTtcbiAgICB0ZXh0dXJlZFN1cmZhY2Uucm90YXRpb24ueCA9IC0wLjUgKiBNYXRoLlBJO1xuICAgIHRleHR1cmVkU3VyZmFjZS5wb3NpdGlvbi55ID0gLTAuMztcbiAgICB0aGlzLnNjZW5lLmFkZCh0ZXh0dXJlZFN1cmZhY2UpO1xuXG4gICAgbGV0IGdyaWQgPSBuZXcgVEhSRUUuR3JpZEhlbHBlcihncmlkV2lkdGgsIGdyaWRTdWJEaXYpO1xuICAgIHRoaXMuc2NlbmUuYWRkKGdyaWQpO1xuXG4gICAgdGhpcy5ncmlkUGFuZWxzID0ge307XG5cbiAgICBsZXQgcGFuZWxMZW5ndGggPSBncmlkV2lkdGggLyBncmlkU3ViRGl2O1xuICAgIGxldCB6UG9zID0gKChncmlkV2lkdGggLyAyKSAtIHBhbmVsTGVuZ3RoIC8gMikgKiAtMTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHtcbiAgICAgIGxldCBwbGFuZUdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoZ3JpZFdpZHRoLCBwYW5lbExlbmd0aCk7XG4gICAgICBsZXQgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7dHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDB9KTtcbiAgICAgIGxldCBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnksIHBsYW5lTWF0ZXJpYWwpO1xuICAgICAgcGxhbmUucm90YXRpb24ueCA9IC0wLjUgKiBNYXRoLlBJO1xuICAgICAgcGxhbmUucG9zaXRpb24ueiA9IHpQb3M7XG4gICAgICBwbGFuZS5wb3NpdGlvbi55ID0gLTAuMjtcbiAgICAgIHRoaXMuc2NlbmUuYWRkKHBsYW5lKTtcbiAgICAgIHRoaXMuZ3JpZFBhbmVsc1tpXSA9IHBsYW5lO1xuXG4gICAgICB6UG9zICs9IHBhbmVsTGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIGNoZWNrR3JpZEludGVyc2VjdGlvbnMoKSB7XG4gICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLm1vdXNlLCB0aGlzLmNhbWVyYSk7XG4gICAgbGV0IHBsYW5lcyA9IE9iamVjdC52YWx1ZXModGhpcy5ncmlkUGFuZWxzKTtcbiAgICBsZXQgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMocGxhbmVzKTtcblxuICAgIHBsYW5lcy5mb3JFYWNoKChwYW5lbCkgPT4ge1xuICAgICAgcGFuZWwubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4NjY2NjY2KTtcbiAgICAgIHBhbmVsLm1hdGVyaWFsLm9wYWNpdHkgPSAwO1xuICAgIH0pO1xuXG4gICAgaWYoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgb2JqID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7XG5cbiAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHhmZjAwMDApOyAgICAgIFxuICAgICAgb2JqLm1hdGVyaWFsLm9wYWNpdHkgPSAuNTtcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG9iajtcbiAgICB9IGVsc2UgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKXtcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q3VycmVudFBhbmVsSW5kZXgoKSB7XG4gICAgaWYoIXRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCkgeyByZXR1cm47IH1cblxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XG5cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7XG4gICAgICBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPT09IHBsYW5lc1tpXSkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIHNldHVwTW91c2VFdmVudCgpIHtcbiAgICBsZXQgbW91c2UgPSB0aGlzLm1vdXNlO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGV2dCA9PiB7XG4gICAgICBtb3VzZS54ID0gKCBldmVudC5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGggKSAqIDIgLSAxO1xuICAgICAgbW91c2UueSA9IC0gKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckxvb3AodGltZXN0YW1wKSB7XG4gICAgdGhpcy5jaGVja0dyaWRJbnRlcnNlY3Rpb25zKCk7XG4gICAgdGhpcy5nYW1lRW5naW5lLmdhbWVMb29wKHRpbWVzdGFtcCk7XG4gIH1cbn0gIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XG5cbiAgICB0aGlzLm1heEhlYWx0aCA9IDEwO1xuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IDM7XG4gICAgdGhpcy5hdHRhY2tTcGVlZCA9IDUwMDtcbiAgICB0aGlzLmRlZmF1bHRTcGVlZCA9IDAuNTtcbiAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzID0ge1xuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcbiAgICAgIGF0dGFja1RpbWU6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xuICAgICAgbW9uZXk6IDE1LFxuICAgICAgc2NvcmU6IDEwXG4gICAgfVxuXG4gICAgdGhpcy5kZXN0cm95ID0gZmFsc2U7XG4gICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcoYXJncy5zdGFydGluZ1opO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KHN0YXJ0aW5nWiwgaGl0Qm94T3BhY2l0eT0uMjUpIHtcbiAgICB0aGlzLnZpZXdPYmogPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDIsMiwyKTtcbiAgICBsZXQgc2hhcGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwLCBzcGVjdWxhcjogMHg1NTU1NTUsIHNoaW5pbmVzczogMzAgfSk7XG4gICAgbGV0IHNoYXBlTWVzaCA9IG5ldyBUSFJFRS5NZXNoKHNoYXBlR2VvbWV0cnksIHNoYXBlTWF0ZXJpYWwpO1xuXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDMsMywzKTtcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xuXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcblxuICAgIC8vdGhpcy52aWV3T2JqLmFkZChzaGFwZU1lc2gpO1xuICAgIC8vdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcbiAgICAvL3RoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xuXG4gICAgaGl0TWVzaC5hZGQodGhpcy5oZWFsdGhCYXIpO1xuICAgIGhpdE1lc2guYWRkKHNoYXBlTWVzaCk7XG4gICAgdGhpcy52aWV3T2JqID0gaGl0TWVzaDtcbiAgICB0aGlzLmhpdEJveCA9IHRoaXMudmlld09iajtcblxuICAgIGxldCB6ID0gKChzdGFydGluZ1ogKiAoZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdikpIC0gKGdyaWRXaWR0aCAvIDIpKSArIChncmlkV2lkdGggLyBncmlkU3ViRGl2IC8gMik7XG4gICAgbGV0IHggPSAoZ3JpZFdpZHRoIC8gMikgKiAtdGhpcy5kaXJlY3Rpb247XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnogPSB6O1xuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0geDtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IDI7XG5cbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLnBsYXllciA9IHRoaXMucGxheWVyO1xuICB9XG5cbiAgaW5pdGlhbGl6ZUhlYWx0aEJhcigpIHtcbiAgICB0aGlzLl9oZWFsdGhCYXJXaWR0aCA9IDI7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4zLCAwLjMpO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMH0pO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSwgZnVsbEhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XG5cbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4yLCAwLjIpO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSwgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCk7XG4gICAgZW1wdHlIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkVtcHR5SGVhbHRoQmFyXCI7XG5cbiAgICBsZXQgaGVhbHRoQmFyR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZnVsbEhlYWx0aEJhck1lc2gpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xuXG4gICAgaGVhbHRoQmFyR3JvdXAucG9zaXRpb24ueSA9IDQ7XG5cbiAgICByZXR1cm4gaGVhbHRoQmFyR3JvdXA7XG4gIH1cblxuICBpc09iamVjdExvYWRlZChvYmopIHtcbiAgICByZXR1cm4gKG9iai5wb3NpdGlvbi54ID09PSAwICYmIG9iai5wb3NpdGlvbi55ID09PSAwICYmIG9iai5wb3NpdGlvbi56ID09PSAwKTtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XG5cbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5wdXNoKHRoaXMuY29sbGlkZXIpO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgaWYob3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHRoaXMuc3BlZWQgPSAwO1xuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YS5vYmplY3Q7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RTdGF5JywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIGlmKG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuXG4gICAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgIHRoaXMuYXR0YWNrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YS5vYmplY3Q7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcbiAgICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0QXR0YWNrVmFsdWUoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiB0aGlzLmF0dGFja1N0cmVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhcldpZHRoIC8gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xuXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XG4gIH1cblxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xuXG4gICAgdGhpcy5hdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKTtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCArPSAodGhpcy5zcGVlZCAqIHRoaXMuZGlyZWN0aW9uKTtcblxuICAgIHRoaXMuY29sbGlkZXIudXBkYXRlKCk7XG4gICAgdGhpcy51cGRhdGVIZWFsdGhCYXIoKTtcbiAgfVxuXG4gIGF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApIHtcbiAgICBpZih0aGlzLmhlYWx0aCA8PSAwKSB7IHJldHVybjsgfVxuXG4gICAgaWYodGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgIT0gbnVsbCAmJiB0aGlzLmF0dGFjaykge1xuICAgICAgbGV0IGRlbHRhID0gdGltZXN0YW1wIC0gdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXA7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSArPSBkZWx0YTtcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgdGhpcy5hdHRhY2tMb29wKCk7XG4gICAgfSBlbHNlIGlmKHRoaXMuYXR0YWNrKSB7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgIHRoaXMuYXR0YWNrTG9vcCgpO1xuICAgIH1cblxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xuICB9XG5cbiAgYXR0YWNrTG9vcCgpIHtcbiAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQgPT09IG51bGwgfHwgdGhpcy5jdXJyZW50VGFyZ2V0LnBsYXllcklkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lIDwgdGhpcy5hdHRhY2tTcGVlZCkgeyByZXR1cm47IH1cblxuICAgIHRoaXMuY3VycmVudFRhcmdldC5oZWFsdGggLT0gdGhpcy5nZXRBdHRhY2tWYWx1ZSgpO1xuXG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0LmhlYWx0aCA8PSAwKSB7XG4gICAgICB0aGlzLnBsYXllci5wcm9jZXNzUmV3YXJkKHRoaXMuY3VycmVudFRhcmdldC5raWxsUmV3YXJkKTtcblxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0LmF0dGFjayA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0LmRlc3Ryb3kgPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSBudWxsO1xuICB9XG59XG4iLCJpbXBvcnQgTWluaW9uIGZyb20gJy4vbWluaW9uJztcbmltcG9ydCBCYXNlIGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMudHlwZSA9IGFyZ3MudHlwZTtcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XG4gICAgdGhpcy5taW5pb25JZCA9IDA7XG5cbiAgICB0aGlzLnNldHVwR2FtZVN0YXRlKCk7XG4gICAgdGhpcy5zcGF3bkJhc2UoKTtcbiAgfVxuXG4gIHNwYXduQmFzZSgpIHtcbiAgICB0aGlzLmJhc2UgPSBuZXcgQmFzZSh7XG4gICAgICBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcbiAgICAgIHBsYXllcjogdGhpc1xuICAgIH0pO1xuXG4gICAgdGhpcy5zY2VuZS5hZGQodGhpcy5iYXNlLnZpZXdPYmopO1xuICB9XG5cbiAgc3Bhd25NaW5pb24oaW5kZXgpIHtcbiAgICBpZih0aGlzLm1vbmV5ID49IHRoaXMubWluaW9uQ29zdCkge1xuICAgICAgdGhpcy5tb25leSAtPSB0aGlzLm1pbmlvbkNvc3Q7XG5cbiAgICAgIGxldCBtaW5pb24gPSBuZXcgTWluaW9uKHtcbiAgICAgICAgaWQ6IHRoaXMubWluaW9uSWQrKyxcbiAgICAgICAgcGxheWVySWQ6IHRoaXMuaWQsXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICAgIHN0YXJ0aW5nWjogaW5kZXgsXG4gICAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXG4gICAgICAgIHBsYXllcjogdGhpc1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMubWluaW9ucy5wdXNoKG1pbmlvbik7XG4gICAgICB0aGlzLnNjZW5lLmFkZChtaW5pb24udmlld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByb2Nlc3NSZXdhcmQocmV3YXJkKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIE9iamVjdC5rZXlzKHJld2FyZCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0W2tleV0gKz0gcmV3YXJkW2tleV07XG4gICAgfSk7XG4gIH1cblxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xuICAgIGlmKHRoaXMuYmFzZSAhPT0gbnVsbCkgeyBcbiAgICAgIHRoaXMuYmFzZS5ydW5Mb29wKCk7XG4gICAgICBpZih0aGlzLmJhc2UuZGVzdHJveSkgeyB0aGlzLmRlc3Ryb3lCYXNlKCk7IH0gXG4gICAgfSAgICBcbiAgICBcblxuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKChtaW5pb24sIGluZGV4KSA9PiB7XG4gICAgICBtaW5pb24ucnVuTG9vcCh0aW1lc3RhbXApO1xuICAgICAgaWYobWluaW9uLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpOyB9XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XG5cbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleChtaW5pb24uY29sbGlkZXIuaWQpLCAxKTtcblxuICAgIHRoaXMubWluaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgZGVzdHJveUJhc2UoKSB7XG4gICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KHRoaXMuYmFzZS5jb2xsaWRlci5pZCksIDEpO1xuICAgIHRoaXMuYmFzZSA9IG51bGw7XG4gIH1cblxuICBmaW5kQ29sbGlkZXJJbmRleChpZCkge1xuICAgIGxldCBpbmRleCA9IC0xO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYodGhpcy5jb2xsaWRlckxpc3RbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBzZXR1cEdhbWVTdGF0ZSgpIHtcbiAgICB0aGlzLm1pbmlvbnMgPSBbXTtcbiAgICB0aGlzLnNjb3JlID0gMDtcbiAgICB0aGlzLm1vbmV5ID0gNDAwO1xuICAgIHRoaXMubWluaW9uQ29zdCA9IDIwO1xuICB9XG59XG4iLCJmdW5jdGlvbiBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSl7XG4gIGxldCB3ID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGxldCBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICByZW5kZXJlci5zZXRTaXplKHcsaCk7XG4gIGNhbWVyYS5hc3BlY3QgPSB3L2g7XG4gIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG59XG5cbmZ1bmN0aW9uIHNldHVwUmVzaXppbmcocmVuZGVyZXIsIGNhbWVyYSkge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgIGhhbmRsZVJlc2l6ZShyZW5kZXJlciwgY2FtZXJhKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFNjcmVlblZpZXcoKSB7XG4gIGxldCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICBsZXQgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwKTtcbiAgbGV0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoKTtcblxuICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuXG4gIHNldHVwUmVzaXppbmcocmVuZGVyZXIsIGNhbWVyYSk7XG5cbiAgcmV0dXJuIHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcbn1cbiJdfQ==\n"]}