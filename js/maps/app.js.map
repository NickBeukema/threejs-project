{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","_setupScreenView","setupScreenView","document","getElementById","window","addEventListener","index","getCurrentPanelIndex","spawnMinion","computer","./modules/game-engine","./modules/game-view","./modules/view","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","Base","args","this","direction","colliderList","player","playerId","id","baseWidth","baseHeight","baseDepth","maxHealth","health","hitBoxBuffer","killReward","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","THREE","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","color","specular","shininess","shapeMesh","Mesh","hitGeometry","hitMaterial","MeshBasicMaterial","transparent","opacity","hitMesh","healthBar","initializeHealthBar","hitBox","add","position","x","y","userData","object","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","name","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","geometry","computeBoundingBox","box3","boundingBox","clone","collider","THREEx","ColliderBox3","push","update","updateHealthBar","3","xPositive","xNegative","gridWidth","gridSubDiv","4","_player","_player2","_constants","GameEngine","state","colliderSystem","ColliderSystem","initializePlayers","type","players","forEach","runLoop","computeAndNotify","./constants","./player","5","GameView","setupGrid","setupLight","mouse","z","lookAt","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","lightAmbient","AmbientLight","lightSource","PointLight","set","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","PlaneGeometry","planeMaterial","plane","rotation","Math","PI","setFromCamera","planes","values","intersects","intersectObjects","panel","material","setHex","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","6","Minion","attackStrength","attackSpeed","defaultSpeed","speed","attackProperties","lastTimeStamp","attackTime","destroy","attack","startingZ","_this","otherCollider","object3d","currentTarget","random","attackProcedure","delta","attackLoop","getAttackValue","console","log","processReward","7","_minion","_minion2","_base","_base2","Player","minionId","setupGameState","spawnBase","base","minionCost","minion","minions","reward","keys","destroyBase","destroyMinion","remove","splice","findColliderIndex","./base","./minion","8","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer","body","appendChild","domElement"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvd,YAYA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GA2CvF,QAASG,GAAOC,GACdC,sBAAsBF,GACtBG,EAASC,WAAWH,GAEpBI,IAEAC,EAAQC,SAASP,OAAOM,EAAQE,MAAOF,EAAQG,QAGjD,QAASJ,KACPK,EAAUC,YAAcC,EAAWC,SAASC,MAC5CC,EAAUJ,YAAcC,EAAWC,SAASG,MAhE9C,GAAIC,GAAQhC,EAAQ,kBAEhBiC,EAAcjC,EAAQ,yBAEtBkC,EAAevB,EAAuBsB,GAEtCE,EAAYnC,EAAQ,uBAEpBoC,EAAazB,EAAuBwB,GAKpCd,EAAU,OAEVM,EAAa,OACbT,EAAW,OAGXO,EAAY,OACZK,EAAY,QAKhB,WACE,GAAIO,IAAmB,EAAIL,EAAMM,mBAC7Bf,EAAQc,EAAiBd,MACzBC,EAASa,EAAiBb,OAC1BF,EAAWe,EAAiBf,QAEhCD,IAAYE,MAAOA,EAAOC,OAAQA,EAAQF,SAAUA,GAEpDK,EAAa,GAAIO,GAAapB,QAAQO,GACtCH,EAAW,GAAIkB,GAAWtB,QAAQO,EAASM,GAE3CF,EAAYc,SAASC,eAAe,SACpCV,EAAYS,SAASC,eAAe,SAEpCC,OAAOC,iBAAiB,QAAS,WAC/B,GAAIC,GAAQzB,EAAS0B,sBACjBD,IAAS,GACXhB,EAAWC,SAASiB,YAAYF,KAIpCF,OAAOC,iBAAiB,WAAY,WAClCf,EAAWmB,SAASD,YAAY,KAGlC9B,SAmBCgC,wBAAwB,EAAEC,sBAAsB,EAAEC,iBAAiB,IAAIC,GAAG,SAASlD,EAAQU,EAAOJ,GACrG,YAQA,SAAS6C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHC,OAAOC,eAAelD,EAAS,cAC7BmD,OAAO,GAGT,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,MAI5hBiB,EAAO,WACT,QAASA,GAAKC,GACZpB,EAAgBqB,KAAMF,GAEtBE,KAAKC,UAAYF,EAAKE,UACtBD,KAAKE,aAAeH,EAAKG,aACzBF,KAAKG,OAASJ,EAAKI,OACnBH,KAAKI,SAAWJ,KAAKG,OAAOE,GAE5BL,KAAKM,UAAY,GACjBN,KAAKO,WAAa,GAClBP,KAAKQ,UAAY,GAEjBR,KAAKS,UAAY,GACjBT,KAAKU,OAASV,KAAKS,UAEnBT,KAAKW,aAAe,EAEpBX,KAAKY,YACHrD,MAAO,IACPF,MAAO,KAGT2C,KAAKa,eAAeb,KAAKC,WACzBD,KAAKc,oBAkFP,MA/EA5B,GAAaY,IACXJ,IAAK,iBACLT,MAAO,SAAwBgB,GAC7B,GAAIc,GAAgBC,UAAUhF,OAAS,GAAsBiF,SAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAExFhB,MAAKkB,QAAU,GAAIC,OAAMC,KAEzB,IAAIC,GAAgB,GAAIF,OAAMG,YAAYtB,KAAKQ,UAAWR,KAAKO,WAAYP,KAAKM,WAE5EiB,EAAgB,GAAIJ,OAAMK,mBAAoBC,MAAO,MAAUC,SAAU,QAAUC,UAAW,KAC9FC,EAAY,GAAIT,OAAMU,KAAKR,EAAeE,GAE1CO,EAAc,GAAIX,OAAMG,YAAYtB,KAAKQ,UAAYR,KAAKW,aAAcX,KAAKO,WAAaP,KAAKW,aAAcX,KAAKM,UAAYN,KAAKW,cAEnIoB,EAAc,GAAIZ,OAAMa,mBAAoBP,MAAO,MAAUQ,aAAa,EAAMC,QAASnB,IACzFoB,EAAU,GAAIhB,OAAMU,KAAKC,EAAaC,EAE1C/B,MAAKoC,UAAYpC,KAAKqC,sBACtBrC,KAAKsC,OAASH,EAEdnC,KAAKkB,QAAQqB,IAAIX,GACjB5B,KAAKkB,QAAQqB,IAAIJ,GACjBnC,KAAKkB,QAAQqB,IAAIvC,KAAKoC,WAEtBpC,KAAKkB,QAAQsB,SAASC,IAAM,GAAKzC,KAAKQ,UAAY,GAAKR,KAAKC,UAC5DD,KAAKkB,QAAQsB,SAASE,EAAI1C,KAAKO,WAAa,EAE5CP,KAAKsC,OAAOK,SAASC,OAAS5C,KAC9BA,KAAKsC,OAAOK,SAASxC,OAASH,KAAKG,UAGrCT,IAAK,sBACLT,MAAO,WACLe,KAAK6C,gBAAkB,CACvB,IAAIC,GAAwB,GAAI3B,OAAMG,YAAYtB,KAAK6C,gBAAiB,GAAK,IACzEE,EAAwB,GAAI5B,OAAMa,mBAAoBP,MAAO,QAC7DuB,EAAoB,GAAI7B,OAAMU,KAAKiB,EAAuBC,EAC9DC,GAAkBC,KAAO,eAEzB,IAAIC,GAAyB,GAAI/B,OAAMG,YAAYtB,KAAK6C,gBAAiB,IAAM,KAC3EM,EAAyB,GAAIhC,OAAMa,mBAAoBP,MAAO,WAC9D2B,EAAqB,GAAIjC,OAAMU,KAAKqB,EAAwBC,EAChEC,GAAmBH,KAAO,gBAE1B,IAAII,GAAiB,GAAIlC,OAAMC,KAM/B,OALAiC,GAAed,IAAIS,GACnBK,EAAed,IAAIa,GAEnBC,EAAeb,SAASE,EAAI1C,KAAKO,WAAa,EAEvC8C,KAGT3D,IAAK,kBACLT,MAAO,WACL,GAAIqE,GAAgBtD,KAAKU,OAASV,KAAKS,UACnC8C,IAAoB,EAAID,GAAiBtD,KAAK6C,gBAAkB,EAChEW,EAAgBxD,KAAKoC,UAAUqB,gBAAgB,gBAEnDD,GAAcE,MAAMjB,EAAIa,EACxBE,EAAchB,SAASC,EAAIc,KAG7B7D,IAAK,oBACLT,MAAO,WACLe,KAAKsC,OAAOqB,SAASC,oBACrB,IAAIC,GAAO7D,KAAKsC,OAAOqB,SAASG,YAAYC,OAC5C/D,MAAKgE,SAAW,GAAIC,QAAOC,aAAalE,KAAKsC,OAAQuB,GAErD7D,KAAKE,aAAaiE,KAAKnE,KAAKgE,aAG9BtE,IAAK,UACLT,MAAO,WACLe,KAAKgE,SAASI,SACdpE,KAAKqE,sBAIFvE,IAGThE,GAAQQ,QAAUwD,OAEZwE,GAAG,SAAS9I,EAAQU,EAAOJ,GACjC,YAEAiD,QAAOC,eAAelD,EAAS,cAC7BmD,OAAO,GAEOnD,GAAQyI,UAAY,EACpBzI,EAAQ0I,WAAa,EACrB1I,EAAQ2I,UAAY,GACnB3I,EAAQ4I,WAAa,OAEhCC,GAAG,SAASnJ,EAAQU,EAAOJ,GACjC,YAgBA,SAAS6C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAdhHC,OAAOC,eAAelD,EAAS,cAC7BmD,OAAO,GAGT,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,MAE5hB+F,EAAUpJ,EAAQ,YAElBqJ,EAIJ,SAAgCzI,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,IAJjDwI,GAElCE,EAAatJ,EAAQ,eAMrBuJ,EAAa,WACf,QAASA,GAAWhF,GAClBpB,EAAgBqB,KAAM+E,GAEtB/E,KAAKgF,SACLhF,KAAKjD,MAAQgD,EAAKhD,MAClBiD,KAAKiF,eAAiB,GAAIhB,QAAOiB,eACjClF,KAAKE,gBAELF,KAAKI,SAAW,EAEhBJ,KAAKmF,oBAkCP,MA/BAjG,GAAa6F,IACXrF,IAAK,oBACLT,MAAO,WACLe,KAAK5C,SAAW,GAAIyH,GAASvI,SAC3B8I,KAAM,QACNnF,UAAW6E,EAAWP,UACtBrE,aAAcF,KAAKE,aACnBnD,MAAOiD,KAAKjD,MACZsD,GAAIL,KAAKI,aAGXJ,KAAK1B,SAAW,GAAIuG,GAASvI,SAC3B8I,KAAM,WACNnF,UAAW6E,EAAWN,UACtBtE,aAAcF,KAAKE,aACnBnD,MAAOiD,KAAKjD,MACZsD,GAAIL,KAAKI,aAGXJ,KAAKgF,MAAMK,SAAWrF,KAAK5C,SAAU4C,KAAK1B,aAG5CoB,IAAK,WACLT,MAAO,SAAkBzC,GACvBwD,KAAKgF,MAAMK,QAAQC,QAAQ,SAAUnF,GACnC,MAAOA,GAAOoF,QAAQ/I,KAExBwD,KAAKiF,eAAeO,iBAAiBxF,KAAKE,kBAIvC6E,IAGTjJ,GAAQQ,QAAUyI,IAEfU,cAAc,EAAEC,WAAW,IAAIC,GAAG,SAASnK,EAAQU,EAAOJ,GAC7D,YAUA,SAAS6C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCARhHC,OAAOC,eAAelD,EAAS,cAC7BmD,OAAO,GAGT,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,MAE5hBiG,EAAatJ,EAAQ,eAIrBoK,EAAW,WACb,QAASA,GAAS/I,EAASM,GACzBwB,EAAgBqB,KAAM4F,GAEtB5F,KAAKjD,MAAQF,EAAQE,MACrBiD,KAAKhD,OAASH,EAAQG,OACtBgD,KAAKlD,SAAWD,EAAQC,SAExBkD,KAAK7C,WAAaA,EAElB6C,KAAK6F,YACL7F,KAAK8F,aAEL9F,KAAK+F,OAAUtD,EAAG,EAAGC,EAAG,GAExB1C,KAAKhD,OAAOwF,SAASwD,EAAI,GACzBhG,KAAKhD,OAAOwF,SAASE,EAAI,GACzB1C,KAAKhD,OAAOiJ,OAAOjG,KAAKjD,MAAMyF,UAE9BxC,KAAKkG,UAAY,GAAI/E,OAAMgF,UAC3BnG,KAAKoG,oBAAsB,KAE3BpG,KAAKqG,kBA2FP,MAxFAnH,GAAa0G,IACXlG,IAAK,aACLT,MAAO,WACL,GAAIqH,GAAe,GAAInF,OAAMoF,aAAa,SACtCC,EAAc,GAAIrF,OAAMsF,WAAW,QAEvCD,GAAYhE,SAASkE,IAAI,EAAG,EAAG,GAE/B1G,KAAKjD,MAAMwF,IAAI+D,GACftG,KAAKjD,MAAMwF,IAAIiE,MAGjB9G,IAAK,YACLT,MAAO,WACL,GAAI0H,GAAO,GAAIxF,OAAMyF,WAAW9B,EAAWL,UAAWK,EAAWJ,WACjE1E,MAAKjD,MAAMwF,IAAIoE,GAEf3G,KAAK6G,aAKL,KAAK,GAHDC,GAAchC,EAAWL,UAAYK,EAAWJ,WAChDqC,GAAQ,KAEHtL,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,GAAIuL,GAAgB,GAAI7F,OAAM8F,cAAcnC,EAAWL,UAAWqC,GAC9DI,EAAgB,GAAI/F,OAAMa,mBAAoBP,MAAO,UACrD0F,EAAQ,GAAIhG,OAAMU,KAAKmF,EAAeE,EAC1CC,GAAMC,SAAS3E,GAAK,GAAM4E,KAAKC,GAC/BH,EAAM3E,SAASwD,EAAIe,EACnBI,EAAM3E,SAASE,GAAK,GACpB1C,KAAKjD,MAAMwF,IAAI4E,GACfnH,KAAK6G,WAAWpL,GAAK0L,EAErBJ,GAAQD,MAIZpH,IAAK,yBACLT,MAAO,WACLe,KAAKkG,UAAUqB,cAAcvH,KAAK+F,MAAO/F,KAAKhD,OAC9C,IAAIwK,GAASzI,OAAO0I,OAAOzH,KAAK6G,YAC5Ba,EAAa1H,KAAKkG,UAAUyB,iBAAiBH,EAMjD,IAJAA,EAAOlC,QAAQ,SAAUsC,GACvBA,EAAMC,SAASpG,MAAMqG,OAAO,WAG1BJ,EAAW1L,OAAS,EAAG,CACzB,GAAII,GAAMsL,EAAW,GAAG9E,MAExBxG,GAAIyL,SAASpG,MAAMqG,OAAO,UAC1B9H,KAAKoG,oBAAsBhK,MAClB4D,MAAKoG,sBACdpG,KAAKoG,oBAAsB,SAI/B1G,IAAK,uBACLT,MAAO,WACL,GAAKe,KAAKoG,oBAMV,IAAK,GAFDoB,GAASzI,OAAO0I,OAAOzH,KAAK6G,YAEvBpL,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAIuE,KAAKoG,sBAAwBoB,EAAO/L,GACtC,MAAOA,MAKbiE,IAAK,kBACLT,MAAO,WACL,GAAI8G,GAAQ/F,KAAK+F,KAEjB9H,QAAOC,iBAAiB,YAAa,SAAU6J,GAC7ChC,EAAMtD,EAAIuF,MAAMC,QAAUhK,OAAOiK,WAAa,EAAI,EAClDnC,EAAMrD,EAA4C,IAAtCsF,MAAMG,QAAUlK,OAAOmK,aAAmB,OAI1D1I,IAAK,aACLT,MAAO,SAAoBzC,GACzBwD,KAAKqI,yBACLrI,KAAK7C,WAAWmL,SAAS9L,OAItBoJ,IAGT9J,GAAQQ,QAAUsJ,IAEfH,cAAc,IAAI8C,GAAG,SAAS/M,EAAQU,EAAOJ,GAChD,YAQA,SAAS6C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHC,OAAOC,eAAelD,EAAS,cAC7BmD,OAAO,GAGT,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,MAI5hB2J,EAAS,WACX,QAASA,GAAOzI,GACdpB,EAAgBqB,KAAMwI,GAEtBxI,KAAKC,UAAYF,EAAKE,UACtBD,KAAKE,aAAeH,EAAKG,aACzBF,KAAKK,GAAKN,EAAKM,GACfL,KAAKI,SAAWL,EAAKK,SACrBJ,KAAKG,OAASJ,EAAKI,OAEnBH,KAAKS,UAAY,GACjBT,KAAKU,OAASV,KAAKS,UACnBT,KAAKyI,eAAiB,EACtBzI,KAAK0I,YAAc,IACnB1I,KAAK2I,aAAe,GACpB3I,KAAK4I,MAAQ5I,KAAK2I,aAClB3I,KAAK6I,kBACHC,cAAe,KACfC,WAAY,GAGd/I,KAAKY,YACHrD,MAAO,GACPF,MAAO,IAGT2C,KAAKgJ,SAAU,EACfhJ,KAAKiJ,QAAS,EAEdjJ,KAAKa,eAAed,EAAKmJ,WACzBlJ,KAAKc,oBAuJP,MApJA5B,GAAasJ,IACX9I,IAAK,iBACLT,MAAO,SAAwBiK,GAC7B,GAAInI,GAAgBC,UAAUhF,OAAS,GAAsBiF,SAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAExFhB,MAAKkB,QAAU,GAAIC,OAAMC,KAEzB,IAAIC,GAAgB,GAAIF,OAAMG,YAAY,EAAG,EAAG,GAC5CC,EAAgB,GAAIJ,OAAMK,mBAAoBC,MAAO,MAAUC,SAAU,QAAUC,UAAW,KAC9FC,EAAY,GAAIT,OAAMU,KAAKR,EAAeE,GAE1CO,EAAc,GAAIX,OAAMG,YAAY,EAAG,EAAG,GAC1CS,EAAc,GAAIZ,OAAMa,mBAAoBP,MAAO,MAAUQ,aAAa,EAAMC,QAASnB,IACzFoB,EAAU,GAAIhB,OAAMU,KAAKC,EAAaC,EAE1C/B,MAAKoC,UAAYpC,KAAKqC,sBACtBrC,KAAKsC,OAASH,EAEdnC,KAAKkB,QAAQqB,IAAIX,GACjB5B,KAAKkB,QAAQqB,IAAIJ,GACjBnC,KAAKkB,QAAQqB,IAAIvC,KAAKoC,WAEtBpC,KAAKkB,QAAQsB,SAASwD,EAAgB,EAAZkD,EAAgB,GAC1ClJ,KAAKkB,QAAQsB,SAASC,GAAK,GAAKzC,KAAKC,UACrCD,KAAKkB,QAAQsB,SAASE,EAAI,EAE1B1C,KAAKsC,OAAOK,SAASC,OAAS5C,KAC9BA,KAAKsC,OAAOK,SAASxC,OAASH,KAAKG,UAGrCT,IAAK,sBACLT,MAAO,WACLe,KAAK6C,gBAAkB,CACvB,IAAIC,GAAwB,GAAI3B,OAAMG,YAAYtB,KAAK6C,gBAAiB,GAAK,IACzEE,EAAwB,GAAI5B,OAAMa,mBAAoBP,MAAO,QAC7DuB,EAAoB,GAAI7B,OAAMU,KAAKiB,EAAuBC,EAC9DC,GAAkBC,KAAO,eAEzB,IAAIC,GAAyB,GAAI/B,OAAMG,YAAYtB,KAAK6C,gBAAiB,IAAM,KAC3EM,EAAyB,GAAIhC,OAAMa,mBAAoBP,MAAO,WAC9D2B,EAAqB,GAAIjC,OAAMU,KAAKqB,EAAwBC,EAChEC,GAAmBH,KAAO,gBAE1B,IAAII,GAAiB,GAAIlC,OAAMC,KAM/B,OALAiC,GAAed,IAAIS,GACnBK,EAAed,IAAIa,GAEnBC,EAAeb,SAASE,EAAI,EAErBW,KAGT3D,IAAK,oBACLT,MAAO,WACL,GAAIkK,GAAQnJ,IAEZA,MAAKsC,OAAOqB,SAASC,oBACrB,IAAIC,GAAO7D,KAAKsC,OAAOqB,SAASG,YAAYC,OAC5C/D,MAAKgE,SAAW,GAAIC,QAAOC,aAAalE,KAAKsC,OAAQuB,GAErD7D,KAAKE,aAAaiE,KAAKnE,KAAKgE,UAE5BhE,KAAKgE,SAAS9F,iBAAiB,eAAgB,SAAUkL,GACnDA,EAAcC,SAAS1G,SAASxC,OAAOE,KAAO8I,EAAM/I,WAIxD+I,EAAMP,MAAQ,EACdO,EAAMF,QAAS,EACfE,EAAMG,cAAgBF,EAAcC,SAAS1G,SAASC,UAGxD5C,KAAKgE,SAAS9F,iBAAiB,iBAAkB,SAAUkL,GACzDD,EAAMP,MAAQO,EAAMR,aACpBQ,EAAMF,QAAS,EACfE,EAAMG,cAAgB,UAI1B5J,IAAK,iBACLT,MAAO,WACL,MAAOoI,MAAKkC,SAAWvJ,KAAKyI,kBAG9B/I,IAAK,kBACLT,MAAO,WACL,GAAIqE,GAAgBtD,KAAKU,OAASV,KAAKS,UACnC8C,IAAoB,EAAID,GAAiBtD,KAAK6C,gBAAkB,EAChEW,EAAgBxD,KAAKoC,UAAUqB,gBAAgB,gBAEnDD,GAAcE,MAAMjB,EAAIa,EACxBE,EAAchB,SAASC,EAAIc,KAG7B7D,IAAK,UACLT,MAAO,SAAiBzC,GACtBwD,KAAKwJ,gBAAgBhN,GACrBwD,KAAKkB,QAAQsB,SAASC,GAAKzC,KAAK4I,MAAQ5I,KAAKC,UAE7CD,KAAKgE,SAASI,SACdpE,KAAKqE,qBAGP3E,IAAK,kBACLT,MAAO,SAAyBzC,GAC9B,KAAIwD,KAAKU,QAAU,GAAnB,CAIA,GAA2C,MAAvCV,KAAK6I,iBAAiBC,eAAyB9I,KAAKiJ,OAAQ,CAC9D,GAAIQ,GAAQjN,EAAYwD,KAAK6I,iBAAiBC,aAC9C9I,MAAK6I,iBAAiBE,YAAcU,EACpCzJ,KAAK6I,iBAAiBC,cAAgBtM,EACtCwD,KAAK0J,iBACI1J,MAAKiJ,SACdjJ,KAAK6I,iBAAiBE,WAAa,EACnC/I,KAAK6I,iBAAiBC,cAAgBtM,EACtCwD,KAAK0J,aAGP1J,MAAK6I,iBAAiBC,cAAgBtM,MAGxCkD,IAAK,aACLT,MAAO,WACsB,OAAvBe,KAAKsJ,eAA0BtJ,KAAKsJ,cAAclJ,WAAaJ,KAAKI,WAGpEJ,KAAK6I,iBAAiBE,WAAa/I,KAAK0I,cAI5C1I,KAAKsJ,cAAc5I,QAAUV,KAAK2J,iBAElCC,QAAQC,IAAI7J,KAAKK,GAAIL,KAAKU,QACtBV,KAAKsJ,cAAc5I,QAAU,IAC/BV,KAAKG,OAAO2J,cAAc9J,KAAKsJ,cAAc1I,YAE7CZ,KAAKsJ,cAAcL,QAAS,EAC5BjJ,KAAKsJ,cAAcN,SAAU,EAC7BhJ,KAAKsJ,cAAgB,MAGvBtJ,KAAK6I,iBAAiBE,WAAa,EACnC/I,KAAK6I,iBAAiBC,cAAgB,WAInCN,IAGT1M,GAAQQ,QAAUkM,OAEZuB,GAAG,SAASvO,EAAQU,EAAOJ,GACjC,YAgBA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASuC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAhBhHC,OAAOC,eAAelD,EAAS,cAC7BmD,OAAO,GAGT,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI5D,GAAI,EAAGA,EAAI4D,EAAMrD,OAAQP,IAAK,CAAE,GAAI6D,GAAaD,EAAM5D,EAAI6D,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMV,OAAOC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUT,EAAac,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBN,EAAYgB,UAAWF,GAAiBC,GAAaT,EAAiBN,EAAae,GAAqBf,MAE5hBmL,EAAUxO,EAAQ,YAElByO,EAAW9N,EAAuB6N,GAElCE,EAAQ1O,EAAQ,UAEhB2O,EAAShO,EAAuB+N,GAMhCE,EAAS,WACX,QAASA,GAAOrK,GACdpB,EAAgBqB,KAAMoK,GAEtBpK,KAAKoF,KAAOrF,EAAKqF,KACjBpF,KAAKK,GAAKN,EAAKM,GACfL,KAAKC,UAAYF,EAAKE,UACtBD,KAAKE,aAAeH,EAAKG,aACzBF,KAAKjD,MAAQgD,EAAKhD,MAClBiD,KAAKqK,SAAW,EAEhBrK,KAAKsK,iBACLtK,KAAKuK,YAkGP,MA/FArL,GAAakL,IACX1K,IAAK,YACLT,MAAO,WACLe,KAAKwK,KAAO,GAAIL,GAAO7N,SACrB2D,UAAWD,KAAKC,UAChBC,aAAcF,KAAKE,aACnBC,OAAQH,OAGVA,KAAKjD,MAAMwF,IAAIvC,KAAKwK,KAAKtJ,YAG3BxB,IAAK,cACLT,MAAO,SAAqBd,GAC1B,KAAI6B,KAAKzC,OAASyC,KAAKyK,YAerB,MAAO,KAdPzK,MAAKzC,OAASyC,KAAKyK,UAEnB,IAAIC,GAAS,GAAIT,GAAS3N,SACxB+D,GAAIL,KAAKqK,WACTjK,SAAUJ,KAAKK,GACfJ,UAAWD,KAAKC,UAChBiJ,UAAW/K,EACX+B,aAAcF,KAAKE,aACnBC,OAAQH,MAGVA,MAAK2K,QAAQxG,KAAKuG,GAClB1K,KAAKjD,MAAMwF,IAAImI,EAAOxJ,YAM1BxB,IAAK,gBACLT,MAAO,SAAuB2L,GAC5B,GAAI3P,GAAI+E,IACRjB,QAAO8L,KAAKD,GAAQtF,QAAQ,SAAU5F,GACpCzE,EAAEyE,IAAQkL,EAAOlL,QAIrBA,IAAK,UACLT,MAAO,SAAiBzC,GACtB,GAAI2M,GAAQnJ,IAEZA,MAAKwK,KAAKjF,UACNvF,KAAKwK,KAAKxB,SACZhJ,KAAK8K,cAGP9K,KAAK2K,QAAQrF,QAAQ,SAAUoF,EAAQvM,GACrCuM,EAAOnF,QAAQ/I,GACXkO,EAAO1B,SACTG,EAAM4B,cAAcL,EAAQvM,QAKlCuB,IAAK,gBACLT,MAAO,SAAuByL,EAAQvM,GACpC6B,KAAKjD,MAAMiO,OAAON,EAAOxJ,SAEzBlB,KAAKE,aAAa+K,OAAOjL,KAAKkL,kBAAkBR,EAAO1G,SAAS3D,IAAK,GAErEL,KAAK2K,QAAQM,OAAO9M,EAAO,MAG7BuB,IAAK,cACLT,MAAO,WACLe,KAAKjD,MAAMiO,OAAOhL,KAAKwK,KAAKtJ,SAC5BlB,KAAKE,aAAa+K,OAAOjL,KAAKkL,kBAAkBlL,KAAKwK,KAAKxG,SAAS3D,IAAK,MAG1EX,IAAK,oBACLT,MAAO,SAA2BoB,GAGhC,IAAK,GAFDlC,IAAS,EAEJ1C,EAAI,EAAGA,EAAIuE,KAAKE,aAAalE,OAAQP,IACxCuE,KAAKE,aAAazE,GAAG4E,KAAOA,IAC9BlC,EAAQ1C,EAIZ,OAAO0C,MAGTuB,IAAK,iBACLT,MAAO,WACLe,KAAK2K,WACL3K,KAAK3C,MAAQ,EACb2C,KAAKzC,MAAQ,IACbyC,KAAKyK,WAAa,OAIfL,IAGTtO,GAAQQ,QAAU8N,IAEfe,SAAS,EAAEC,WAAW,IAAIC,GAAG,SAAS7P,EAAQU,EAAOJ,GACxD,YAMA,SAASwP,GAAaxO,EAAUE,GAC9B,GAAIuO,GAAItN,OAAOiK,WACXsD,EAAIvN,OAAOmK,WACftL,GAAS2O,QAAQF,EAAGC,GACpBxO,EAAO0O,OAASH,EAAIC,EACpBxO,EAAO2O,yBAGT,QAASC,GAAc9O,EAAUE,GAC/BiB,OAAOC,iBAAiB,SAAU,WAChCoN,EAAaxO,EAAUE,KAI3B,QAASc,KACP,GAAIf,GAAQ,GAAIoE,OAAM0K,MAClB7O,EAAS,GAAImE,OAAM2K,kBAAkB,GAAI7N,OAAOiK,WAAajK,OAAOmK,YAAa,GAAK,KACtFtL,EAAW,GAAIqE,OAAM4K,aAOzB,OALAjP,GAAS2O,QAAQxN,OAAOiK,WAAYjK,OAAOmK,aAC3CrK,SAASiO,KAAKC,YAAYnP,EAASoP,YAEnCN,EAAc9O,EAAUE,IAEfD,MAAOA,EAAOC,OAAQA,EAAQF,SAAUA,GA5BnDiC,OAAOC,eAAelD,EAAS,cAC7BmD,OAAO,IAETnD,EAAQgC,gBAAkBA,YA4Bf","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0;\n\n// Shapes\nvar cube;\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n      gameEngine.myPlayer.spawnMinion(index);\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    gameEngine.computer.spawnMinion(3);\n  });\n\n  render();\n}\n\nfunction render(timestamp) {\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI();\n\n  globals.renderer.render(globals.scene, globals.camera);\n}\n\nfunction updateUI() {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n}\n\ninit();\n\n},{\"./modules/game-engine\":4,\"./modules/game-view\":5,\"./modules/view\":8}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n  function Base(args) {\n    _classCallCheck(this, Base);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.player = args.player;\n    this.playerId = this.player.id;\n\n    this.baseWidth = 80;\n    this.baseHeight = 20;\n    this.baseDepth = 10;\n\n    this.maxHealth = 20;\n    this.health = this.maxHealth;\n\n    this.hitBoxBuffer = 2;\n\n    this.killReward = {\n      money: 550,\n      score: 1000\n    };\n\n    this.initializeView(this.direction);\n    this.registerCollision();\n  }\n\n  _createClass(Base, [{\n    key: \"initializeView\",\n    value: function initializeView(direction) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.x = (-35 - this.baseDepth / 2) * this.direction;\n      this.viewObj.position.y = this.baseHeight / 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.1, 0.1);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.09, 0.09);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = this.baseHeight + 5;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop() {\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }]);\n\n  return Base;\n}();\n\nexports.default = Base;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 70;\nvar gridSubDiv = exports.gridSubDiv = 8;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      this.state.players.forEach(function (player) {\n        return player.runLoop(timestamp);\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./constants\":3,\"./player\":7}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: 0, y: 0 };\n\n    this.camera.position.z = 50;\n    this.camera.position.y = 50;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = -30.6;\n\n      for (var i = 0; i < 8; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ color: 0x666666 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.1;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < 8; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":3}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n\n    this.maxHealth = 10;\n    this.health = this.maxHealth;\n    this.attackStrength = 3;\n    this.attackSpeed = 500;\n    this.defaultSpeed = 0.5;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.killReward = {\n      money: 15,\n      score: 10\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.initializeView(args.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n      var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, specular: 0x555555, shininess: 30 });\n      var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n      var hitGeometry = new THREE.BoxGeometry(3, 3, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n      this.hitBox = hitMesh;\n\n      this.viewObj.add(shapeMesh);\n      this.viewObj.add(hitMesh);\n      this.viewObj.add(this.healthBar);\n\n      this.viewObj.position.z = startingZ * 9 - 32;\n      this.viewObj.position.x = -35 * this.direction;\n      this.viewObj.position.y = 2;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.1, 0.1);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.09, 0.09);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = otherCollider.object3d.userData.object;\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: \"getAttackValue\",\n    value: function getAttackValue() {\n      return Math.random() * this.attackStrength;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: \"attackProcedure\",\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime += delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: \"attackLoop\",\n    value: function attackLoop() {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      if (this.attackProperties.attackTime < this.attackSpeed) {\n        return;\n      }\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      console.log(this.id, this.health);\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n\n    this.setupGameState();\n    this.spawnBase();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          playerId: this.id,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList,\n          player: this\n        });\n\n        this.minions.push(minion);\n        this.scene.add(minion.viewObj);\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this = this;\n\n      this.base.runLoop();\n      if (this.base.destroy) {\n        this.destroyBase();\n      }\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (minion.destroy) {\n          _this.destroyMinion(minion, index);\n        }\n      });\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 400;\n      this.minionCost = 20;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./base\":2,\"./minion\":6}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIiwic3JjL2pzL21vZHVsZXMvYmFzZS5qcyIsInNyYy9qcy9tb2R1bGVzL2NvbnN0YW50cy5qcyIsInNyYy9qcy9tb2R1bGVzL2dhbWUtZW5naW5lLmpzIiwic3JjL2pzL21vZHVsZXMvZ2FtZS12aWV3LmpzIiwic3JjL2pzL21vZHVsZXMvbWluaW9uLmpzIiwic3JjL2pzL21vZHVsZXMvcGxheWVyLmpzIiwic3JjL2pzL21vZHVsZXMvdmlldy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUE7QUFDQSxJQUFJLGdCQUFKOztBQUVBLElBQUksbUJBQUo7QUFBQSxJQUFnQixpQkFBaEI7O0FBRUE7QUFDQSxJQUFJLGtCQUFKO0FBQUEsSUFBZSxrQkFBZjs7QUFFQTtBQUNBLElBQUksSUFBSjs7QUFFQSxTQUFTLElBQVQsR0FBZ0I7QUFBQSx5QkFDb0IsNEJBRHBCO0FBQUEsTUFDUixLQURRLG9CQUNSLEtBRFE7QUFBQSxNQUNELE1BREMsb0JBQ0QsTUFEQztBQUFBLE1BQ08sUUFEUCxvQkFDTyxRQURQOztBQUVkLFlBQVUsRUFBRSxZQUFGLEVBQVMsY0FBVCxFQUFpQixrQkFBakIsRUFBVjs7QUFFQSxlQUFhLHlCQUFlLE9BQWYsQ0FBYjtBQUNBLGFBQVcsdUJBQWEsT0FBYixFQUFzQixVQUF0QixDQUFYOztBQUVBLGNBQVksU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQVo7QUFDQSxjQUFZLFNBQVMsY0FBVCxDQUF3QixPQUF4QixDQUFaOztBQUVBLFNBQU8sZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUMsWUFBTTtBQUNyQyxRQUFJLFFBQVEsU0FBUyxvQkFBVCxFQUFaO0FBQ0EsUUFBRyxTQUFTLENBQVosRUFBZTtBQUNiLGlCQUFXLFFBQVgsQ0FBb0IsV0FBcEIsQ0FBZ0MsS0FBaEM7QUFDRDtBQUNG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LE9BQVQsQ0FBaUIsT0FBTyxVQUF4QixFQUFvQyxPQUFPLFdBQTNDO0FBQ0EsV0FBUyxJQUFULENBQWMsV0FBZCxDQUEwQixTQUFTLFVBQW5DOztBQUVBLGdCQUFjLFFBQWQsRUFBd0IsTUFBeEI7O0FBRUEsU0FBTyxFQUFFLFlBQUYsRUFBUyxjQUFULEVBQWlCLGtCQUFqQixFQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgc2V0dXBTY3JlZW5WaWV3IH0gZnJvbSAnLi9tb2R1bGVzL3ZpZXcnO1xuaW1wb3J0IEdhbWVFbmdpbmUgZnJvbSAnLi9tb2R1bGVzL2dhbWUtZW5naW5lJztcbmltcG9ydCBHYW1lVmlldyBmcm9tICcuL21vZHVsZXMvZ2FtZS12aWV3JztcblxuLy8gR2xvYmFsc1xubGV0IGdsb2JhbHM7XG5cbmxldCBnYW1lRW5naW5lLCBnYW1lVmlldztcblxuLy8gVUkgRWxlbWVudHNcbmxldCBzY29yZVRleHQsIG1vbmV5VGV4dDtcblxuLy8gU2hhcGVzXG52YXIgY3ViZTtcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgbGV0IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfSA9IHNldHVwU2NyZWVuVmlldygpO1xuICBnbG9iYWxzID0geyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9O1xuXG4gIGdhbWVFbmdpbmUgPSBuZXcgR2FtZUVuZ2luZShnbG9iYWxzKTtcbiAgZ2FtZVZpZXcgPSBuZXcgR2FtZVZpZXcoZ2xvYmFscywgZ2FtZUVuZ2luZSk7XG5cbiAgc2NvcmVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlJyk7XG4gIG1vbmV5VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb25leScpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBsZXQgaW5kZXggPSBnYW1lVmlldy5nZXRDdXJyZW50UGFuZWxJbmRleCgpO1xuICAgIGlmKGluZGV4ID49IDApIHtcbiAgICAgIGdhbWVFbmdpbmUubXlQbGF5ZXIuc3Bhd25NaW5pb24oaW5kZXgpO1xuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKCkgPT4ge1xuICAgIGdhbWVFbmdpbmUuY29tcHV0ZXIuc3Bhd25NaW5pb24oMyk7XG4gIH0pO1xuXG4gIHJlbmRlcigpO1xufVxuXG5cbmZ1bmN0aW9uIHJlbmRlcih0aW1lc3RhbXApIHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gIGdhbWVWaWV3LnJlbmRlckxvb3AodGltZXN0YW1wKTtcblxuICB1cGRhdGVVSSgpO1xuXG4gIGdsb2JhbHMucmVuZGVyZXIucmVuZGVyKGdsb2JhbHMuc2NlbmUsIGdsb2JhbHMuY2FtZXJhKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlVUkoKSB7XG4gIHNjb3JlVGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIuc2NvcmU7XG4gIG1vbmV5VGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIubW9uZXk7XG59XG5cbmluaXQoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGFyZ3MuZGlyZWN0aW9uO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcbiAgICB0aGlzLnBsYXllcklkID0gdGhpcy5wbGF5ZXIuaWQ7XG5cbiAgICB0aGlzLmJhc2VXaWR0aCA9IDgwO1xuICAgIHRoaXMuYmFzZUhlaWdodCA9IDIwO1xuICAgIHRoaXMuYmFzZURlcHRoID0gMTA7XG5cbiAgICB0aGlzLm1heEhlYWx0aCA9IDIwO1xuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XG5cbiAgICB0aGlzLmhpdEJveEJ1ZmZlciA9IDI7XG5cbiAgICB0aGlzLmtpbGxSZXdhcmQgPSB7XG4gICAgICBtb25leTogNTUwLFxuICAgICAgc2NvcmU6IDEwMDBcbiAgICB9XG5cbiAgICB0aGlzLmluaXRpYWxpemVWaWV3KHRoaXMuZGlyZWN0aW9uKTtcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XG4gIH1cblxuICBpbml0aWFsaXplVmlldyhkaXJlY3Rpb24sIGhpdEJveE9wYWNpdHk9LjI1KSB7XG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICBsZXQgc2hhcGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcbiAgICAgIHRoaXMuYmFzZURlcHRoLFxuICAgICAgdGhpcy5iYXNlSGVpZ2h0LFxuICAgICAgdGhpcy5iYXNlV2lkdGhcbiAgICApO1xuXG4gICAgbGV0IHNoYXBlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMCwgc3BlY3VsYXI6IDB4NTU1NTU1LCBzaGluaW5lc3M6IDMwIH0pO1xuICAgIGxldCBzaGFwZU1lc2ggPSBuZXcgVEhSRUUuTWVzaChzaGFwZUdlb21ldHJ5LCBzaGFwZU1hdGVyaWFsKTtcblxuICAgIGxldCBoaXRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcbiAgICAgIHRoaXMuYmFzZURlcHRoICsgdGhpcy5oaXRCb3hCdWZmZXIsXG4gICAgICB0aGlzLmJhc2VIZWlnaHQgKyB0aGlzLmhpdEJveEJ1ZmZlcixcbiAgICAgIHRoaXMuYmFzZVdpZHRoICsgdGhpcy5oaXRCb3hCdWZmZXIgXG4gICAgKTtcblxuICAgIGxldCBoaXRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZmZmLCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogaGl0Qm94T3BhY2l0eSB9KTtcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XG5cbiAgICB0aGlzLmhlYWx0aEJhciA9IHRoaXMuaW5pdGlhbGl6ZUhlYWx0aEJhcigpO1xuICAgIHRoaXMuaGl0Qm94ID0gaGl0TWVzaDtcblxuICAgIHRoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcbiAgICB0aGlzLnZpZXdPYmouYWRkKGhpdE1lc2gpO1xuICAgIHRoaXMudmlld09iai5hZGQodGhpcy5oZWFsdGhCYXIpO1xuXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSAoLTM1IC0gKHRoaXMuYmFzZURlcHRoIC8gMikpICogdGhpcy5kaXJlY3Rpb247XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnkgPSB0aGlzLmJhc2VIZWlnaHQvMjtcblxuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLm9iamVjdCA9IHRoaXM7XG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gIH1cblxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xuICAgIHRoaXMuX2hlYWx0aEJhcldpZHRoID0gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjEsIDAuMSk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNZXNoID0gbmV3IFRIUkVFLk1lc2goZnVsbEhlYWx0aEJhckdlb21ldHJ5LCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGZ1bGxIZWFsdGhCYXJNZXNoLm5hbWUgPSBcIkZ1bGxIZWFsdGhCYXJcIjtcblxuICAgIGxldCBlbXB0eUhlYWx0aEJhckdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KHRoaXMuX2hlYWx0aEJhcldpZHRoLCAwLjA5LCAwLjA5KTtcbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4ZmYwMDAwfSk7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGVtcHR5SGVhbHRoQmFyR2VvbWV0cnksIGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwpO1xuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xuXG4gICAgbGV0IGhlYWx0aEJhckdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcbiAgICBoZWFsdGhCYXJHcm91cC5hZGQoZW1wdHlIZWFsdGhCYXJNZXNoKTtcblxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSB0aGlzLmJhc2VIZWlnaHQgKyA1O1xuXG4gICAgcmV0dXJuIGhlYWx0aEJhckdyb3VwO1xuICB9XG5cbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhcldpZHRoIC8gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xuXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XG4gIH1cblxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcbiAgICB0aGlzLmhpdEJveC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKVxuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTtcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xuXG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcbiAgfVxuXG4gIHJ1bkxvb3AoKSB7XG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZUhlYWx0aEJhcigpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgeFBvc2l0aXZlID0gMTtcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcbmV4cG9ydCBjb25zdCBncmlkV2lkdGggPSA3MDtcbmV4cG9ydCBjb25zdCBncmlkU3ViRGl2ID0gODtcbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInO1xuaW1wb3J0IHsgeFBvc2l0aXZlLCB4TmVnYXRpdmUgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIHRoaXMuc2NlbmUgPSBhcmdzLnNjZW5lO1xuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBuZXcgVEhSRUV4LkNvbGxpZGVyU3lzdGVtKCk7XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBbXTtcblxuICAgIHRoaXMucGxheWVySWQgPSAwO1xuXG4gICAgdGhpcy5pbml0aWFsaXplUGxheWVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZVBsYXllcnMoKSB7XG4gICAgdGhpcy5teVBsYXllciA9IG5ldyBQbGF5ZXIoe1xuICAgICAgdHlwZTogJ2h1bWFuJyxcbiAgICAgIGRpcmVjdGlvbjogeFBvc2l0aXZlLFxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcbiAgICAgIHNjZW5lOnRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbXB1dGVyID0gbmV3IFBsYXllcih7XG4gICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgZGlyZWN0aW9uOiB4TmVnYXRpdmUsXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICBpZDogdGhpcy5wbGF5ZXJJZCsrXG4gICAgfSk7XG5cbiAgICB0aGlzLnN0YXRlLnBsYXllcnMgPSBbIHRoaXMubXlQbGF5ZXIsIHRoaXMuY29tcHV0ZXIgXTtcbiAgfVxuXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiBwbGF5ZXIucnVuTG9vcCh0aW1lc3RhbXApKTtcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVWaWV3IHtcbiAgY29uc3RydWN0b3IoZ2xvYmFscywgZ2FtZUVuZ2luZSkge1xuICAgIHRoaXMuc2NlbmUgPSBnbG9iYWxzLnNjZW5lO1xuICAgIHRoaXMuY2FtZXJhID0gZ2xvYmFscy5jYW1lcmE7XG4gICAgdGhpcy5yZW5kZXJlciA9IGdsb2JhbHMucmVuZGVyZXI7XG5cbiAgICB0aGlzLmdhbWVFbmdpbmUgPSBnYW1lRW5naW5lO1xuXG4gICAgdGhpcy5zZXR1cEdyaWQoKTtcbiAgICB0aGlzLnNldHVwTGlnaHQoKTtcblxuICAgIHRoaXMubW91c2UgPSB7IHg6IDAsIHk6IDAgfTtcblxuICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnogPSA1MDtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gNTA7XG4gICAgdGhpcy5jYW1lcmEubG9va0F0KHRoaXMuc2NlbmUucG9zaXRpb24pO1xuXG5cbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcbiAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xuXG4gICAgdGhpcy5zZXR1cE1vdXNlRXZlbnQoKTtcbiAgfVxuXG4gIHNldHVwTGlnaHQoKSB7XG4gICAgbGV0IGxpZ2h0QW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg2NjY2NjYpO1xuICAgIGxldCBsaWdodFNvdXJjZSA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ODg4ODg4KTtcblxuICAgIGxpZ2h0U291cmNlLnBvc2l0aW9uLnNldCgzLCAzLCAzKTtcblxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0QW1iaWVudCk7XG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHRTb3VyY2UpO1xuICB9XG5cbiAgc2V0dXBHcmlkKCkge1xuICAgIHZhciBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkU3ViRGl2KTtcbiAgICB0aGlzLnNjZW5lLmFkZChncmlkKTtcblxuICAgIHRoaXMuZ3JpZFBhbmVscyA9IHt9O1xuXG4gICAgbGV0IHBhbmVsTGVuZ3RoID0gZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdjtcbiAgICBsZXQgelBvcyA9IC0zMC42O1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgdmFyIHBsYW5lR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIHBhbmVsTGVuZ3RoKTtcbiAgICAgIHZhciBwbGFuZU1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHg2NjY2NjZ9KTtcbiAgICAgIHZhciBwbGFuZSA9IG5ldyBUSFJFRS5NZXNoKHBsYW5lR2VvbWV0cnkscGxhbmVNYXRlcmlhbCk7XG4gICAgICBwbGFuZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XG4gICAgICBwbGFuZS5wb3NpdGlvbi56ID0gelBvcztcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4xO1xuICAgICAgdGhpcy5zY2VuZS5hZGQocGxhbmUpO1xuICAgICAgdGhpcy5ncmlkUGFuZWxzW2ldID0gcGxhbmU7XG5cbiAgICAgIHpQb3MgKz0gcGFuZWxMZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpIHtcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuICAgIHZhciBpbnRlcnNlY3RzID0gdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhwbGFuZXMpO1xuXG4gICAgcGxhbmVzLmZvckVhY2goKHBhbmVsKSA9PiB7XG4gICAgICBwYW5lbC5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHg2NjY2NjYpO1xuICAgIH0pO1xuXG4gICAgaWYoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgb2JqID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7XG5cbiAgICAgIG9iai5tYXRlcmlhbC5jb2xvci5zZXRIZXgoMHhmZjAwMDApO1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gb2JqO1xuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xuICAgICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcbiAgICB9XG5cbiAgfVxuXG4gIGdldEN1cnJlbnRQYW5lbEluZGV4KCkge1xuICAgIGlmKCF0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpIHsgcmV0dXJuOyB9XG5cbiAgICBsZXQgcGxhbmVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmdyaWRQYW5lbHMpO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgaWYodGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID09PSBwbGFuZXNbaV0pIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBzZXR1cE1vdXNlRXZlbnQoKSB7XG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldnQgPT4ge1xuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcbiAgICAgIG1vdXNlLnkgPSAtICggZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCApICogMiArIDE7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJMb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xuICAgIHRoaXMuZ2FtZUVuZ2luZS5nYW1lTG9vcCh0aW1lc3RhbXApO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5pb24ge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xuICAgIHRoaXMucGxheWVyID0gYXJncy5wbGF5ZXI7XG5cbiAgICB0aGlzLm1heEhlYWx0aCA9IDEwO1xuICAgIHRoaXMuaGVhbHRoID0gdGhpcy5tYXhIZWFsdGg7XG4gICAgdGhpcy5hdHRhY2tTdHJlbmd0aCA9IDM7XG4gICAgdGhpcy5hdHRhY2tTcGVlZCA9IDUwMDtcbiAgICB0aGlzLmRlZmF1bHRTcGVlZCA9IDAuNTtcbiAgICB0aGlzLnNwZWVkID0gdGhpcy5kZWZhdWx0U3BlZWQ7XG4gICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzID0ge1xuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcbiAgICAgIGF0dGFja1RpbWU6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5raWxsUmV3YXJkID0ge1xuICAgICAgbW9uZXk6IDE1LFxuICAgICAgc2NvcmU6IDEwXG4gICAgfVxuXG4gICAgdGhpcy5kZXN0cm95ID0gZmFsc2U7XG4gICAgdGhpcy5hdHRhY2sgPSBmYWxzZTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcoYXJncy5zdGFydGluZ1opO1xuICAgIHRoaXMucmVnaXN0ZXJDb2xsaXNpb24oKTtcbiAgfVxuXG4gIGluaXRpYWxpemVWaWV3KHN0YXJ0aW5nWiwgaGl0Qm94T3BhY2l0eT0uMjUpIHtcbiAgICB0aGlzLnZpZXdPYmogPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgIGxldCBzaGFwZUdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDIsMiwyKTtcbiAgICBsZXQgc2hhcGVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwLCBzcGVjdWxhcjogMHg1NTU1NTUsIHNoaW5pbmVzczogMzAgfSk7XG4gICAgbGV0IHNoYXBlTWVzaCA9IG5ldyBUSFJFRS5NZXNoKHNoYXBlR2VvbWV0cnksIHNoYXBlTWF0ZXJpYWwpO1xuXG4gICAgbGV0IGhpdEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDMsMywzKTtcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XG4gICAgbGV0IGhpdE1lc2ggPSBuZXcgVEhSRUUuTWVzaChoaXRHZW9tZXRyeSwgaGl0TWF0ZXJpYWwpO1xuXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcbiAgICB0aGlzLmhpdEJveCA9IGhpdE1lc2g7XG5cbiAgICB0aGlzLnZpZXdPYmouYWRkKHNoYXBlTWVzaCk7XG4gICAgdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcbiAgICB0aGlzLnZpZXdPYmouYWRkKHRoaXMuaGVhbHRoQmFyKTtcblxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi56ID0gKHN0YXJ0aW5nWiAqIDkpIC0gMzI7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggPSAtMzUgKiB0aGlzLmRpcmVjdGlvbjtcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueSA9IDI7XG5cbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xuICAgIHRoaXMuaGl0Qm94LnVzZXJEYXRhLnBsYXllciA9IHRoaXMucGxheWVyO1xuICB9XG5cbiAgaW5pdGlhbGl6ZUhlYWx0aEJhcigpIHtcbiAgICB0aGlzLl9oZWFsdGhCYXJXaWR0aCA9IDI7XG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4xLCAwLjEpO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmYwMH0pO1xuICAgIGxldCBmdWxsSGVhbHRoQmFyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSwgZnVsbEhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XG5cbiAgICBsZXQgZW1wdHlIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4wOSwgMC4wOSk7XG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweGZmMDAwMH0pO1xuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcbiAgICBlbXB0eUhlYWx0aEJhck1lc2gubmFtZSA9IFwiRW1wdHlIZWFsdGhCYXJcIjtcblxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgIGhlYWx0aEJhckdyb3VwLmFkZChmdWxsSGVhbHRoQmFyTWVzaCk7XG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGVtcHR5SGVhbHRoQmFyTWVzaCk7XG5cbiAgICBoZWFsdGhCYXJHcm91cC5wb3NpdGlvbi55ID0gNDtcblxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXG4gICAgbGV0IGJveDMgPSB0aGlzLmhpdEJveC5nZW9tZXRyeS5ib3VuZGluZ0JveC5jbG9uZSgpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XG5cbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5wdXNoKHRoaXMuY29sbGlkZXIpO1xuXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xuICAgICAgaWYob3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YS5wbGF5ZXIuaWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHRoaXMuc3BlZWQgPSAwO1xuICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gb3RoZXJDb2xsaWRlci5vYmplY3QzZC51c2VyRGF0YS5vYmplY3Q7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcbiAgICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcbiAgICAgIHRoaXMuYXR0YWNrID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0QXR0YWNrVmFsdWUoKSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiB0aGlzLmF0dGFja1N0cmVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlSGVhbHRoQmFyKCkge1xuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XG4gICAgbGV0IGhlYWx0aEJhck9mZnNldCA9IC0oMS1oZWFsdGhQZXJjZW50KSAqIHRoaXMuX2hlYWx0aEJhcldpZHRoIC8gMjtcbiAgICBsZXQgZnVsbEhlYWx0aEJhciA9IHRoaXMuaGVhbHRoQmFyLmdldE9iamVjdEJ5TmFtZSgnRnVsbEhlYWx0aEJhcicpO1xuXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcbiAgICBmdWxsSGVhbHRoQmFyLnBvc2l0aW9uLnggPSBoZWFsdGhCYXJPZmZzZXQ7XG4gIH1cblxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xuICAgIHRoaXMuYXR0YWNrUHJvY2VkdXJlKHRpbWVzdGFtcCk7XG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggKz0gKHRoaXMuc3BlZWQgKiB0aGlzLmRpcmVjdGlvbik7XG5cbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XG4gIH1cblxuICBhdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKSB7XG4gICAgaWYodGhpcy5oZWFsdGggPD0gMCkgeyByZXR1cm47IH1cblxuICAgIGlmKHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wICE9IG51bGwgJiYgdGhpcy5hdHRhY2spIHtcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgKz0gZGVsdGE7XG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgIHRoaXMuYXR0YWNrTG9vcCgpO1xuICAgIH0gZWxzZSBpZih0aGlzLmF0dGFjaykge1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmF0dGFja1RpbWUgPSAwO1xuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICB0aGlzLmF0dGFja0xvb3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcbiAgfVxuXG4gIGF0dGFja0xvb3AoKSB7XG4gICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsIHx8IHRoaXMuY3VycmVudFRhcmdldC5wbGF5ZXJJZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cbiAgICBpZih0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA8IHRoaXMuYXR0YWNrU3BlZWQpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcblxuICAgIGNvbnNvbGUubG9nKHRoaXMuaWQsIHRoaXMuaGVhbHRoKTtcbiAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIDw9IDApIHtcbiAgICAgIHRoaXMucGxheWVyLnByb2Nlc3NSZXdhcmQodGhpcy5jdXJyZW50VGFyZ2V0LmtpbGxSZXdhcmQpO1xuXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuYXR0YWNrID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuZGVzdHJveSA9IHRydWU7XG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID0gMDtcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IG51bGw7XG4gIH1cbn1cbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xuaW1wb3J0IEJhc2UgZnJvbSAnLi9iYXNlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIHtcblxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgdGhpcy50eXBlID0gYXJncy50eXBlO1xuICAgIHRoaXMuaWQgPSBhcmdzLmlkO1xuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XG4gICAgdGhpcy5jb2xsaWRlckxpc3QgPSBhcmdzLmNvbGxpZGVyTGlzdDtcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcbiAgICB0aGlzLm1pbmlvbklkID0gMDtcblxuICAgIHRoaXMuc2V0dXBHYW1lU3RhdGUoKTtcbiAgICB0aGlzLnNwYXduQmFzZSgpO1xuICB9XG5cbiAgc3Bhd25CYXNlKCkge1xuICAgIHRoaXMuYmFzZSA9IG5ldyBCYXNlKHtcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXG4gICAgICBjb2xsaWRlckxpc3Q6IHRoaXMuY29sbGlkZXJMaXN0LFxuICAgICAgcGxheWVyOiB0aGlzXG4gICAgfSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmJhc2Uudmlld09iaik7XG4gIH1cblxuICBzcGF3bk1pbmlvbihpbmRleCkge1xuICAgIGlmKHRoaXMubW9uZXkgPj0gdGhpcy5taW5pb25Db3N0KSB7XG4gICAgICB0aGlzLm1vbmV5IC09IHRoaXMubWluaW9uQ29zdDtcblxuICAgICAgbGV0IG1pbmlvbiA9IG5ldyBNaW5pb24oe1xuICAgICAgICBpZDogdGhpcy5taW5pb25JZCsrLFxuICAgICAgICBwbGF5ZXJJZDogdGhpcy5pZCxcbiAgICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbixcbiAgICAgICAgc3RhcnRpbmdaOiBpbmRleCxcbiAgICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcbiAgICAgICAgcGxheWVyOiB0aGlzXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5taW5pb25zLnB1c2gobWluaW9uKTtcbiAgICAgIHRoaXMuc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzc1Jld2FyZChyZXdhcmQpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgT2JqZWN0LmtleXMocmV3YXJkKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRba2V5XSArPSByZXdhcmRba2V5XTtcbiAgICB9KTtcbiAgfVxuXG4gIHJ1bkxvb3AodGltZXN0YW1wKSB7XG4gICAgdGhpcy5iYXNlLnJ1bkxvb3AoKTtcbiAgICBpZih0aGlzLmJhc2UuZGVzdHJveSkgeyB0aGlzLmRlc3Ryb3lCYXNlKCk7IH1cblxuICAgIHRoaXMubWluaW9ucy5mb3JFYWNoKChtaW5pb24sIGluZGV4KSA9PiB7XG4gICAgICBtaW5pb24ucnVuTG9vcCh0aW1lc3RhbXApO1xuICAgICAgaWYobWluaW9uLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpOyB9XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XG5cbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleChtaW5pb24uY29sbGlkZXIuaWQpLCAxKTtcblxuICAgIHRoaXMubWluaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgZGVzdHJveUJhc2UoKSB7XG4gICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xuICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KHRoaXMuYmFzZS5jb2xsaWRlci5pZCksIDEpO1xuICB9XG5cbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHRoaXMuY29sbGlkZXJMaXN0W2ldLmlkID09PSBpZCkge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgc2V0dXBHYW1lU3RhdGUoKSB7XG4gICAgdGhpcy5taW5pb25zID0gW107XG4gICAgdGhpcy5zY29yZSA9IDA7XG4gICAgdGhpcy5tb25leSA9IDQwMDtcbiAgICB0aGlzLm1pbmlvbkNvc3QgPSAyMDtcbiAgfVxufVxuIiwiZnVuY3Rpb24gaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpe1xuICBsZXQgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgcmVuZGVyZXIuc2V0U2l6ZSh3LGgpO1xuICBjYW1lcmEuYXNwZWN0ID0gdy9oO1xuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xufVxuXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xuICBsZXQgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgbGV0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XG5cbiAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcblxuICBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpO1xuXG4gIHJldHVybiB7IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyIH07XG59XG4iXX0=\n"]}