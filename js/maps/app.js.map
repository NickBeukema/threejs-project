{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","render","timestamp","delta","lastTimeStamp","fps","Math","round","requestAnimationFrame","gameView","renderLoop","updateUI","globals","renderer","scene","camera","rendererStats","update","scoreText","textContent","gameEngine","myPlayer","score","moneyText","money","fpsText","_view","_gameEngine","_gameEngine2","_gameView","_gameView2","THREEx","RendererStats","domElement","style","position","left","bottom","document","body","appendChild","_setupScreenView","setupScreenView","getElementById","window","addEventListener","index","getCurrentPanelIndex","spawnMinion","computer","./modules/game-engine","./modules/game-view","./modules/view","2","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_constants","Array","unique","this","filter","self","indexOf","AI","args","determineAIFunction","personality","player","spawnInterval","lastSpawn","poppulationLimit","opponents","canSpawn","spawnIndex","AIFunction","minions","floor","random","gridSubDiv","friendlies","startingPos","spawnPos","friendlyMap","map","m","row","startingZ","distance","getPosition","x","opponentMap","rowArray","push","decision","hasFriendlies","closestIndex","closestVal","distanceTies","forEach","val","idx","fullIdxArr","slice","gaps","arrayToUse","gridWidth","console","log","enemy","minion","spawnValue","values","./constants","3","Base","direction","colliderList","playerId","id","baseWidth","baseHeight","baseDepth","maxHealth","health","hitBoxBuffer","killReward","initializeView","registerCollision","hitBoxOpacity","arguments","undefined","viewObj","THREE","Group","shapeGeometry","BoxGeometry","shapeMaterial","MeshPhongMaterial","color","specular","shininess","shapeMesh","Mesh","hitGeometry","hitMaterial","MeshBasicMaterial","transparent","opacity","hitMesh","healthBar","initializeHealthBar","hitBox","add","y","userData","object","_healthBarLength","_healthBarWidth","fullHealthBarGeometry","fullHealthBarMaterial","fullHealthBarMesh","name","emptyHealthBarGeometry","emptyHealthBarMaterial","emptyHealthBarMesh","healthBarGroup","healthPercent","healthBarOffset","fullHealthBar","getObjectByName","scale","geometry","computeBoundingBox","box3","boundingBox","clone","collider","ColliderBox3","updateHealthBar","4","xPositive","xNegative","5","_player","_player2","_aiPlayer","_aiPlayer2","_menuScreen","GameEngine","state","colliderSystem","ColliderSystem","initializePlayers","type","playerAI","players","activateMenu","winner","pop","reset","gameOver","_this","runLoop","lost","initializeGameOver","computeAndNotify","./ai-player","./menu-screen","./player","6","planeTexture","TextureLoader","load","repeat","set","wrapS","RepeatWrapping","wrapT","GameView","setupGrid","setupLight","mouse","positionScale","z","lookAt","raycaster","Raycaster","currentHoveredPanel","setupMouseEvent","bindButtons","lightAmbient","AmbientLight","lightSource","PointLight","texturedSurfaceGeometry","PlaneGeometry","texturedSurfaceMaterial","texturedSurface","rotation","PI","grid","GridHelper","gridPanels","panelLength","zPos","planeGeometry","planeMaterial","plane","setFromCamera","planes","intersects","intersectObjects","panel","material","setHex","evt","event","clientX","innerWidth","clientY","innerHeight","checkGridIntersections","gameLoop","7","activateStartScreen","startSection","classList","restartSection","remove","activateRestartScreen","modal","closeMenu","restart","8","Minion","attackStrength","attackSpeed","defaultSpeed","speed","attackProperties","attackTime","destroy","attack","otherCollider","object3d","currentTarget","attackProcedure","attackLoop","animateAttack","getAttackValue","processReward","children","9","_minion","_minion2","_base","_base2","Player","minionId","setupGameState","spawnBase","base","minionCost","ObjectLoader","reward","keys","_this2","destroyBase","destroyMinion","splice","findColliderIndex","_this3","./base","./minion","10","handleResize","w","h","setSize","aspect","updateProjectionMatrix","setupResizing","Scene","PerspectiveCamera","WebGLRenderer"],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _view = require('./modules/view');\n\nvar _gameEngine = require('./modules/game-engine');\n\nvar _gameEngine2 = _interopRequireDefault(_gameEngine);\n\nvar _gameView = require('./modules/game-view');\n\nvar _gameView2 = _interopRequireDefault(_gameView);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Globals\nvar globals = void 0;\n\nvar gameEngine = void 0,\n    gameView = void 0;\n\n// UI Elements\nvar scoreText = void 0,\n    moneyText = void 0,\n    fpsText = void 0;\n\n// Shapes\nvar cube;\n\n// performance\nvar rendererStats = new THREEx.RendererStats();\nrendererStats.domElement.style.position = 'absolute';\nrendererStats.domElement.style.left = '0px';\nrendererStats.domElement.style.bottom = '0px';\ndocument.body.appendChild(rendererStats.domElement);\n\nfunction init() {\n  var _setupScreenView = (0, _view.setupScreenView)(),\n      scene = _setupScreenView.scene,\n      camera = _setupScreenView.camera,\n      renderer = _setupScreenView.renderer;\n\n  globals = { scene: scene, camera: camera, renderer: renderer };\n\n  gameEngine = new _gameEngine2.default(globals);\n  gameView = new _gameView2.default(globals, gameEngine);\n\n  scoreText = document.getElementById('score');\n  moneyText = document.getElementById('money');\n  fpsText = document.getElementById('fps');\n\n  window.addEventListener('click', function () {\n    var index = gameView.getCurrentPanelIndex();\n    if (index >= 0) {\n      gameEngine.myPlayer.spawnMinion(index);\n    }\n  });\n\n  window.addEventListener('keypress', function () {\n    gameEngine.computer.spawnMinion(3);\n  });\n\n  render();\n}\n\nvar lastTimeStamp = 0;\nfunction render(timestamp) {\n  var delta = timestamp - lastTimeStamp;\n  delta = delta / 1000;\n  lastTimeStamp = timestamp;\n  var fps = Math.round(1 / delta);\n  requestAnimationFrame(render);\n  gameView.renderLoop(timestamp);\n\n  updateUI(fps);\n\n  globals.renderer.render(globals.scene, globals.camera);\n  rendererStats.update(globals.renderer);\n}\n\nfunction updateUI(fps) {\n  scoreText.textContent = gameEngine.myPlayer.score;\n  moneyText.textContent = gameEngine.myPlayer.money;\n  fpsText.textContent = fps;\n}\n\ninit();\n\n},{\"./modules/game-engine\":5,\"./modules/game-view\":6,\"./modules/view\":10}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nArray.prototype.unique = function () {\n  return this.filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n};\n\nvar AI = function () {\n  function AI(args) {\n    _classCallCheck(this, AI);\n\n    this.determineAIFunction(args.personality);\n    this.player = args.player;\n    this.spawnInterval = 500;\n    this.lastSpawn = 0;\n    this.poppulationLimit = 1;\n  }\n\n  _createClass(AI, [{\n    key: \"canSpawn\",\n    value: function canSpawn(timestamp) {\n      return timestamp - this.lastSpawn > this.spawnInterval;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp, opponents) {\n      if (!this.canSpawn(timestamp)) {\n        return;\n      }\n\n      var spawnIndex = this.AIFunction(opponents, this.player.minions);\n\n      if (spawnIndex >= 0 && this.player.minions.length < this.poppulationLimit) {\n        this.player.spawnMinion(spawnIndex);\n        this.lastSpawn = timestamp;\n      }\n    }\n  }, {\n    key: \"randomAI\",\n    value: function randomAI(opponents) {\n      return Math.floor(Math.random() * _constants.gridSubDiv);\n    }\n  }, {\n    key: \"nicksAI\",\n    value: function nicksAI(opponents, friendlies) {\n      var startingPos = this.player.spawnPos;\n\n      var friendlyMap = friendlies.map(function (m) {\n        return {\n          row: m.startingZ,\n          distance: m.getPosition().x - startingPos\n        };\n      });\n\n      var opponentMap = opponents.map(function (m) {\n\n        var distance = startingPos - m.getPosition().x;\n        return {\n          row: m.startingZ,\n          distance: distance\n        };\n      });\n\n      var rowArray = [];\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        rowArray.push(i);\n      }\n\n      var decision = {\n        hasFriendlies: [],\n        closestIndex: -1,\n        closestVal: 99999,\n        distanceTies: []\n\n      };\n\n      friendlyMap.forEach(function (val, idx) {\n        decision.hasFriendlies.push(val.row);\n      });\n\n      opponentMap.forEach(function (val, idx) {\n        if (val.distance < decision.closestVal) {\n          decision.closestIndex = val.row;\n          decision.closestVal = val.distance;\n\n          if (decision.distanceTies.length > 0) {\n            decision.distanceTies.length = 0;\n          }\n        } else if (val.distance === decision.closestVal) {\n          decision.distanceTies.push(val.row);\n        }\n      });\n\n      decision.distanceTies.push(decision.closestIndex);\n      decision.hasFriendlies = decision.hasFriendlies.unique();\n\n      var fullIdxArr = rowArray.slice(0);\n\n      decision.gaps = fullIdxArr.filter(function (x) {\n        return decision.hasFriendlies.indexOf(x) < 0;\n      });\n\n      //if(friendlies.length > 3) {\n      //friendlies[2].viewObj.position.z += 1;\n      //}\n\n\n      var arrayToUse = void 0;\n      if (decision.closestVal < _constants.gridWidth / 2) {\n        arrayToUse = decision.distanceTies;\n      } else {\n        arrayToUse = decision.gaps;\n      }\n\n      console.log(decision);\n\n      var arrIdx = Math.floor(Math.random() * arrayToUse.length);\n      return arrayToUse[arrIdx];\n    }\n  }, {\n    key: \"defensiveAI\",\n    value: function defensiveAI(opponents) {\n      var map = {};\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        map[i] = 0;\n      }\n\n      opponents.forEach(function (enemy) {\n        map[enemy.startingZ]--;\n      });\n\n      this.player.minions.forEach(function (minion) {\n        map[minion.startingZ]++;\n      });\n\n      var spawnIndex = -1;\n      var spawnValue = 100000;\n      Object.values(map).forEach(function (val, index) {\n        if (val < spawnValue) {\n          spawnValue = val;\n          spawnIndex = index;\n        }\n      });\n\n      return spawnIndex;\n    }\n  }, {\n    key: \"determineAIFunction\",\n    value: function determineAIFunction(personality) {\n      if (personality) {\n        this.AIFunction = this[personality];\n      } else {\n        this.AIFunction = this[\"randomAI\"];\n      }\n    }\n  }]);\n\n  return AI;\n}();\n\nexports.default = AI;\n\n},{\"./constants\":4}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Base = function () {\n    function Base(args) {\n        _classCallCheck(this, Base);\n\n        this.direction = args.direction;\n        this.colliderList = args.colliderList;\n        this.player = args.player;\n        this.playerId = this.player.id;\n\n        this.baseWidth = _constants.gridWidth;\n        this.baseHeight = 20;\n        this.baseDepth = 10;\n\n        this.maxHealth = 5000;\n        this.health = this.maxHealth;\n\n        this.hitBoxBuffer = 2;\n\n        this.killReward = {\n            money: 550,\n            score: 1000\n        };\n\n        this.initializeView(this.direction);\n        this.registerCollision();\n    }\n\n    _createClass(Base, [{\n        key: \"initializeView\",\n        value: function initializeView(direction) {\n            var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n            this.viewObj = new THREE.Group();\n\n            var shapeGeometry = new THREE.BoxGeometry(this.baseDepth, this.baseHeight, this.baseWidth);\n\n            var shapeMaterial = new THREE.MeshPhongMaterial({ color: 0x008800, specular: 0x555555, shininess: 30 });\n            var shapeMesh = new THREE.Mesh(shapeGeometry, shapeMaterial);\n\n            var hitGeometry = new THREE.BoxGeometry(this.baseDepth + this.hitBoxBuffer, this.baseHeight + this.hitBoxBuffer, this.baseWidth + this.hitBoxBuffer);\n\n            var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n            var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n            this.healthBar = this.initializeHealthBar();\n            this.hitBox = hitMesh;\n\n            this.viewObj.add(shapeMesh);\n            this.viewObj.add(hitMesh);\n            this.viewObj.add(this.healthBar);\n\n            this.viewObj.position.x = (-_constants.gridWidth / 2 - this.baseDepth / 2) * this.direction;\n            this.viewObj.position.y = this.baseHeight / 2;\n\n            this.hitBox.userData.object = this;\n            this.hitBox.userData.player = this.player;\n        }\n    }, {\n        key: \"initializeHealthBar\",\n        value: function initializeHealthBar() {\n            this._healthBarLength = _constants.gridWidth / 10;\n            this._healthBarWidth = _constants.gridWidth / 150;\n            var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength, this._healthBarWidth, this._healthBarWidth);\n            var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n            var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n            fullHealthBarMesh.name = \"FullHealthBar\";\n\n            var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarLength * 0.99, this._healthBarWidth * 0.9, this._healthBarWidth * 0.9);\n            var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n            var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n            emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n            var healthBarGroup = new THREE.Group();\n            healthBarGroup.add(fullHealthBarMesh);\n            healthBarGroup.add(emptyHealthBarMesh);\n\n            healthBarGroup.position.y = this.baseHeight + 5;\n\n            return healthBarGroup;\n        }\n    }, {\n        key: \"updateHealthBar\",\n        value: function updateHealthBar() {\n            var healthPercent = this.health / this.maxHealth;\n            var healthBarOffset = -(1 - healthPercent) * this._healthBarLength / 2;\n            var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n            fullHealthBar.scale.x = healthPercent;\n            fullHealthBar.position.x = healthBarOffset;\n        }\n    }, {\n        key: \"registerCollision\",\n        value: function registerCollision() {\n            this.hitBox.geometry.computeBoundingBox();\n            var box3 = this.hitBox.geometry.boundingBox.clone();\n            this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n            console.log(this.colliderList);\n            this.colliderList.push(this.collider);\n        }\n    }, {\n        key: \"runLoop\",\n        value: function runLoop() {\n            this.collider.update();\n            this.updateHealthBar();\n        }\n    }]);\n\n    return Base;\n}();\n\nexports.default = Base;\n\n},{\"./constants\":4}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar xPositive = exports.xPositive = 1;\nvar xNegative = exports.xNegative = -1;\nvar gridWidth = exports.gridWidth = 64;\nvar gridSubDiv = exports.gridSubDiv = 16;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = require('./player');\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _aiPlayer = require('./ai-player');\n\nvar _aiPlayer2 = _interopRequireDefault(_aiPlayer);\n\nvar _menuScreen = require('./menu-screen');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GameEngine = function () {\n  function GameEngine(args) {\n    _classCallCheck(this, GameEngine);\n\n    this.state = {};\n    this.scene = args.scene;\n    this.camera = args.camera;\n\n    this.colliderSystem = new THREEx.ColliderSystem();\n    this.colliderList = [];\n\n    this.playerId = 0;\n\n    this.initializePlayers();\n  }\n\n  _createClass(GameEngine, [{\n    key: 'initializePlayers',\n    value: function initializePlayers() {\n      this.myPlayer = new _player2.default({\n        type: 'human',\n        direction: _constants.xPositive,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.computer = new _player2.default({\n        type: 'computer',\n        direction: _constants.xNegative,\n        colliderList: this.colliderList,\n        scene: this.scene,\n        id: this.playerId++\n      });\n\n      this.AI = new _aiPlayer2.default({\n        player: this.computer,\n        personality: \"nicksAI\"\n      });\n\n      this.playerAI = new _aiPlayer2.default({\n        player: this.myPlayer,\n        personality: \"defensiveAI\"\n      });\n\n      this.state.players = [this.myPlayer, this.computer];\n    }\n  }, {\n    key: 'initializeGameOver',\n    value: function initializeGameOver() {\n      (0, _menuScreen.activateMenu)({\n        winner: this.winner\n      });\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      while (this.colliderList.length > 0) {\n        this.colliderList.pop();\n      }\n      this.state.players.forEach(function (player) {\n        player.reset();\n      });\n      this.gameOver = false;\n    }\n  }, {\n    key: 'gameLoop',\n    value: function gameLoop(timestamp) {\n      var _this = this;\n\n      if (this.gameOver) {}\n      if (this.AI) {\n        this.AI.runLoop(timestamp, this.myPlayer.minions);\n      }\n\n      if (this.playerAI) {\n        this.playerAI.runLoop(timestamp, this.computer.minions);\n      }\n      this.state.players.forEach(function (player) {\n        player.runLoop(timestamp);\n        if (player.lost && !_this.gameOver) {\n          _this.gameOver = true;\n          _this.winner = player.id !== _this.myPlayer.id;\n          _this.initializeGameOver();\n        }\n      });\n      this.colliderSystem.computeAndNotify(this.colliderList);\n    }\n  }]);\n\n  return GameEngine;\n}();\n\nexports.default = GameEngine;\n\n},{\"./ai-player\":2,\"./constants\":4,\"./menu-screen\":7,\"./player\":9}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require('./constants');\n\nvar _menuScreen = require('./menu-screen');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar planeTexture = new THREE.TextureLoader().load(\"textures/stone.jpg\");\nplaneTexture.repeat.set(10, 10);\nplaneTexture.wrapS = THREE.RepeatWrapping;\nplaneTexture.wrapT = THREE.RepeatWrapping;\n\nvar GameView = function () {\n  function GameView(globals, gameEngine) {\n    _classCallCheck(this, GameView);\n\n    this.scene = globals.scene;\n    this.camera = globals.camera;\n    this.renderer = globals.renderer;\n\n    this.gameEngine = gameEngine;\n\n    this.setupGrid();\n    this.setupLight();\n\n    this.mouse = { x: -10000, y: 0 };\n\n    var positionScale = _constants.gridWidth / 2;\n\n    this.camera.position.z = 2 * positionScale;\n    this.camera.position.y = 1.5 * positionScale;\n    this.camera.lookAt(this.scene.position);\n\n    this.raycaster = new THREE.Raycaster();\n    this.currentHoveredPanel = null;\n\n    this.setupMouseEvent();\n    (0, _menuScreen.bindButtons)(this.gameEngine);\n  }\n\n  _createClass(GameView, [{\n    key: 'setupLight',\n    value: function setupLight() {\n      var lightAmbient = new THREE.AmbientLight(0x666666, 3);\n      var lightSource = new THREE.PointLight(0x888888);\n\n      lightSource.position.set(3, 3, 3);\n\n      this.scene.add(lightAmbient);\n      this.scene.add(lightSource);\n    }\n  }, {\n    key: 'setupGrid',\n    value: function setupGrid() {\n      var texturedSurfaceGeometry = new THREE.PlaneGeometry(_constants.gridWidth, _constants.gridWidth);\n      var texturedSurfaceMaterial = new THREE.MeshBasicMaterial({ map: planeTexture });\n      var texturedSurface = new THREE.Mesh(texturedSurfaceGeometry, texturedSurfaceMaterial);\n      texturedSurface.rotation.x = -0.5 * Math.PI;\n      texturedSurface.position.y = -0.3;\n      this.scene.add(texturedSurface);\n\n      var grid = new THREE.GridHelper(_constants.gridWidth, _constants.gridSubDiv);\n      this.scene.add(grid);\n\n      this.gridPanels = {};\n\n      var panelLength = _constants.gridWidth / _constants.gridSubDiv;\n      var zPos = (_constants.gridWidth / 2 - panelLength / 2) * -1;\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        var planeGeometry = new THREE.PlaneGeometry(_constants.gridWidth, panelLength);\n        var planeMaterial = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0 });\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        plane.rotation.x = -0.5 * Math.PI;\n        plane.position.z = zPos;\n        plane.position.y = -0.2;\n        this.scene.add(plane);\n        this.gridPanels[i] = plane;\n\n        zPos += panelLength;\n      }\n    }\n  }, {\n    key: 'checkGridIntersections',\n    value: function checkGridIntersections() {\n      this.raycaster.setFromCamera(this.mouse, this.camera);\n      var planes = Object.values(this.gridPanels);\n      var intersects = this.raycaster.intersectObjects(planes);\n\n      planes.forEach(function (panel) {\n        panel.material.color.setHex(0x666666);\n        panel.material.opacity = 0;\n      });\n\n      if (intersects.length > 0) {\n        var obj = intersects[0].object;\n\n        obj.material.color.setHex(0xff0000);\n        obj.material.opacity = .5;\n        this.currentHoveredPanel = obj;\n      } else if (this.currentHoveredPanel) {\n        this.currentHoveredPanel = null;\n      }\n    }\n  }, {\n    key: 'getCurrentPanelIndex',\n    value: function getCurrentPanelIndex() {\n      if (!this.currentHoveredPanel) {\n        return;\n      }\n\n      var planes = Object.values(this.gridPanels);\n\n      for (var i = 0; i < _constants.gridSubDiv; i++) {\n        if (this.currentHoveredPanel === planes[i]) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: 'setupMouseEvent',\n    value: function setupMouseEvent() {\n      var mouse = this.mouse;\n\n      window.addEventListener('mousemove', function (evt) {\n        mouse.x = event.clientX / window.innerWidth * 2 - 1;\n        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n      });\n    }\n  }, {\n    key: 'renderLoop',\n    value: function renderLoop(timestamp) {\n      this.checkGridIntersections();\n      this.gameEngine.gameLoop(timestamp);\n    }\n  }]);\n\n  return GameView;\n}();\n\nexports.default = GameView;\n\n},{\"./constants\":4,\"./menu-screen\":7}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.activateMenu = activateMenu;\nexports.closeMenu = closeMenu;\nexports.bindButtons = bindButtons;\nvar modal = document.getElementById('modal');\nvar startSection = document.getElementById('startModal');\nvar restartSection = document.getElementById('restartModal');\nfunction activateStartScreen() {\n  startSection.classList.add('modal--visible');\n  restartSection.classList.remove('modal--visible');\n}\n\nfunction activateRestartScreen(winner) {\n  startSection.classList.remove('modal--visible');\n  restartSection.classList.add('modal--visible');\n}\n\nfunction activateMenu(args) {\n  modal.classList.add('modal--visible');\n\n  if (args.winner !== null) {\n    activateRestartScreen(args.winner);\n  } else {\n    activateStartScreen();\n  }\n}\n\nfunction closeMenu(args) {\n  modal.classList.remove('modal--visible');\n}\n\nfunction bindButtons(gameEngine) {\n  startSection.addEventListener('click', function () {});\n\n  restartSection.addEventListener('click', function () {\n    gameEngine.restart();\n    closeMenu();\n  });\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = require(\"./constants\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Minion = function () {\n  function Minion(args) {\n    _classCallCheck(this, Minion);\n\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.id = args.id;\n    this.playerId = args.playerId;\n    this.player = args.player;\n    this.startingZ = args.startingZ;\n    this.scene = args.scene;\n\n    this.maxHealth = 10;\n    this.health = this.maxHealth;\n    this.attackStrength = 3;\n    this.attackSpeed = 400;\n\n    this.defaultSpeed = 0.3;\n    this.speed = this.defaultSpeed;\n    this.attackProperties = {\n      lastTimeStamp: null,\n      attackTime: 0\n    };\n\n    this.killReward = {\n      money: 15,\n      score: 10\n    };\n\n    this.destroy = false;\n    this.attack = false;\n\n    this.initializeView(this.startingZ);\n    this.registerCollision();\n  }\n\n  _createClass(Minion, [{\n    key: \"initializeView\",\n    value: function initializeView(startingZ) {\n      var hitBoxOpacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .25;\n\n      this.viewObj = new THREE.Group();\n\n      var hitGeometry = new THREE.BoxGeometry(3, 8, 3);\n      var hitMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, transparent: true, opacity: hitBoxOpacity });\n      var hitMesh = new THREE.Mesh(hitGeometry, hitMaterial);\n\n      this.healthBar = this.initializeHealthBar();\n\n      //this.viewObj.add(shapeMesh);\n      //this.viewObj.add(hitMesh);\n      //this.viewObj.add(this.healthBar);\n\n      hitMesh.add(this.healthBar);\n      this.viewObj = hitMesh;\n      this.hitBox = this.viewObj;\n\n      var z = startingZ * (_constants.gridWidth / _constants.gridSubDiv) - _constants.gridWidth / 2 + _constants.gridWidth / _constants.gridSubDiv / 2;\n      var x = _constants.gridWidth / 2 * -this.direction;\n      this.viewObj.position.z = z;\n      this.viewObj.position.x = x;\n      this.viewObj.position.y = 4;\n\n      this.hitBox.userData.object = this;\n      this.hitBox.userData.player = this.player;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      return this.viewObj.position;\n    }\n  }, {\n    key: \"initializeHealthBar\",\n    value: function initializeHealthBar() {\n      this._healthBarWidth = 2;\n      var fullHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.3, 0.3);\n      var fullHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });\n      var fullHealthBarMesh = new THREE.Mesh(fullHealthBarGeometry, fullHealthBarMaterial);\n      fullHealthBarMesh.name = \"FullHealthBar\";\n\n      var emptyHealthBarGeometry = new THREE.BoxGeometry(this._healthBarWidth, 0.2, 0.2);\n      var emptyHealthBarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });\n      var emptyHealthBarMesh = new THREE.Mesh(emptyHealthBarGeometry, emptyHealthBarMaterial);\n      emptyHealthBarMesh.name = \"EmptyHealthBar\";\n\n      var healthBarGroup = new THREE.Group();\n      healthBarGroup.add(fullHealthBarMesh);\n      healthBarGroup.add(emptyHealthBarMesh);\n\n      healthBarGroup.position.y = 4;\n\n      return healthBarGroup;\n    }\n  }, {\n    key: \"isObjectLoaded\",\n    value: function isObjectLoaded(obj) {\n      return obj.position.x === 0 && obj.position.y === 0 && obj.position.z === 0;\n    }\n  }, {\n    key: \"registerCollision\",\n    value: function registerCollision() {\n      var _this = this;\n\n      this.hitBox.geometry.computeBoundingBox();\n      var box3 = this.hitBox.geometry.boundingBox.clone();\n      this.collider = new THREEx.ColliderBox3(this.hitBox, box3);\n\n      this.colliderList.push(this.collider);\n\n      this.collider.addEventListener('contactEnter', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        _this.speed = 0;\n        _this.attack = true;\n        _this.currentTarget = otherCollider.object3d.userData.object;\n      });\n\n      this.collider.addEventListener('contactStay', function (otherCollider) {\n        if (otherCollider.object3d.userData.player.id === _this.playerId) {\n          return;\n        }\n\n        if (_this.currentTarget === null) {\n          _this.speed = 0;\n          _this.attack = true;\n          _this.currentTarget = otherCollider.object3d.userData.object;\n        }\n      });\n\n      this.collider.addEventListener('contactRemoved', function (otherCollider) {\n        _this.speed = _this.defaultSpeed;\n        _this.attack = false;\n        _this.currentTarget = null;\n      });\n    }\n  }, {\n    key: \"getAttackValue\",\n    value: function getAttackValue() {\n      return Math.random() * this.attackStrength;\n    }\n  }, {\n    key: \"updateHealthBar\",\n    value: function updateHealthBar() {\n      var healthPercent = this.health / this.maxHealth;\n      var healthBarOffset = -(1 - healthPercent) * this._healthBarWidth / 2;\n      var fullHealthBar = this.healthBar.getObjectByName('FullHealthBar');\n\n      fullHealthBar.scale.x = healthPercent;\n      fullHealthBar.position.x = healthBarOffset;\n    }\n  }, {\n    key: \"runLoop\",\n    value: function runLoop(timestamp) {\n\n      this.attackProcedure(timestamp);\n      this.viewObj.position.x += this.speed * this.direction;\n\n      this.collider.update();\n      this.updateHealthBar();\n    }\n  }, {\n    key: \"attackProcedure\",\n    value: function attackProcedure(timestamp) {\n      if (this.health <= 0) {\n        return;\n      }\n\n      if (this.attackProperties.lastTimeStamp != null && this.attack) {\n        var delta = timestamp - this.attackProperties.lastTimeStamp;\n        this.attackProperties.attackTime += delta;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      } else if (this.attack) {\n        this.attackProperties.attackTime = 0;\n        this.attackProperties.lastTimeStamp = timestamp;\n        this.attackLoop();\n      }\n\n      this.attackProperties.lastTimeStamp = timestamp;\n    }\n  }, {\n    key: \"attackLoop\",\n    value: function attackLoop() {\n      if (this.currentTarget === null || this.currentTarget.playerId === this.playerId) {\n        return;\n      }\n      if (this.attackProperties.attackTime < this.attackSpeed) {\n        return;\n      }\n      this.animateAttack();\n\n      this.currentTarget.health -= this.getAttackValue();\n\n      if (this.currentTarget.health <= 0) {\n        this.player.processReward(this.currentTarget.killReward);\n\n        this.currentTarget.attack = false;\n        this.currentTarget.destroy = true;\n        this.currentTarget = null;\n      }\n\n      this.attackProperties.attackTime = 0;\n      this.attackProperties.lastTimeStamp = null;\n    }\n  }, {\n    key: \"animateAttack\",\n    value: function animateAttack() {\n      console.log(this.viewObj);\n      var modelMesh = this.viewObj.children[1];\n      modelMesh.children[1].rotation.z = Math.PI * .5;\n    }\n  }]);\n\n  return Minion;\n}();\n\nexports.default = Minion;\n\n},{\"./constants\":4}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _minion = require('./minion');\n\nvar _minion2 = _interopRequireDefault(_minion);\n\nvar _base = require('./base');\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(args) {\n    _classCallCheck(this, Player);\n\n    this.type = args.type;\n    this.id = args.id;\n    this.direction = args.direction;\n    this.colliderList = args.colliderList;\n    this.scene = args.scene;\n    this.minionId = 0;\n    this.spawnPos = -_constants.gridWidth / 2 * this.direction;\n\n    this.setupGameState();\n    this.spawnBase();\n  }\n\n  _createClass(Player, [{\n    key: 'spawnBase',\n    value: function spawnBase() {\n      this.base = new _base2.default({\n        direction: this.direction,\n        colliderList: this.colliderList,\n        player: this\n      });\n\n      this.scene.add(this.base.viewObj);\n    }\n  }, {\n    key: 'spawnMinion',\n    value: function spawnMinion(index) {\n      var _this = this;\n\n      if (this.money >= this.minionCost) {\n        this.money -= this.minionCost;\n\n        var minion = new _minion2.default({\n          id: this.minionId++,\n          playerId: this.id,\n          direction: this.direction,\n          startingZ: index,\n          colliderList: this.colliderList,\n          player: this\n        });\n\n        this.minions.push(minion);\n        var shapeGeometry = new THREE.BoxGeometry(2, 2, 2);\n        var loader = new THREE.ObjectLoader();\n        loader.load('../geometry/model.json', function (obj) {\n          obj.position.y = -4;\n          minion.viewObj.add(obj);\n          _this.scene.add(minion.viewObj);\n        });\n      }\n    }\n  }, {\n    key: 'processReward',\n    value: function processReward(reward) {\n      var t = this;\n      Object.keys(reward).forEach(function (key) {\n        t[key] += reward[key];\n      });\n    }\n  }, {\n    key: 'runLoop',\n    value: function runLoop(timestamp) {\n      var _this2 = this;\n\n      if (this.base !== null) {\n        this.base.runLoop();\n        if (this.base.destroy) {\n          this.destroyBase();\n        }\n      }\n\n      this.minions.forEach(function (minion, index) {\n        minion.runLoop(timestamp);\n        if (minion.destroy) {\n          _this2.destroyMinion(minion, index);\n        }\n      });\n    }\n  }, {\n    key: 'destroyMinion',\n    value: function destroyMinion(minion, index) {\n      this.scene.remove(minion.viewObj);\n\n      this.colliderList.splice(this.findColliderIndex(minion.collider.id), 1);\n\n      this.minions.splice(index, 1);\n    }\n  }, {\n    key: 'destroyBase',\n    value: function destroyBase() {\n      this.scene.remove(this.base.viewObj);\n      this.colliderList.splice(this.findColliderIndex(this.base.collider.id), 1);\n      this.base = null;\n      this.lost = true;\n    }\n  }, {\n    key: 'findColliderIndex',\n    value: function findColliderIndex(id) {\n      var index = -1;\n\n      for (var i = 0; i < this.colliderList.length; i++) {\n        if (this.colliderList[i].id === id) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var _this3 = this;\n\n      this.minions.forEach(function (minion) {\n        _this3.scene.remove(minion.viewObj);\n      });\n\n      if (this.base) {\n        this.scene.remove(this.base.viewObj);\n        this.base = null;\n      }\n\n      this.spawnBase();\n      this.setupGameState();\n    }\n  }, {\n    key: 'setupGameState',\n    value: function setupGameState() {\n      this.minions = [];\n      this.score = 0;\n      this.money = 4000;\n      this.minionCost = 20;\n      this.lost = false;\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n},{\"./base\":3,\"./constants\":4,\"./minion\":8}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupScreenView = setupScreenView;\nfunction handleResize(renderer, camera) {\n  var w = window.innerWidth;\n  var h = window.innerHeight;\n  renderer.setSize(w, h);\n  camera.aspect = w / h;\n  camera.updateProjectionMatrix();\n}\n\nfunction setupResizing(renderer, camera) {\n  window.addEventListener('resize', function () {\n    handleResize(renderer, camera);\n  });\n}\n\nfunction setupScreenView() {\n  var scene = new THREE.Scene();\n  var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n  var renderer = new THREE.WebGLRenderer();\n\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  document.body.appendChild(renderer.domElement);\n\n  setupResizing(renderer, camera);\n\n  return { scene: scene, camera: camera, renderer: renderer };\n}\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGpzXFxhcHAuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxhaS1wbGF5ZXIuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxiYXNlLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcY29uc3RhbnRzLmpzIiwic3JjXFxqc1xcbW9kdWxlc1xcZ2FtZS1lbmdpbmUuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxnYW1lLXZpZXcuanMiLCJzcmNcXGpzXFxtb2R1bGVzXFxtZW51LXNjcmVlbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXG1pbmlvbi5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHBsYXllci5qcyIsInNyY1xcanNcXG1vZHVsZXNcXHZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0FBQ0EsSUFBSSxnQkFBSjs7QUFFQSxJQUFJLG1CQUFKO0FBQUEsSUFBZ0IsaUJBQWhCOztBQUVBO0FBQ0EsSUFBSSxrQkFBSjtBQUFBLElBQWUsa0JBQWY7QUFBQSxJQUEwQixnQkFBMUI7O0FBRUE7QUFDQSxJQUFJLElBQUo7O0FBRUE7QUFDQSxJQUFJLGdCQUFnQixJQUFJLE9BQU8sYUFBWCxFQUFwQjtBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixRQUEvQixHQUEwQyxVQUExQztBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixJQUEvQixHQUFzQyxLQUF0QztBQUNBLGNBQWMsVUFBZCxDQUF5QixLQUF6QixDQUErQixNQUEvQixHQUF3QyxLQUF4QztBQUNBLFNBQVMsSUFBVCxDQUFjLFdBQWQsQ0FBMkIsY0FBYyxVQUF6Qzs7QUFFQSxTQUFTLElBQVQsR0FBZ0I7QUFBQSx5QkFDb0IsNEJBRHBCO0FBQUEsTUFDUixLQURRLG9CQUNSLEtBRFE7QUFBQSxNQUNELE1BREMsb0JBQ0QsTUFEQztBQUFBLE1BQ08sUUFEUCxvQkFDTyxRQURQOztBQUVkLFlBQVUsRUFBRSxZQUFGLEVBQVMsY0FBVCxFQUFpQixrQkFBakIsRUFBVjs7QUFFQSxlQUFhLHlCQUFlLE9BQWYsQ0FBYjtBQUNBLGFBQVcsdUJBQWEsT0FBYixFQUFzQixVQUF0QixDQUFYOztBQUVBLGNBQVksU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQVo7QUFDQSxjQUFZLFNBQVMsY0FBVCxDQUF3QixPQUF4QixDQUFaO0FBQ0EsWUFBVSxTQUFTLGNBQVQsQ0FBd0IsS0FBeEIsQ0FBVjs7QUFFQSxTQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLFlBQU07QUFDckMsUUFBSSxRQUFRLFNBQVMsb0JBQVQsRUFBWjtBQUNBLFFBQUcsU0FBUyxDQUFaLEVBQWU7QUFDYixpQkFBVyxRQUFYLENBQW9CLFdBQXBCLENBQWdDLEtBQWhDO0FBQ0Q7QUFDRixHQUxEOztBQU9BLFNBQU8sZ0JBQVAsQ0FBd0IsVUFBeEIsRUFBb0MsWUFBTTtBQUN4QyxlQUFXLFFBQVgsQ0FBb0IsV0FBcEIsQ0FBZ0MsQ0FBaEM7QUFDRCxHQUZEOztBQUlBO0FBQ0Q7O0FBRUQsSUFBSSxnQkFBZ0IsQ0FBcEI7QUFDQSxTQUFTLE1BQVQsQ0FBZ0IsU0FBaEIsRUFBMkI7QUFDekIsTUFBSSxRQUFRLFlBQVksYUFBeEI7QUFDQSxVQUFRLFFBQVEsSUFBaEI7QUFDQSxrQkFBZ0IsU0FBaEI7QUFDQSxNQUFJLE1BQU0sS0FBSyxLQUFMLENBQVcsSUFBSSxLQUFmLENBQVY7QUFDQSx3QkFBc0IsTUFBdEI7QUFDQSxXQUFTLFVBQVQsQ0FBb0IsU0FBcEI7O0FBRUEsV0FBUyxHQUFUOztBQUVBLFVBQVEsUUFBUixDQUFpQixNQUFqQixDQUF3QixRQUFRLEtBQWhDLEVBQXVDLFFBQVEsTUFBL0M7QUFDQSxnQkFBYyxNQUFkLENBQXFCLFFBQVEsUUFBN0I7QUFDRDs7QUFFRCxTQUFTLFFBQVQsQ0FBa0IsR0FBbEIsRUFBdUI7QUFDckIsWUFBVSxXQUFWLEdBQXdCLFdBQVcsUUFBWCxDQUFvQixLQUE1QztBQUNBLFlBQVUsV0FBVixHQUF3QixXQUFXLFFBQVgsQ0FBb0IsS0FBNUM7QUFDQSxVQUFRLFdBQVIsR0FBc0IsR0FBdEI7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7QUM5REE7Ozs7QUFOQSxNQUFNLFNBQU4sQ0FBZ0IsTUFBaEIsR0FBeUIsWUFBVztBQUNsQyxTQUFPLEtBQUssTUFBTCxDQUFZLFVBQVUsS0FBVixFQUFpQixLQUFqQixFQUF3QixJQUF4QixFQUE4QjtBQUMvQyxXQUFPLEtBQUssT0FBTCxDQUFhLEtBQWIsTUFBd0IsS0FBL0I7QUFDRCxHQUZNLENBQVA7QUFHRCxDQUpEOztJQVFxQixFO0FBRW5CLGNBQVksSUFBWixFQUFrQjtBQUFBOztBQUNoQixTQUFLLG1CQUFMLENBQXlCLEtBQUssV0FBOUI7QUFDQSxTQUFLLE1BQUwsR0FBYyxLQUFLLE1BQW5CO0FBQ0EsU0FBSyxhQUFMLEdBQXFCLEdBQXJCO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLENBQWpCO0FBQ0EsU0FBSyxnQkFBTCxHQUF3QixDQUF4QjtBQUNEOzs7OzZCQUVRLFMsRUFBVztBQUNsQixhQUFPLFlBQVksS0FBSyxTQUFqQixHQUE2QixLQUFLLGFBQXpDO0FBQ0Q7Ozs0QkFFTyxTLEVBQVcsUyxFQUFXO0FBQzVCLFVBQUcsQ0FBQyxLQUFLLFFBQUwsQ0FBYyxTQUFkLENBQUosRUFBOEI7QUFBRTtBQUFTOztBQUV6QyxVQUFJLGFBQWEsS0FBSyxVQUFMLENBQWdCLFNBQWhCLEVBQTJCLEtBQUssTUFBTCxDQUFZLE9BQXZDLENBQWpCOztBQUVBLFVBQUcsY0FBYyxDQUFkLElBQW1CLEtBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsTUFBcEIsR0FBNkIsS0FBSyxnQkFBeEQsRUFBMEU7QUFDeEUsYUFBSyxNQUFMLENBQVksV0FBWixDQUF3QixVQUF4QjtBQUNBLGFBQUssU0FBTCxHQUFpQixTQUFqQjtBQUNEO0FBQ0Y7Ozs2QkFFUSxTLEVBQVc7QUFDbEIsYUFBTyxLQUFLLEtBQUwsQ0FBVyxLQUFLLE1BQUwsMEJBQVgsQ0FBUDtBQUNEOzs7NEJBRU8sUyxFQUFXLFUsRUFBWTtBQUM3QixVQUFJLGNBQWMsS0FBSyxNQUFMLENBQVksUUFBOUI7O0FBRUEsVUFBSSxjQUFjLFdBQVcsR0FBWCxDQUFlLGFBQUs7QUFDcEMsZUFBTztBQUNMLGVBQUssRUFBRSxTQURGO0FBRUwsb0JBQVUsRUFBRSxXQUFGLEdBQWdCLENBQWhCLEdBQW9CO0FBRnpCLFNBQVA7QUFJRCxPQUxpQixDQUFsQjs7QUFPQSxVQUFJLGNBQWMsVUFBVSxHQUFWLENBQWMsYUFBSzs7QUFFbkMsWUFBSSxXQUFXLGNBQWMsRUFBRSxXQUFGLEdBQWdCLENBQTdDO0FBQ0EsZUFBTztBQUNMLGVBQUssRUFBRSxTQURGO0FBRUwsb0JBQVU7QUFGTCxTQUFQO0FBSUQsT0FQaUIsQ0FBbEI7O0FBU0EsVUFBSSxXQUFXLEVBQWY7QUFDQSxXQUFJLElBQUksSUFBSSxDQUFaLEVBQWUseUJBQWYsRUFBK0IsR0FBL0IsRUFBb0M7QUFBRSxpQkFBUyxJQUFULENBQWMsQ0FBZDtBQUFtQjs7QUFFekQsVUFBSSxXQUFXO0FBQ2IsdUJBQWUsRUFERjtBQUViLHNCQUFjLENBQUMsQ0FGRjtBQUdiLG9CQUFZLEtBSEM7QUFJYixzQkFBYzs7QUFKRCxPQUFmOztBQVFBLGtCQUFZLE9BQVosQ0FBb0IsVUFBQyxHQUFELEVBQU0sR0FBTixFQUFjO0FBQ2hDLGlCQUFTLGFBQVQsQ0FBdUIsSUFBdkIsQ0FBNEIsSUFBSSxHQUFoQztBQUNELE9BRkQ7O0FBS0Esa0JBQVksT0FBWixDQUFvQixVQUFDLEdBQUQsRUFBTSxHQUFOLEVBQWM7QUFDaEMsWUFBRyxJQUFJLFFBQUosR0FBZSxTQUFTLFVBQTNCLEVBQXVDO0FBQ3JDLG1CQUFTLFlBQVQsR0FBd0IsSUFBSSxHQUE1QjtBQUNBLG1CQUFTLFVBQVQsR0FBc0IsSUFBSSxRQUExQjs7QUFFQSxjQUFHLFNBQVMsWUFBVCxDQUFzQixNQUF0QixHQUErQixDQUFsQyxFQUFxQztBQUNuQyxxQkFBUyxZQUFULENBQXNCLE1BQXRCLEdBQStCLENBQS9CO0FBQ0Q7QUFDRixTQVBELE1BT08sSUFBRyxJQUFJLFFBQUosS0FBaUIsU0FBUyxVQUE3QixFQUF5QztBQUM5QyxtQkFBUyxZQUFULENBQXNCLElBQXRCLENBQTJCLElBQUksR0FBL0I7QUFDRDtBQUNGLE9BWEQ7O0FBYUEsZUFBUyxZQUFULENBQXNCLElBQXRCLENBQTJCLFNBQVMsWUFBcEM7QUFDQSxlQUFTLGFBQVQsR0FBeUIsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQXpCOztBQUVBLFVBQUksYUFBYSxTQUFTLEtBQVQsQ0FBZSxDQUFmLENBQWpCOztBQUVBLGVBQVMsSUFBVCxHQUFnQixXQUFXLE1BQVgsQ0FBa0IsYUFBSztBQUNyQyxlQUFPLFNBQVMsYUFBVCxDQUF1QixPQUF2QixDQUErQixDQUEvQixJQUFvQyxDQUEzQztBQUNELE9BRmUsQ0FBaEI7O0FBS0E7QUFDRTtBQUNGOzs7QUFHQSxVQUFJLG1CQUFKO0FBQ0EsVUFBRyxTQUFTLFVBQVQsR0FBc0IsdUJBQVUsQ0FBbkMsRUFBc0M7QUFDcEMscUJBQWEsU0FBUyxZQUF0QjtBQUNELE9BRkQsTUFFTztBQUNMLHFCQUFhLFNBQVMsSUFBdEI7QUFDRDs7QUFFRCxjQUFRLEdBQVIsQ0FBWSxRQUFaOztBQUVBLFVBQUksU0FBUyxLQUFLLEtBQUwsQ0FBVyxLQUFLLE1BQUwsS0FBZ0IsV0FBVyxNQUF0QyxDQUFiO0FBQ0EsYUFBTyxXQUFXLE1BQVgsQ0FBUDtBQUVEOzs7Z0NBRVcsUyxFQUFXO0FBQ3JCLFVBQUksTUFBTSxFQUFWO0FBQ0EsV0FBSSxJQUFJLElBQUksQ0FBWixFQUFlLHlCQUFmLEVBQStCLEdBQS9CLEVBQW9DO0FBQ2xDLFlBQUksQ0FBSixJQUFTLENBQVQ7QUFDRDs7QUFFRCxnQkFBVSxPQUFWLENBQWtCLFVBQUMsS0FBRCxFQUFXO0FBQzNCLFlBQUksTUFBTSxTQUFWO0FBQ0QsT0FGRDs7QUFJQSxXQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLE9BQXBCLENBQTRCLFVBQUMsTUFBRCxFQUFZO0FBQ3RDLFlBQUksT0FBTyxTQUFYO0FBQ0QsT0FGRDs7QUFJQSxVQUFJLGFBQWEsQ0FBQyxDQUFsQjtBQUNBLFVBQUksYUFBYSxNQUFqQjtBQUNBLGFBQU8sTUFBUCxDQUFjLEdBQWQsRUFBbUIsT0FBbkIsQ0FBMkIsVUFBQyxHQUFELEVBQU0sS0FBTixFQUFnQjtBQUN6QyxZQUFHLE1BQU0sVUFBVCxFQUFxQjtBQUNuQix1QkFBYSxHQUFiO0FBQ0EsdUJBQWEsS0FBYjtBQUNEO0FBQ0YsT0FMRDs7QUFPQSxhQUFPLFVBQVA7QUFDRDs7O3dDQUVtQixXLEVBQWE7QUFDL0IsVUFBRyxXQUFILEVBQWdCO0FBQ2QsYUFBSyxVQUFMLEdBQWtCLEtBQUssV0FBTCxDQUFsQjtBQUNELE9BRkQsTUFFTztBQUNMLGFBQUssVUFBTCxHQUFrQixLQUFLLFVBQUwsQ0FBbEI7QUFDRDtBQUNGOzs7Ozs7a0JBMUlrQixFOzs7Ozs7Ozs7OztBQ1JyQjs7OztJQUVxQixJO0FBRW5CLGtCQUFZLElBQVosRUFBa0I7QUFBQTs7QUFDaEIsYUFBSyxTQUFMLEdBQWlCLEtBQUssU0FBdEI7QUFDQSxhQUFLLFlBQUwsR0FBb0IsS0FBSyxZQUF6QjtBQUNBLGFBQUssTUFBTCxHQUFjLEtBQUssTUFBbkI7QUFDQSxhQUFLLFFBQUwsR0FBZ0IsS0FBSyxNQUFMLENBQVksRUFBNUI7O0FBRUEsYUFBSyxTQUFMO0FBQ0EsYUFBSyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0EsYUFBSyxTQUFMLEdBQWlCLEVBQWpCOztBQUVBLGFBQUssU0FBTCxHQUFpQixJQUFqQjtBQUNBLGFBQUssTUFBTCxHQUFjLEtBQUssU0FBbkI7O0FBRUEsYUFBSyxZQUFMLEdBQW9CLENBQXBCOztBQUVBLGFBQUssVUFBTCxHQUFrQjtBQUNoQixtQkFBTyxHQURTO0FBRWhCLG1CQUFPO0FBRlMsU0FBbEI7O0FBS0EsYUFBSyxjQUFMLENBQW9CLEtBQUssU0FBekI7QUFDQSxhQUFLLGlCQUFMO0FBQ0Q7Ozs7dUNBRWMsUyxFQUE4QjtBQUFBLGdCQUFuQixhQUFtQix1RUFBTCxHQUFLOztBQUMzQyxpQkFBSyxPQUFMLEdBQWUsSUFBSSxNQUFNLEtBQVYsRUFBZjs7QUFFQSxnQkFBSSxnQkFBZ0IsSUFBSSxNQUFNLFdBQVYsQ0FDbEIsS0FBSyxTQURhLEVBRWxCLEtBQUssVUFGYSxFQUdsQixLQUFLLFNBSGEsQ0FBcEI7O0FBTUEsZ0JBQUksZ0JBQWdCLElBQUksTUFBTSxpQkFBVixDQUE0QixFQUFDLE9BQU8sUUFBUixFQUFrQixVQUFVLFFBQTVCLEVBQXNDLFdBQVcsRUFBakQsRUFBNUIsQ0FBcEI7QUFDQSxnQkFBSSxZQUFZLElBQUksTUFBTSxJQUFWLENBQWUsYUFBZixFQUE4QixhQUE5QixDQUFoQjs7QUFFQSxnQkFBSSxjQUFjLElBQUksTUFBTSxXQUFWLENBQ2hCLEtBQUssU0FBTCxHQUFpQixLQUFLLFlBRE4sRUFFaEIsS0FBSyxVQUFMLEdBQWtCLEtBQUssWUFGUCxFQUdoQixLQUFLLFNBQUwsR0FBaUIsS0FBSyxZQUhOLENBQWxCOztBQU1BLGdCQUFJLGNBQWMsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxRQUFSLEVBQWtCLGFBQWEsSUFBL0IsRUFBcUMsU0FBUyxhQUE5QyxFQUE1QixDQUFsQjtBQUNBLGdCQUFJLFVBQVUsSUFBSSxNQUFNLElBQVYsQ0FBZSxXQUFmLEVBQTRCLFdBQTVCLENBQWQ7O0FBRUEsaUJBQUssU0FBTCxHQUFpQixLQUFLLG1CQUFMLEVBQWpCO0FBQ0EsaUJBQUssTUFBTCxHQUFjLE9BQWQ7O0FBRUEsaUJBQUssT0FBTCxDQUFhLEdBQWIsQ0FBaUIsU0FBakI7QUFDQSxpQkFBSyxPQUFMLENBQWEsR0FBYixDQUFpQixPQUFqQjtBQUNBLGlCQUFLLE9BQUwsQ0FBYSxHQUFiLENBQWlCLEtBQUssU0FBdEI7O0FBRUEsaUJBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsR0FBMEIsQ0FBRSx3QkFBVyxDQUFaLEdBQWtCLEtBQUssU0FBTCxHQUFpQixDQUFwQyxJQUEwQyxLQUFLLFNBQXpFO0FBQ0EsaUJBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsR0FBMEIsS0FBSyxVQUFMLEdBQWdCLENBQTFDOztBQUVBLGlCQUFLLE1BQUwsQ0FBWSxRQUFaLENBQXFCLE1BQXJCLEdBQThCLElBQTlCO0FBQ0EsaUJBQUssTUFBTCxDQUFZLFFBQVosQ0FBcUIsTUFBckIsR0FBOEIsS0FBSyxNQUFuQztBQUNEOzs7OENBRXFCO0FBQ3BCLGlCQUFLLGdCQUFMLEdBQXdCLHVCQUFZLEVBQXBDO0FBQ0EsaUJBQUssZUFBTCxHQUF1Qix1QkFBWSxHQUFuQztBQUNBLGdCQUFJLHdCQUF3QixJQUFJLE1BQU0sV0FBVixDQUFzQixLQUFLLGdCQUEzQixFQUE2QyxLQUFLLGVBQWxELEVBQW1FLEtBQUssZUFBeEUsQ0FBNUI7QUFDQSxnQkFBSSx3QkFBd0IsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxRQUFSLEVBQTVCLENBQTVCO0FBQ0EsZ0JBQUksb0JBQW9CLElBQUksTUFBTSxJQUFWLENBQWUscUJBQWYsRUFBc0MscUJBQXRDLENBQXhCO0FBQ0EsOEJBQWtCLElBQWxCLEdBQXlCLGVBQXpCOztBQUVBLGdCQUFJLHlCQUF5QixJQUFJLE1BQU0sV0FBVixDQUFzQixLQUFLLGdCQUFMLEdBQXdCLElBQTlDLEVBQW9ELEtBQUssZUFBTCxHQUF1QixHQUEzRSxFQUFnRixLQUFLLGVBQUwsR0FBdUIsR0FBdkcsQ0FBN0I7QUFDQSxnQkFBSSx5QkFBeUIsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxRQUFSLEVBQTVCLENBQTdCO0FBQ0EsZ0JBQUkscUJBQXFCLElBQUksTUFBTSxJQUFWLENBQWUsc0JBQWYsRUFBdUMsc0JBQXZDLENBQXpCO0FBQ0EsK0JBQW1CLElBQW5CLEdBQTBCLGdCQUExQjs7QUFFQSxnQkFBSSxpQkFBaUIsSUFBSSxNQUFNLEtBQVYsRUFBckI7QUFDQSwyQkFBZSxHQUFmLENBQW1CLGlCQUFuQjtBQUNBLDJCQUFlLEdBQWYsQ0FBbUIsa0JBQW5COztBQUVBLDJCQUFlLFFBQWYsQ0FBd0IsQ0FBeEIsR0FBNEIsS0FBSyxVQUFMLEdBQWtCLENBQTlDOztBQUVBLG1CQUFPLGNBQVA7QUFDRDs7OzBDQUVpQjtBQUNoQixnQkFBSSxnQkFBZ0IsS0FBSyxNQUFMLEdBQVksS0FBSyxTQUFyQztBQUNBLGdCQUFJLGtCQUFrQixFQUFFLElBQUUsYUFBSixJQUFxQixLQUFLLGdCQUExQixHQUE2QyxDQUFuRTtBQUNBLGdCQUFJLGdCQUFnQixLQUFLLFNBQUwsQ0FBZSxlQUFmLENBQStCLGVBQS9CLENBQXBCOztBQUVBLDBCQUFjLEtBQWQsQ0FBb0IsQ0FBcEIsR0FBd0IsYUFBeEI7QUFDQSwwQkFBYyxRQUFkLENBQXVCLENBQXZCLEdBQTJCLGVBQTNCO0FBQ0Q7Ozs0Q0FFbUI7QUFDbEIsaUJBQUssTUFBTCxDQUFZLFFBQVosQ0FBcUIsa0JBQXJCO0FBQ0EsZ0JBQUksT0FBTyxLQUFLLE1BQUwsQ0FBWSxRQUFaLENBQXFCLFdBQXJCLENBQWlDLEtBQWpDLEVBQVg7QUFDQSxpQkFBSyxRQUFMLEdBQWdCLElBQUksT0FBTyxZQUFYLENBQXdCLEtBQUssTUFBN0IsRUFBcUMsSUFBckMsQ0FBaEI7O0FBRUEsb0JBQVEsR0FBUixDQUFZLEtBQUssWUFBakI7QUFDQSxpQkFBSyxZQUFMLENBQWtCLElBQWxCLENBQXVCLEtBQUssUUFBNUI7QUFDRDs7O2tDQUVTO0FBQ1IsaUJBQUssUUFBTCxDQUFjLE1BQWQ7QUFDQSxpQkFBSyxlQUFMO0FBQ0Q7Ozs7OztrQkF4R2tCLEk7Ozs7Ozs7O0FDRmQsSUFBTSxnQ0FBWSxDQUFsQjtBQUNBLElBQU0sZ0NBQVksQ0FBQyxDQUFuQjtBQUNBLElBQU0sZ0NBQVksRUFBbEI7QUFDQSxJQUFNLGtDQUFhLEVBQW5COzs7Ozs7Ozs7OztBQ0hQOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7Ozs7O0lBRXFCLFU7QUFDbkIsc0JBQVksSUFBWixFQUFrQjtBQUFBOztBQUNoQixTQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsU0FBSyxLQUFMLEdBQWEsS0FBSyxLQUFsQjtBQUNBLFNBQUssTUFBTCxHQUFjLEtBQUssTUFBbkI7O0FBRUEsU0FBSyxjQUFMLEdBQXNCLElBQUksT0FBTyxjQUFYLEVBQXRCO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLEVBQXBCOztBQUVBLFNBQUssUUFBTCxHQUFnQixDQUFoQjs7QUFFQSxTQUFLLGlCQUFMO0FBQ0Q7Ozs7d0NBRW1CO0FBQ2xCLFdBQUssUUFBTCxHQUFnQixxQkFBVztBQUN6QixjQUFNLE9BRG1CO0FBRXpCLHVDQUZ5QjtBQUd6QixzQkFBYyxLQUFLLFlBSE07QUFJekIsZUFBTSxLQUFLLEtBSmM7QUFLekIsWUFBSSxLQUFLLFFBQUw7QUFMcUIsT0FBWCxDQUFoQjs7QUFRQSxXQUFLLFFBQUwsR0FBZ0IscUJBQVc7QUFDekIsY0FBTSxVQURtQjtBQUV6Qix1Q0FGeUI7QUFHekIsc0JBQWMsS0FBSyxZQUhNO0FBSXpCLGVBQU8sS0FBSyxLQUphO0FBS3pCLFlBQUksS0FBSyxRQUFMO0FBTHFCLE9BQVgsQ0FBaEI7O0FBUUEsV0FBSyxFQUFMLEdBQVUsdUJBQU87QUFDZixnQkFBUSxLQUFLLFFBREU7QUFFZixxQkFBYTtBQUZFLE9BQVAsQ0FBVjs7QUFLQSxXQUFLLFFBQUwsR0FBZ0IsdUJBQU87QUFDckIsZ0JBQVEsS0FBSyxRQURRO0FBRXJCLHFCQUFhO0FBRlEsT0FBUCxDQUFoQjs7QUFNQSxXQUFLLEtBQUwsQ0FBVyxPQUFYLEdBQXFCLENBQUUsS0FBSyxRQUFQLEVBQWlCLEtBQUssUUFBdEIsQ0FBckI7QUFDRDs7O3lDQUVvQjtBQUNuQixvQ0FBYTtBQUNYLGdCQUFRLEtBQUs7QUFERixPQUFiO0FBR0Q7Ozs4QkFFUztBQUNSLGFBQU0sS0FBSyxZQUFMLENBQWtCLE1BQWxCLEdBQTJCLENBQWpDLEVBQW9DO0FBQ2xDLGFBQUssWUFBTCxDQUFrQixHQUFsQjtBQUNEO0FBQ0QsV0FBSyxLQUFMLENBQVcsT0FBWCxDQUFtQixPQUFuQixDQUEyQixrQkFBVTtBQUNuQyxlQUFPLEtBQVA7QUFDRCxPQUZEO0FBR0EsV0FBSyxRQUFMLEdBQWdCLEtBQWhCO0FBQ0Q7Ozs2QkFFUSxTLEVBQVc7QUFBQTs7QUFDbEIsVUFBRyxLQUFLLFFBQVIsRUFBa0IsQ0FDakI7QUFDRCxVQUFHLEtBQUssRUFBUixFQUFZO0FBQ1YsYUFBSyxFQUFMLENBQVEsT0FBUixDQUFnQixTQUFoQixFQUEyQixLQUFLLFFBQUwsQ0FBYyxPQUF6QztBQUNEOztBQUVELFVBQUcsS0FBSyxRQUFSLEVBQWtCO0FBQ2hCLGFBQUssUUFBTCxDQUFjLE9BQWQsQ0FBc0IsU0FBdEIsRUFBaUMsS0FBSyxRQUFMLENBQWMsT0FBL0M7QUFDRDtBQUNELFdBQUssS0FBTCxDQUFXLE9BQVgsQ0FBbUIsT0FBbkIsQ0FBMkIsa0JBQVU7QUFDbkMsZUFBTyxPQUFQLENBQWUsU0FBZjtBQUNBLFlBQUcsT0FBTyxJQUFQLElBQWUsQ0FBQyxNQUFLLFFBQXhCLEVBQWtDO0FBQ2hDLGdCQUFLLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxnQkFBSyxNQUFMLEdBQWMsT0FBTyxFQUFQLEtBQWMsTUFBSyxRQUFMLENBQWMsRUFBMUM7QUFDQSxnQkFBSyxrQkFBTDtBQUNEO0FBQ0YsT0FQRDtBQVFBLFdBQUssY0FBTCxDQUFvQixnQkFBcEIsQ0FBcUMsS0FBSyxZQUExQztBQUNEOzs7Ozs7a0JBaEZrQixVOzs7Ozs7Ozs7OztBQ0xyQjs7QUFDQTs7OztBQUVBLElBQU0sZUFBZSxJQUFJLE1BQU0sYUFBVixHQUEwQixJQUExQixDQUErQixvQkFBL0IsQ0FBckI7QUFDQSxhQUFhLE1BQWIsQ0FBb0IsR0FBcEIsQ0FBd0IsRUFBeEIsRUFBMkIsRUFBM0I7QUFDQSxhQUFhLEtBQWIsR0FBcUIsTUFBTSxjQUEzQjtBQUNBLGFBQWEsS0FBYixHQUFxQixNQUFNLGNBQTNCOztJQUdxQixRO0FBQ25CLG9CQUFZLE9BQVosRUFBcUIsVUFBckIsRUFBaUM7QUFBQTs7QUFDL0IsU0FBSyxLQUFMLEdBQWEsUUFBUSxLQUFyQjtBQUNBLFNBQUssTUFBTCxHQUFjLFFBQVEsTUFBdEI7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsUUFBUSxRQUF4Qjs7QUFFQSxTQUFLLFVBQUwsR0FBa0IsVUFBbEI7O0FBRUEsU0FBSyxTQUFMO0FBQ0EsU0FBSyxVQUFMOztBQUVBLFNBQUssS0FBTCxHQUFhLEVBQUUsR0FBRyxDQUFDLEtBQU4sRUFBYSxHQUFHLENBQWhCLEVBQWI7O0FBRUEsUUFBSSxnQkFBZ0IsdUJBQVksQ0FBaEM7O0FBRUEsU0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixDQUFyQixHQUF5QixJQUFJLGFBQTdCO0FBQ0EsU0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixDQUFyQixHQUF5QixNQUFNLGFBQS9CO0FBQ0EsU0FBSyxNQUFMLENBQVksTUFBWixDQUFtQixLQUFLLEtBQUwsQ0FBVyxRQUE5Qjs7QUFHQSxTQUFLLFNBQUwsR0FBaUIsSUFBSSxNQUFNLFNBQVYsRUFBakI7QUFDQSxTQUFLLG1CQUFMLEdBQTJCLElBQTNCOztBQUVBLFNBQUssZUFBTDtBQUNBLGlDQUFZLEtBQUssVUFBakI7QUFDRDs7OztpQ0FFWTtBQUNYLFVBQUksZUFBZSxJQUFJLE1BQU0sWUFBVixDQUF1QixRQUF2QixFQUFpQyxDQUFqQyxDQUFuQjtBQUNBLFVBQUksY0FBYyxJQUFJLE1BQU0sVUFBVixDQUFxQixRQUFyQixDQUFsQjs7QUFFQSxrQkFBWSxRQUFaLENBQXFCLEdBQXJCLENBQXlCLENBQXpCLEVBQTRCLENBQTVCLEVBQStCLENBQS9COztBQUVBLFdBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxZQUFmO0FBQ0EsV0FBSyxLQUFMLENBQVcsR0FBWCxDQUFlLFdBQWY7QUFDRDs7O2dDQUVXO0FBQ1YsVUFBSSwwQkFBMEIsSUFBSSxNQUFNLGFBQVYsNENBQTlCO0FBQ0EsVUFBSSwwQkFBMEIsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsS0FBSyxZQUFOLEVBQTVCLENBQTlCO0FBQ0EsVUFBSSxrQkFBa0IsSUFBSSxNQUFNLElBQVYsQ0FBZSx1QkFBZixFQUF3Qyx1QkFBeEMsQ0FBdEI7QUFDQSxzQkFBZ0IsUUFBaEIsQ0FBeUIsQ0FBekIsR0FBNkIsQ0FBQyxHQUFELEdBQU8sS0FBSyxFQUF6QztBQUNBLHNCQUFnQixRQUFoQixDQUF5QixDQUF6QixHQUE2QixDQUFDLEdBQTlCO0FBQ0EsV0FBSyxLQUFMLENBQVcsR0FBWCxDQUFlLGVBQWY7O0FBRUEsVUFBSSxPQUFPLElBQUksTUFBTSxVQUFWLDZDQUFYO0FBQ0EsV0FBSyxLQUFMLENBQVcsR0FBWCxDQUFlLElBQWY7O0FBRUEsV0FBSyxVQUFMLEdBQWtCLEVBQWxCOztBQUVBLFVBQUksY0FBYyw0Q0FBbEI7QUFDQSxVQUFJLE9BQU8sQ0FBRSx1QkFBWSxDQUFiLEdBQWtCLGNBQWMsQ0FBakMsSUFBc0MsQ0FBQyxDQUFsRDs7QUFFQSxXQUFJLElBQUksSUFBSSxDQUFaLEVBQWUseUJBQWYsRUFBK0IsR0FBL0IsRUFBb0M7QUFDbEMsWUFBSSxnQkFBZ0IsSUFBSSxNQUFNLGFBQVYsdUJBQW1DLFdBQW5DLENBQXBCO0FBQ0EsWUFBSSxnQkFBZ0IsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsYUFBYSxJQUFkLEVBQW9CLFNBQVMsQ0FBN0IsRUFBNUIsQ0FBcEI7QUFDQSxZQUFJLFFBQVEsSUFBSSxNQUFNLElBQVYsQ0FBZSxhQUFmLEVBQThCLGFBQTlCLENBQVo7QUFDQSxjQUFNLFFBQU4sQ0FBZSxDQUFmLEdBQW1CLENBQUMsR0FBRCxHQUFPLEtBQUssRUFBL0I7QUFDQSxjQUFNLFFBQU4sQ0FBZSxDQUFmLEdBQW1CLElBQW5CO0FBQ0EsY0FBTSxRQUFOLENBQWUsQ0FBZixHQUFtQixDQUFDLEdBQXBCO0FBQ0EsYUFBSyxLQUFMLENBQVcsR0FBWCxDQUFlLEtBQWY7QUFDQSxhQUFLLFVBQUwsQ0FBZ0IsQ0FBaEIsSUFBcUIsS0FBckI7O0FBRUEsZ0JBQVEsV0FBUjtBQUNEO0FBQ0Y7Ozs2Q0FFd0I7QUFDdkIsV0FBSyxTQUFMLENBQWUsYUFBZixDQUE2QixLQUFLLEtBQWxDLEVBQXlDLEtBQUssTUFBOUM7QUFDQSxVQUFJLFNBQVMsT0FBTyxNQUFQLENBQWMsS0FBSyxVQUFuQixDQUFiO0FBQ0EsVUFBSSxhQUFhLEtBQUssU0FBTCxDQUFlLGdCQUFmLENBQWdDLE1BQWhDLENBQWpCOztBQUVBLGFBQU8sT0FBUCxDQUFlLFVBQUMsS0FBRCxFQUFXO0FBQ3hCLGNBQU0sUUFBTixDQUFlLEtBQWYsQ0FBcUIsTUFBckIsQ0FBNEIsUUFBNUI7QUFDQSxjQUFNLFFBQU4sQ0FBZSxPQUFmLEdBQXlCLENBQXpCO0FBQ0QsT0FIRDs7QUFLQSxVQUFHLFdBQVcsTUFBWCxHQUFvQixDQUF2QixFQUEwQjtBQUN4QixZQUFJLE1BQU0sV0FBVyxDQUFYLEVBQWMsTUFBeEI7O0FBRUEsWUFBSSxRQUFKLENBQWEsS0FBYixDQUFtQixNQUFuQixDQUEwQixRQUExQjtBQUNBLFlBQUksUUFBSixDQUFhLE9BQWIsR0FBdUIsRUFBdkI7QUFDQSxhQUFLLG1CQUFMLEdBQTJCLEdBQTNCO0FBQ0QsT0FORCxNQU1PLElBQUcsS0FBSyxtQkFBUixFQUE0QjtBQUNqQyxhQUFLLG1CQUFMLEdBQTJCLElBQTNCO0FBQ0Q7QUFDRjs7OzJDQUVzQjtBQUNyQixVQUFHLENBQUMsS0FBSyxtQkFBVCxFQUE4QjtBQUFFO0FBQVM7O0FBRXpDLFVBQUksU0FBUyxPQUFPLE1BQVAsQ0FBYyxLQUFLLFVBQW5CLENBQWI7O0FBRUEsV0FBSSxJQUFJLElBQUksQ0FBWixFQUFlLHlCQUFmLEVBQStCLEdBQS9CLEVBQW9DO0FBQ2xDLFlBQUcsS0FBSyxtQkFBTCxLQUE2QixPQUFPLENBQVAsQ0FBaEMsRUFBMkM7QUFDekMsaUJBQU8sQ0FBUDtBQUNEO0FBQ0Y7QUFFRjs7O3NDQUVpQjtBQUNoQixVQUFJLFFBQVEsS0FBSyxLQUFqQjs7QUFFQSxhQUFPLGdCQUFQLENBQXdCLFdBQXhCLEVBQXFDLGVBQU87QUFDMUMsY0FBTSxDQUFOLEdBQVksTUFBTSxPQUFOLEdBQWdCLE9BQU8sVUFBekIsR0FBd0MsQ0FBeEMsR0FBNEMsQ0FBdEQ7QUFDQSxjQUFNLENBQU4sR0FBVSxFQUFJLE1BQU0sT0FBTixHQUFnQixPQUFPLFdBQTNCLElBQTJDLENBQTNDLEdBQStDLENBQXpEO0FBQ0QsT0FIRDtBQUlEOzs7K0JBRVUsUyxFQUFXO0FBQ3BCLFdBQUssc0JBQUw7QUFDQSxXQUFLLFVBQUwsQ0FBZ0IsUUFBaEIsQ0FBeUIsU0FBekI7QUFDRDs7Ozs7O2tCQWpIa0IsUTs7Ozs7Ozs7UUNJTCxZLEdBQUEsWTtRQVVBLFMsR0FBQSxTO1FBSUEsVyxHQUFBLFc7QUEzQmhCLElBQUksUUFBUSxTQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBWjtBQUNBLElBQUksZUFBZSxTQUFTLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBbkI7QUFDQSxJQUFJLGlCQUFpQixTQUFTLGNBQVQsQ0FBd0IsY0FBeEIsQ0FBckI7QUFDQSxTQUFTLG1CQUFULEdBQStCO0FBQzdCLGVBQWEsU0FBYixDQUF1QixHQUF2QixDQUEyQixnQkFBM0I7QUFDQSxpQkFBZSxTQUFmLENBQXlCLE1BQXpCLENBQWdDLGdCQUFoQztBQUNEOztBQUVELFNBQVMscUJBQVQsQ0FBK0IsTUFBL0IsRUFBdUM7QUFDckMsZUFBYSxTQUFiLENBQXVCLE1BQXZCLENBQThCLGdCQUE5QjtBQUNBLGlCQUFlLFNBQWYsQ0FBeUIsR0FBekIsQ0FBNkIsZ0JBQTdCO0FBQ0Q7O0FBRU0sU0FBUyxZQUFULENBQXNCLElBQXRCLEVBQTRCO0FBQ2pDLFFBQU0sU0FBTixDQUFnQixHQUFoQixDQUFvQixnQkFBcEI7O0FBRUEsTUFBRyxLQUFLLE1BQUwsS0FBZ0IsSUFBbkIsRUFBeUI7QUFDdkIsMEJBQXNCLEtBQUssTUFBM0I7QUFDRCxHQUZELE1BRU87QUFDTDtBQUNEO0FBQ0Y7O0FBRU0sU0FBUyxTQUFULENBQW1CLElBQW5CLEVBQXlCO0FBQzlCLFFBQU0sU0FBTixDQUFnQixNQUFoQixDQUF1QixnQkFBdkI7QUFDRDs7QUFFTSxTQUFTLFdBQVQsQ0FBcUIsVUFBckIsRUFBaUM7QUFDdEMsZUFBYSxnQkFBYixDQUE4QixPQUE5QixFQUF1QyxZQUFNLENBRTVDLENBRkQ7O0FBSUEsaUJBQWUsZ0JBQWYsQ0FBZ0MsT0FBaEMsRUFBeUMsWUFBTTtBQUM3QyxlQUFXLE9BQVg7QUFDQTtBQUNELEdBSEQ7QUFJRDs7Ozs7Ozs7Ozs7QUNwQ0Q7Ozs7SUFFcUIsTTtBQUNuQixrQkFBWSxJQUFaLEVBQWtCO0FBQUE7O0FBQ2hCLFNBQUssU0FBTCxHQUFpQixLQUFLLFNBQXRCO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLEtBQUssWUFBekI7QUFDQSxTQUFLLEVBQUwsR0FBVSxLQUFLLEVBQWY7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsS0FBSyxRQUFyQjtBQUNBLFNBQUssTUFBTCxHQUFjLEtBQUssTUFBbkI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsS0FBSyxTQUF0QjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQUssS0FBbEI7O0FBRUEsU0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBSyxNQUFMLEdBQWMsS0FBSyxTQUFuQjtBQUNBLFNBQUssY0FBTCxHQUFzQixDQUF0QjtBQUNBLFNBQUssV0FBTCxHQUFtQixHQUFuQjs7QUFFQSxTQUFLLFlBQUwsR0FBb0IsR0FBcEI7QUFDQSxTQUFLLEtBQUwsR0FBYSxLQUFLLFlBQWxCO0FBQ0EsU0FBSyxnQkFBTCxHQUF3QjtBQUN0QixxQkFBZSxJQURPO0FBRXRCLGtCQUFZO0FBRlUsS0FBeEI7O0FBS0EsU0FBSyxVQUFMLEdBQWtCO0FBQ2hCLGFBQU8sRUFEUztBQUVoQixhQUFPO0FBRlMsS0FBbEI7O0FBS0EsU0FBSyxPQUFMLEdBQWUsS0FBZjtBQUNBLFNBQUssTUFBTCxHQUFjLEtBQWQ7O0FBRUEsU0FBSyxjQUFMLENBQW9CLEtBQUssU0FBekI7QUFDQSxTQUFLLGlCQUFMO0FBQ0Q7Ozs7bUNBRWMsUyxFQUE4QjtBQUFBLFVBQW5CLGFBQW1CLHVFQUFMLEdBQUs7O0FBQzNDLFdBQUssT0FBTCxHQUFlLElBQUksTUFBTSxLQUFWLEVBQWY7O0FBRUEsVUFBSSxjQUFjLElBQUksTUFBTSxXQUFWLENBQXNCLENBQXRCLEVBQXdCLENBQXhCLEVBQTBCLENBQTFCLENBQWxCO0FBQ0EsVUFBSSxjQUFjLElBQUksTUFBTSxpQkFBVixDQUE0QixFQUFDLE9BQU8sUUFBUixFQUFrQixhQUFhLElBQS9CLEVBQXFDLFNBQVMsYUFBOUMsRUFBNUIsQ0FBbEI7QUFDQSxVQUFJLFVBQVUsSUFBSSxNQUFNLElBQVYsQ0FBZSxXQUFmLEVBQTRCLFdBQTVCLENBQWQ7O0FBRUEsV0FBSyxTQUFMLEdBQWlCLEtBQUssbUJBQUwsRUFBakI7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGNBQVEsR0FBUixDQUFZLEtBQUssU0FBakI7QUFDQSxXQUFLLE9BQUwsR0FBZSxPQUFmO0FBQ0EsV0FBSyxNQUFMLEdBQWMsS0FBSyxPQUFuQjs7QUFFQSxVQUFJLElBQU0sYUFBYSw0Q0FBYixDQUFELEdBQTBDLHVCQUFZLENBQXZELEdBQThELCtDQUF5QixDQUEvRjtBQUNBLFVBQUksSUFBSyx1QkFBWSxDQUFiLEdBQWtCLENBQUMsS0FBSyxTQUFoQztBQUNBLFdBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsR0FBMEIsQ0FBMUI7QUFDQSxXQUFLLE9BQUwsQ0FBYSxRQUFiLENBQXNCLENBQXRCLEdBQTBCLENBQTFCO0FBQ0EsV0FBSyxPQUFMLENBQWEsUUFBYixDQUFzQixDQUF0QixHQUEwQixDQUExQjs7QUFFQSxXQUFLLE1BQUwsQ0FBWSxRQUFaLENBQXFCLE1BQXJCLEdBQThCLElBQTlCO0FBQ0EsV0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixNQUFyQixHQUE4QixLQUFLLE1BQW5DO0FBQ0Q7OztrQ0FFYTtBQUNaLGFBQU8sS0FBSyxPQUFMLENBQWEsUUFBcEI7QUFDRDs7OzBDQUVxQjtBQUNwQixXQUFLLGVBQUwsR0FBdUIsQ0FBdkI7QUFDQSxVQUFJLHdCQUF3QixJQUFJLE1BQU0sV0FBVixDQUFzQixLQUFLLGVBQTNCLEVBQTRDLEdBQTVDLEVBQWlELEdBQWpELENBQTVCO0FBQ0EsVUFBSSx3QkFBd0IsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxRQUFSLEVBQTVCLENBQTVCO0FBQ0EsVUFBSSxvQkFBb0IsSUFBSSxNQUFNLElBQVYsQ0FBZSxxQkFBZixFQUFzQyxxQkFBdEMsQ0FBeEI7QUFDQSx3QkFBa0IsSUFBbEIsR0FBeUIsZUFBekI7O0FBRUEsVUFBSSx5QkFBeUIsSUFBSSxNQUFNLFdBQVYsQ0FBc0IsS0FBSyxlQUEzQixFQUE0QyxHQUE1QyxFQUFpRCxHQUFqRCxDQUE3QjtBQUNBLFVBQUkseUJBQXlCLElBQUksTUFBTSxpQkFBVixDQUE0QixFQUFDLE9BQU8sUUFBUixFQUE1QixDQUE3QjtBQUNBLFVBQUkscUJBQXFCLElBQUksTUFBTSxJQUFWLENBQWUsc0JBQWYsRUFBdUMsc0JBQXZDLENBQXpCO0FBQ0EseUJBQW1CLElBQW5CLEdBQTBCLGdCQUExQjs7QUFFQSxVQUFJLGlCQUFpQixJQUFJLE1BQU0sS0FBVixFQUFyQjtBQUNBLHFCQUFlLEdBQWYsQ0FBbUIsaUJBQW5CO0FBQ0EscUJBQWUsR0FBZixDQUFtQixrQkFBbkI7O0FBRUEscUJBQWUsUUFBZixDQUF3QixDQUF4QixHQUE0QixDQUE1Qjs7QUFFQSxhQUFPLGNBQVA7QUFDRDs7O21DQUVjLEcsRUFBSztBQUNsQixhQUFRLElBQUksUUFBSixDQUFhLENBQWIsS0FBbUIsQ0FBbkIsSUFBd0IsSUFBSSxRQUFKLENBQWEsQ0FBYixLQUFtQixDQUEzQyxJQUFnRCxJQUFJLFFBQUosQ0FBYSxDQUFiLEtBQW1CLENBQTNFO0FBQ0Q7Ozt3Q0FFbUI7QUFBQTs7QUFDbEIsV0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixrQkFBckI7QUFDQSxVQUFJLE9BQU8sS0FBSyxNQUFMLENBQVksUUFBWixDQUFxQixXQUFyQixDQUFpQyxLQUFqQyxFQUFYO0FBQ0EsV0FBSyxRQUFMLEdBQWdCLElBQUksT0FBTyxZQUFYLENBQXdCLEtBQUssTUFBN0IsRUFBcUMsSUFBckMsQ0FBaEI7O0FBRUEsV0FBSyxZQUFMLENBQWtCLElBQWxCLENBQXVCLEtBQUssUUFBNUI7O0FBRUEsV0FBSyxRQUFMLENBQWMsZ0JBQWQsQ0FBK0IsY0FBL0IsRUFBK0MsVUFBQyxhQUFELEVBQW1CO0FBQ2hFLFlBQUcsY0FBYyxRQUFkLENBQXVCLFFBQXZCLENBQWdDLE1BQWhDLENBQXVDLEVBQXZDLEtBQThDLE1BQUssUUFBdEQsRUFBZ0U7QUFBRTtBQUFTOztBQUUzRSxjQUFLLEtBQUwsR0FBYSxDQUFiO0FBQ0EsY0FBSyxNQUFMLEdBQWMsSUFBZDtBQUNBLGNBQUssYUFBTCxHQUFxQixjQUFjLFFBQWQsQ0FBdUIsUUFBdkIsQ0FBZ0MsTUFBckQ7QUFDRCxPQU5EOztBQVFBLFdBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLGFBQS9CLEVBQThDLFVBQUMsYUFBRCxFQUFtQjtBQUMvRCxZQUFHLGNBQWMsUUFBZCxDQUF1QixRQUF2QixDQUFnQyxNQUFoQyxDQUF1QyxFQUF2QyxLQUE4QyxNQUFLLFFBQXRELEVBQWdFO0FBQUU7QUFBUzs7QUFFM0UsWUFBRyxNQUFLLGFBQUwsS0FBdUIsSUFBMUIsRUFBZ0M7QUFDOUIsZ0JBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxnQkFBSyxNQUFMLEdBQWMsSUFBZDtBQUNBLGdCQUFLLGFBQUwsR0FBcUIsY0FBYyxRQUFkLENBQXVCLFFBQXZCLENBQWdDLE1BQXJEO0FBQ0Q7QUFDRixPQVJEOztBQVVBLFdBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLGdCQUEvQixFQUFpRCxVQUFDLGFBQUQsRUFBbUI7QUFDbEUsY0FBSyxLQUFMLEdBQWEsTUFBSyxZQUFsQjtBQUNBLGNBQUssTUFBTCxHQUFjLEtBQWQ7QUFDQSxjQUFLLGFBQUwsR0FBcUIsSUFBckI7QUFDRCxPQUpEO0FBS0Q7OztxQ0FFZ0I7QUFDZixhQUFPLEtBQUssTUFBTCxLQUFnQixLQUFLLGNBQTVCO0FBQ0Q7OztzQ0FFaUI7QUFDaEIsVUFBSSxnQkFBZ0IsS0FBSyxNQUFMLEdBQVksS0FBSyxTQUFyQztBQUNBLFVBQUksa0JBQWtCLEVBQUUsSUFBRSxhQUFKLElBQXFCLEtBQUssZUFBMUIsR0FBNEMsQ0FBbEU7QUFDQSxVQUFJLGdCQUFnQixLQUFLLFNBQUwsQ0FBZSxlQUFmLENBQStCLGVBQS9CLENBQXBCOztBQUVBLG9CQUFjLEtBQWQsQ0FBb0IsQ0FBcEIsR0FBd0IsYUFBeEI7QUFDQSxvQkFBYyxRQUFkLENBQXVCLENBQXZCLEdBQTJCLGVBQTNCO0FBQ0Q7Ozs0QkFFTyxTLEVBQVc7O0FBRWpCLFdBQUssZUFBTCxDQUFxQixTQUFyQjtBQUNBLFdBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsSUFBNEIsS0FBSyxLQUFMLEdBQWEsS0FBSyxTQUE5Qzs7QUFFQSxXQUFLLFFBQUwsQ0FBYyxNQUFkO0FBQ0EsV0FBSyxlQUFMO0FBQ0Q7OztvQ0FFZSxTLEVBQVc7QUFDekIsVUFBRyxLQUFLLE1BQUwsSUFBZSxDQUFsQixFQUFxQjtBQUFFO0FBQVM7O0FBR2hDLFVBQUcsS0FBSyxnQkFBTCxDQUFzQixhQUF0QixJQUF1QyxJQUF2QyxJQUErQyxLQUFLLE1BQXZELEVBQStEO0FBQzdELFlBQUksUUFBUSxZQUFZLEtBQUssZ0JBQUwsQ0FBc0IsYUFBOUM7QUFDQSxhQUFLLGdCQUFMLENBQXNCLFVBQXRCLElBQW9DLEtBQXBDO0FBQ0EsYUFBSyxnQkFBTCxDQUFzQixhQUF0QixHQUFzQyxTQUF0QztBQUNBLGFBQUssVUFBTDtBQUNELE9BTEQsTUFLTyxJQUFHLEtBQUssTUFBUixFQUFnQjtBQUNyQixhQUFLLGdCQUFMLENBQXNCLFVBQXRCLEdBQW1DLENBQW5DO0FBQ0EsYUFBSyxnQkFBTCxDQUFzQixhQUF0QixHQUFzQyxTQUF0QztBQUNBLGFBQUssVUFBTDtBQUNEOztBQUVELFdBQUssZ0JBQUwsQ0FBc0IsYUFBdEIsR0FBc0MsU0FBdEM7QUFDRDs7O2lDQUVZO0FBQ1gsVUFBRyxLQUFLLGFBQUwsS0FBdUIsSUFBdkIsSUFBK0IsS0FBSyxhQUFMLENBQW1CLFFBQW5CLEtBQWdDLEtBQUssUUFBdkUsRUFBaUY7QUFBRTtBQUFTO0FBQzVGLFVBQUcsS0FBSyxnQkFBTCxDQUFzQixVQUF0QixHQUFtQyxLQUFLLFdBQTNDLEVBQXdEO0FBQUU7QUFBUztBQUNuRSxXQUFLLGFBQUw7O0FBRUEsV0FBSyxhQUFMLENBQW1CLE1BQW5CLElBQTZCLEtBQUssY0FBTCxFQUE3Qjs7QUFFQSxVQUFHLEtBQUssYUFBTCxDQUFtQixNQUFuQixJQUE2QixDQUFoQyxFQUFtQztBQUNqQyxhQUFLLE1BQUwsQ0FBWSxhQUFaLENBQTBCLEtBQUssYUFBTCxDQUFtQixVQUE3Qzs7QUFFQSxhQUFLLGFBQUwsQ0FBbUIsTUFBbkIsR0FBNEIsS0FBNUI7QUFDQSxhQUFLLGFBQUwsQ0FBbUIsT0FBbkIsR0FBNkIsSUFBN0I7QUFDQSxhQUFLLGFBQUwsR0FBcUIsSUFBckI7QUFDRDs7QUFFRCxXQUFLLGdCQUFMLENBQXNCLFVBQXRCLEdBQW1DLENBQW5DO0FBQ0EsV0FBSyxnQkFBTCxDQUFzQixhQUF0QixHQUFzQyxJQUF0QztBQUNEOzs7b0NBRWU7QUFDZCxjQUFRLEdBQVIsQ0FBWSxLQUFLLE9BQWpCO0FBQ0EsVUFBSSxZQUFZLEtBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsQ0FBdEIsQ0FBaEI7QUFDQSxnQkFBVSxRQUFWLENBQW1CLENBQW5CLEVBQXNCLFFBQXRCLENBQStCLENBQS9CLEdBQW1DLEtBQUssRUFBTCxHQUFVLEVBQTdDO0FBRUQ7Ozs7OztrQkExTGtCLE07Ozs7Ozs7Ozs7O0FDRnJCOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0lBRXFCLE07QUFFbkIsa0JBQVksSUFBWixFQUFrQjtBQUFBOztBQUNoQixTQUFLLElBQUwsR0FBWSxLQUFLLElBQWpCO0FBQ0EsU0FBSyxFQUFMLEdBQVUsS0FBSyxFQUFmO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLEtBQUssU0FBdEI7QUFDQSxTQUFLLFlBQUwsR0FBb0IsS0FBSyxZQUF6QjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQUssS0FBbEI7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7QUFDQSxTQUFLLFFBQUwsR0FBZ0Isd0JBQWEsQ0FBYixHQUFpQixLQUFLLFNBQXRDOztBQUVBLFNBQUssY0FBTDtBQUNBLFNBQUssU0FBTDtBQUNEOzs7O2dDQUVXO0FBQ1YsV0FBSyxJQUFMLEdBQVksbUJBQVM7QUFDbkIsbUJBQVcsS0FBSyxTQURHO0FBRW5CLHNCQUFjLEtBQUssWUFGQTtBQUduQixnQkFBUTtBQUhXLE9BQVQsQ0FBWjs7QUFNQSxXQUFLLEtBQUwsQ0FBVyxHQUFYLENBQWUsS0FBSyxJQUFMLENBQVUsT0FBekI7QUFDRDs7O2dDQUVXLEssRUFBTztBQUFBOztBQUNqQixVQUFHLEtBQUssS0FBTCxJQUFjLEtBQUssVUFBdEIsRUFBa0M7QUFDaEMsYUFBSyxLQUFMLElBQWMsS0FBSyxVQUFuQjs7QUFFQSxZQUFJLFNBQVMscUJBQVc7QUFDdEIsY0FBSSxLQUFLLFFBQUwsRUFEa0I7QUFFdEIsb0JBQVUsS0FBSyxFQUZPO0FBR3RCLHFCQUFXLEtBQUssU0FITTtBQUl0QixxQkFBVyxLQUpXO0FBS3RCLHdCQUFjLEtBQUssWUFMRztBQU10QixrQkFBUTtBQU5jLFNBQVgsQ0FBYjs7QUFTQSxhQUFLLE9BQUwsQ0FBYSxJQUFiLENBQWtCLE1BQWxCO0FBQ0EsWUFBSSxnQkFBZ0IsSUFBSSxNQUFNLFdBQVYsQ0FBc0IsQ0FBdEIsRUFBd0IsQ0FBeEIsRUFBMEIsQ0FBMUIsQ0FBcEI7QUFDQSxZQUFJLFNBQVMsSUFBSSxNQUFNLFlBQVYsRUFBYjtBQUNBLGVBQU8sSUFBUCxDQUFZLHdCQUFaLEVBQXNDLFVBQUMsR0FBRCxFQUFTO0FBQzdDLGNBQUksUUFBSixDQUFhLENBQWIsR0FBaUIsQ0FBQyxDQUFsQjtBQUNBLGlCQUFPLE9BQVAsQ0FBZSxHQUFmLENBQW1CLEdBQW5CO0FBQ0EsZ0JBQUssS0FBTCxDQUFXLEdBQVgsQ0FBZSxPQUFPLE9BQXRCO0FBQ0QsU0FKRDtBQUtEO0FBQ0Y7OztrQ0FFYSxNLEVBQVE7QUFDcEIsVUFBSSxJQUFJLElBQVI7QUFDQSxhQUFPLElBQVAsQ0FBWSxNQUFaLEVBQW9CLE9BQXBCLENBQTRCLFVBQUMsR0FBRCxFQUFTO0FBQ25DLFVBQUUsR0FBRixLQUFVLE9BQU8sR0FBUCxDQUFWO0FBQ0QsT0FGRDtBQUdEOzs7NEJBRU8sUyxFQUFXO0FBQUE7O0FBQ2pCLFVBQUcsS0FBSyxJQUFMLEtBQWMsSUFBakIsRUFBdUI7QUFDckIsYUFBSyxJQUFMLENBQVUsT0FBVjtBQUNBLFlBQUcsS0FBSyxJQUFMLENBQVUsT0FBYixFQUFzQjtBQUFFLGVBQUssV0FBTDtBQUFxQjtBQUM5Qzs7QUFFRCxXQUFLLE9BQUwsQ0FBYSxPQUFiLENBQXFCLFVBQUMsTUFBRCxFQUFTLEtBQVQsRUFBbUI7QUFDdEMsZUFBTyxPQUFQLENBQWUsU0FBZjtBQUNBLFlBQUcsT0FBTyxPQUFWLEVBQW1CO0FBQUUsaUJBQUssYUFBTCxDQUFtQixNQUFuQixFQUEyQixLQUEzQjtBQUFvQztBQUMxRCxPQUhEO0FBSUQ7OztrQ0FFYSxNLEVBQVEsSyxFQUFPO0FBQzNCLFdBQUssS0FBTCxDQUFXLE1BQVgsQ0FBa0IsT0FBTyxPQUF6Qjs7QUFFQSxXQUFLLFlBQUwsQ0FBa0IsTUFBbEIsQ0FBeUIsS0FBSyxpQkFBTCxDQUF1QixPQUFPLFFBQVAsQ0FBZ0IsRUFBdkMsQ0FBekIsRUFBcUUsQ0FBckU7O0FBRUEsV0FBSyxPQUFMLENBQWEsTUFBYixDQUFvQixLQUFwQixFQUEyQixDQUEzQjtBQUNEOzs7a0NBRWE7QUFDWixXQUFLLEtBQUwsQ0FBVyxNQUFYLENBQWtCLEtBQUssSUFBTCxDQUFVLE9BQTVCO0FBQ0EsV0FBSyxZQUFMLENBQWtCLE1BQWxCLENBQXlCLEtBQUssaUJBQUwsQ0FBdUIsS0FBSyxJQUFMLENBQVUsUUFBVixDQUFtQixFQUExQyxDQUF6QixFQUF3RSxDQUF4RTtBQUNBLFdBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxXQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0Q7OztzQ0FFaUIsRSxFQUFJO0FBQ3BCLFVBQUksUUFBUSxDQUFDLENBQWI7O0FBRUEsV0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLEtBQUssWUFBTCxDQUFrQixNQUF0QyxFQUE4QyxHQUE5QyxFQUFtRDtBQUNqRCxZQUFHLEtBQUssWUFBTCxDQUFrQixDQUFsQixFQUFxQixFQUFyQixLQUE0QixFQUEvQixFQUFtQztBQUNqQyxrQkFBUSxDQUFSO0FBQ0Q7QUFDRjs7QUFFRCxhQUFPLEtBQVA7QUFDRDs7OzRCQUVPO0FBQUE7O0FBQ04sV0FBSyxPQUFMLENBQWEsT0FBYixDQUFxQixrQkFBVTtBQUM3QixlQUFLLEtBQUwsQ0FBVyxNQUFYLENBQWtCLE9BQU8sT0FBekI7QUFDRCxPQUZEOztBQUlBLFVBQUcsS0FBSyxJQUFSLEVBQWM7QUFDWixhQUFLLEtBQUwsQ0FBVyxNQUFYLENBQWtCLEtBQUssSUFBTCxDQUFVLE9BQTVCO0FBQ0EsYUFBSyxJQUFMLEdBQVksSUFBWjtBQUNEOztBQUVELFdBQUssU0FBTDtBQUNBLFdBQUssY0FBTDtBQUNEOzs7cUNBR2dCO0FBQ2YsV0FBSyxPQUFMLEdBQWUsRUFBZjtBQUNBLFdBQUssS0FBTCxHQUFhLENBQWI7QUFDQSxXQUFLLEtBQUwsR0FBYSxJQUFiO0FBQ0EsV0FBSyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0EsV0FBSyxJQUFMLEdBQVksS0FBWjtBQUNEOzs7Ozs7a0JBcEhrQixNOzs7Ozs7OztRQ1VMLGUsR0FBQSxlO0FBZGhCLFNBQVMsWUFBVCxDQUFzQixRQUF0QixFQUFnQyxNQUFoQyxFQUF1QztBQUNyQyxNQUFJLElBQUksT0FBTyxVQUFmO0FBQ0EsTUFBSSxJQUFJLE9BQU8sV0FBZjtBQUNBLFdBQVMsT0FBVCxDQUFpQixDQUFqQixFQUFtQixDQUFuQjtBQUNBLFNBQU8sTUFBUCxHQUFnQixJQUFFLENBQWxCO0FBQ0EsU0FBTyxzQkFBUDtBQUNEOztBQUVELFNBQVMsYUFBVCxDQUF1QixRQUF2QixFQUFpQyxNQUFqQyxFQUF5QztBQUN2QyxTQUFPLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDLFlBQU07QUFDdEMsaUJBQWEsUUFBYixFQUF1QixNQUF2QjtBQUNELEdBRkQ7QUFHRDs7QUFFTSxTQUFTLGVBQVQsR0FBMkI7QUFDaEMsTUFBSSxRQUFRLElBQUksTUFBTSxLQUFWLEVBQVo7QUFDQSxNQUFJLFNBQVMsSUFBSSxNQUFNLGlCQUFWLENBQTRCLEVBQTVCLEVBQWdDLE9BQU8sVUFBUCxHQUFvQixPQUFPLFdBQTNELEVBQXdFLEdBQXhFLEVBQTZFLElBQTdFLENBQWI7QUFDQSxNQUFJLFdBQVcsSUFBSSxNQUFNLGFBQVYsRUFBZjs7QUFFQSxXQUFTLE9BQVQsQ0FBaUIsT0FBTyxVQUF4QixFQUFvQyxPQUFPLFdBQTNDO0FBQ0EsV0FBUyxJQUFULENBQWMsV0FBZCxDQUEwQixTQUFTLFVBQW5DOztBQUVBLGdCQUFjLFFBQWQsRUFBd0IsTUFBeEI7O0FBRUEsU0FBTyxFQUFFLFlBQUYsRUFBUyxjQUFULEVBQWlCLGtCQUFqQixFQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHsgc2V0dXBTY3JlZW5WaWV3IH0gZnJvbSAnLi9tb2R1bGVzL3ZpZXcnO1xyXG5pbXBvcnQgR2FtZUVuZ2luZSBmcm9tICcuL21vZHVsZXMvZ2FtZS1lbmdpbmUnO1xyXG5pbXBvcnQgR2FtZVZpZXcgZnJvbSAnLi9tb2R1bGVzL2dhbWUtdmlldyc7XHJcblxyXG4vLyBHbG9iYWxzXHJcbmxldCBnbG9iYWxzO1xyXG5cclxubGV0IGdhbWVFbmdpbmUsIGdhbWVWaWV3O1xyXG5cclxuLy8gVUkgRWxlbWVudHNcclxubGV0IHNjb3JlVGV4dCwgbW9uZXlUZXh0LCBmcHNUZXh0O1xyXG5cclxuLy8gU2hhcGVzXHJcbnZhciBjdWJlO1xyXG5cclxuLy8gcGVyZm9ybWFuY2VcclxudmFyIHJlbmRlcmVyU3RhdHMgPSBuZXcgVEhSRUV4LlJlbmRlcmVyU3RhdHMoKTtcclxucmVuZGVyZXJTdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xyXG5yZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnXHJcbnJlbmRlcmVyU3RhdHMuZG9tRWxlbWVudC5zdHlsZS5ib3R0b20gPSAnMHB4J1xyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCByZW5kZXJlclN0YXRzLmRvbUVsZW1lbnQgKVxyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICBsZXQgeyBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciB9ID0gc2V0dXBTY3JlZW5WaWV3KCk7XHJcbiAgZ2xvYmFscyA9IHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcclxuXHJcbiAgZ2FtZUVuZ2luZSA9IG5ldyBHYW1lRW5naW5lKGdsb2JhbHMpO1xyXG4gIGdhbWVWaWV3ID0gbmV3IEdhbWVWaWV3KGdsb2JhbHMsIGdhbWVFbmdpbmUpO1xyXG5cclxuICBzY29yZVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmUnKTtcclxuICBtb25leVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9uZXknKTtcclxuICBmcHNUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZwcycpO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBsZXQgaW5kZXggPSBnYW1lVmlldy5nZXRDdXJyZW50UGFuZWxJbmRleCgpO1xyXG4gICAgaWYoaW5kZXggPj0gMCkge1xyXG4gICAgICBnYW1lRW5naW5lLm15UGxheWVyLnNwYXduTWluaW9uKGluZGV4KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKCkgPT4ge1xyXG4gICAgZ2FtZUVuZ2luZS5jb21wdXRlci5zcGF3bk1pbmlvbigzKTtcclxuICB9KTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbn1cclxuXHJcbmxldCBsYXN0VGltZVN0YW1wID0gMDtcclxuZnVuY3Rpb24gcmVuZGVyKHRpbWVzdGFtcCkge1xyXG4gIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIGxhc3RUaW1lU3RhbXA7XHJcbiAgZGVsdGEgPSBkZWx0YSAvIDEwMDA7XHJcbiAgbGFzdFRpbWVTdGFtcCA9IHRpbWVzdGFtcDtcclxuICBsZXQgZnBzID0gTWF0aC5yb3VuZCgxIC8gZGVsdGEpO1xyXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xyXG4gIGdhbWVWaWV3LnJlbmRlckxvb3AodGltZXN0YW1wKTtcclxuXHJcbiAgdXBkYXRlVUkoZnBzKTtcclxuXHJcbiAgZ2xvYmFscy5yZW5kZXJlci5yZW5kZXIoZ2xvYmFscy5zY2VuZSwgZ2xvYmFscy5jYW1lcmEpO1xyXG4gIHJlbmRlcmVyU3RhdHMudXBkYXRlKGdsb2JhbHMucmVuZGVyZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVVSShmcHMpIHtcclxuICBzY29yZVRleHQudGV4dENvbnRlbnQgPSBnYW1lRW5naW5lLm15UGxheWVyLnNjb3JlO1xyXG4gIG1vbmV5VGV4dC50ZXh0Q29udGVudCA9IGdhbWVFbmdpbmUubXlQbGF5ZXIubW9uZXk7XHJcbiAgZnBzVGV4dC50ZXh0Q29udGVudCA9IGZwcztcclxufVxyXG5cclxuaW5pdCgpO1xyXG4iLCJBcnJheS5wcm90b3R5cGUudW5pcXVlID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIHNlbGYpIHsgXHJcbiAgICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFJIHtcclxuXHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kZXRlcm1pbmVBSUZ1bmN0aW9uKGFyZ3MucGVyc29uYWxpdHkpO1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcclxuICAgIHRoaXMuc3Bhd25JbnRlcnZhbCA9IDUwMDtcclxuICAgIHRoaXMubGFzdFNwYXduID0gMDtcclxuICAgIHRoaXMucG9wcHVsYXRpb25MaW1pdCA9IDE7XHJcbiAgfVxyXG5cclxuICBjYW5TcGF3bih0aW1lc3RhbXApIHtcclxuICAgIHJldHVybiB0aW1lc3RhbXAgLSB0aGlzLmxhc3RTcGF3biA+IHRoaXMuc3Bhd25JbnRlcnZhbDtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AodGltZXN0YW1wLCBvcHBvbmVudHMpIHtcclxuICAgIGlmKCF0aGlzLmNhblNwYXduKHRpbWVzdGFtcCkpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IHNwYXduSW5kZXggPSB0aGlzLkFJRnVuY3Rpb24ob3Bwb25lbnRzLCB0aGlzLnBsYXllci5taW5pb25zKTtcclxuXHJcbiAgICBpZihzcGF3bkluZGV4ID49IDAgJiYgdGhpcy5wbGF5ZXIubWluaW9ucy5sZW5ndGggPCB0aGlzLnBvcHB1bGF0aW9uTGltaXQpIHtcclxuICAgICAgdGhpcy5wbGF5ZXIuc3Bhd25NaW5pb24oc3Bhd25JbmRleCk7XHJcbiAgICAgIHRoaXMubGFzdFNwYXduID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmFuZG9tQUkob3Bwb25lbnRzKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFN1YkRpdik7XHJcbiAgfVxyXG5cclxuICBuaWNrc0FJKG9wcG9uZW50cywgZnJpZW5kbGllcykge1xyXG4gICAgbGV0IHN0YXJ0aW5nUG9zID0gdGhpcy5wbGF5ZXIuc3Bhd25Qb3M7XHJcblxyXG4gICAgbGV0IGZyaWVuZGx5TWFwID0gZnJpZW5kbGllcy5tYXAobSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcm93OiBtLnN0YXJ0aW5nWixcclxuICAgICAgICBkaXN0YW5jZTogbS5nZXRQb3NpdGlvbigpLnggLSBzdGFydGluZ1Bvc1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgb3Bwb25lbnRNYXAgPSBvcHBvbmVudHMubWFwKG0gPT4ge1xyXG5cclxuICAgICAgbGV0IGRpc3RhbmNlID0gc3RhcnRpbmdQb3MgLSBtLmdldFBvc2l0aW9uKCkueDtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICByb3c6IG0uc3RhcnRpbmdaLFxyXG4gICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJvd0FycmF5ID0gW107XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZ3JpZFN1YkRpdjsgaSsrKSB7IHJvd0FycmF5LnB1c2goaSk7IH1cclxuXHJcbiAgICBsZXQgZGVjaXNpb24gPSB7XHJcbiAgICAgIGhhc0ZyaWVuZGxpZXM6IFtdLFxyXG4gICAgICBjbG9zZXN0SW5kZXg6IC0xLFxyXG4gICAgICBjbG9zZXN0VmFsOiA5OTk5OSxcclxuICAgICAgZGlzdGFuY2VUaWVzOiBbXVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgZnJpZW5kbHlNYXAuZm9yRWFjaCgodmFsLCBpZHgpID0+IHtcclxuICAgICAgZGVjaXNpb24uaGFzRnJpZW5kbGllcy5wdXNoKHZhbC5yb3cpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG9wcG9uZW50TWFwLmZvckVhY2goKHZhbCwgaWR4KSA9PiB7XHJcbiAgICAgIGlmKHZhbC5kaXN0YW5jZSA8IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcclxuICAgICAgICBkZWNpc2lvbi5jbG9zZXN0SW5kZXggPSB2YWwucm93O1xyXG4gICAgICAgIGRlY2lzaW9uLmNsb3Nlc3RWYWwgPSB2YWwuZGlzdGFuY2U7XHJcblxyXG4gICAgICAgIGlmKGRlY2lzaW9uLmRpc3RhbmNlVGllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMubGVuZ3RoID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZih2YWwuZGlzdGFuY2UgPT09IGRlY2lzaW9uLmNsb3Nlc3RWYWwpIHtcclxuICAgICAgICBkZWNpc2lvbi5kaXN0YW5jZVRpZXMucHVzaCh2YWwucm93KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVjaXNpb24uZGlzdGFuY2VUaWVzLnB1c2goZGVjaXNpb24uY2xvc2VzdEluZGV4KTtcclxuICAgIGRlY2lzaW9uLmhhc0ZyaWVuZGxpZXMgPSBkZWNpc2lvbi5oYXNGcmllbmRsaWVzLnVuaXF1ZSgpO1xyXG5cclxuICAgIGxldCBmdWxsSWR4QXJyID0gcm93QXJyYXkuc2xpY2UoMCk7XHJcblxyXG4gICAgZGVjaXNpb24uZ2FwcyA9IGZ1bGxJZHhBcnIuZmlsdGVyKHggPT4ge1xyXG4gICAgICByZXR1cm4gZGVjaXNpb24uaGFzRnJpZW5kbGllcy5pbmRleE9mKHgpIDwgMDtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL2lmKGZyaWVuZGxpZXMubGVuZ3RoID4gMykge1xyXG4gICAgICAvL2ZyaWVuZGxpZXNbMl0udmlld09iai5wb3NpdGlvbi56ICs9IDE7XHJcbiAgICAvL31cclxuXHJcblxyXG4gICAgbGV0IGFycmF5VG9Vc2U7XHJcbiAgICBpZihkZWNpc2lvbi5jbG9zZXN0VmFsIDwgZ3JpZFdpZHRoLzIpIHtcclxuICAgICAgYXJyYXlUb1VzZSA9IGRlY2lzaW9uLmRpc3RhbmNlVGllcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFycmF5VG9Vc2UgPSBkZWNpc2lvbi5nYXBzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGRlY2lzaW9uKTtcclxuXHJcbiAgICBsZXQgYXJySWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXlUb1VzZS5sZW5ndGgpO1xyXG4gICAgcmV0dXJuIGFycmF5VG9Vc2VbYXJySWR4XTtcclxuXHJcbiAgfVxyXG5cclxuICBkZWZlbnNpdmVBSShvcHBvbmVudHMpIHtcclxuICAgIGxldCBtYXAgPSB7fTtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBncmlkU3ViRGl2OyBpKyspIHtcclxuICAgICAgbWFwW2ldID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBvcHBvbmVudHMuZm9yRWFjaCgoZW5lbXkpID0+IHtcclxuICAgICAgbWFwW2VuZW15LnN0YXJ0aW5nWl0tLTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucGxheWVyLm1pbmlvbnMuZm9yRWFjaCgobWluaW9uKSA9PiB7XHJcbiAgICAgIG1hcFttaW5pb24uc3RhcnRpbmdaXSsrXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgc3Bhd25JbmRleCA9IC0xO1xyXG4gICAgbGV0IHNwYXduVmFsdWUgPSAxMDAwMDA7XHJcbiAgICBPYmplY3QudmFsdWVzKG1hcCkuZm9yRWFjaCgodmFsLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZih2YWwgPCBzcGF3blZhbHVlKSB7XHJcbiAgICAgICAgc3Bhd25WYWx1ZSA9IHZhbDtcclxuICAgICAgICBzcGF3bkluZGV4ID0gaW5kZXhcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNwYXduSW5kZXg7XHJcbiAgfVxyXG5cclxuICBkZXRlcm1pbmVBSUZ1bmN0aW9uKHBlcnNvbmFsaXR5KSB7XHJcbiAgICBpZihwZXJzb25hbGl0eSkge1xyXG4gICAgICB0aGlzLkFJRnVuY3Rpb24gPSB0aGlzW3BlcnNvbmFsaXR5XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuQUlGdW5jdGlvbiA9IHRoaXNbXCJyYW5kb21BSVwiXTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZ3JpZFdpZHRoLCBncmlkTGVuZ3RoLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcclxuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcclxuICAgIHRoaXMucGxheWVySWQgPSB0aGlzLnBsYXllci5pZDtcclxuXHJcbiAgICB0aGlzLmJhc2VXaWR0aCA9IGdyaWRXaWR0aDtcclxuICAgIHRoaXMuYmFzZUhlaWdodCA9IDIwO1xyXG4gICAgdGhpcy5iYXNlRGVwdGggPSAxMDtcclxuXHJcbiAgICB0aGlzLm1heEhlYWx0aCA9IDUwMDA7XHJcbiAgICB0aGlzLmhlYWx0aCA9IHRoaXMubWF4SGVhbHRoO1xyXG5cclxuICAgIHRoaXMuaGl0Qm94QnVmZmVyID0gMjtcclxuXHJcbiAgICB0aGlzLmtpbGxSZXdhcmQgPSB7XHJcbiAgICAgIG1vbmV5OiA1NTAsXHJcbiAgICAgIHNjb3JlOiAxMDAwXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0aWFsaXplVmlldyh0aGlzLmRpcmVjdGlvbik7XHJcbiAgICB0aGlzLnJlZ2lzdGVyQ29sbGlzaW9uKCk7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplVmlldyhkaXJlY3Rpb24sIGhpdEJveE9wYWNpdHk9LjI1KSB7XHJcbiAgICB0aGlzLnZpZXdPYmogPSBuZXcgVEhSRUUuR3JvdXAoKTtcclxuXHJcbiAgICBsZXQgc2hhcGVHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcclxuICAgICAgdGhpcy5iYXNlRGVwdGgsXHJcbiAgICAgIHRoaXMuYmFzZUhlaWdodCxcclxuICAgICAgdGhpcy5iYXNlV2lkdGhcclxuICAgICk7XHJcblxyXG4gICAgbGV0IHNoYXBlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiAweDAwODgwMCwgc3BlY3VsYXI6IDB4NTU1NTU1LCBzaGluaW5lc3M6IDMwIH0pO1xyXG4gICAgbGV0IHNoYXBlTWVzaCA9IG5ldyBUSFJFRS5NZXNoKHNoYXBlR2VvbWV0cnksIHNoYXBlTWF0ZXJpYWwpO1xyXG5cclxuICAgIGxldCBoaXRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeShcclxuICAgICAgdGhpcy5iYXNlRGVwdGggKyB0aGlzLmhpdEJveEJ1ZmZlcixcclxuICAgICAgdGhpcy5iYXNlSGVpZ2h0ICsgdGhpcy5oaXRCb3hCdWZmZXIsXHJcbiAgICAgIHRoaXMuYmFzZVdpZHRoICsgdGhpcy5oaXRCb3hCdWZmZXIgXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBoaXRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZmZmLCB0cmFuc3BhcmVudDogdHJ1ZSwgb3BhY2l0eTogaGl0Qm94T3BhY2l0eSB9KTtcclxuICAgIGxldCBoaXRNZXNoID0gbmV3IFRIUkVFLk1lc2goaGl0R2VvbWV0cnksIGhpdE1hdGVyaWFsKTtcclxuXHJcbiAgICB0aGlzLmhlYWx0aEJhciA9IHRoaXMuaW5pdGlhbGl6ZUhlYWx0aEJhcigpO1xyXG4gICAgdGhpcy5oaXRCb3ggPSBoaXRNZXNoO1xyXG5cclxuICAgIHRoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcclxuICAgIHRoaXMudmlld09iai5hZGQoaGl0TWVzaCk7XHJcbiAgICB0aGlzLnZpZXdPYmouYWRkKHRoaXMuaGVhbHRoQmFyKTtcclxuXHJcbiAgICB0aGlzLnZpZXdPYmoucG9zaXRpb24ueCA9ICgoLWdyaWRXaWR0aC8yKSAtICh0aGlzLmJhc2VEZXB0aCAvIDIpKSAqIHRoaXMuZGlyZWN0aW9uO1xyXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnkgPSB0aGlzLmJhc2VIZWlnaHQvMjtcclxuXHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xyXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xyXG4gICAgdGhpcy5faGVhbHRoQmFyTGVuZ3RoID0gZ3JpZFdpZHRoIC8gMTA7XHJcbiAgICB0aGlzLl9oZWFsdGhCYXJXaWR0aCA9IGdyaWRXaWR0aCAvIDE1MDtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyTGVuZ3RoLCB0aGlzLl9oZWFsdGhCYXJXaWR0aCwgdGhpcy5faGVhbHRoQmFyV2lkdGgpO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XHJcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XHJcblxyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyTGVuZ3RoICogMC45OSwgdGhpcy5faGVhbHRoQmFyV2lkdGggKiAwLjksIHRoaXMuX2hlYWx0aEJhcldpZHRoICogMC45KTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcclxuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xyXG5cclxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcclxuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xyXG5cclxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSB0aGlzLmJhc2VIZWlnaHQgKyA1O1xyXG5cclxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcclxuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XHJcbiAgICBsZXQgaGVhbHRoQmFyT2Zmc2V0ID0gLSgxLWhlYWx0aFBlcmNlbnQpICogdGhpcy5faGVhbHRoQmFyTGVuZ3RoIC8gMjtcclxuICAgIGxldCBmdWxsSGVhbHRoQmFyID0gdGhpcy5oZWFsdGhCYXIuZ2V0T2JqZWN0QnlOYW1lKCdGdWxsSGVhbHRoQmFyJyk7XHJcblxyXG4gICAgZnVsbEhlYWx0aEJhci5zY2FsZS54ID0gaGVhbHRoUGVyY2VudDtcclxuICAgIGZ1bGxIZWFsdGhCYXIucG9zaXRpb24ueCA9IGhlYWx0aEJhck9mZnNldDtcclxuICB9XHJcblxyXG4gIHJlZ2lzdGVyQ29sbGlzaW9uKCkge1xyXG4gICAgdGhpcy5oaXRCb3guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KClcclxuICAgIGxldCBib3gzID0gdGhpcy5oaXRCb3guZ2VvbWV0cnkuYm91bmRpbmdCb3guY2xvbmUoKTtcclxuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgVEhSRUV4LkNvbGxpZGVyQm94Myh0aGlzLmhpdEJveCwgYm94Myk7XHJcblxyXG4gICAgY29uc29sZS5sb2codGhpcy5jb2xsaWRlckxpc3QpO1xyXG4gICAgdGhpcy5jb2xsaWRlckxpc3QucHVzaCh0aGlzLmNvbGxpZGVyKTtcclxuICB9XHJcblxyXG4gIHJ1bkxvb3AoKSB7XHJcbiAgICB0aGlzLmNvbGxpZGVyLnVwZGF0ZSgpO1xyXG4gICAgdGhpcy51cGRhdGVIZWFsdGhCYXIoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHhQb3NpdGl2ZSA9IDE7XHJcbmV4cG9ydCBjb25zdCB4TmVnYXRpdmUgPSAtMTtcclxuZXhwb3J0IGNvbnN0IGdyaWRXaWR0aCA9IDY0O1xyXG5leHBvcnQgY29uc3QgZ3JpZFN1YkRpdiA9IDE2O1xyXG4iLCJpbXBvcnQgUGxheWVyIGZyb20gJy4vcGxheWVyJztcclxuaW1wb3J0IEFJIGZyb20gJy4vYWktcGxheWVyJztcclxuaW1wb3J0IHsgYWN0aXZhdGVNZW51IH0gZnJvbSAnLi9tZW51LXNjcmVlbic7XHJcbmltcG9ydCB7IHhQb3NpdGl2ZSwgeE5lZ2F0aXZlLCBncmlkU3ViRGl2IH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUVuZ2luZSB7XHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XHJcbiAgICB0aGlzLmNhbWVyYSA9IGFyZ3MuY2FtZXJhO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJTeXN0ZW0gPSBuZXcgVEhSRUV4LkNvbGxpZGVyU3lzdGVtKCk7XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IFtdO1xyXG5cclxuICAgIHRoaXMucGxheWVySWQgPSAwO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZVBsYXllcnMoKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVQbGF5ZXJzKCkge1xyXG4gICAgdGhpcy5teVBsYXllciA9IG5ldyBQbGF5ZXIoe1xyXG4gICAgICB0eXBlOiAnaHVtYW4nLFxyXG4gICAgICBkaXJlY3Rpb246IHhQb3NpdGl2ZSxcclxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcclxuICAgICAgc2NlbmU6dGhpcy5zY2VuZSxcclxuICAgICAgaWQ6IHRoaXMucGxheWVySWQrK1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb21wdXRlciA9IG5ldyBQbGF5ZXIoe1xyXG4gICAgICB0eXBlOiAnY29tcHV0ZXInLFxyXG4gICAgICBkaXJlY3Rpb246IHhOZWdhdGl2ZSxcclxuICAgICAgY29sbGlkZXJMaXN0OiB0aGlzLmNvbGxpZGVyTGlzdCxcclxuICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXHJcbiAgICAgIGlkOiB0aGlzLnBsYXllcklkKytcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuQUkgPSBuZXcgQUkoe1xyXG4gICAgICBwbGF5ZXI6IHRoaXMuY29tcHV0ZXIsXHJcbiAgICAgIHBlcnNvbmFsaXR5OiBcIm5pY2tzQUlcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXJBSSA9IG5ldyBBSSh7XHJcbiAgICAgIHBsYXllcjogdGhpcy5teVBsYXllcixcclxuICAgICAgcGVyc29uYWxpdHk6IFwiZGVmZW5zaXZlQUlcIlxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHRoaXMuc3RhdGUucGxheWVycyA9IFsgdGhpcy5teVBsYXllciwgdGhpcy5jb21wdXRlciBdO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZUdhbWVPdmVyKCkge1xyXG4gICAgYWN0aXZhdGVNZW51KHtcclxuICAgICAgd2lubmVyOiB0aGlzLndpbm5lclxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJlc3RhcnQoKSB7XHJcbiAgICB3aGlsZSh0aGlzLmNvbGxpZGVyTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuY29sbGlkZXJMaXN0LnBvcCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0ZS5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcclxuICAgICAgcGxheWVyLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZ2FtZU92ZXIgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGdhbWVMb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5nYW1lT3Zlcikge1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5BSSkge1xyXG4gICAgICB0aGlzLkFJLnJ1bkxvb3AodGltZXN0YW1wLCB0aGlzLm15UGxheWVyLm1pbmlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMucGxheWVyQUkpIHtcclxuICAgICAgdGhpcy5wbGF5ZXJBSS5ydW5Mb29wKHRpbWVzdGFtcCwgdGhpcy5jb21wdXRlci5taW5pb25zKTtcclxuICAgIH1cclxuICAgIHRoaXMuc3RhdGUucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7XHJcbiAgICAgIHBsYXllci5ydW5Mb29wKHRpbWVzdGFtcCk7XHJcbiAgICAgIGlmKHBsYXllci5sb3N0ICYmICF0aGlzLmdhbWVPdmVyKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy53aW5uZXIgPSBwbGF5ZXIuaWQgIT09IHRoaXMubXlQbGF5ZXIuaWQ7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplR2FtZU92ZXIoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmNvbGxpZGVyU3lzdGVtLmNvbXB1dGVBbmROb3RpZnkodGhpcy5jb2xsaWRlckxpc3QpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRMZW5ndGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IGJpbmRCdXR0b25zIH0gZnJvbSAnLi9tZW51LXNjcmVlbic7XHJcblxyXG5jb25zdCBwbGFuZVRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpLmxvYWQoXCJ0ZXh0dXJlcy9zdG9uZS5qcGdcIik7XHJcbnBsYW5lVGV4dHVyZS5yZXBlYXQuc2V0KDEwLDEwKTtcclxucGxhbmVUZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XHJcbnBsYW5lVGV4dHVyZS53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVWaWV3IHtcclxuICBjb25zdHJ1Y3RvcihnbG9iYWxzLCBnYW1lRW5naW5lKSB7XHJcbiAgICB0aGlzLnNjZW5lID0gZ2xvYmFscy5zY2VuZTtcclxuICAgIHRoaXMuY2FtZXJhID0gZ2xvYmFscy5jYW1lcmE7XHJcbiAgICB0aGlzLnJlbmRlcmVyID0gZ2xvYmFscy5yZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLmdhbWVFbmdpbmUgPSBnYW1lRW5naW5lO1xyXG5cclxuICAgIHRoaXMuc2V0dXBHcmlkKCk7XHJcbiAgICB0aGlzLnNldHVwTGlnaHQoKTtcclxuXHJcbiAgICB0aGlzLm1vdXNlID0geyB4OiAtMTAwMDAsIHk6IDAgfTtcclxuXHJcbiAgICBsZXQgcG9zaXRpb25TY2FsZSA9IGdyaWRXaWR0aCAvIDI7XHJcblxyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IDIgKiBwb3NpdGlvblNjYWxlO1xyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueSA9IDEuNSAqIHBvc2l0aW9uU2NhbGU7XHJcbiAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5zY2VuZS5wb3NpdGlvbik7XHJcblxyXG5cclxuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG4gICAgdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnNldHVwTW91c2VFdmVudCgpO1xyXG4gICAgYmluZEJ1dHRvbnModGhpcy5nYW1lRW5naW5lKTtcclxuICB9XHJcblxyXG4gIHNldHVwTGlnaHQoKSB7XHJcbiAgICBsZXQgbGlnaHRBbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDY2NjY2NiwgMyk7XHJcbiAgICBsZXQgbGlnaHRTb3VyY2UgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDg4ODg4OCk7XHJcblxyXG4gICAgbGlnaHRTb3VyY2UucG9zaXRpb24uc2V0KDMsIDMsIDMpO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0QW1iaWVudCk7XHJcbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodFNvdXJjZSk7XHJcbiAgfVxyXG5cclxuICBzZXR1cEdyaWQoKSB7XHJcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShncmlkV2lkdGgsIGdyaWRXaWR0aCk7XHJcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe21hcDogcGxhbmVUZXh0dXJlfSk7XHJcbiAgICBsZXQgdGV4dHVyZWRTdXJmYWNlID0gbmV3IFRIUkVFLk1lc2godGV4dHVyZWRTdXJmYWNlR2VvbWV0cnksIHRleHR1cmVkU3VyZmFjZU1hdGVyaWFsKTtcclxuICAgIHRleHR1cmVkU3VyZmFjZS5yb3RhdGlvbi54ID0gLTAuNSAqIE1hdGguUEk7XHJcbiAgICB0ZXh0dXJlZFN1cmZhY2UucG9zaXRpb24ueSA9IC0wLjM7XHJcbiAgICB0aGlzLnNjZW5lLmFkZCh0ZXh0dXJlZFN1cmZhY2UpO1xyXG5cclxuICAgIGxldCBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoZ3JpZFdpZHRoLCBncmlkU3ViRGl2KTtcclxuICAgIHRoaXMuc2NlbmUuYWRkKGdyaWQpO1xyXG5cclxuICAgIHRoaXMuZ3JpZFBhbmVscyA9IHt9O1xyXG5cclxuICAgIGxldCBwYW5lbExlbmd0aCA9IGdyaWRXaWR0aCAvIGdyaWRTdWJEaXY7XHJcbiAgICBsZXQgelBvcyA9ICgoZ3JpZFdpZHRoIC8gMikgLSBwYW5lbExlbmd0aCAvIDIpICogLTE7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBsZXQgcGxhbmVHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGdyaWRXaWR0aCwgcGFuZWxMZW5ndGgpO1xyXG4gICAgICBsZXQgcGxhbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7dHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDB9KTtcclxuICAgICAgbGV0IHBsYW5lID0gbmV3IFRIUkVFLk1lc2gocGxhbmVHZW9tZXRyeSwgcGxhbmVNYXRlcmlhbCk7XHJcbiAgICAgIHBsYW5lLnJvdGF0aW9uLnggPSAtMC41ICogTWF0aC5QSTtcclxuICAgICAgcGxhbmUucG9zaXRpb24ueiA9IHpQb3M7XHJcbiAgICAgIHBsYW5lLnBvc2l0aW9uLnkgPSAtMC4yO1xyXG4gICAgICB0aGlzLnNjZW5lLmFkZChwbGFuZSk7XHJcbiAgICAgIHRoaXMuZ3JpZFBhbmVsc1tpXSA9IHBsYW5lO1xyXG5cclxuICAgICAgelBvcyArPSBwYW5lbExlbmd0aDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrR3JpZEludGVyc2VjdGlvbnMoKSB7XHJcbiAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMubW91c2UsIHRoaXMuY2FtZXJhKTtcclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcbiAgICBsZXQgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMocGxhbmVzKTtcclxuXHJcbiAgICBwbGFuZXMuZm9yRWFjaCgocGFuZWwpID0+IHtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KDB4NjY2NjY2KTtcclxuICAgICAgcGFuZWwubWF0ZXJpYWwub3BhY2l0eSA9IDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZihpbnRlcnNlY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGV0IG9iaiA9IGludGVyc2VjdHNbMF0ub2JqZWN0O1xyXG5cclxuICAgICAgb2JqLm1hdGVyaWFsLmNvbG9yLnNldEhleCgweGZmMDAwMCk7ICAgICAgXHJcbiAgICAgIG9iai5tYXRlcmlhbC5vcGFjaXR5ID0gLjU7XHJcbiAgICAgIHRoaXMuY3VycmVudEhvdmVyZWRQYW5lbCA9IG9iajtcclxuICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwpe1xyXG4gICAgICB0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q3VycmVudFBhbmVsSW5kZXgoKSB7XHJcbiAgICBpZighdGhpcy5jdXJyZW50SG92ZXJlZFBhbmVsKSB7IHJldHVybjsgfVxyXG5cclxuICAgIGxldCBwbGFuZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuZ3JpZFBhbmVscyk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGdyaWRTdWJEaXY7IGkrKykge1xyXG4gICAgICBpZih0aGlzLmN1cnJlbnRIb3ZlcmVkUGFuZWwgPT09IHBsYW5lc1tpXSkge1xyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0dXBNb3VzZUV2ZW50KCkge1xyXG4gICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcclxuICAgICAgbW91c2UueCA9ICggZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoICkgKiAyIC0gMTtcclxuICAgICAgbW91c2UueSA9IC0gKCBldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0ICkgKiAyICsgMTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9vcCh0aW1lc3RhbXApIHtcclxuICAgIHRoaXMuY2hlY2tHcmlkSW50ZXJzZWN0aW9ucygpO1xyXG4gICAgdGhpcy5nYW1lRW5naW5lLmdhbWVMb29wKHRpbWVzdGFtcCk7XHJcbiAgfVxyXG59IFxyXG4iLCJsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcclxubGV0IHN0YXJ0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydE1vZGFsJyk7XHJcbmxldCByZXN0YXJ0U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXJ0TW9kYWwnKTtcclxuZnVuY3Rpb24gYWN0aXZhdGVTdGFydFNjcmVlbigpIHtcclxuICBzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxuICByZXN0YXJ0U2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tdmlzaWJsZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3RpdmF0ZVJlc3RhcnRTY3JlZW4od2lubmVyKSB7XHJcbiAgc3RhcnRTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XHJcbiAgcmVzdGFydFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRlTWVudShhcmdzKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLXZpc2libGUnKTtcclxuXHJcbiAgaWYoYXJncy53aW5uZXIgIT09IG51bGwpIHtcclxuICAgIGFjdGl2YXRlUmVzdGFydFNjcmVlbihhcmdzLndpbm5lcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFjdGl2YXRlU3RhcnRTY3JlZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZU1lbnUoYXJncykge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS12aXNpYmxlJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kQnV0dG9ucyhnYW1lRW5naW5lKSB7XHJcbiAgc3RhcnRTZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cclxuICB9KTtcclxuXHJcbiAgcmVzdGFydFNlY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBnYW1lRW5naW5lLnJlc3RhcnQoKTtcclxuICAgIGNsb3NlTWVudSgpO1xyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCB7IGdyaWRXaWR0aCwgZ3JpZExlbmd0aCwgZ3JpZFN1YkRpdiB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pbmlvbiB7XHJcbiAgY29uc3RydWN0b3IoYXJncykge1xyXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBhcmdzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMuY29sbGlkZXJMaXN0ID0gYXJncy5jb2xsaWRlckxpc3Q7XHJcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcclxuICAgIHRoaXMucGxheWVySWQgPSBhcmdzLnBsYXllcklkO1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBhcmdzLnBsYXllcjtcclxuICAgIHRoaXMuc3RhcnRpbmdaID0gYXJncy5zdGFydGluZ1o7XHJcbiAgICB0aGlzLnNjZW5lID0gYXJncy5zY2VuZTtcclxuXHJcbiAgICB0aGlzLm1heEhlYWx0aCA9IDEwO1xyXG4gICAgdGhpcy5oZWFsdGggPSB0aGlzLm1heEhlYWx0aDtcclxuICAgIHRoaXMuYXR0YWNrU3RyZW5ndGggPSAzO1xyXG4gICAgdGhpcy5hdHRhY2tTcGVlZCA9IDQwMDtcclxuXHJcbiAgICB0aGlzLmRlZmF1bHRTcGVlZCA9IDAuMztcclxuICAgIHRoaXMuc3BlZWQgPSB0aGlzLmRlZmF1bHRTcGVlZDtcclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcyA9IHtcclxuICAgICAgbGFzdFRpbWVTdGFtcDogbnVsbCxcclxuICAgICAgYXR0YWNrVGltZTogMFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmtpbGxSZXdhcmQgPSB7XHJcbiAgICAgIG1vbmV5OiAxNSxcclxuICAgICAgc2NvcmU6IDEwXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kZXN0cm95ID0gZmFsc2U7XHJcbiAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZVZpZXcodGhpcy5zdGFydGluZ1opO1xyXG4gICAgdGhpcy5yZWdpc3RlckNvbGxpc2lvbigpO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZVZpZXcoc3RhcnRpbmdaLCBoaXRCb3hPcGFjaXR5PS4yNSkge1xyXG4gICAgdGhpcy52aWV3T2JqID0gbmV3IFRIUkVFLkdyb3VwKCk7ICAgIFxyXG5cclxuICAgIGxldCBoaXRHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgzLDgsMyk7XHJcbiAgICBsZXQgaGl0TWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiAweDAwZmZmZiwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IGhpdEJveE9wYWNpdHkgfSk7XHJcbiAgICBsZXQgaGl0TWVzaCA9IG5ldyBUSFJFRS5NZXNoKGhpdEdlb21ldHJ5LCBoaXRNYXRlcmlhbCk7XHJcblxyXG4gICAgdGhpcy5oZWFsdGhCYXIgPSB0aGlzLmluaXRpYWxpemVIZWFsdGhCYXIoKTtcclxuXHJcbiAgICAvL3RoaXMudmlld09iai5hZGQoc2hhcGVNZXNoKTtcclxuICAgIC8vdGhpcy52aWV3T2JqLmFkZChoaXRNZXNoKTtcclxuICAgIC8vdGhpcy52aWV3T2JqLmFkZCh0aGlzLmhlYWx0aEJhcik7XHJcblxyXG4gICAgaGl0TWVzaC5hZGQodGhpcy5oZWFsdGhCYXIpO1xyXG4gICAgdGhpcy52aWV3T2JqID0gaGl0TWVzaDtcclxuICAgIHRoaXMuaGl0Qm94ID0gdGhpcy52aWV3T2JqO1xyXG5cclxuICAgIGxldCB6ID0gKChzdGFydGluZ1ogKiAoZ3JpZFdpZHRoIC8gZ3JpZFN1YkRpdikpIC0gKGdyaWRXaWR0aCAvIDIpKSArIChncmlkV2lkdGggLyBncmlkU3ViRGl2IC8gMik7XHJcbiAgICBsZXQgeCA9IChncmlkV2lkdGggLyAyKSAqIC10aGlzLmRpcmVjdGlvbjtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi56ID0gejtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi54ID0geDtcclxuICAgIHRoaXMudmlld09iai5wb3NpdGlvbi55ID0gNDtcclxuXHJcbiAgICB0aGlzLmhpdEJveC51c2VyRGF0YS5vYmplY3QgPSB0aGlzO1xyXG4gICAgdGhpcy5oaXRCb3gudXNlckRhdGEucGxheWVyID0gdGhpcy5wbGF5ZXI7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnZpZXdPYmoucG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplSGVhbHRoQmFyKCkge1xyXG4gICAgdGhpcy5faGVhbHRoQmFyV2lkdGggPSAyO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSh0aGlzLl9oZWFsdGhCYXJXaWR0aCwgMC4zLCAwLjMpO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XHJcbiAgICBsZXQgZnVsbEhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChmdWxsSGVhbHRoQmFyR2VvbWV0cnksIGZ1bGxIZWFsdGhCYXJNYXRlcmlhbCk7XHJcbiAgICBmdWxsSGVhbHRoQmFyTWVzaC5uYW1lID0gXCJGdWxsSGVhbHRoQmFyXCI7XHJcblxyXG4gICAgbGV0IGVtcHR5SGVhbHRoQmFyR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkodGhpcy5faGVhbHRoQmFyV2lkdGgsIDAuMiwgMC4yKTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHhmZjAwMDB9KTtcclxuICAgIGxldCBlbXB0eUhlYWx0aEJhck1lc2ggPSBuZXcgVEhSRUUuTWVzaChlbXB0eUhlYWx0aEJhckdlb21ldHJ5LCBlbXB0eUhlYWx0aEJhck1hdGVyaWFsKTtcclxuICAgIGVtcHR5SGVhbHRoQmFyTWVzaC5uYW1lID0gXCJFbXB0eUhlYWx0aEJhclwiO1xyXG5cclxuICAgIGxldCBoZWFsdGhCYXJHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpO1xyXG4gICAgaGVhbHRoQmFyR3JvdXAuYWRkKGZ1bGxIZWFsdGhCYXJNZXNoKTtcclxuICAgIGhlYWx0aEJhckdyb3VwLmFkZChlbXB0eUhlYWx0aEJhck1lc2gpO1xyXG5cclxuICAgIGhlYWx0aEJhckdyb3VwLnBvc2l0aW9uLnkgPSA0O1xyXG5cclxuICAgIHJldHVybiBoZWFsdGhCYXJHcm91cDtcclxuICB9XHJcblxyXG4gIGlzT2JqZWN0TG9hZGVkKG9iaikge1xyXG4gICAgcmV0dXJuIChvYmoucG9zaXRpb24ueCA9PT0gMCAmJiBvYmoucG9zaXRpb24ueSA9PT0gMCAmJiBvYmoucG9zaXRpb24ueiA9PT0gMCk7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlckNvbGxpc2lvbigpIHtcclxuICAgIHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpXHJcbiAgICBsZXQgYm94MyA9IHRoaXMuaGl0Qm94Lmdlb21ldHJ5LmJvdW5kaW5nQm94LmNsb25lKCk7XHJcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IFRIUkVFeC5Db2xsaWRlckJveDModGhpcy5oaXRCb3gsIGJveDMpO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnB1c2godGhpcy5jb2xsaWRlcik7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0RW50ZXInLCAob3RoZXJDb2xsaWRlcikgPT4ge1xyXG4gICAgICBpZihvdGhlckNvbGxpZGVyLm9iamVjdDNkLnVzZXJEYXRhLnBsYXllci5pZCA9PT0gdGhpcy5wbGF5ZXJJZCkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgIHRoaXMuc3BlZWQgPSAwO1xyXG4gICAgICB0aGlzLmF0dGFjayA9IHRydWU7XHJcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEub2JqZWN0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjb250YWN0U3RheScsIChvdGhlckNvbGxpZGVyKSA9PiB7XHJcbiAgICAgIGlmKG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEucGxheWVyLmlkID09PSB0aGlzLnBsYXllcklkKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgaWYodGhpcy5jdXJyZW50VGFyZ2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5hdHRhY2sgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG90aGVyQ29sbGlkZXIub2JqZWN0M2QudXNlckRhdGEub2JqZWN0O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmNvbGxpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRhY3RSZW1vdmVkJywgKG90aGVyQ29sbGlkZXIpID0+IHtcclxuICAgICAgdGhpcy5zcGVlZCA9IHRoaXMuZGVmYXVsdFNwZWVkO1xyXG4gICAgICB0aGlzLmF0dGFjayA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRBdHRhY2tWYWx1ZSgpIHtcclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogdGhpcy5hdHRhY2tTdHJlbmd0aDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUhlYWx0aEJhcigpIHtcclxuICAgIGxldCBoZWFsdGhQZXJjZW50ID0gdGhpcy5oZWFsdGgvdGhpcy5tYXhIZWFsdGg7XHJcbiAgICBsZXQgaGVhbHRoQmFyT2Zmc2V0ID0gLSgxLWhlYWx0aFBlcmNlbnQpICogdGhpcy5faGVhbHRoQmFyV2lkdGggLyAyO1xyXG4gICAgbGV0IGZ1bGxIZWFsdGhCYXIgPSB0aGlzLmhlYWx0aEJhci5nZXRPYmplY3RCeU5hbWUoJ0Z1bGxIZWFsdGhCYXInKTtcclxuXHJcbiAgICBmdWxsSGVhbHRoQmFyLnNjYWxlLnggPSBoZWFsdGhQZXJjZW50O1xyXG4gICAgZnVsbEhlYWx0aEJhci5wb3NpdGlvbi54ID0gaGVhbHRoQmFyT2Zmc2V0O1xyXG4gIH1cclxuXHJcbiAgcnVuTG9vcCh0aW1lc3RhbXApIHtcclxuXHJcbiAgICB0aGlzLmF0dGFja1Byb2NlZHVyZSh0aW1lc3RhbXApO1xyXG4gICAgdGhpcy52aWV3T2JqLnBvc2l0aW9uLnggKz0gKHRoaXMuc3BlZWQgKiB0aGlzLmRpcmVjdGlvbik7XHJcblxyXG4gICAgdGhpcy5jb2xsaWRlci51cGRhdGUoKTtcclxuICAgIHRoaXMudXBkYXRlSGVhbHRoQmFyKCk7XHJcbiAgfVxyXG5cclxuICBhdHRhY2tQcm9jZWR1cmUodGltZXN0YW1wKSB7XHJcbiAgICBpZih0aGlzLmhlYWx0aCA8PSAwKSB7IHJldHVybjsgfVxyXG5cclxuXHJcbiAgICBpZih0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCAhPSBudWxsICYmIHRoaXMuYXR0YWNrKSB7XHJcbiAgICAgIGxldCBkZWx0YSA9IHRpbWVzdGFtcCAtIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wO1xyXG4gICAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSArPSBkZWx0YTtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICAgIHRoaXMuYXR0YWNrTG9vcCgpO1xyXG4gICAgfSBlbHNlIGlmKHRoaXMuYXR0YWNrKSB7XHJcbiAgICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5hdHRhY2tUaW1lID0gMDtcclxuICAgICAgdGhpcy5hdHRhY2tQcm9wZXJ0aWVzLmxhc3RUaW1lU3RhbXAgPSB0aW1lc3RhbXA7XHJcbiAgICAgIHRoaXMuYXR0YWNrTG9vcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXR0YWNrUHJvcGVydGllcy5sYXN0VGltZVN0YW1wID0gdGltZXN0YW1wO1xyXG4gIH1cclxuXHJcbiAgYXR0YWNrTG9vcCgpIHtcclxuICAgIGlmKHRoaXMuY3VycmVudFRhcmdldCA9PT0gbnVsbCB8fCB0aGlzLmN1cnJlbnRUYXJnZXQucGxheWVySWQgPT09IHRoaXMucGxheWVySWQpIHsgcmV0dXJuOyB9XHJcbiAgICBpZih0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA8IHRoaXMuYXR0YWNrU3BlZWQpIHsgcmV0dXJuOyB9XHJcbiAgICB0aGlzLmFuaW1hdGVBdHRhY2soKTtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIC09IHRoaXMuZ2V0QXR0YWNrVmFsdWUoKTtcclxuXHJcbiAgICBpZih0aGlzLmN1cnJlbnRUYXJnZXQuaGVhbHRoIDw9IDApIHtcclxuICAgICAgdGhpcy5wbGF5ZXIucHJvY2Vzc1Jld2FyZCh0aGlzLmN1cnJlbnRUYXJnZXQua2lsbFJld2FyZCk7XHJcblxyXG4gICAgICB0aGlzLmN1cnJlbnRUYXJnZXQuYXR0YWNrID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuY3VycmVudFRhcmdldC5kZXN0cm95ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMuYXR0YWNrVGltZSA9IDA7XHJcbiAgICB0aGlzLmF0dGFja1Byb3BlcnRpZXMubGFzdFRpbWVTdGFtcCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBhbmltYXRlQXR0YWNrKCkge1xyXG4gICAgY29uc29sZS5sb2codGhpcy52aWV3T2JqKTtcclxuICAgIGxldCBtb2RlbE1lc2ggPSB0aGlzLnZpZXdPYmouY2hpbGRyZW5bMV07XHJcbiAgICBtb2RlbE1lc2guY2hpbGRyZW5bMV0ucm90YXRpb24ueiA9IE1hdGguUEkgKiAuNTtcclxuXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBNaW5pb24gZnJvbSAnLi9taW5pb24nO1xyXG5pbXBvcnQgQmFzZSBmcm9tICcuL2Jhc2UnO1xyXG5pbXBvcnQgeyBncmlkV2lkdGgsIGdyaWRTdWJEaXYgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihhcmdzKSB7XHJcbiAgICB0aGlzLnR5cGUgPSBhcmdzLnR5cGU7XHJcbiAgICB0aGlzLmlkID0gYXJncy5pZDtcclxuICAgIHRoaXMuZGlyZWN0aW9uID0gYXJncy5kaXJlY3Rpb247XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdCA9IGFyZ3MuY29sbGlkZXJMaXN0O1xyXG4gICAgdGhpcy5zY2VuZSA9IGFyZ3Muc2NlbmU7XHJcbiAgICB0aGlzLm1pbmlvbklkID0gMDtcclxuICAgIHRoaXMuc3Bhd25Qb3MgPSAtZ3JpZFdpZHRoIC8gMiAqIHRoaXMuZGlyZWN0aW9uO1xyXG5cclxuICAgIHRoaXMuc2V0dXBHYW1lU3RhdGUoKTtcclxuICAgIHRoaXMuc3Bhd25CYXNlKCk7XHJcbiAgfVxyXG5cclxuICBzcGF3bkJhc2UoKSB7XHJcbiAgICB0aGlzLmJhc2UgPSBuZXcgQmFzZSh7XHJcbiAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgIHBsYXllcjogdGhpc1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zY2VuZS5hZGQodGhpcy5iYXNlLnZpZXdPYmopO1xyXG4gIH1cclxuXHJcbiAgc3Bhd25NaW5pb24oaW5kZXgpIHtcclxuICAgIGlmKHRoaXMubW9uZXkgPj0gdGhpcy5taW5pb25Db3N0KSB7XHJcbiAgICAgIHRoaXMubW9uZXkgLT0gdGhpcy5taW5pb25Db3N0O1xyXG5cclxuICAgICAgbGV0IG1pbmlvbiA9IG5ldyBNaW5pb24oe1xyXG4gICAgICAgIGlkOiB0aGlzLm1pbmlvbklkKyssXHJcbiAgICAgICAgcGxheWVySWQ6IHRoaXMuaWQsXHJcbiAgICAgICAgZGlyZWN0aW9uOiB0aGlzLmRpcmVjdGlvbixcclxuICAgICAgICBzdGFydGluZ1o6IGluZGV4LFxyXG4gICAgICAgIGNvbGxpZGVyTGlzdDogdGhpcy5jb2xsaWRlckxpc3QsXHJcbiAgICAgICAgcGxheWVyOiB0aGlzXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5taW5pb25zLnB1c2gobWluaW9uKTtcclxuICAgICAgbGV0IHNoYXBlR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMiwyLDIpO1xyXG4gICAgICBsZXQgbG9hZGVyID0gbmV3IFRIUkVFLk9iamVjdExvYWRlcigpO1xyXG4gICAgICBsb2FkZXIubG9hZCgnLi4vZ2VvbWV0cnkvbW9kZWwuanNvbicsIChvYmopID0+IHtcclxuICAgICAgICBvYmoucG9zaXRpb24ueSA9IC00O1xyXG4gICAgICAgIG1pbmlvbi52aWV3T2JqLmFkZChvYmopO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKG1pbmlvbi52aWV3T2JqKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm9jZXNzUmV3YXJkKHJld2FyZCkge1xyXG4gICAgbGV0IHQgPSB0aGlzO1xyXG4gICAgT2JqZWN0LmtleXMocmV3YXJkKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgdFtrZXldICs9IHJld2FyZFtrZXldO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBydW5Mb29wKHRpbWVzdGFtcCkge1xyXG4gICAgaWYodGhpcy5iYXNlICE9PSBudWxsKSB7IFxyXG4gICAgICB0aGlzLmJhc2UucnVuTG9vcCgpO1xyXG4gICAgICBpZih0aGlzLmJhc2UuZGVzdHJveSkgeyB0aGlzLmRlc3Ryb3lCYXNlKCk7IH0gXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5taW5pb25zLmZvckVhY2goKG1pbmlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgbWluaW9uLnJ1bkxvb3AodGltZXN0YW1wKTtcclxuICAgICAgaWYobWluaW9uLmRlc3Ryb3kpIHsgdGhpcy5kZXN0cm95TWluaW9uKG1pbmlvbiwgaW5kZXgpOyB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3lNaW5pb24obWluaW9uLCBpbmRleCkge1xyXG4gICAgdGhpcy5zY2VuZS5yZW1vdmUobWluaW9uLnZpZXdPYmopO1xyXG5cclxuICAgIHRoaXMuY29sbGlkZXJMaXN0LnNwbGljZSh0aGlzLmZpbmRDb2xsaWRlckluZGV4KG1pbmlvbi5jb2xsaWRlci5pZCksIDEpO1xyXG5cclxuICAgIHRoaXMubWluaW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveUJhc2UoKSB7XHJcbiAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmJhc2Uudmlld09iaik7XHJcbiAgICB0aGlzLmNvbGxpZGVyTGlzdC5zcGxpY2UodGhpcy5maW5kQ29sbGlkZXJJbmRleCh0aGlzLmJhc2UuY29sbGlkZXIuaWQpLCAxKTtcclxuICAgIHRoaXMuYmFzZSA9IG51bGw7XHJcbiAgICB0aGlzLmxvc3QgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZmluZENvbGxpZGVySW5kZXgoaWQpIHtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb2xsaWRlckxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYodGhpcy5jb2xsaWRlckxpc3RbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgaW5kZXggPSBpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLm1pbmlvbnMuZm9yRWFjaChtaW5pb24gPT4ge1xyXG4gICAgICB0aGlzLnNjZW5lLnJlbW92ZShtaW5pb24udmlld09iaik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZih0aGlzLmJhc2UpIHtcclxuICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5iYXNlLnZpZXdPYmopO1xyXG4gICAgICB0aGlzLmJhc2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3Bhd25CYXNlKCk7XHJcbiAgICB0aGlzLnNldHVwR2FtZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0dXBHYW1lU3RhdGUoKSB7XHJcbiAgICB0aGlzLm1pbmlvbnMgPSBbXTtcclxuICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgdGhpcy5tb25leSA9IDQwMDA7XHJcbiAgICB0aGlzLm1pbmlvbkNvc3QgPSAyMDtcclxuICAgIHRoaXMubG9zdCA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJmdW5jdGlvbiBoYW5kbGVSZXNpemUocmVuZGVyZXIsIGNhbWVyYSl7XHJcbiAgbGV0IHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICBsZXQgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICByZW5kZXJlci5zZXRTaXplKHcsaCk7XHJcbiAgY2FtZXJhLmFzcGVjdCA9IHcvaDtcclxuICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXR1cFJlc2l6aW5nKHJlbmRlcmVyLCBjYW1lcmEpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgaGFuZGxlUmVzaXplKHJlbmRlcmVyLCBjYW1lcmEpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTY3JlZW5WaWV3KCkge1xyXG4gIGxldCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xyXG4gIGxldCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xyXG4gIGxldCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKCk7XHJcblxyXG4gIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcclxuXHJcbiAgc2V0dXBSZXNpemluZyhyZW5kZXJlciwgY2FtZXJhKTtcclxuXHJcbiAgcmV0dXJuIHsgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIgfTtcclxufVxyXG4iXX0=\n"]}